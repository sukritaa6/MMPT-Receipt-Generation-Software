<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5NTVBUIFJlY2VpcHQgU3lzdGVtIHYzMC41IC0gUmVzdG9yZWQ8L3RpdGxlPg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2h0bWwycGRmLmpzLzAuMTAuMS9odG1sMnBkZi5idW5kbGUubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvaHRtbDJjYW52YXMvMS40LjEvaHRtbDJjYW52YXMubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanNwZGYvMi41LjEvanNwZGYudW1kLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzcGRmLWF1dG90YWJsZS8zLjUuMjUvanNwZGYucGx1Z2luLmF1dG90YWJsZS5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDxzdHlsZT4NCg0KICAgICAgICAubW1wdC11bmlmaWVkLWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAyNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAzMHB4IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQgew0KICAgICAgICAgICAgd2lkdGg6IDE2MHB4OyAvKiBGaXhlZCB3aWR0aCBmb3IgcGVyZmVjdCBhbGlnbm1lbnQgKi8NCiAgICAgICAgICAgIGhlaWdodDogNDVweDsgLyogVW5pZmllZCBoZWlnaHQgKi8NCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzLCBib3gtc2hhZG93IDAuMnM7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQ6aG92ZXIgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsNCiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDZweCAxMnB4IHJnYmEoMCwwLDAsMC4xNSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5idG4tYWRtaW4tdW5pZmllZDphY3RpdmUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgIC8qIFRoZSBNYXN0ZXIgSGlkZSBSdWxlICovDQogICAgICAgIC8qIFRoaXMgcnVsZSBzdGF5cyBhY3RpdmUgZXZlbiBpZiB0aGUgdGFibGUgcmUtcmVuZGVycyAqLw0KICAgICAgICAucGVybS1oaWRkZW4gew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgZGlzYWJsZWQgZWxlbWVudHMgZ2V0IHRoZSBncmV5ZWQtb3V0IGxvb2sgKi8NCiAgICAgICAgYnV0dG9uOmRpc2FibGVkLA0KICAgICAgICBpbnB1dDpkaXNhYmxlZCwNCiAgICAgICAgc2VsZWN0OmRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGUwZTAgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjOTk5OTk5ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjY2NjICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBvcGFjaXR5OiAwLjY7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTYXZlIGJ1dHRvbiBzcGVjaWFsIGNvbG9yIHdoZW4gaXQgYmVjb21lcyBhY3RpdmUgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KDQoNCg0KICAgICAgICAvKiBDb250YWluZXIgZm9yIHRoZSAzLWNvbHVtbiB2aWV3ICovDQoNCiAgICAgICAgLyogVXBkYXRlZCBXb3Jrc3BhY2UgdG8gcHJldmVudCBvdmVybGFwcGluZyAqLw0KICAgICAgICAucmVjZWlwdC13b3Jrc3BhY2Ugew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAvKiBMT0NLIHRoZSBoZWlnaHQgaGVyZS4gU2lkZSBwYW5lbHMgd2lsbCBuZXZlciBiZSB0YWxsZXIgdGhhbiB0aGlzICovDQogICAgICAgICAgICBoZWlnaHQ6IDU1MHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnNpZGUtcGFuZWwgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgICAgLyogRm9yY2UgdGhlIHBhbmVsIHRvIG9iZXkgdGhlIHdvcmtzcGFjZSBoZWlnaHQgKi8NCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIC8qIFRoaXMgaGVpZ2h0OiAwIGlzIGEgdHJpY2sgdG8gbWFrZSBmbGV4Ym94IGlnbm9yZSB0aGUgaW1hZ2Uncw0KICAgICAgICBuYXR1cmFsIHNpemUgYW5kIGZvcmNlIGl0IHRvIHN0YXkgd2l0aGluIHRoZSBjb250YWluZXIgKi8NCiAgICAgICAgICAgIGhlaWdodDogMDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIGltZyB7DQogICAgICAgICAgICAgICAgLyogVGhlc2UgbGluZXMgZm9yY2UgdGhlIHNocmluayB3aXRob3V0IGxvc2luZyByYXRpbyAqLw0KICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgICAgIHdpZHRoOiBhdXRvOw0KICAgICAgICAgICAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluOw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICNyZWNlaXB0X2Rpc3BsYXlfYXJlYSB7DQogICAgICAgICAgICBmbGV4OiAwIDAgYXV0bzsNCiAgICAgICAgICAgIHdpZHRoOiA0ODBwdDsNCiAgICAgICAgICAgIC8qIFRoZSByZWNlaXB0IHNldHMgdGhlIGhlaWdodCBmb3IgdGhlIHdob2xlIHJvdyAqLw0KICAgICAgICB9DQoNCiAgICAgICAgLmV2ZW50LXBob3RvIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgfQ0KDQoNCg0KDQoNCiAgICAgICAgLmFjdGlvbi1mb290ZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAyMHB4Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAyMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1wZGYgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2QzMmYyZjsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi13YSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjVkMzY2Ow0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIENvbnNlbnQgU3BlY2lmaWMgU3R5bGVzICovDQogICAgICAgIC5idG4tY29uc2VudC1hY3RpdmUgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDAwMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgb3BhY2l0eTogMTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tY29uc2VudC1kaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOw0KICAgICAgICAgICAgb3BhY2l0eTogMC4zOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgb3JpZ2luYWwgc3R5bGVzIHByZXNlcnZlZCBmcm9tIGQ0MyAqLw0KICAgICAgICAucmVjZWlwdC1wcmV2aWV3LXJvdyB7DQogICAgICAgICAgICBncmlkLWNvbHVtbjogc3BhbiAyOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgcGFkZGluZzogMzBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZTA7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yZWNlaXB0LWNvbnRhaW5lciB7DQogICAgICAgICAgICB3aWR0aDogNDYwcHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAyLjVweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBzZXJpZjsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwOw0KICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5oZWFkZXItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY29sIHsNCiAgICAgICAgICAgIHdpZHRoOiA3MHB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmFkZHJlc3MtY29sIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC50cnVzdC1uYW1lIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNwdDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRydXN0LWRldGFpbHMgew0KICAgICAgICAgICAgZm9udC1zaXplOiA3LjVwdDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjE7DQogICAgICAgIH0NCg0KICAgICAgICAudmFyaWFibGUtcm93IHsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDZwdDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMwMDA7DQogICAgICAgICAgICBwYWRkaW5nOiAzcHQgMDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZGl2aWRlciB7DQogICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgIzAwMDsNCiAgICAgICAgICAgIG1hcmdpbjogNnB0IDA7DQogICAgICAgIH0NCg0KICAgICAgICAuZG9ub3ItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxhYmVsLWNvbCB7DQogICAgICAgICAgICB3aWR0aDogODVwdDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHQgMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5kYXRhLWNvbCB7DQogICAgICAgICAgICBmb250LXNpemU6IDkuNXB0Ow0KICAgICAgICAgICAgcGFkZGluZzogMnB0IDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdHJ1c3Qtc2lnbiB7DQogICAgICAgICAgICBmb250LXNpemU6IDEwcHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTVwdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdGF4LWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiA4cHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMnB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgOnJvb3Qgew0KICAgICAgICAgICAgLS1zYWZmcm9uOiAjRkY5OTMzOw0KICAgICAgICAgICAgLS1saWdodC1zYWZmcm9uOiAjRkZGNUU2Ow0KICAgICAgICAgICAgLS1kZWVwLXNhZmZyb246ICNGRjhDMDA7DQogICAgICAgICAgICAtLXRleHQtZGFyazogIzMzMzsNCiAgICAgICAgfQ0KDQogICAgICAgICogew0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtc2FmZnJvbik7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZGFyayk7DQogICAgICAgIH0NCg0KICAgICAgICAjYXV0aFNjcmVlbiB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMHZ3Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0LXNhZmZyb24pOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICB6LWluZGV4OiA5OTk5Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY2lyY2xlIHsNCiAgICAgICAgICAgIGhlaWdodDogNDBweDsNCiAgICAgICAgICAgIHdpZHRoOiA0MHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMik7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sb2dvLWxhcmdlIHsNCiAgICAgICAgICAgIGhlaWdodDogMTAwcHg7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm1hc3Rlci1oZWFkZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsNCiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjIlIDU2JSAyMiU7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zYWZmcm9uKTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmhlYWRlci1zZWN0aW9uIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjIpOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5oZWFkZXItc2VjdGlvbjpsYXN0LWNoaWxkIHsNCiAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IG5vbmU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLnNtYWxsLWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmlkLWJhZGdlIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkZGQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICMzMzM7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29udGFpbmVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjYWRkOGU2Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBBREQgVEhFIEZJWCBIRVJFICovDQogICAgICAgIC5lbnRyeS1jb250YWluZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwICFpbXBvcnRhbnQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29sdW1uIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBtaW4td2lkdGg6IDMwMHB4Ow0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC5mb3JtLWdyb3VwIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5mb3JtLWdyb3VwIGxhYmVsIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAgICAgY29sb3I6ICMwMDMzNjY7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAuZm9ybS1ncm91cCBpbnB1dCwgLmZvcm0tZ3JvdXAgc2VsZWN0LCAuZm9ybS1ncm91cCB0ZXh0YXJlYSB7DQogICAgICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICAgICAgcGFkZGluZzogNHB4Ow0KICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAuc3RhdHVzLWNoZWNrcyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMjBweDsNCiAgICAgICAgICAgIGdyaWQtY29sdW1uOiBzcGFuIDI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFjdGlvbiB7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgbWluLXdpZHRoOiA4MHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ29uc2VudCBTcGVjaWZpYyBTdHlsZXMgKi8NCiAgICAgICAgLmJ0bi1jb25zZW50LWFjdGl2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBvcGFjaXR5OiAxOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1jb25zZW50LWRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmNjY2MgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjNjY2Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDsNCiAgICAgICAgICAgIG9wYWNpdHk6IDAuNjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tc2F2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmU4YjU3Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi11bmxvY2sgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YzOWMxMjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tbG9jayB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2Y4YzhkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1uYXYgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjBmMDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLXJuIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyMjhiMjI7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAjZmllbGRfc2VhcmNoIHsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMyMjhiMjIgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIEFjdGlvbiBCdXR0b24gUm93IFN0eWxpbmcgKi8NCiAgICAgICAgLmJ0bi1hY3Rpb24sIC5idG4tc2F2ZSwgLmJ0bi1sb2NrLCAuYnRuLXVubG9jayB7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIHdpZHRoICovDQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIGhlaWdodCAqLw0KICAgICAgICAgICAgbWFyZ2luOiA1cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBISUdIIENPTlRSQVNUIFVOTE9DSzogQnJpZ2h0IEdvbGQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fdW5sb2NrOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkQ3MDAgIWltcG9ydGFudDsgLyogR29sZCAqLw0KICAgICAgICAgICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDsgLyogQmxhY2sgdGV4dCBmb3IgY29udHJhc3QgKi8NCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNEQUE1MjA7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTQVZFOiBHcmVlbiB3aGVuIGVuYWJsZWQgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzFlN2UzNDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIExPQ0s6IE9yYW5nZS9SZWQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fbG9jazpub3QoOmRpc2FibGVkKSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmQ3ZTE0ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNkOTZkMTI7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBESVNBQkxFRCBTVEFURTogVW5pdmVyc2FsIGxvb2sgZm9yIGFsbCBidXR0b25zICovDQogICAgICAgIGJ1dHRvbjpkaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogI2EwYTBhMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYyAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgb3BhY2l0eTogMC41Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ2hlY2tib3ggUm93IENvbnRhaW5lciAqLw0KICAgICAgICAjY2hlY2tib3hfcm93IHsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zczsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQWN0aW9uIEJ1dHRvbiBzaXppbmcgKi8NCiAgICAgICAgI2J0bl91bmxvY2ssICNidG5fbG9jaywgI2J0bl9zYXZlIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMTBweDsNCiAgICAgICAgICAgIGhlaWdodDogMzhweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC8qIEJpZyBXYWl0IE1lc3NhZ2UgT3ZlcmxheSAqLw0KICAgICAgICAjbG9hZGluZ092ZXJsYXkgew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgICAgICAgIHRvcDogMDsNCiAgICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC43KTsNCiAgICAgICAgICAgIHotaW5kZXg6IDk5OTk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBwYWRkaW5nLXRvcDogMjAlOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyNHB0Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KLyoNCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgTWFrZXMgcmVzcG9uaXZlIHNpemUgLSBmb3IgUk4sIFJlY29yZCBhbmQgUmVjZWlwdCBOdW1iZXINCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KICAgICAgICAvKiBBREQgVEhJUyBMSU5FIFRPIEZJWCBUSEUgVE9QIFJPVyAmIFJFQ09SRCBOVU1CRVJTICovDQogICAgICAgIGRpdltzdHlsZSo9ImRpc3BsYXk6IGZsZXgiXSB7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXAgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGdhcDogMTBweCAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHk+DQoNCiAgICA8ZGl2IGlkPSJsb2FkaW5nT3ZlcmxheSI+QXNzaWduaW5nIE5ldyBSZWNlaXB0IE51bWJlci4uLiBQbGVhc2UgV2FpdDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibG9hZGluZy1vdmVybGF5IiBzdHlsZT0icG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC45KTsgei1pbmRleDogOTk5OTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGRpc3BsYXk6IG5vbmU7Ij4NCiAgICAgICAgPGRpdiBzdHlsZT0iYm9yZGVyOiA1cHggc29saWQgI2YzZjNmMzsgYm9yZGVyLXRvcDogNXB4IHNvbGlkICMzNDk4ZGI7IGJvcmRlci1yYWRpdXM6IDUwJTsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTsiPjwvZGl2Pg0KICAgICAgICA8cCBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICMzMzM7Ij5QbGVhc2Ugd2FpdCAtIFdvcmtpbmcuLi48L3A+DQogICAgPC9kaXY+DQoNCiAgICA8c3R5bGU+DQogICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7DQogICAgICAgICAgICAwJSB7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIDEwMCUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQoNCiAgICA8ZGl2IGlkPSJhdXRoU2NyZWVuIj4NCiAgICAgICAgPGRpdiBpZD0ibG9nb0NvbnRhaW5lciI+PC9kaXY+DQogICAgICAgIDxoMiBzdHlsZT0iY29sb3I6IHZhcigtLWRlZXAtc2FmZnJvbik7IG1hcmdpbjogNXB4IDA7Ij5NTVBUIFN5c3RlbTwvaDI+DQogICAgICAgIDxwIGlkPSJzdGF0dXNNc2ciPkNvbm5lY3RpbmcgdG8gQ2xvdWQuLi48L3A+DQogICAgICAgIDxwPkRldmljZSBJRDogPHNwYW4gaWQ9ImRpc3BsYXlEZXZpY2VJRCIgY2xhc3M9ImlkLWJhZGdlIj4uLi48L3NwYW4+PC9wPg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibWFpbkFwcENvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KDQoNCiAgICAgICAgPGhlYWRlciBjbGFzcz0ibWFzdGVyLWhlYWRlciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItc2VjdGlvbiI+DQogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW46MDsgZm9udC1zaXplOjE0cHg7Ij5Vc2VycyBPbmxpbmU8L2gzPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImFjdGl2ZVVzZXJMaXN0IiBjbGFzcz0ic21hbGwtaW5mbyI+LS0tPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZ2FwOjE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ibG9nb0hlYWRlckNvbnRhaW5lciI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8aDEgc3R5bGU9Im1hcmdpbjowOyBmb250LXNpemU6MjBweDsiPk15bGFpIE1haGFwZXJpeWF2YSBBbnVzaGFtIFRydXN0PC9oMT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDRweDsgZm9udC1zaXplOiAxMnB4OyBmb250LXdlaWdodDogYm9sZDsgb3BhY2l0eTogMC45OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVjZWlwdCBHZW5lcmF0aW9uIFNvZnR3YXJlIFZlcnNpb246IDxzcGFuIGlkPSJkaXNwbGF5VmVyc2lvbiI+PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGFzaGJvYXJkLWNvbnRhaW5lciI+DQogICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJzdGF0cy10YWJsZSI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsLWluZm8iIHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMnB4IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pkxhc3QgUmVjOiA8c3BhbiBpZD0iZGFzaF9sYXN0X3JlYyI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+QmFuazogPHNwYW4gaWQ9ImRhc2hfYmFua19kYXRlIj4tLS08L3NwYW4+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5MYXRlc3Q6IDxzcGFuIGlkPSJkYXNoX2xhdGVzdF9yZWMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PkV4cDogPHNwYW4gaWQ9ImRhc2hfZXhwZW5zZXMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlJlYWR5OiA8c3BhbiBpZD0iZGFzaF9yZWFkeV9jb3VudCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+Q2FzaDogPHNwYW4gaWQ9ImRhc2hfY2FzaCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8L2hlYWRlcj4NCg0KDQogICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbnRhaW5lciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbnRyeS1jb2x1bW4iPg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyBiYWNrZ3JvdW5kOiAjMWEyMzdlOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBzdHJldGNoOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsgYm94LXNoYWRvdzogaW5zZXQgMCAwIDEwcHggcmdiYSgwLDAsMCwwLjMpOyI+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjMpOyBwYWRkaW5nLWJvdHRvbTogOHB4OyBtYXJnaW4tYm90dG9tOiAxMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IkFMTCIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IEFMTDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjIxLTIyIiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjEtMjI8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyMi0yMyIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDIyLTIzPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjMtMjQiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyMy0yNDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjI0LTI1IiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjQtMjU8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyNS0yNiIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDI1LTI2PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjYtMjciIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyNi0yNzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6ICNGRkVCM0IgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iUlIiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiBSUjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgtMSkiPiYjMTAwOTQ7PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9InJlY19zbGlkZXIiIHN0eWxlPSJmbGV4OiAxOyIgb25pbnB1dD0iY2hlY2tVbnNhdmVkQ2hhbmdlcygoKSA9PiB7IGlmKHZhbGlkYXRlTmF2aWdhdGlvblNlY3VyaXR5KHRoaXMudmFsdWUpKSBuYXZpZ2F0ZURhdGFiYXNlKHRoaXMudmFsdWUpOyB9KSI+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgxKSI+JiMxMDA5NTs8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWxlZnQ6IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI0ZGRUIzQjsgbWFyZ2luLWJvdHRvbTogMnB4OyI+UkVDRUlQVCBOTzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3JlY25vIiBzdHlsZT0id2lkdGg6IDE0MHB4OyBoZWlnaHQ6IDM4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IDkwMDsgZm9udC1zaXplOiAxNnB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlcjogMnB4IHNvbGlkICNGRjk5MzM7IGJhY2tncm91bmQ6ICNmZmY7IGNvbG9yOiAjMDAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IG1hcmdpbi1ib3R0b206IDJweDsiPlJlYzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJlY29yZE51bWJlckRpc3BsYXkiIHJlYWRvbmx5IHN0eWxlPSJ3aWR0aDogNDVweDsgaGVpZ2h0OiAzOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyOiBub25lOyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogI2UwZTBlMDsgY29sb3I6ICMxYTIzN2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Im5ld19yZWNfYnRuIiBjbGFzcz0iYnRuLXJuIiBzdHlsZT0iaGVpZ2h0OiAzOHB4OyBtaW4td2lkdGg6IDUwcHg7IGJhY2tncm91bmQ6ICNmNDQzMzY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IiBvbmNsaWNrPSJnZW5lcmF0ZU5ld1JOKCkiPlJOPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5OYW1lPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX25hbWUiIG9uaW5wdXQ9InZhbGlkYXRlQ29uc2VudCgpIj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QWRkcmVzczwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9hZGRyZXNzIiByb3dzPSI0Ij48L3RleHRhcmVhPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UGluL0NvdW50cjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyBmbGV4OjE7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfcGluY29kZSIgc3R5bGU9IndpZHRoOiA1MCU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfY291bnRyeSIgc3R5bGU9IndpZHRoOiA1MCU7IiB2YWx1ZT0iSU5ESUEiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RW1haWw8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZW1haWwiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5TdGFyPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3N0YXIiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Hb3RocmFtPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX2dvdGhyYW0iPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbHVtbiI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZGF0ZSI+PC9kaXY+DQogICAgICAgICAgICAgICAgDQoNCg0KICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAxMDBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMDAzMzY2OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBwYWRkaW5nLWxlZnQ6IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZWxlcGhvbmUNCiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IHBhZGRpbmctbGVmdDogMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9waG9uZSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJmbGV4OiAxOyBoZWlnaHQ6IDI1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQtY29sb3I6ICNmZmZkZTY7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJidG5fZmV0Y2giIGRpc2FibGVkIG9uY2xpY2s9ImZldGNoRG9ub3JEZXRhaWxzKCkiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiA1NXB4OyBoZWlnaHQ6IDI3cHg7IGZvbnQtc2l6ZTogMTFweDsgY3Vyc29yOiBwb2ludGVyOyBib3JkZXItcmFkaXVzOiAzcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZldGNoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QW1vdW50PC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZmllbGRfYW1vdW50IiBvbmlucHV0PSJ2YWxpZGF0ZUNvbnNlbnQoKSI+PC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPk1vZGU8L2xhYmVsPjxzZWxlY3QgaWQ9ImZpZWxkX21vZGUiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ub3dhcmRzPC9sYWJlbD48c2VsZWN0IGlkPSJmaWVsZF90b3dhcmRzIiBvbmNoYW5nZT0idmFsaWRhdGVDb25zZW50KCkiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5UcmFucy4gUmVmLjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9yZWYiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Db21tZW50czwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9jb21tZW50cyIgcm93cz0iMiI+PC90ZXh0YXJlYT48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+UEFOPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3BhbiI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjaGVja2JveF9yb3ciIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmUwOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY2FuY2VsIj4gQ2FuY2VsDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByaW50ZWQiPiBQcmludGVkDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByYXNhZGFtIj4gUHJhc2FkYW0NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY29ycHVzIj4gQ29ycHVzIFNpZ25lZA0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjogc3BhbiAyOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6IDEwcHg7IG1hcmdpbi10b3A6IDE1cHg7IHBhZGRpbmctdG9wOiAxNXB4OyBib3JkZXItdG9wOiAycHggc29saWQgIzY2NjsiPg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyI+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fc2F2ZSIgY2xhc3M9ImJ0bi1zYXZlIiBvbmNsaWNrPSJzYXZlUmVjb3JkKCkiIGRpc2FibGVkPlNhdmU8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9jb25zZW50IiBjbGFzcz0iYnRuLWFjdGlvbiBidG4tY29uc2VudC1kaXNhYmxlZCIgZGlzYWJsZWQgb25jbGljaz0iY29uc2VudEFjdGlvbigpIj5Db25zZW50PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fdW5sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0idG9nZ2xlTG9jayhmYWxzZSkiPlVubG9jazwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0iY29uZmlybUxvY2soKSIgZGlzYWJsZWQ+TG9jazwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5TdW1tYXJ5IiBvbmNsaWNrPSJzaG93RG9uYXRpb25TdW1tYXJ5KCkiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1sZWZ0OiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgU3VtbWFyeQ0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJhbmstc3luYy1idG4iIG9uY2xpY2s9InVwZGF0ZUJhbmtTdGF0ZW1lbnRzKHdpbmRvdy5BQ0NFU1NfVE9LRU4pIiBzdHlsZT0iYmFja2dyb3VuZDojMjdhZTYwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMHB4OyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo0cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXdlaWdodDpib2xkOyI+QmFuayBVcGRhdGU8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1hY3Rpb24iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMTdhMmI4OyBjb2xvcjogd2hpdGU7IiBvbmNsaWNrPSJsb2NhdGlvbi5yZWxvYWQoKSI+UmVmcmVzaDwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tYWRtaW4tYWNjZXNzIiBjbGFzcz0iYnRuLWFjdGlvbiIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMxN2EyYjg7IGNvbG9yOiB3aGl0ZTsiIG9uY2xpY2s9InRvZ2dsZUFkbWluVGFibGUoKSI+QWRtaW48L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tZGV2b3RlZS1hY2Nlc3MiIGNsYXNzPSJidG4tYWN0aW9uIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzE3YTJiODsgY29sb3I6IHdoaXRlOyIgb25jbGljaz0id2luZG93Lm9wZW4oJ2h0dHBzOi8vbW1wdGRldm90ZWVzLm5ldGxpZnkuYXBwJywgJ19ibGFuaycpIj5EZXZvdGVlPC9idXR0b24+DQoNCg0KICAgICAgICAgICAgICAgIDxicj48YnI+DQoNCg0KDQoNCg0KDQogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleC1ncm93OiAxOyI+PC9kaXY+DQoNCg0KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfc2VhcmNoIiBwbGFjZWhvbGRlcj0iU2VhcmNoLi4uIj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJzZWFyY2hCdG4iIGNsYXNzPSJidG4tcm4iIG9uY2xpY2s9InBlcmZvcm1TZWFyY2goKSI+U2VhcmNoPC9idXR0b24+DQoNCg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6IDExcHg7IGNvbG9yOiAjNTU1OyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogI2ZmZjsgcGFkZGluZzogNXB4OyBib3JkZXI6IDFweCBkYXNoZWQgI2NjYzsiPg0KICAgICAgICAgICAgICAgICogU2VhcmNoIExvZ2ljOiBSZXZlcnNlIHNlYXJjaC4gTm8gUHJlZml4PUZ1bGwsIE0tPVBob25lLCBOLT1OYW1lLCBULT1UcmFucyBSZWYsIFAtPVBBTi4gTm90IGZvdW5kIHJlc2V0cyB0byBsYXRlc3QgcmVjb3JkLg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9InJlY2VpcHQtcHJldmlldy1yb3ciPg0KDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWNlaXB0LXdvcmtzcGFjZSI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2lkZS1wYW5lbCIgaWQ9ImxlZnQtZXZlbnRzIj4NCiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9ImV2ZW50MS5qcGciIGNsYXNzPSJldmVudC1waG90byIgYWx0PSJSZWNlbnQgRXZlbnQiPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgPGRpdiBpZD0icmVjZWlwdF9kaXNwbGF5X2FyZWEiPjwvZGl2Pg0KDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2lkZS1wYW5lbCIgaWQ9InJpZ2h0LWV2ZW50cyI+DQogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJldmVudDIuanBnIiBjbGFzcz0iZXZlbnQtcGhvdG8iIGFsdD0iUmVjZW50IEV2ZW50Ij4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQoNCiAgICAgICAgPC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1mb290ZXIiIHN0eWxlPSJncmlkLWNvbHVtbjogc3BhbiAyOyI+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tcGRmIiBvbmNsaWNrPSJkb3dubG9hZFJlY2VpcHRQREYoKSI+RG93bmxvYWQgUERGPC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4td2EiIG9uY2xpY2s9InNlbmRXaGF0c0FwcCgpIj5XaGF0c0FwcCBSZWNlaXB0PC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KDQoNCiAgICAgICAgPGRpdiBpZD0ic2VjdXJpdHlQb3J0YWwiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IHBvc2l0aW9uOmZpeGVkOyB0b3A6MTAlOyBsZWZ0OjEwJTsgd2lkdGg6ODAlOyBoZWlnaHQ6ODAlOyBiYWNrZ3JvdW5kOndoaXRlOyBib3JkZXI6MnB4IHNvbGlkICMzMzM7IHotaW5kZXg6OTk5OTsgb3ZlcmZsb3cteTphdXRvOyBwYWRkaW5nOjIwcHg7IGJveC1zaGFkb3c6IDBweCAwcHggMjBweCByZ2JhKDAsMCwwLDAuNSk7Ij4NCiAgICAgICAgICAgIDxoMz5Vc2VyIEFjY2VzcyBDb250cm9sIExpc3Q8L2gzPg0KICAgICAgICAgICAgPHA+VG9nZ2xlIGFjY2VzcyBmb3IgZmVhdHVyZXMuICJZIiA9IFZpc2libGUsICJOIiA9IEhpZGRlbi48L3A+DQogICAgICAgICAgICA8dGFibGUgaWQ9InBlcm1UYWJsZSIgYm9yZGVyPSIxIiBzdHlsZT0id2lkdGg6MTAwJTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyI+DQogICAgICAgICAgICAgICAgPHRoZWFkPjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZWVlOyI+PHRoPkZlYXR1cmUvT2JqZWN0PC90aD48dGg+QWNjZXNzIChZL04pPC90aD48L3RyPjwvdGhlYWQ+DQogICAgICAgICAgICAgICAgPHRib2R5IGlkPSJwZXJtQm9keSI+PC90Ym9keT4NCiAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICA8YnI+DQogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvd25sb2FkU2V0dGluZ3NGaWxlKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOmdyZWVuOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMHB4OyI+R2VuZXJhdGUgU2V0dGluZ3MgRmlsZTwvYnV0dG9uPg0KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VjdXJpdHlQb3J0YWwnKS5zdHlsZS5kaXNwbGF5PSdub25lJyI+Q2xvc2U8L2J1dHRvbj4NCiAgICAgICAgPC9kaXY+DQoNCg0KDQoNCiAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KDQoNCiAgICA8ZGl2IGlkPSJhZG1pbi1wYW5lbC1jb250YWluZXIiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IG1hcmdpbi10b3A6MjBweDsgbWF4LXdpZHRoOiA4MDBweDsiPg0KICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOiAjMDAzMzY2OyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206IDEwcHg7Ij5BZG1pbmlzdHJhdGl2ZSBDb250cm9sIFBhbmVsPC9oMz4NCiAgICAgICAgPHRhYmxlIGJvcmRlcj0iMCIgc3R5bGU9IndpZHRoOjEwMCU7IGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7IGJvcmRlci1zcGFjaW5nOiAxMnB4OyI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwJTsiPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tY29udHJvbC1saXN0IiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6ICNjY2NjY2M7IGNvbG9yOiAjNjY2NjY2OyB3aWR0aDogMTAwJTsgY3Vyc29yOiBub3QtYWxsb3dlZDsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icmV0dXJuIGZhbHNlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRyb2wgTGlzdA0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6NTAlOyI+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZjA5M2ZiIDAlLCAjZjU1NzZjIDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQW5vbnlGaWxsKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQW5vbnlGaWxsDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzQzZTk3YiAwJSwgIzM4ZjlkNyAxMDAlKTsgd2lkdGg6IDEwMCU7IGNvbG9yOiAjMDAzMzY2OyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5NTVBUQmFja3VwKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQmFja3VwIFN5c3RlbQ0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmYTcwOWEgMCUsICNmZWUxNDAgMTAwJSk7IHdpZHRoOiAxMDAlOyBjb2xvcjogIzAwMzM2NjsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQ291bnRyeUZpZWxkQ29ycmVjdGlvbigpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvcnJlY3QgQ291bnRyeSBGaWVsZA0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2YTExY2IgMCUsICMyNTc1ZmMgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5DaXR5RXh0cmFjdGlvbigpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENpdHkgTmFtZXMNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmYwODQ0IDAlLCAjZmZiMTk5IDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQ2l0eUNvcnJlY3Rpb25BcHBseSgpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvcnJlY3QgQ2l0eSBOYW1lcw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMyYjU4NzYgMCUsICM0ZTQzNzYgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5Eb25vck5hbWVDaGVjaygpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIERvbm9yIE5hbWUgQ2hlY2sNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjYTQ0NWIyIDAlLCAjZDQxODcyIDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuRG9ub3JOYW1lQ29ycmVjdGlvbigpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvcnJlY3QgRG9ub3IgTmFtZQ0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMzMGNmZDAgMCUsICMzMzA4NjcgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5BZGRyZXNzQ2hlY2soKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBBZGRyZXNzIENoZWNrDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzA5MjAzZiAwJSwgIzUzNzg5NSAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkFkZHJlc3NDb3JyZWN0aW9uKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29ycmVjdCBBZGRyZXNzDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzhlNDRhZCAwJSwgIzczMmQ5MSAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InRyaWdnZXJGdWxsQXVkaXQoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBBdWRpdCBEYXRhYmFzZQ0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMyZWNjNzEgMCUsICMyN2FlNjAgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5QQU5Db3JyZWN0aW9uKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29ycmVjdCBQQU4NCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMDBiMDliIDAlLCAjOTZjOTNkIDEwMCUpOyB3aWR0aDogMTAwJTsgY29sb3I6ICMwMDMzNjY7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9ImdlbmVyYXRlQWRkcmVzc0xhYmVscygpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIEFkZHJlc3MgTGFiZWxzDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJsYWJlbC1jb3VudHJ5LWZpbHRlciIgc3R5bGU9IndpZHRoOjEwMCU7IGhlaWdodDo0NXB4OyBib3JkZXItcmFkaXVzOjhweDsgcGFkZGluZzoxMHB4OyBmb250LXdlaWdodDpib2xkOyBib3JkZXI6MnB4IHNvbGlkICMwMGIwOWI7IGJhY2tncm91bmQ6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBTEwiPkFsbCBDb3VudHJpZXM8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzFlM2M3MiAwJSwgIzJhNTI5OCAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1blVuaXF1ZURvbm9yTGlzdCgpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIERvbm9yIExpc3QNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZG9ub3Itc2VhcmNoLWlucHV0Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9IlNlYXJjaCAoZS5nLiBQcmFzYWQsIENoZW5uYWkgb3IgUHJhc2FkIDsgQ2hlbm5haSkiDQogICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6MTAwJTsgaGVpZ2h0OjQ1cHg7IGJvcmRlci1yYWRpdXM6OHB4OyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoycHggc29saWQgIzJhNTI5ODsiPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHIgaWQ9ImFkbWluLXBob3RvLXJvdyI+DQogICAgICAgICAgICAgICAgPHRkIGlkPSJzbmFwLWJveC0xIiBzdHlsZT0id2lkdGg6NTAlOyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoxNXB4OyBib3JkZXI6IDFweCBkYXNoZWQgI2NjYzsgYm9yZGVyLXJhZGl1czogOHB4OyI+PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQgaWQ9InNuYXAtYm94LTIiIHN0eWxlPSJ3aWR0aDo1MCU7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjE1cHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyBib3JkZXItcmFkaXVzOiA4cHg7Ij48L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICA8L3RhYmxlPg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8aHIgc3R5bGU9Im1hcmdpbi10b3A6IDQwcHg7IGJvcmRlcjogMDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7Ij4NCg0KICAgIDxzY3JpcHQ+DQoNCg0KICAgICAgICB2YXIgR0xPQkFMX0NJVFlfUkVQT1JUX0RBVEEgPSAiIjsNCiAgICAgICAgdmFyIEdMT0JBTF9ET05PUl9OQU1FX0RBVEEgPSAiIjsNCiAgICAgICAgdmFyIEdMT0JBTF9BRERSRVNTX0NPUlJFQ1RJT05fREFUQSA9ICIiOw0KDQogICAgICAgIGxldCByZWFkeUluZGljZXMgPSBbXTsgLy8gSG9sZHMgaW5kaWNlcyBmb3IgdGhlIFJSIGZpbHRlcg0KDQogICAgICAgIC8vIC0tLSBHTE9CQUwgU1RBQkxFIElEIFNFVFVQIC0tLQ0KICAgICAgICBsZXQgTU1QVF9HTE9CQUxfSUQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnTU1QVF9TVEFCTEVfSUQnKTsNCg0KICAgICAgICAvLyBGb3JjZSBhIG5ldyBJRCBpZiBpdCdzIGVtcHR5IE9SIGlmIGl0IGRvZXNuJ3QgaGF2ZSB5b3VyIHByZWZpeA0KICAgICAgICBpZiAoIU1NUFRfR0xPQkFMX0lEIHx8ICFNTVBUX0dMT0JBTF9JRC5zdGFydHNXaXRoKCJNTVBULURFVi1TVy0iKSkgew0KICAgICAgICAgICAgY29uc3QgcmFuZG9tU3VmZml4ID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDgpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICBNTVBUX0dMT0JBTF9JRCA9ICJNTVBULURFVi1TVy0iICsgcmFuZG9tU3VmZml4Ow0KICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ01NUFRfU1RBQkxFX0lEJywgTU1QVF9HTE9CQUxfSUQpOw0KICAgICAgICB9DQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQoNCg0KICAgICAgICBjb25zdCBmZWF0dXJlcyA9IFsNCiAgICAgICAgICAgIC8vIEZpc2NhbCBZZWFycw0KICAgICAgICAgICAgIkZZMjAyMS0yMDIyIiwgIkZZMjAyMi0yMDIzIiwgIkZZMjAyMy0yMDI0IiwgIkZZMjAyNC0yMDI1IiwgIkZZMjAyNS0yMDI2IiwNCiAgICAgICAgICAgIC8vIFVJIEVsZW1lbnRzIChSb3dzL1NlY3Rpb25zKQ0KICAgICAgICAgICAgIkFkbWluX1JvdyIsICJEYXNoYm9hcmRfU2VjdGlvbiIsICJIaXN0b3J5X1RhYiIsDQogICAgICAgICAgICAvLyBCdXR0b25zDQogICAgICAgICAgICAiYnRuX3NhdmUiLCAiYnRuX2RlbGV0ZSIsICJidG5fcHJpbnQiLCAiYnRuX2NhbmNlbCIsICJidG5fc3luYyIsICJidG5fZXhwb3J0Ig0KICAgICAgICBdOw0KDQoNCg0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1BvcnRhbCBTZWxlY3Rpb24gZm9yIGEgcGFydGljdWxhciB1c2VyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBvcGVuU2VjdXJpdHlQb3J0YWwodGFyZ2V0VXNlcikgew0KICAgICAgICAgICAgdXNlckxpc3QgPSB0ZXh0LnNwbGl0DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gKHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgPyB0IDogTU1QVF9BVVRIX0tFWTsNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3RhcmdldFVzZXJ9LnR4dGAgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IHNldHRpbmdzID0ge307DQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgdGV4dC5zcGxpdCgnXG4nKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSBzZXR0aW5nc1twYXJ0c1swXS50cmltKCldID0gcGFydHNbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9scyA9IFsnYnRuX3VubG9jaycsICdidG5fbG9jaycsICdzZWFyY2hCdG4nLCAnYmFuay1zeW5jLWJ0bicsICdidG5fY29uc2VudCcsICdidG5TdW1tYXJ5J107DQogICAgICAgICAgICAgICAgbGV0IHJvd3NIdG1sID0gIiI7DQoNCiAgICAgICAgICAgICAgICAvLyBMb29wIGZvciBZL04gZHJvcGRvd25zDQogICAgICAgICAgICAgICAgY29udHJvbHMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNldHRpbmdzW2lkXSB8fCAiWSI7DQogICAgICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IGZvbnQtZmFtaWx5OkFyaWFsOyBmb250LXdlaWdodDpib2xkOyI+JHtpZH08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzoxMHB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyI+PHNlbGVjdCBpZD0iaW5wdXQtJHtpZH0iIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjhweDsiPjxvcHRpb24gdmFsdWU9IlkiICR7dmFsID09PSAnWScgPyAnc2VsZWN0ZWQnIDogJyd9Plk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJOIiAke3ZhbCA9PT0gJ04nID8gJ3NlbGVjdGVkJyA6ICcnfT5OPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD48L3RyPmA7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICAvLyBTVEFSVDogVEhJUyBJUyBUSEUgRklFTEQgVEhBVCBXQVMgTUlTU0lORyBGUk9NIFlPVVIgU0NSRUVODQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNlY3Rpb25zID0gc2V0dGluZ3NbJ3NlY3Rpb25zJ10gfHwgIiI7DQogICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzoxNXB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyBmb250LWZhbWlseTpBcmlhbDsgZm9udC13ZWlnaHQ6Ym9sZDsiPnNlY3Rpb25zPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6MTBweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImlucHV0LXNlY3Rpb25zIiB2YWx1ZT0iJHtjdXJyZW50U2VjdGlvbnN9IiBwbGFjZWhvbGRlcj0iRW50ZXIgZGlnaXRzIDEyMzQ1NjciDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNlOTFlNjM7IGJveC1zaXppbmc6Ym9yZGVyLWJveDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTFweDsgY29sb3I6IzY2NjsgbWFyZ2luLXRvcDo1cHg7Ij5UeXBlIDEtNyBoZXJlIHRvIHNob3cvaGlkZSBhcHAgY29udGFpbmVycy48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQogICAgICAgICAgICAgICAgLy8gVGhlIGV4aXN0aW5nIE1pblJlY29yZE51bWJlciByb3cNCiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50TWluID0gc2V0dGluZ3NbJ01pblJlY29yZE51bWJlciddIHx8ICIiOw0KICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGZvbnQtZmFtaWx5OkFyaWFsOyBmb250LXdlaWdodDpib2xkOyI+TWluUmVjb3JkTnVtYmVyPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6MTBweDsiPjxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnB1dC1NaW5SZWNvcmROdW1iZXIiIHZhbHVlPSIke2N1cnJlbnRNaW59IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNlOTFlNjM7Ij48L3RkPjwvdHI+YDsNCg0KICAgICAgICAgICAgICAgIC8vIFRoZSBVSSBjb250YWluZXINCiAgICAgICAgICAgICAgICBjb25zdCBwb3J0YWxIdG1sID0gYDxkaXYgaWQ9InBvcnRhbC1vdmVybGF5IiBzdHlsZT0icG9zaXRpb246Zml4ZWQ7IHRvcDowOyBsZWZ0OjA7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC41KTsgei1pbmRleDoxMDAwMDsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsiPjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHdpZHRoOjgwMHB4OyBhbGlnbi1zZWxmOmZsZXgtc3RhcnQ7Ij48dGFibGUgc3R5bGU9IndpZHRoOjEwMCU7IGJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTsiPjx0Ym9keT4ke3Jvd3NIdG1sfTwvdGJvZHk+PC90YWJsZT48ZGl2IHN0eWxlPSJwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246cmlnaHQ7Ij48YnV0dG9uIG9uY2xpY2s9InNhdmVQb3J0YWxTZXR0aW5ncygnJHt0YXJnZXRVc2VyfScpIiBzdHlsZT0iYmFja2dyb3VuZDojODAwMDAwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMHB4IDIwcHg7IGN1cnNvcjpwb2ludGVyOyI+U0FWRSBDSEFOR0VTPC9idXR0b24+PC9kaXY+PC9kaXY+PC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBwb3J0YWxIdG1sKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIkVycm9yOiAiICsgZS5tZXNzYWdlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUG9ydGFsIFNlbGVjdGlvbiBTYXZpbmcgZm9yICBhIHBhcnRpY3VsYXIgdXNlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2F2ZVBvcnRhbFNldHRpbmdzKHRhcmdldFVzZXIpIHsNCiAgICAgICAgICAgIC8vIENvbGxlY3QgYWxsIGZpZWxkcyBpbmNsdWRpbmcgJ3NlY3Rpb25zJw0KICAgICAgICAgICAgY29uc3QgaWRzID0gWydidG5fdW5sb2NrJywgJ2J0bl9sb2NrJywgJ3NlYXJjaEJ0bicsICdiYW5rLXN5bmMtYnRuJywgJ2J0bl9jb25zZW50JywgJ2J0blN1bW1hcnknLCAnc2VjdGlvbnMnLCAnTWluUmVjb3JkTnVtYmVyJ107DQogICAgICAgICAgICBsZXQgZmlsZUxpbmVzID0gW107DQoNCiAgICAgICAgICAgIGlkcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBpbnB1dC0ke2lkfWApOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgZmlsZUxpbmVzLnB1c2goYCR7aWR9IHwgJHtlbC52YWx1ZS50cmltKCl9YCk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBmaWxlTGluZXMuam9pbignXG4nKTsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBgL1NldHRpbmdzLyR7dGFyZ2V0VXNlcn0udHh0YCwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogZmlsZUNvbnRlbnQNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlVwZGF0ZWQgc3VjY2Vzc2Z1bGx5ISIpOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9ydGFsLW92ZXJsYXknKS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFVzZXIgPT09IE1NUFRfVVNFUl9OQU1FKSBhcHBseVVzZXJQZXJtaXNzaW9ucyh0YXJnZXRVc2VyKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGFsZXJ0KCJTYXZlIGVycm9yOiAiICsgZS5tZXNzYWdlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQ29uc3RhbnRzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBjb25zdCBzY3JpcHRVUkwgPSAiaHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J6emJpWkMzX295QWRTdUFVZ1hSNklCUW1OWjNmRVJtaEhVVnhDTVN5N0VBWUNYOGpYNkZnZXE0TWtxaC1xYk1BWjAvZXhlYyI7DQoNCiAgICAgICAgY29uc3QgTU1QVF9WRVJTSU9OID0gIjMwLjUiOw0KICAgICAgICAvLyBBbGwgb3JpZ2luYWwgQXV0aGVudGljYXRpb24gS2V5cyBwcmVzZXJ2ZWQgZnJvbSBkNDMNCiAgICAgICAgY29uc3QgTU1QVF9BVVRIX0tFWSA9ICcya2d6ZHZlaTEwYzNybWonOw0KICAgICAgICBjb25zdCBNTVBUX0FVVEhfU0VDUkVUID0gJzd3amxxazNxa29zNmtvcic7DQogICAgICAgIGNvbnN0IE1NUFRfQVVUSF9SRUZSRVNIID0gJ0hXZzZrU1RFR3NzQUFBQUFBQUFBQVk2allfN091N2J3UzhwWEIzMmNDLVNnb0hkYlZ4aUZENzBYaVU0NXpVOTInOw0KDQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9EQiA9ICcvRGF0YUJhc2VzL01NUFQyLktQJzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX1VTRVJTID0gJy9TZXR0aW5ncy9Vc2Vycy50eHQnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfQVBQUk9WRUQgPSAnL1NldHRpbmdzL0FwcHJvdmVkLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9MT0dPID0gJy9JbWFnZXMvTG9nby5qcGcnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfRFJPUERPV05TID0gJy9TZXR0aW5ncy9Ecm9wRG93bi50eHQnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfQ0FTSCA9ICcvU2V0dGluZ3MvQ2FzaERlcG9zaXRlZC50eHQnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfQkFOSyA9ICcvRGF0YUJhc2VzL01NUFQzLktQJzsNCiAgICAgICAgY29uc3QgTU1QVF9VUkxfRVhQRU5TRVMgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9hNWU4OHZqemI2dzJxbWVsM3lzeXgvRXhwZW5zZXMueGxzeD9ybGtleT1qbWQ4aTBqczFza3hsMnZ5YXZzN3BvOHlwJmRsPTEiOw0KICAgICAgICBjb25zdCBCQU5LX1NUQVRFTUVOVF9VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9mMjdtdXlsb2JkYWp2em14Y2k4NWQvQmFua1N0YXRlbWVudC54bHM/cmxrZXk9cjQzajBzdm5tbGlnM3FtNmlhaXJidG9qZCZkbD0xIjsNCiAgICAgICAgY29uc3QgRVhFTVBUX0ZJTEUgPSAiL1NldHRpbmdzL0V4ZW1wdC50eHQiOw0KICAgICAgICBjb25zdCBNTVBUX0xPR19ESVIgPSAiL0xvZ3MvIjsgLy8gVGhlIGZvbGRlciBmb3IgdXNlciBsb2dzDQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9TRVEgPSAnL0RhdGFCYXNlcy9zZXF1ZW5jZS50eHQnOw0KICAgICAgICBsZXQgTU1QVF9SQURJT19GSUxFID0gJyc7DQoNCiAgICAgICAgY29uc3QgTU1QVF9MSU5LX0FOT05ZID0gJ2h0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvM3Q1ZDZqMmFxMXZhem5sNWk5ejd4L0Fub255RmlsbC50eHQ/cmxrZXk9bnhmbDl5MjdwZWVxdjB0c3plamNpM2ZlNiZkbD0xJzsNCg0KICAgICAgICBjb25zdCBNTVBUX0RCX1JBV19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9qNnUzaG8xNGR4eWRyNXY2aDVoYmkvTU1QVDIuS1A/cmxrZXk9M2VrdXJycTh3a3owOGJzcGl4emdqajV6ciZzdD1jcHR5bm5iZCZyYXc9MSI7DQoNCiAgICAgICAgY29uc3QgQ0lUWV9DT1JSRUNUSU9OU19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS80N2ZicXc3OXFvbHljcWIzNXM4dWcvQ2l0eUNvcnJlY3Rpb25zLnR4dD9ybGtleT16dzN1YjdyM3QyaW80YmQycXEzYXV5NDR5JmRsPTEiOw0KDQogICAgICAgIGNvbnN0IENPVU5UUllfQ09SUkVDVElPTlNfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvZ25yMW8yZDRyY2JkYno3NWZ4ZmtiL0NvdW50cnlDb3JyZWN0aW9ucy50eHQ/cmxrZXk9NzRmbHRyeHltOGcwZzg4cWVpZWpqMWJ3eiZkbD0xIjsNCg0KICAgICAgICBjb25zdCBOQU1FX0NPUlJFQ1RJT05TX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2JxYnh2eGIxaTIzczhyZG9mN2p2Mi9OYW1lQ29ycmVjdGlvbnMudHh0P3Jsa2V5PWh0eGU1Mmc4ZXltMG5lcGF3dmZpczUybWgmZGw9MSI7DQoNCiAgICAgICAgY29uc3QgTU1QVF9CQUNLVVBfRElSID0gJy9CYWNrdXAvJzsNCg0KICAgICAgICBjb25zdCBNTVBUX0lNR19FVkVOVDEgPSAnL0ltYWdlcy9FdmVudDEuanBnJzsNCiAgICAgICAgY29uc3QgTU1QVF9JTUdfRVZFTlQyID0gJy9JbWFnZXMvRXZlbnQyLmpwZyc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9FVkVOVFNfVFhUID0gJy9JbWFnZXMvRXZlbnRzRGV0YWlscy50eHQnOw0KDQogICAgICAgIHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID0gMDsgLy8gRGVmYXVsdDogTm8gcmVzdHJpY3Rpb24NCg0KICAgICAgICBjb25zdCBwYW5lbENvbnRlbnQgPSAodGl0bGUsIHVybCkgPT4gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmY5OTMzOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZsZXgtc2hyaW5rOiAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RpdGxlfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXZlbnQtaW1nLWNvbnRhaW5lciI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHt1cmx9IiBhbHQ9IkV2ZW50Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQpgOw0KDQogICAgICAgIGxldCBpc0RpcnR5ID0gZmFsc2U7IC8vIFRyYWNrcyBpZiB0aGUgcmVjb3JkIGhhcyB1bnNhdmVkIGNoYW5nZXMNCg0KICAgICAgICBsZXQgTU1QVF9URU1QMSA9ICIiOw0KICAgICAgICBsZXQgTU1QVF9URU1QMyA9ICIiOw0KDQogICAgICAgIGxldCBNTVBUX1VTRVJfTkFNRSA9ICIiOw0KICAgICAgICBsZXQgTU1QVF9ERVZJQ0VfSUQgPSAiIjsNCg0KDQogICAgICAgIGxldCBHTE9CQUxfREJfTElORVMgPSBbXTsNCiAgICAgICAgbGV0IGN1cnJlbnRSZWNvcmRJbmRleCA9IDA7DQogICAgICAgIGxldCBsYXN0Rm91bmRTZWFyY2hJbmRleCA9IC0xOw0KICAgICAgICBsZXQgdCA9ICIiOw0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0NvbnNlbnQgbGV0dGVyIGRvd25sb2FkIGJ1dHRvbiBlbmFibGUgLyBkaXNhYmxlIGxvZ2ljDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAtLS0gTkVXIENPTlNFTlQgTE9HSUMgLS0tDQogICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlQ29uc2VudCgpIHsNCiAgICAgICAgICAgIGNvbnN0IGFtdCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZSkgfHwgMDsNCiAgICAgICAgICAgIGNvbnN0IHRvd2FyZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2NvbnNlbnQnKTsNCg0KICAgICAgICAgICAgLy8gUnVsZTogRW5hYmxlZCAoU29saWQgUmVkKSBpZiBUb3dhcmRzIGlzIENvcnB1cyBBTkQgQW1vdW50ID49IDEwLDAwMA0KICAgICAgICAgICAgLy8gT3RoZXJ3aXNlOiBEaXNhYmxlZCAoRmFkZWQgUmVkKQ0KICAgICAgICAgICAgaWYgKHRvd2FyZHMuaW5jbHVkZXMoIkNPUlBVUyIpICYmIGFtdCA+PSAxMDAwMCkgew0KICAgICAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAiYnRuLWFjdGlvbiBidG4tY29uc2VudC1hY3RpdmUiOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBidG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAiYnRuLWFjdGlvbiBidG4tY29uc2VudC1kaXNhYmxlZCI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Qb3B1bGF0ZXMgdGhlIDIwIGZpZWxkcyBvZiByZWNlaXB0cyBmcm9tIGRiIGZvciBzZWxlY3RlZCByZWNlaXB0DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBkaXNwbGF5UmVjb3JkKGluZGV4KSB7DQogICAgICAgICAgICBpZiAoIUdMT0JBTF9EQl9MSU5FU1tpbmRleF0pIHJldHVybjsNCg0KDQogICAgICAgICAgICAvLyBBREQgVEhJUyBMSU5FIEhFUkU6DQogICAgICAgICAgICByZXNldFNpZGVQYW5lbHMoKTsNCg0KDQogICAgICAgICAgICBjb25zdCBjb2xzID0gR0xPQkFMX0RCX0xJTkVTW2luZGV4XS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAvLyBIZWxwZXIgdG8gc2FmZWx5IHNldCB2YWx1ZXMNCiAgICAgICAgICAgIGNvbnN0IHNldFZhbCA9IChpZCwgdmFsKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgaWYgKGVsKSBlbC52YWx1ZSA9IHZhbCA/IHZhbC50cmltKCkgOiAiIjsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGNvbnN0IHNldENoZWNrID0gKGlkLCB2YWwpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIGVsLmNoZWNrZWQgPSAodmFsPy50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gIllFUyIpOw0KICAgICAgICAgICAgfTsNCg0KDQogICAgICAgICAgICAvLyBBREQgVEhJUyBMSU5FIEhFUkU6DQogICAgICAgICAgICB3cml0ZVVzZXJMb2coInZpZXdlZCByZWNlaXB0IG51bWJlcjogIiArIChjb2xzWzBdIHx8ICJCTEFOSyIpKTsNCg0KICAgICAgICAgICAgLy8gRVhBQ1QgTUFQUElORyBGT1IgTU1QVDIuS1AgKFYxLjcgU3RhbmRhcmRzKQ0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9yZWNubycsIGNvbHNbMF0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9kYXRlJywgY29sc1sxXSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX25hbWUnLCBjb2xzWzJdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfcGhvbmUnLCBjb2xzWzNdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfYWRkcmVzcycsIGNvbHNbNF0/LnJlcGxhY2UoL34vZywgJ1xuJykpOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9lbWFpbCcsIGNvbHNbNV0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9wYW4nLCBjb2xzWzZdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfc3RhcicsIGNvbHNbN10pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9nb3RocmFtJywgY29sc1s4XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2Ftb3VudCcsIGNvbHNbOV0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9yZWYnLCBjb2xzWzEwXSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX21vZGUnLCBjb2xzWzExXSk7DQoNCiAgICAgICAgICAgIC8vIFRvd2FyZHMgb2Z0ZW4gY29udGFpbnMgYSBzdWZmaXggKGUuZy4sICJDT1JQVVMgLSA4MEciKSwgd2UgdHJpbSBpdCBmb3IgdGhlIGRyb3Bkb3duIG1hdGNoDQogICAgICAgICAgICBjb25zdCB0b3dhcmRzUmF3ID0gY29sc1sxMl0gfHwgIiI7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3Rvd2FyZHMnLCB0b3dhcmRzUmF3LnNwbGl0KCctJylbMF0udHJpbSgpKTsNCg0KICAgICAgICAgICAgc2V0Q2hlY2soJ2ZpZWxkX2NhbmNlbCcsIGNvbHNbMTNdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfY29tbWVudHMnLCBjb2xzWzE0XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3BpbmNvZGUnLCBjb2xzWzE1XSk7DQogICAgICAgICAgICBzZXRDaGVjaygnZmllbGRfcHJpbnRlZCcsIGNvbHNbMTZdKTsNCiAgICAgICAgICAgIHNldENoZWNrKCdmaWVsZF9wcmFzYWRhbScsIGNvbHNbMTddKTsNCiAgICAgICAgICAgIHNldENoZWNrKCdmaWVsZF9jb3JwdXMnLCBjb2xzWzE4XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2NvdW50cnknLCBjb2xzWzE5XSB8fCAiSU5ESUEiKTsNCg0KICAgICAgICAgICAgdG9nZ2xlTG9jayh0cnVlKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGVDb25zZW50ID09PSAiZnVuY3Rpb24iKSB2YWxpZGF0ZUNvbnNlbnQoKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlUmVjZWlwdFByZXZpZXcgPT09ICJmdW5jdGlvbiIpIHVwZGF0ZVJlY2VpcHRQcmV2aWV3KGluZGV4KTsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZE51bWJlckRpc3BsYXknKS52YWx1ZSA9IGluZGV4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUmVjZWlwdCBQcmV2aWV3DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVSZWNlaXB0UHJldmlldyhpbmRleCkgew0KICAgICAgICAgICAgY29uc3QgZiA9IEdMT0JBTF9EQl9MSU5FU1tpbmRleF0uc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgIGNvbnN0IGxvZ29TcmMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkxvZ29JbWcnKT8uc3JjIHx8ICIiOw0KDQogICAgICAgICAgICAvLyBFeHRyYWN0IHNwZWNpYWwgdG93YXJkcyB7YnJhY2tldHN9DQogICAgICAgICAgICBjb25zdCBjb21tZW50cyA9IGZbMTRdIHx8ICIiOw0KICAgICAgICAgICAgY29uc3Qgc3BlY2lhbE1hdGNoID0gY29tbWVudHMubWF0Y2goL1x7Lio/XH0vKTsNCiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxUb3dhcmRzID0gc3BlY2lhbE1hdGNoID8gc3BlY2lhbE1hdGNoWzBdIDogIiI7DQoNCiAgICAgICAgICAgIC8vIERhdGEgTWFwcGluZw0KICAgICAgICAgICAgY29uc3QgcGluY29kZSA9IGZbMTVdIHx8ICIiOw0KICAgICAgICAgICAgY29uc3QgY291bnRyeSA9IGZbMTldIHx8ICJJTkRJQSI7DQoNCiAgICAgICAgICAgIC8vIC0tLSBXQVRFUk1BUksgTE9HSUMgLS0tDQogICAgICAgICAgICBjb25zdCBpc0NhbmNlbGxlZCA9IChmWzEzXT8udHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09ICJZRVMiKTsNCiAgICAgICAgICAgIGNvbnN0IHdhdGVybWFya0hUTUwgPSBpc0NhbmNlbGxlZCA/DQogICAgICAgICAgICAgICAgYDxkaXYgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiA1MCU7IGxlZnQ6IDUwJTsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKC0zMGRlZyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDYwcHQ7IGNvbG9yOiByZ2JhKDI1NSwgMCwgMCwgMC4yNSk7IGZvbnQtd2VpZ2h0OiBib2xkOyBib3JkZXI6IDEwcHggc29saWQgcmdiYSgyNTUsIDAsIDAsIDAuMjUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4OyB6LWluZGV4OiAxMDsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENBTkNFTExFRA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gIDogIiI7DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNlaXB0X2Rpc3BsYXlfYXJlYScpLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVjZWlwdC1jb250YWluZXIiIHN0eWxlPSJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgcG9zaXRpb246IHJlbGF0aXZlOyBvdmVyZmxvdzogaGlkZGVuOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3dhdGVybWFya0hUTUx9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iaGVhZGVyLXRhYmxlIiBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0ibG9nby1jb2wiIHN0eWxlPSJ3aWR0aDogNzBwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7bG9nb1NyY30iIHN0eWxlPSJ3aWR0aDogNzBwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImFkZHJlc3MtY29sIiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0cnVzdC1uYW1lIiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTRwdDsiPk1ZTEFJIE1BSEFQRVJJWUFWQSBBTlVTSEFNIFRSVVNUIChSRUdELik8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRydXN0LWRldGFpbHMiIHN0eWxlPSJmb250LXNpemU6IDlwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5ldyBOby4gNCwgT2xkIE5vLiAyMywgUGl0Y2h1cGlsbGFpIFN0cmVldCwgTXlsYXBvcmUsIENoZW5uYWktNjAwIDAwNC48YnI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGhvbmU6IDYzODA4OTgyMzEsIDg2MTAyMTQxMzguIFdoYXRzQXBwOiA2MzgwODk4MjMxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idmFyaWFibGUtcm93IiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tdG9wOiAxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+RGF0ZTogJHtmWzFdfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0idGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDEycHQ7Ij5SRUNFSVBUPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPk5vOiAke2ZbMF19PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHQ7IGZvbnQtc2l6ZTogMTAuNXB0OyBsaW5lLWhlaWdodDogMS42OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVjZWl2ZWQgd2l0aCB0aGFua3MgUnMuIDxiPiR7Zls5XX08L2I+ICg8Yj5SdXBlZXMgJHt0b1dvcmRzKGZbOV0pfSBvbmx5PC9iPikgZm9yIDxiPiR7ZlsxMl19PC9iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpYSAke2ZbMTFdfSA8Yj4ke2ZbMTBdIHx8ICcnfTwvYj4gZnJvbToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaXZpZGVyIiBzdHlsZT0iYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7IG1hcmdpbjogMTBweCAwOyI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iZG9ub3ItdGFibGUiIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgbGluZS1oZWlnaHQ6IDEuODsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDogMjAlOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyI+TmFtZTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48Yj4ke2ZbMl19PC9iPjwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246IHRvcDsiPlBBTjwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2ZbNl0gfHwgJ04vQSd9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyI+JHtzcGVjaWFsVG93YXJkc308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246IHRvcDsiPlBob25lPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7ZlszXSB8fCAnTi9BJ308L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiB0b3A7Ij5BZGRyZXNzPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7Zls0XX0gLSAke3BpbmNvZGV9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogdG9wOyI+Q291bnRyeTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke2NvdW50cnl9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGl2aWRlciIgc3R5bGU9ImJvcmRlci10b3A6IDFweCBzb2xpZCAjY2NjOyBtYXJnaW46IDEwcHggMDsiPjwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsgbWFyZ2luLXRvcDogNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOiA3cHQ7IGZvbnQtc3R5bGU6IGl0YWxpYzsiPipDb21wdXRlciBHZW5lcmF0ZWQgUmVjZWlwdCAtIE5vIHNpZ25hdHVyZSBSZXF1aXJlZDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvb3Rlci10cnVzdC1zaWduIiBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDlwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgTVlMQUkgTUFIQVBFUklZQVZBIEFOVVNIQU0gVFJVU1QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb290ZXItdGF4LWluZm8iIHN0eWxlPSJmb250LXNpemU6IDhwdDsgbWFyZ2luLXRvcDogMTVweDsgYm9yZGVyLXRvcDogMXB4IGRhc2hlZCAjZWVlOyBwYWRkaW5nLXRvcDogNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VjIDEyLUEgVmFsaWQgdGlsbCAzMS0wMy0yMDI2IHwgUEFOIEFBRVRNNTE0NUoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCmA7DQoNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0ZldGNoIERyb2JveCBUb2tlbiBmcm9tIGFwaQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQWxsIEF1dGgvVG9rZW4vTG9hZCBsb2dpYyBwcmVzZXJ2ZWQgZnJvbSBkNDMNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0TU1QVFRva2VuKCkgew0KICAgICAgICAgICAgY29uc3QgaCA9IGJ0b2EoTU1QVF9BVVRIX0tFWS50cmltKCkgKyAiOiIgKyBNTVBUX0FVVEhfU0VDUkVULnRyaW0oKSk7DQogICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tL29hdXRoMi90b2tlbicsIHsNCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0Jhc2ljICcgKyBoLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSwNCiAgICAgICAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgJ2dyYW50X3R5cGUnOiAncmVmcmVzaF90b2tlbicsICdyZWZyZXNoX3Rva2VuJzogTU1QVF9BVVRIX1JFRlJFU0gudHJpbSgpIH0pDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsgcmV0dXJuIGQuYWNjZXNzX3Rva2VuIHx8IG51bGw7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Jbml0aWFsaXplcyBkYXRhIGF0IGxhdW5jaC4gdmVyeSBjcnVjaWFsLiBwcm9ibGVtYXRpYyBmdW5jdGlvbi4gbm90IHRvIGJlIGRpc3R1cmJlZC4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVNTVBUKCkgew0KICAgICAgICAgICAgY29uc3QgY3ZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7IGNvbnN0IGdsID0gY3ZzLmdldENvbnRleHQoJ3dlYmdsJyk7DQogICAgICAgICAgICBjb25zdCBkSSA9IGdsLmdldEV4dGVuc2lvbignV0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mbycpOw0KICAgICAgICAgICAgY29uc3QgcmVuID0gZ2wuZ2V0UGFyYW1ldGVyKGRJLlVOTUFTS0VEX1JFTkRFUkVSX1dFQkdMKTsNCiAgICAgICAgICAgIGxldCBoYXNoID0gMDsgY29uc3Qgc3RyID0gbmF2aWdhdG9yLnVzZXJBZ2VudCArIHJlbiArIHNjcmVlbi53aWR0aCArIHNjcmVlbi5oZWlnaHQ7DQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgeyBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBzdHIuY2hhckNvZGVBdChpKTsgaGFzaCB8PSAwOyB9DQogICAgICAgICAgICAvL2xldCBkZXZJRCA9ICJNTVBULURFVi1TVy0iICsgTWF0aC5hYnMoaGFzaCk7DQogICAgICAgICAgICAvL2RldklEID0gTU1QVF9HTE9CQUxfSUQ7DQoNCiAgICAgICAgICAgIGNvbnN0IGRldklEID0gTU1QVF9HTE9CQUxfSUQ7DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5RGV2aWNlSUQnKS5pbm5lclRleHQgPSBkZXZJRDsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5VmVyc2lvbicpLmlubmVyVGV4dCA9IE1NUFRfVkVSU0lPTjsNCiAgICAgICAgICAgIE1NUFRfREVWSUNFX0lEID0gZGV2SUQ7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgdCA9IGF3YWl0IGdldE1NUFRUb2tlbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgeyBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9MT0dPIH0pIH0gfSk7DQogICAgICAgICAgICAgICAgaWYgKGxSLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBhd2FpdCBsUi5ibG9iKCk7IGNvbnN0IHUgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGIpOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb0NvbnRhaW5lcicpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0iJHt1fSIgY2xhc3M9ImxvZ28tY2lyY2xlIGxvZ28tbGFyZ2UiPmA7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvSGVhZGVyQ29udGFpbmVyJykuaW5uZXJIVE1MID0gYDxpbWcgaWQ9Im1haW5Mb2dvSW1nIiBzcmM9IiR7dX0iIGNsYXNzPSJsb2dvLWNpcmNsZSI+YDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc3QgYVIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7IG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0FQUFJPVkVEIH0pIH0gfSk7DQogICAgICAgICAgICAgICAgY29uc3QgYVQgPSBhd2FpdCBhUi50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICAvLyAxLiBNVVNUIEJFIE9VVFNJREU6IERlZmluZSB0aGUgSUQgY2xlYXJseQ0KICAgICAgICAgICAgICAgIE1NUFRfREVWSUNFX0lEID0gZGV2SUQ7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBUSEUgTUFJTiBHQVRFDQogICAgICAgICAgICAgICAgaWYgKGFUICYmIGFULmluY2x1ZGVzKE1NUFRfREVWSUNFX0lEKSAmJiBNTVBUX0RFVklDRV9JRCAhPT0gIiIpIHsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBJTlNFUlQgVEhJUyBMSU5FIEhFUkU6DQogICAgICAgICAgICAgICAgICAgIHJ1blBlcnNvbmFsU2VjdXJpdHlHYXRlKGFULCBkZXZJRCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIFNVQ0NFU1MgUEFUSCAtLS0NCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkFjY2VzcyBHcmFudGVkIik7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRoU2NyZWVuJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5BcHBDb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCg0KICAgICAgICAgICAgICAgICAgICBsb2FkRGF0YSh0KTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAxLiBMb2cgdGhlIExhdW5jaCB3aXRoIHRoZSBkaXZpZGVyDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlVXNlckxvZygiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iKTsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVVc2VyTG9nKCJMQVVOQ0hFRDogU2Vzc2lvbiBTdGFydGVkIik7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMi4gUGVyZm9ybSB0aGUgU2VxdWVuY2UgQ3Jvc3MtQ2hlY2sNCiAgICAgICAgICAgICAgICAgICAgaWYgKEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0TGluZSA9IEdMT0JBTF9EQl9MSU5FU1tHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxMYXN0Uk4gPSBsYXN0TGluZS5zcGxpdCgnfCcpWzBdLnRyaW0oKTsgLy8gR2V0IFJOIGZyb20gREIgKGUuZy4sIENHMDA1OTgyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsQ291bnQgPSBHTE9CQUxfREJfTElORVMubGVuZ3RoOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlIHdpdGggdGhlIHNlcXVlbmNlIHZhcmlhYmxlcyBsb2FkZWQgZHVyaW5nIGxvYWREYXRhKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIChJbiB5b3VyIHNjcmlwdCwgdGhlc2UgYXJlIHVzdWFsbHkgJ2xhc3RSZWNlaXB0Tm8nIGFuZCAndG90YWxSZWNvcmRDb3VudCcpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0dWFsTGFzdFJOICE9PSBsYXN0UmVjZWlwdE5vKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlckNob2ljZSA9IGNvbmZpcm0oDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBTRVFVRU5DRSBNSVNNQVRDSCBERVRFQ1RFRCFcblxuYCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBEQiBBY3R1YWw6ICR7YWN0dWFsTGFzdFJOfVxuYCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBTZXF1ZW5jZSBGaWxlOiAke2xhc3RSZWNlaXB0Tm99XG5cbmAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgV291bGQgeW91IGxpa2UgdG8gYXV0by1jb3JyZWN0IHRoZSBzZXF1ZW5jZSBmaWxlIHRvIG1hdGNoIHRoZSBkYXRhYmFzZT9gDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyQ2hvaWNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvcnJlY3RTZXF1ZW5jZShhY3R1YWxMYXN0Uk4sIGFjdHVhbENvdW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coIldBUk5JTkc6IFNlcXVlbmNlIE1pc21hdGNoIGRldGVjdGVkIGJ1dCBpZ25vcmVkIGJ5IHVzZXIuIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gMS4gQ29uZmlybSB3ZSByZWFjaGVkIHRoaXMgcG9pbnQNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkJsb2NraW5nIGFjY2VzcyBmb3IgSUQ6ICIgKyBNTVBUX0RFVklDRV9JRCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMi4gVGFyZ2V0IHRoZSBFTlRJUkUgYXV0aCBzY3JlZW4gdG8gcHJldmVudCBsYXllcmluZyBpc3N1ZXMNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFpbkF1dGhTY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aFNjcmVlbicpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChtYWluQXV0aFNjcmVlbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWFpbkF1dGhTY3JlZW4uaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGhlaWdodDogMTAwdmg7IGJhY2tncm91bmQ6ICNmNGY0ZjQ7IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiAxNXB4OyBib3JkZXI6IDJweCBzb2xpZCAjZmY0ZDRkOyBib3gtc2hhZG93OiAwIDEwcHggMzBweCByZ2JhKDAsMCwwLDAuMSk7IG1heC13aWR0aDogNDUwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjogI2Q5NTM0ZjsgbWFyZ2luLWJvdHRvbTogMTBweDsiPvCfmqsgQUNDRVNTIFJFU1RSSUNURUQ8L2gyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0iY29sb3I6ICM1NTU7Ij5UaGlzIGRldmljZSBpcyBub3QgcmVnaXN0ZXJlZCBpbiB0aGUgc3lzdGVtLjwvcD4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjMWExYTFhOyBjb2xvcjogIzM5ZmYxNDsgcGFkZGluZzogMTVweDsgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDIwcHggMDsgYm9yZGVyOiAxcHggc29saWQgIzQ0NDsgd29yZC1icmVhazogYnJlYWstYWxsOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke01NUFRfREVWSUNFX0lEfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOiAxM3B4OyBjb2xvcjogIzg4ODsiPlByb3ZpZGUgdGhpcyBJRCB0byBBZG1pbiBmb3IgPGI+Q0cgUmVjZWlwdDwvYj4gYWN0aXZhdGlvbi48L3A+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJsb2NhdGlvbi5yZWxvYWQoKSIgc3R5bGU9ImJhY2tncm91bmQ6ICNkOTUzNGY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAxMnB4IDI1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgd2lkdGg6IDEwMCU7IG1hcmdpbi10b3A6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFVFJZIENPTk5FQ1RJT04NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW1lcmdlbmN5IGZhbGxiYWNrIGlmIGV2ZW4gYXV0aFNjcmVlbiBpcyBtaXNzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9ICI8aDEgc3R5bGU9J2NvbG9yOnJlZDsgdGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbi10b3A6NTBweDsnPkFDQ0VTUyBERU5JRUQ6ICIgKyBNTVBUX0RFVklDRV9JRCArICI8L2gxPiI7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIEhhcmQgc3RvcA0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEFmdGVyIHN1Y2Nlc3NmdWxseSBmZXRjaGluZyBldmVyeXRoaW5nIGFuZCBpZGVudGlmeWluZyB0aGUgdXNlcjoNCiAgICAgICAgICAgICAgICBhd2FpdCBsb2dMYXVuY2goKTsNCg0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1BvcHVsYXRlcyBkcm9wZG93biBtZW51cyBmb3IgVG93YXJkcyBhbmQgTW9kZSAtIGxpc3QgZnJvbSBEcm9wRG93bi50eHQgaW4gc2V0dGluZ3MgZm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRHJvcGRvd25zKHRva2VuKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGRyUiA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RST1BET1dOUyB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWRyUi5vaykgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdHh0ID0gYXdhaXQgZHJSLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHR4dC5zcGxpdCgnXG4nKS5tYXAobCA9PiBsLnRyaW0oKSkuZmlsdGVyKGwgPT4gbC5sZW5ndGggPiAwKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG1TID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX21vZGUnKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0UyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJyk7DQoNCiAgICAgICAgICAgICAgICAvLyBDbGVhciBleGlzdGluZyBvcHRpb25zDQogICAgICAgICAgICAgICAgbVMuaW5uZXJIVE1MID0gIiI7DQogICAgICAgICAgICAgICAgdFMuaW5uZXJIVE1MID0gIiI7DQoNCiAgICAgICAgICAgICAgICBsZXQgY3VyU2VjID0gIiI7DQogICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHNlY3Rpb24gaGVhZGVycyBsaWtlIFtNT0RFXSBvciBbVE9XQVJEU10NCiAgICAgICAgICAgICAgICAgICAgaWYgKGwuc3RhcnRzV2l0aCgnWycpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjdXJTZWMgPSBsLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSB2YWx1ZSAocGFydCBiZWZvcmUgdGhlIGh5cGhlbikNCiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbCA9IGwuc3BsaXQoJy0nKVswXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGlmICghdmFsKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICBvLnZhbHVlID0gdmFsOw0KICAgICAgICAgICAgICAgICAgICBvLnRleHRDb250ZW50ID0gdmFsOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChjdXJTZWMgPT09ICJbTU9ERV0iKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtUy5hcHBlbmRDaGlsZChvKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJTZWMgPT09ICJbVE9XQVJEU10iKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0Uy5hcHBlbmRDaGlsZChvKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJEcm9wZG93bnMgUG9wdWxhdGVkIik7DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJEcm9wZG93biBlcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQ29udmVydHMgbnVtYmVycyB0byB3b3Jkcw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gdG9Xb3JkcyhuKSB7DQogICAgICAgICAgICBsZXQgYSA9IFsnJywgJ09uZSAnLCAnVHdvICcsICdUaHJlZSAnLCAnRm91ciAnLCAnRml2ZSAnLCAnU2l4ICcsICdTZXZlbiAnLCAnRWlnaHQgJywgJ05pbmUgJywgJ1RlbiAnLCAnRWxldmVuICcsICdUd2VsdmUgJywgJ1RoaXJ0ZWVuICcsICdGb3VydGVlbiAnLCAnRmlmdGVlbiAnLCAnU2l4dGVlbiAnLCAnU2V2ZW50ZWVuICcsICdFaWdodGVlbiAnLCAnTmluZXRlZW4gJ107DQogICAgICAgICAgICBsZXQgYiA9IFsnJywgJycsICdUd2VudHknLCAnVGhpcnR5JywgJ0ZvcnR5JywgJ0ZpZnR5JywgJ1NpeHR5JywgJ1NldmVudHknLCAnRWlnaHR5JywgJ05pbmV0eSddOw0KICAgICAgICAgICAgbGV0IG51bSA9ICgnMDAwMDAwMDAwJyArIHBhcnNlSW50KG4pKS5zdWJzdHIoLTkpLm1hdGNoKC9eKFxkezJ9KShcZHsyfSkoXGR7Mn0pKFxkezF9KShcZHsyfSkkLyk7DQogICAgICAgICAgICBpZiAoIW51bSkgcmV0dXJuICIiOw0KICAgICAgICAgICAgbGV0IHN0ciA9ICcnOw0KICAgICAgICAgICAgc3RyICs9IChudW1bMV0gIT0gMCkgPyAoYVtOdW1iZXIobnVtWzFdKV0gfHwgYltudW1bMV1bMF1dICsgJyAnICsgYVtudW1bMV1bMV1dKSArICdDcm9yZSAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVsyXSAhPSAwKSA/IChhW051bWJlcihudW1bMl0pXSB8fCBiW251bVsyXVswXV0gKyAnICcgKyBhW251bVsyXVsxXV0pICsgJ0xha2ggJyA6ICcnOw0KICAgICAgICAgICAgc3RyICs9IChudW1bM10gIT0gMCkgPyAoYVtOdW1iZXIobnVtWzNdKV0gfHwgYltudW1bM11bMF1dICsgJyAnICsgYVtudW1bM11bMV1dKSArICdUaG91c2FuZCAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVs0XSAhPSAwKSA/IChhW051bWJlcihudW1bNF0pXSB8fCBiW251bVs0XVswXV0gKyAnICcgKyBhW251bVs0XVsxXV0pICsgJ0h1bmRyZWQgJyA6ICcnOw0KICAgICAgICAgICAgc3RyICs9IChudW1bNV0gIT0gMCkgPyAoKHN0ciAhPSAnJykgPyAnYW5kICcgOiAnJykgKyAoYVtOdW1iZXIobnVtWzVdKV0gfHwgYltudW1bNV1bMF1dICsgJyAnICsgYVtudW1bNV1bMV1dKSA6ICcnOw0KICAgICAgICAgICAgcmV0dXJuIHN0ci50cmltKCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBuYXZpZ2F0ZURhdGFiYXNlKHYpIHsgY3VycmVudFJlY29yZEluZGV4ID0gdjsgZGlzcGxheVJlY29yZCh2KTsgfQ0KICAgICAgICBmdW5jdGlvbiBjaGFuZ2VSZWNvcmQoZCkgeyBsZXQgbiA9IHBhcnNlSW50KGN1cnJlbnRSZWNvcmRJbmRleCkgKyBkOyBpZiAobiA+PSAwICYmIG4gPCBHTE9CQUxfREJfTElORVMubGVuZ3RoKSB7IGN1cnJlbnRSZWNvcmRJbmRleCA9IG47IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJykudmFsdWUgPSBuOyBkaXNwbGF5UmVjb3JkKG4pOyB9IH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9DcmVhdGVzIGEgTmV3IENHIFJlY2VpcHQgLSBBc3NpbmdzIGEgbmV3IHVuc2VkIENHIHJlY2VpcHQgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZU5ld1JOKCkgew0KICAgICAgICAgICAgY29uc3Qgcm5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLXJuJyk7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdPdmVybGF5Jyk7DQoNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSB0cnVlOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdhY3Rpb24nLCAnZ2V0TmV3UmVjZWlwdCcpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzY3JpcHRVUkwsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IGZvcm1EYXRhIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZWNlaXB0ICYmIGRhdGEuaW5kZXgpIHsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBBREQgVEhJUyBMSU5FIEhFUkU6DQogICAgICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiR0VORVJBVEVEIE5FVyBSRUNFSVBUOiAiICsgZGF0YS5yZWNlaXB0KTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIDE6IFVwZGF0ZSB0aGUgZ2xvYmFsIGluZGV4DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IHBhcnNlSW50KGRhdGEuaW5kZXgpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgMjogRklYIFRIRSBNRU1PUlkgR0FQDQogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBkYXRhYmFzZSBoYXMgNTAwIHJlY29yZHMgKDAtNDk5KSwgYW5kIG5ldyBpbmRleCBpcyA1MDAsDQogICAgICAgICAgICAgICAgICAgIC8vIHdlIE1VU1QgZ3JvdyB0aGUgYXJyYXkgc28gaW5kZXggNTAwIGFjdHVhbGx5IGV4aXN0cy4NCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPD0gY3VycmVudFJlY29yZEluZGV4KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVMucHVzaCgiIik7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIDM6IFJFU0VUIFNFQVJDSCBUUkFDS0VSDQogICAgICAgICAgICAgICAgICAgIC8vIFlvdXIgc2VhcmNoIGVuZ2luZSBsaWtlbHkgdXNlcyBhIHZhcmlhYmxlIHRvIHJlbWVtYmVyIHdoZXJlIGl0IHdhcy4NCiAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXR0aW5nIHRoaXMgZm9yY2VzIHNlYXJjaCB0byByZS1zY2FuIGZyb20gdGhlIG5ldyBlbmQuDQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGFzdEZvdW5kU2VhcmNoSW5kZXggIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsYXN0Rm91bmRTZWFyY2hJbmRleCA9IC0xOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGAke1N0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpfS0ke1N0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9LSR7bm93LmdldEZ1bGxZZWFyKCl9YDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSBGaWVsZHMNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUgPSBkYXRhLnJlY2VpcHQ7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9kYXRlJykudmFsdWUgPSBmb3JtYXR0ZWREYXRlOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIENsZWFyIGVudHJ5IGZpZWxkcw0KICAgICAgICAgICAgICAgICAgICBbJ2ZpZWxkX25hbWUnLCAnZmllbGRfcGhvbmUnLCAnZmllbGRfYWRkcmVzcycsICdmaWVsZF9lbWFpbCcsICdmaWVsZF9wYW4nLCAnZmllbGRfc3RhcicsICdmaWVsZF9nb3RocmFtJywgJ2ZpZWxkX2Ftb3VudCcsICdmaWVsZF9yZWYnLCAnZmllbGRfY29tbWVudHMnXS5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsKSBlbC52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGluY29kZScpLnZhbHVlID0gIjAwMDAwMCI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb3VudHJ5JykudmFsdWUgPSAiSU5ESUEiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbW9kZScpLnZhbHVlID0gIkNhc2giOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlID0gIk9USEVSUyI7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsQ2hlY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY2FuY2VsJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxDaGVjaykgY2FuY2VsQ2hlY2suY2hlY2tlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wcmludGVkJykuY2hlY2tlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcHJhc2FkYW0nKS5jaGVja2VkID0gZmFsc2U7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCA0OiBTeW5jIHRoZSBzcGVjaWZpYyBsaW5lIGluIG1lbW9yeQ0KICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVNbY3VycmVudFJlY29yZEluZGV4XSA9IGAke2RhdGEucmVjZWlwdH18JHtmb3JtYXR0ZWREYXRlfXx8fHx8fHx8fHx8Q2FzaHxPVEhFUlN8WUVTfHwwMDAwMDB8Tk98Tk98fElORElBYDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIDU6IFVwZGF0ZSB0aGUgU2xpZGVyDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChzbGlkZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5tYXggPSBHTE9CQUxfREJfTElORVMubGVuZ3RoOyAvLyAtIDE7IC8vIEV4cGxpY2l0bHkgdXNlIHRoZSBuZXcgYXJyYXkgbGVuZ3RoDQogICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSBjdXJyZW50UmVjb3JkSW5kZXg7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZE51bWJlckRpc3BsYXknKS52YWx1ZSA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCg0KICAgICAgICAgICAgICAgICAgICB0b2dnbGVMb2NrKGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgaXNEaXJ0eSA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gKFRoZSByZXN0IG9mIHlvdXIgZXZlbnQgbGlzdGVuZXIgbG9naWMgZm9yIHVuY2hlY2tpbmcgY2FuY2VsIHN0YXlzIGV4YWN0bHkgdGhlIHNhbWUpDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJGaWVsZHMgPSBbJ2ZpZWxkX25hbWUnLCAnZmllbGRfYW1vdW50JywgJ2ZpZWxkX3Bob25lJywgJ2ZpZWxkX2FkZHJlc3MnXTsNCiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckZpZWxkcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLnRyaW0oKSAhPT0gIiIgJiYgY2FuY2VsQ2hlY2suY2hlY2tlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQ2hlY2suY2hlY2tlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHMgPSBHTE9CQUxfREJfTElORVNbY3VycmVudFJlY29yZEluZGV4XS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHMubGVuZ3RoID49IDE0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sc1sxM10gPSAiTk8iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FU1tjdXJyZW50UmVjb3JkSW5kZXhdID0gY29scy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IG9uY2U6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGUubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICAgICAgcm5CdG4uaW5uZXJUZXh0ID0gIlJOIjsNCiAgICAgICAgICAgICAgICAvLyBEbyBub3QgcmUtZW5hYmxlIHJuQnRuIGhlcmUsIGl0IHN0YXlzIGRpc2FibGVkIHVudGlsIGxvY2tlZCBhcyBwZXIgeW91ciBsb2dpYw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIERvd25sb2FkcyBhIFBERiBSZWNlaXB0DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBkb3dubG9hZFJlY2VpcHRQREYoKSB7DQogICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlY2VpcHQtY29udGFpbmVyJyk7DQogICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHJldHVybjsNCg0KICAgICAgICAgICAgY29uc3QgcmVjTm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVjbm8nKS52YWx1ZTsNCg0KICAgICAgICAgICAgY29uc3Qgb3B0ID0gew0KICAgICAgICAgICAgICAgIG1hcmdpbjogWzAuMiwgMC4yXSwgLy8gW3RvcC9ib3R0b20sIGxlZnQvcmlnaHRdDQogICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJlY05vICsgJy5wZGYnLA0KICAgICAgICAgICAgICAgIGltYWdlOiB7IHR5cGU6ICdqcGVnJywgcXVhbGl0eTogMSB9LA0KICAgICAgICAgICAgICAgIGh0bWwyY2FudmFzOiB7DQogICAgICAgICAgICAgICAgICAgIHNjYWxlOiAyLA0KICAgICAgICAgICAgICAgICAgICB1c2VDT1JTOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICBsb2dnaW5nOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2UgdHdvIGxpbmVzIGFyZSB0aGUga2V5IHRvIGZpeGluZyB0aGUgIkhhbGYgUGFnZSIgY3V0LW9mZjoNCiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWTogMCwNCiAgICAgICAgICAgICAgICAgICAgd2luZG93SGVpZ2h0OiBlbGVtZW50LnNjcm9sbEhlaWdodA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAganNQREY6IHsgdW5pdDogJ2luJywgZm9ybWF0OiAnYTQnLCBvcmllbnRhdGlvbjogJ3BvcnRyYWl0JyB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAvLyBOZXcgbG9naWM6IFVzZSAnaHRtbDJwZGYnIHRvIGNhcHR1cmUgdGhlIGZ1bGwgc2Nyb2xsIGhlaWdodA0KICAgICAgICAgICAgaHRtbDJwZGYoKS5mcm9tKGVsZW1lbnQpLnNldChvcHQpLnRvUGRmKCkuZ2V0KCdwZGYnKS50aGVuKGZ1bmN0aW9uIChwZGYpIHsNCiAgICAgICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIFBERiBvbmx5IGhhcyAxIHBhZ2UNCiAgICAgICAgICAgICAgICB2YXIgdG90YWxQYWdlcyA9IHBkZi5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRvdGFsUGFnZXM7IGkgPiAxOyBpLS0pIHsNCiAgICAgICAgICAgICAgICAgICAgcGRmLmRlbGV0ZVBhZ2UoaSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkuc2F2ZSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFNlbmRzIGEgd2hhdHNhcHAgdGV4dCBtZXNzYWdlIGFsb25nIHdpdGggb3B0aW9uIG9mIHBhc3RpbmcgYWN0dWFsIHJlY2VpcHQgLSBkaXJlY3QgdG8gZG9ub3IgdGVsZXBob25lIG51bWJlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2VuZFdoYXRzQXBwKCkgew0KICAgICAgICAgICAgY29uc3QgcmVjZWlwdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVjZWlwdC1jb250YWluZXInKTsNCg0KICAgICAgICAgICAgLy8gMS4gUEVSRk9STSBDTElQQk9BUkQgQ09QWSAoV2FpdCBmb3IgaXQgdG8gZmluaXNoKQ0KICAgICAgICAgICAgaWYgKHJlY2VpcHRFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gYXdhaXQgaHRtbDJjYW52YXMocmVjZWlwdEVsZW1lbnQsIHsgc2NhbGU6IDIsIHVzZUNPUlM6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IGNhbnZhcy50b0Jsb2IocmVzb2x2ZSkpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gbmV3IENsaXBib2FyZEl0ZW0oeyAiaW1hZ2UvcG5nIjogYmxvYiB9KTsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZShbaXRlbV0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQ2xpcGJvYXJkIEltYWdlIFJlYWR5Iik7DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkNsaXBib2FyZCBFcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMi4gQ09MTEVDVCBEQVRBIEZPUiBURVhUDQogICAgICAgICAgICBjb25zdCByZWNObyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9kYXRlJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHRvd2FyZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZS5yZXBsYWNlKC9cRC9nLCAnJyk7DQoNCiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvbW1lbnRzJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBzcGVjaWFsTWF0Y2ggPSBjb21tZW50cy5tYXRjaCgvXHsuKj9cfS8pOw0KICAgICAgICAgICAgY29uc3Qgc3BlY2lhbFN0ciA9IHNwZWNpYWxNYXRjaCA/IGAgKCR7c3BlY2lhbE1hdGNoWzBdfSlgIDogIiI7DQoNCiAgICAgICAgICAgIGlmICghcGhvbmUpIHsgYWxlcnQoIk5vIHBob25lIG51bWJlciEiKTsgcmV0dXJuOyB9DQoNCiAgICAgICAgICAgIC8vIDMuIEJVSUxEIFRFWFQgVVJMDQogICAgICAgICAgICBjb25zdCBtZXNzYWdlID0NCiAgICAgICAgICAgICAgICBgKk1ZTEFJIE1BSEFQRVJJWUFWQSBBTlVTSEFNIFRSVVNUKiUwQWAgKw0KICAgICAgICAgICAgICAgIGAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJTBBYCArDQogICAgICAgICAgICAgICAgYCpSZWNlaXB0IE5vOiogJHtyZWNOb30lMEFgICsNCiAgICAgICAgICAgICAgICBgKkRhdGU6KiAke2RhdGV9JTBBJTBBYCArDQogICAgICAgICAgICAgICAgYFJlY2VpdmVkIHdpdGggdGhhbmtzIGZyb20gKlNocmkvU210LiAke25hbWV9KiUwQWAgKw0KICAgICAgICAgICAgICAgIGBhIHN1bSBvZiAqUnMuICR7YW1vdW50fSogb25seSUwQWAgKw0KICAgICAgICAgICAgICAgIGB0b3dhcmRzICoke3Rvd2FyZHN9JHtzcGVjaWFsU3RyfSolMEElMEFgICsNCiAgICAgICAgICAgICAgICBgX1RydXN0IFJlZ2lzdHJhdGlvbiB2YWxpZCB0aWxsIDMxLTAzLTIwMjZfYDsNCg0KICAgICAgICAgICAgY29uc3Qgd2FVcmwgPSBgaHR0cHM6Ly9hcGkud2hhdHNhcHAuY29tL3NlbmQ/cGhvbmU9OTEke3Bob25lfSZ0ZXh0PSR7bWVzc2FnZX1gOw0KDQogICAgICAgICAgICAvLyA0LiBPUEVOIFdIQVRTQVBQDQogICAgICAgICAgICB3aW5kb3cub3Blbih3YVVybCwgJ19ibGFuaycpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIERvd25sb2FkcyBhIENvbnNlbnQgbGV0dGVyIGZvciBhIERvbm9yIC0gZm9yIGNvcnB1cyBhbmQgYW1vdW50ID49MTAwMDANCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGNvbnNlbnRBY3Rpb24oKSB7DQogICAgICAgICAgICBjb25zdCByZWNObyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9kYXRlJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBhbW91bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYW1vdW50JykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHBob25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Bob25lJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2FkZHJlc3MnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHJlZiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWYnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHBhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKS52YWx1ZSA6ICIiOw0KDQogICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRBZGRyZXNzID0gYWRkcmVzcy5yZXBsYWNlKC9cbi9nLCAnPGJyPicpOw0KICAgICAgICAgICAgY29uc3QgYW1vdW50SW5Xb3JkcyA9IE51bWJlcihhbW91bnQpLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpICsgIiBPbmx5IjsNCg0KICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgLy8gVXNpbmcgYSBzbGlnaHRseSBzbWFsbGVyIHBhZGRpbmcgdG8gZW5zdXJlIDEtcGFnZSBmaXQNCiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICcwLjZpbiAwLjc1aW4nOw0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gJyJUaW1lcyBOZXcgUm9tYW4iLCBzZXJpZic7DQogICAgICAgICAgICBlbGVtZW50LnN0eWxlLmxpbmVIZWlnaHQgPSAnMS40JzsgLy8gU2xpZ2h0bHkgdGlnaHRlciBsaW5lIGhlaWdodA0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5jb2xvciA9ICcjMDAwJzsNCiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSAnMTJwdCc7DQoNCiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyBtYXJnaW4tYm90dG9tOiAzMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJ3aWR0aDogNTUlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+PGI+RnJvbTo8L2I+PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPjxiPiR7bmFtZX08L2I+PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPiR7Zm9ybWF0dGVkQWRkcmVzc308L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+UGg6ICR7cGhvbmV9PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206IDM1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPjxiPlRvOjwvYj48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij48Yj5NWUxBSSBNQUhBUEVSSVlBVkEgQU5VU0hBTSBUUlVTVDwvYj48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5TaHJlZSBHYW5lc2ggRmxhdHMsPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+TmV3IE5vLiA1Mi8yLCBOb3J0aCBNYWRhIFN0cmVldCw8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5NeWxhcG9yZSwgQ2hlbm5haSA2MDAgMDA0LjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDMwcHg7IGZvbnQtc2l6ZTogMTNwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3ViOiBEb25hdGlvbiBUb3dhcmRzIENPUlBVUyBvZiB0aGUgVHJ1c3QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+U2lyLDwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+SSBoZXJlYnkgY29uZmlybSB0aGF0IG15IGNvbnRyaWJ1dGlvbiBhcyBwZXIgZGV0YWlscyBnaXZlbiBiZWxvdyBpcyB0b3dhcmRzIDxiPkNPUlBVUzwvYj4gb2YgTXlsYWkgTWFoYXBlcml5YXZhIEFudXNoYW0gVHJ1c3QuPC9wPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbjogMjVweCAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0id2lkdGg6IDM1JTsgcGFkZGluZzogNHB4IDA7Ij5BbW91bnQ8L3RkPjx0ZD46IFJzLiA8Yj4ke2Ftb3VudH08L2I+PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+QW1vdW50IGluIFdvcmRzPC90ZD48dGQ+OiBSdXBlZXMgJHthbW91bnRJbldvcmRzfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiA0cHggMDsiPlBheW1lbnQgUmVmZXJlbmNlPC90ZD48dGQ+OiAke3JlZn08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5SZWNlaXB0IE51bWJlcjwvdGQ+PHRkPjogPGI+JHtyZWNOb308L2I+PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+RGF0ZTwvdGQ+PHRkPjogJHtkYXRlfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiA0cHggMDsiPlBob25lIE51bWJlcjwvdGQ+PHRkPjogJHtwaG9uZX08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5QQU48L3RkPjx0ZD46ICR7cGFufTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDQwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPllvdXJzIHNpbmNlcmVseSw8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiA0NXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+X19fX19fX19fX19fX19fX19fX19fX19fX188L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyBwYWRkaW5nLXRvcDogNXB4OyI+KDxiPiR7bmFtZX08L2I+KTwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCmA7DQoNCiAgICAgICAgICAgIGNvbnN0IG9wdCA9IHsNCiAgICAgICAgICAgICAgICBtYXJnaW46IDAsDQogICAgICAgICAgICAgICAgZmlsZW5hbWU6ICdDb25zZW50IExldHRlciAnICsgcmVjTm8gKyAnLnBkZicsDQogICAgICAgICAgICAgICAgaW1hZ2U6IHsgdHlwZTogJ2pwZWcnLCBxdWFsaXR5OiAwLjk4IH0sDQogICAgICAgICAgICAgICAgaHRtbDJjYW52YXM6IHsgc2NhbGU6IDIsIGxvZ2dpbmc6IGZhbHNlIH0sDQogICAgICAgICAgICAgICAganNQREY6IHsgdW5pdDogJ2luJywgZm9ybWF0OiAnYTQnLCBvcmllbnRhdGlvbjogJ3BvcnRyYWl0JyB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBodG1sMnBkZigpLnNldChvcHQpLmZyb20oZWxlbWVudCkuc2F2ZSgpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gTG9hZHMgSW5pdGlhbCBEYXRhIGR1cmluZyBsYXVuY2guICBJbXBvcnRhbnQgbm90IHRvIGRpc3R1cmJlZC4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWREYXRhKHQpIHsNCiAgICAgICAgICAgIC8vIDEuIEtJTEwgVEhFIFNQTEFTSCBTQ1JFRU4gSU1NRURJQVRFTFkNCiAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyBubyAiU3R1Y2sgYXQgRGV2aWNlIElEIiBzY3JlZW4NCiAgICAgICAgICAgIC8vIFNob3cgb3ZlcmxheQ0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRoU2NyZWVuJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQXBwQ29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkFwcCB2aXNpYmxlLiBMb2FkaW5nIGRhdGEgd2l0aCB0b2tlbi4uLiIpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gSURFTlRJRlkgVVNFUiAoVGhlIEQyNyBmaXgpDQogICAgICAgICAgICAgICAgLy8gV2UgZmluZCB0aGUgcmVhbCBuYW1lIHNvIHBvbGxpbmcgZG9lc24ndCBqdXN0IHNob3cgIlVzZXIiDQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXBwUiA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9BUFBST1ZFRCB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYXBwUi5vaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXBwVHh0ID0gYXdhaXQgYXBwUi50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGFwcFR4dC5zcGxpdCgnXG4nKS5maW5kKGwgPT4gbC5pbmNsdWRlcyhNTVBUX0RFVklDRV9JRCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTU1QVF9VU0VSX05BTUUgPSBtYXRjaC5zcGxpdCgnfCcpWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiV2VsY29tZSAiICsgTU1QVF9VU0VSX05BTUUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSBJTlNFUlQgU0VDVVJJVFkgQ0FMTCBIRVJFIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcGx5VXNlclBlcm1pc3Npb25zKE1NUFRfVVNFUl9OQU1FKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNTVBUX1JBRElPX0ZJTEUgPSBgL1NldHRpbmdzLyR7TU1QVF9VU0VSX05BTUV9UmFkaW9zLnR4dGA7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkUmFkaW9zKHQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLndhcm4oIklkZW50aXR5IGxvb2t1cCBmYWlsZWQsIGRlZmF1bHRpbmcgdG8gVW5rbm93biIpOyB9DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBGRVRDSCBEQVRBQkFTRSAmIFNFQ09OREFSWSBGSUxFUw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUiA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiVHh0ID0gYXdhaXQgZGJSLnRleHQoKTsNCiAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVMgPSBkYlR4dC5zcGxpdCgnXG4nKS5tYXAobCA9PiBsLnRyaW0oKSkuZmlsdGVyKGwgPT4gbC5sZW5ndGggPiAxMCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBbY2FzaFIsIGJhbmtSXSA9IGF3YWl0IFByb21pc2UuYWxsKFsNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfQ0FTSCB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+ICh7IG9rOiBmYWxzZSB9KSksDQogICAgICAgICAgICAgICAgICAgIGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0JBTksgfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiAoeyBvazogZmFsc2UgfSkpDQogICAgICAgICAgICAgICAgXSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY2FzaENvbnRlbnQgPSBjYXNoUi5vayA/IChhd2FpdCBjYXNoUi50ZXh0KCkpLnRvVXBwZXJDYXNlKCkgOiAiIjsNCiAgICAgICAgICAgICAgICBsZXQgYmFua0RhdGUgPSAiLS0tIjsNCiAgICAgICAgICAgICAgICBpZiAoYmFua1Iub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmwgPSAoYXdhaXQgYmFua1IudGV4dCgpKS5zcGxpdCgnXG4nKS5maWx0ZXIobCA9PiBsLmluY2x1ZGVzKCd8JykpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYmwubGVuZ3RoID4gMCkgYmFua0RhdGUgPSBibFtibC5sZW5ndGggLSAxXS5zcGxpdCgnfCcpWzBdOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDQuIExPQUQgRFJPUERPV05TICYgREFTSEJPQVJEDQogICAgICAgICAgICAgICAgYXdhaXQgbG9hZERyb3Bkb3ducyh0KTsNCiAgICAgICAgICAgICAgICB1cGRhdGVEYXNoYm9hcmRTdGF0cyhjYXNoQ29udGVudCwgYmFua0RhdGUpOw0KDQoNCiAgICAgICAgICAgICAgICBsb2FkRXZlbnRQYW5lbHModCk7IC8vIFRyaWdnZXIgdGhlIGV2ZW50IGNvbHVtbiBsb2FkaW5nDQoNCiAgICAgICAgICAgICAgICAvLyA1LiBTRVRVUCBTTElERVINCiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjX3NsaWRlcicpOw0KICAgICAgICAgICAgICAgIHNsaWRlci5tYXggPSBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMTsNCg0KICAgICAgICAgICAgICAgIC8vIFNBRkUgVFJJR0dFUjogT25seSBydW4gaWYgdGhlIGZ1bmN0aW9uIGV4aXN0cw0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYnVpbGRGWUluZGV4ID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgICAgIGJ1aWxkRllJbmRleCgpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHVwZGF0ZURhc2hib2FyZFN0YXRzKGNhc2hDb250ZW50LCBiYW5rRGF0ZSk7DQoNCiAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSBzbGlkZXIubWF4Ow0KICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IHNsaWRlci5tYXg7DQogICAgICAgICAgICAgICAgY29uc3QgZmxvb3IgPSAod2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gJiYgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gPiAwKSA/IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOIDogMTsNCiAgICAgICAgICAgICAgICBzbGlkZXIubWluID0gZmxvb3I7DQogICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChjdXJyZW50UmVjb3JkSW5kZXgpOw0KDQoNCg0KICAgICAgICAgICAgICAgIC8vIDYuIFNUQVJUIEJBQ0tHUk9VTkQgU0VSVklDRVMNCiAgICAgICAgICAgICAgICBmZXRjaEV4cGVuc2VEYXRlKCk7IC8vIEV4Y2VsIGZpbGUNCiAgICAgICAgICAgICAgICBzdGFydEJhY2tncm91bmRTeW5jKHQpOyAvLyBVc2VyIFBvbGxpbmcgKFRoZSBENzEgU3R5bGUpDQoNCiAgICAgICAgICAgICAgICB3aW5kb3cuQUNDRVNTX1RPS0VOID0gdDsgLy8gPC0tLSBBREQgVEhJUyBMSU5FIE9OTFkNCg0KICAgICAgICAgICAgICAgIC8vIEhpZGUgb3ZlcmxheSBvbmNlIGV2ZXJ5dGhpbmcgaXMgcmVuZGVyZWQNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigibG9hZERhdGEgQ3JpdGljYWwgRXJyb3I6IiwgZXJyKTsNCiAgICAgICAgICAgICAgICBhbGVydCgiTG9hZCBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBVcGRhdGVzIERhc2hib2FyZCBWYWx1ZXMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZURhc2hib2FyZFN0YXRzKGNhc2hGaWxlLCBiRGF0ZSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBsZXQgckNvdW50ID0gMCwgckFtdCA9IDAsIGNDb3VudCA9IDAsIGNBbXQgPSAwOw0KDQogICAgICAgICAgICAgICAgcmVhZHlJbmRpY2VzID0gW107IC8vIDwtLS0gSU5TRVJUOiBSZXNldCB0aGUgbGlzdCBldmVyeSB0aW1lIHN0YXRzIHVwZGF0ZQ0KDQogICAgICAgICAgICAgICAgbGV0IGxhdEQgPSAwLCBsYXREaXNwID0gIi0tLSI7DQogICAgICAgICAgICAgICAgY29uc3QgY3V0T2ZmID0gMjAyNjAxMDE7DQogICAgICAgICAgICAgICAgY29uc3Qgc2FmZUNhc2hGaWxlID0gY2FzaEZpbGUgfHwgIiI7IC8vIFNhZmV0eSBhZ2FpbnN0ICd1bmRlZmluZWQnIGluY2x1ZGVzIGVycm9yDQoNCiAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGMubGVuZ3RoIDwgMTUpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCByTm8gPSAoY1swXSB8fCAiIikudHJpbSgpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRTdHIgPSAoY1sxXSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhbXQgPSBwYXJzZUZsb2F0KGNbOV0pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGUgPSAoY1sxMV0gfHwgIiIpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmMgPSAoY1sxM10gfHwgIiIpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZHIgPSAoY1s0XSB8fCAiIikudHJpbSgpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBkU3RyLnJlcGxhY2UoL1wvL2csICctJykuc3BsaXQoJy0nKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHAubGVuZ3RoID09PSAzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5eXl5ID0gcFsyXS5sZW5ndGggPT09IDIgPyAiMjAiICsgcFsyXSA6IHBbMl07DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkQ29tcCA9IHBhcnNlSW50KHl5eXkgKyBwWzFdLnBhZFN0YXJ0KDIsICcwJykgKyBwWzBdLnBhZFN0YXJ0KDIsICcwJykpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZENvbXAgPiBsYXREKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0RCA9IGRDb21wOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdERpc3AgPSBjWzBdICsgIiAoIiArIGRTdHIgKyAiKSI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkQ29tcCA+PSBjdXRPZmYgJiYgY2FuYyAhPT0gIllFUyIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYXNoIGNoZWNrIHdpdGggc2FmZXR5DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgckNsZWFuID0gck5vLnJlcGxhY2UoIk1QUyIsICIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gIkNBU0giICYmICFzYWZlQ2FzaEZpbGUuaW5jbHVkZXMock5vKSAmJiAhc2FmZUNhc2hGaWxlLmluY2x1ZGVzKHJDbGVhbikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY0NvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNBbXQgKz0gYW10Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkeSBjaGVjaw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRyICE9PSAiIiAmJiAhKGNbMTZdID09PSAiWUVTIiAmJiBjWzE3XSA9PT0gIllFUyIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByQW10ICs9IGFtdDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBREQgVEhJUyBMSU5FIEhFUkU6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5SW5kaWNlcy5wdXNoKGluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGZtdCA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZW4tSU4nLCB7IG1heGltdW1GcmFjdGlvbkRpZ2l0czogMCB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBsYXN0Um93ID0gR0xPQkFMX0RCX0xJTkVTW0dMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxXS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfbGFzdF9yZWMnKS5pbm5lclRleHQgPSBsYXN0Um93WzBdICsgIiAoIiArIGxhc3RSb3dbMV0gKyAiKSI7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfbGF0ZXN0X3JlYycpLmlubmVyVGV4dCA9IGxhdERpc3A7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfcmVhZHlfY291bnQnKS5pbm5lclRleHQgPSByQ291bnQgKyAiICjigrkiICsgZm10LmZvcm1hdChyQW10KSArICIpIjsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9jYXNoJykuaW5uZXJUZXh0ID0gY0NvdW50ICsgIiAo4oK5IiArIGZtdC5mb3JtYXQoY0FtdCkgKyAiKSI7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfYmFua19kYXRlJykuaW5uZXJUZXh0ID0gYkRhdGUgfHwgIi0tLSI7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiU1RBVFMgRVJST1I6ICIgKyBlLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFVwZGF0ZXMgTGFzdCBleHBlbnNlIGFjY291bnQgZGF0ZSBmb3IgZGFzaGJvYXJkDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBmZXRjaEV4cGVuc2VEYXRlKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRmV0Y2hpbmcgRXhwZW5zZXMgYmFja2dyb3VuZC4uLiIpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGVSZXNwID0gYXdhaXQgZmV0Y2goTU1QVF9VUkxfRVhQRU5TRVMpOw0KICAgICAgICAgICAgICAgIGlmICghZVJlc3Aub2spIHRocm93IG5ldyBFcnJvcigiRmV0Y2ggZmFpbGVkIik7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGVSZXNwLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoYXJyYXlCdWZmZXIsIHsgdHlwZTogJ2FycmF5JyB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBzaGVldCA9IHdvcmtib29rLlNoZWV0c1t3b3JrYm9vay5TaGVldE5hbWVzWzBdXTsNCiAgICAgICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbihzaGVldCwgeyBoZWFkZXI6IDEgfSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjbGVhblJvd3MgPSBqc29uRGF0YS5maWx0ZXIocm93ID0+IHJvdyAmJiByb3cubGVuZ3RoID4gMCAmJiByb3dbMF0pOw0KICAgICAgICAgICAgICAgIGlmIChjbGVhblJvd3MubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBEYXRlID0gY2xlYW5Sb3dzW2NsZWFuUm93cy5sZW5ndGggLSAxXVswXSB8fCAiLS0tIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfZXhwZW5zZXMnKS5pbm5lclRleHQgPSBleHBEYXRlOw0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXhwZW5zZSBEYXRlIHVwZGF0ZWQ6IiwgZXhwRGF0ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiRXhwZW5zZSBkYXRlIGNvdWxkIG5vdCBiZSBsb2FkZWQgKGxpa2VseSBDT1JTKS4gRGVmYXVsdGluZyB0byAtLS0iKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9leHBlbnNlcycpLmlubmVyVGV4dCA9ICItLS0iOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFN5bmNzIHVzZXIgc3RhdHVzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBUSEUgU1lOQyBGVU5DVElPTiAoQ29ycmVjdGVkIEQ3MSBsb2dpYykNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc3RhcnRCYWNrZ3JvdW5kU3luYyh0b2tlbikgew0KICAgICAgICAgICAgY29uc3QgcnVuU3luYyA9IGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIU1NUFRfVVNFUl9OQU1FIHx8IE1NUFRfVVNFUl9OQU1FID09PSAiVW5rbm93biIpIHJldHVybjsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX1VTRVJTIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZUxpbmVzID0gW107DQogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlTGluZXMgPSB0eHQuc3BsaXQoJ1xuJykuZmlsdGVyKGwgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBsLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCBlbnRyaWVzIGZyb20gbGFzdCAzIG1pbnMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcC5sZW5ndGggPj0gMyAmJiAobm93IC0gcGFyc2VJbnQocFsyXSkpIDwgMTgwMDAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBhY3RpdmVMaW5lcyA9IGFjdGl2ZUxpbmVzLmZpbHRlcihsID0+ICFsLnN0YXJ0c1dpdGgoTU1QVF9ERVZJQ0VfSUQpKTsNCiAgICAgICAgICAgICAgICAgICAgYWN0aXZlTGluZXMucHVzaChgJHtNTVBUX0RFVklDRV9JRH18JHtNTVBUX1VTRVJfTkFNRX18JHtub3d9YCk7DQoNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX1VTRVJTLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBhY3RpdmVMaW5lcy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0aXZlVXNlckxpc3QnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3BsYXkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXkuaW5uZXJUZXh0ID0gYWN0aXZlTGluZXMubWFwKGwgPT4gbC5zcGxpdCgnfCcpWzFdKS5qb2luKCcsICcpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7IGNvbnNvbGUubG9nKCJTeW5jIHNraXBwZWQiKTsgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHJ1blN5bmMoKTsNCiAgICAgICAgICAgIHNldEludGVydmFsKHJ1blN5bmMsIDQ1MDAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1VwZGF0ZXMgRXZlbnRzIGltYWdlcyBpbiBjb2xvdW1uIDEgYW5kIDMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRFdmVudFBhbmVscyh0b2tlbikgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfRVZFTlRTX1RYVCB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgdGl0bGUxID0gIlJlY2VudCBFdmVudCIsIHRpdGxlMiA9ICJVcGNvbWluZyBFdmVudCI7DQogICAgICAgICAgICAgICAgaWYgKHIub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHh0ID0gYXdhaXQgci50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gdHh0LnNwbGl0KC9ccj9cbi8pLm1hcChsID0+IGwudHJpbSgpKS5maWx0ZXIobCA9PiBsLmxlbmd0aCA+IDApOw0KICAgICAgICAgICAgICAgICAgICB0aXRsZTEgPSBsaW5lc1swXSB8fCB0aXRsZTE7DQogICAgICAgICAgICAgICAgICAgIHRpdGxlMiA9IGxpbmVzWzFdIHx8IHRpdGxlMjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBnZXRJbWdVcmwgPSBhc3luYyAocGF0aCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vMi9maWxlcy9nZXRfdGVtcG9yYXJ5X2xpbmsnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBwYXRoIH0pDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubGluazsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgY29uc3QgW3VybDEsIHVybDJdID0gYXdhaXQgUHJvbWlzZS5hbGwoW2dldEltZ1VybChNTVBUX0lNR19FVkVOVDEpLCBnZXRJbWdVcmwoTU1QVF9JTUdfRVZFTlQyKV0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcGFuZWxDb250ZW50ID0gKHRpdGxlLCB1cmwpID0+IGANCjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICNmZjk5MzM7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAxNHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmOGMwMDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RpdGxlfQ0KPC9kaXY+DQo8ZGl2IGNsYXNzPSJldmVudC1pbWctY29udGFpbmVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7dXJsfSI+DQo8L2Rpdj4NCmA7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVmdC1ldmVudHMnKS5pbm5lckhUTUwgPSBwYW5lbENvbnRlbnQodGl0bGUxLCB1cmwxKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MID0gcGFuZWxDb250ZW50KHRpdGxlMiwgdXJsMik7DQogICAgICAgICAgICAgICAgTU1QVF9URU1QMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWV2ZW50cycpLmlubmVySFRNTDsNCiAgICAgICAgICAgICAgICBNTVBUX1RFTVAzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LWV2ZW50cycpLmlubmVySFRNTDsNCg0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoIkV2ZW50IHBhbmVscyBmYWlsZWQ6IiwgZSk7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1VwZGF0ZXMgdGhlIGxhdGVzdCBCYW5rIFN0YXRlbWVudHMgZnJvbSBhbiBFeGNlbCBGaWxlIFN0YXRlbWVudHMueGxzIC0gQ3JlYXRlcyBuZXcgcmNlaXB0cw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQWRkIHRoaXMgdG8geW91ciBnbG9iYWwgdmFyaWFibGVzIGF0IHRoZSB0b3ANCiAgICAgICAgbGV0IGlzQmFua1VwZGF0ZWQgPSBmYWxzZTsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiB1cGRhdGVCYW5rU3RhdGVtZW50cyh0b2tlbikgew0KICAgICAgICAgICAgaWYgKCF0b2tlbikgeyBhbGVydCgiRXJyb3I6IE5vIFRva2VuIGZvdW5kLiIpOyByZXR1cm47IH0NCiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYW5rLXN5bmMtYnRuJyk7DQogICAgICAgICAgICBpZiAoYnRuKSB7IGJ0bi5pbm5lclRleHQgPSAiU3luY2luZy4uLiI7IGJ0bi5kaXNhYmxlZCA9IHRydWU7IH0NCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBGZXRjaCBFeGNlbCAmIEJhbmsgU3RhdGVtZW50IChNTVBUMy5LUCkNCiAgICAgICAgICAgICAgICBjb25zdCBleGNlbFJlcyA9IGF3YWl0IGZldGNoKCJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2YyN211eWxvYmRhanZ6bXhjaTg1ZC9CYW5rU3RhdGVtZW50Lnhscz9ybGtleT1yNDNqMHN2bm1saWczcW02aWFpcmJ0b2pkJmRsPTEiLCB7IGNhY2hlOiAnbm8tc3RvcmUnIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgZXhjZWxSZXMuYXJyYXlCdWZmZXIoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZChhcnJheUJ1ZmZlciwgeyB0eXBlOiAnYXJyYXknLCBjZWxsRGF0ZXM6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZXhjZWxSb3dzID0gWExTWC51dGlscy5zaGVldF90b19qc29uKHdvcmtib29rLlNoZWV0c1t3b3JrYm9vay5TaGVldE5hbWVzWzBdXSwgeyBoZWFkZXI6IDEgfSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBiYW5rRmlsZVJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0JBTksgfSkgfSwNCiAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICduby1zdG9yZScNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCBsb2NhbEJhbmtDb250ZW50ID0gYmFua0ZpbGVSZXMub2sgPyAoYXdhaXQgYmFua0ZpbGVSZXMudGV4dCgpKS50cmltKCkgOiAiIjsNCiAgICAgICAgICAgICAgICBsZXQgYmFua0xpbmVzID0gbG9jYWxCYW5rQ29udGVudC5zcGxpdCgnXG4nKS5maWx0ZXIobCA9PiBsLmluY2x1ZGVzKCd8JykpOw0KDQogICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRCYWwgPSAwOw0KICAgICAgICAgICAgICAgIGlmIChiYW5rTGluZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdExpbmUgPSBiYW5rTGluZXNbYmFua0xpbmVzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50QmFsID0gcGFyc2VGbG9hdChsYXN0TGluZS5zcGxpdCgnfCcpWzVdLnJlcGxhY2UoL1teXGQuXS9nLCAnJykpIHx8IDA7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgbGV0IG5ld2x5QWRkZWRCYW5rTGluZXMgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgd29ya2luZ0JhbmtDb250ZW50ID0gbG9jYWxCYW5rQ29udGVudDsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIFByb2Nlc3MgRXhjZWwgUm93cw0KICAgICAgICAgICAgICAgIGZvciAobGV0IHJvdyBvZiBleGNlbFJvd3MpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGVWYWwgPSByb3dbMF07DQogICAgICAgICAgICAgICAgICAgIGxldCBpc0RhdGUgPSBkYXRlVmFsIGluc3RhbmNlb2YgRGF0ZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGlzRGF0ZVN0ciA9IHR5cGVvZiBkYXRlVmFsID09PSAnc3RyaW5nJyAmJiAvXlxkezEsMn1cL1xkezEsMn1cL1xkezR9Ly50ZXN0KGRhdGVWYWwudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0RhdGUgJiYgIWlzRGF0ZVN0cikgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRTdHIgPSBpc0RhdGUgPyBgJHtTdHJpbmcoZGF0ZVZhbC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9LyR7U3RyaW5nKGRhdGVWYWwuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9LyR7ZGF0ZVZhbC5nZXRGdWxsWWVhcigpfWAgOiBkYXRlVmFsLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgcmVmID0gKHJvd1sxXSB8fCAiIikudG9TdHJpbmcoKS5yZXBsYWNlKC9ccysvZywgJyAnKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjaHEgPSAocm93WzJdIHx8ICIiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRlYiA9IHBhcnNlRmxvYXQocm93WzNdKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY3JlID0gcGFyc2VGbG9hdChyb3dbNF0pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgIGxldCByb3dCYWwgPSBwYXJzZUZsb2F0KHJvd1s1XSkgfHwgMDsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgcm93U3RyaW5nID0gYCR7ZFN0cn18JHtyZWZ9fCR7Y2hxfXwke2RlYiB8fCAiIn18JHtjcmUgfHwgIiJ9fCR7cm93QmFsLnRvRml4ZWQoMil9fGA7DQogICAgICAgICAgICAgICAgICAgIGlmICh3b3JraW5nQmFua0NvbnRlbnQuaW5jbHVkZXMocm93U3RyaW5nLnRyaW0oKSkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIHdvcmtpbmdCYW5rQ29udGVudCArPSAod29ya2luZ0JhbmtDb250ZW50Lmxlbmd0aCA+IDAgPyAiXG4iIDogIiIpICsgcm93U3RyaW5nOw0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50QmFsID0gcm93QmFsOw0KICAgICAgICAgICAgICAgICAgICBuZXdseUFkZGVkQmFua0xpbmVzLnB1c2gocm93U3RyaW5nKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobmV3bHlBZGRlZEJhbmtMaW5lcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgQTogVVBEQVRFIEJBTksgRklMRSAoTU1QVDMuS1ApDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgInBhdGgiOiBNTVBUX0ZJTEVfQkFOSywgIm1vZGUiOiAib3ZlcndyaXRlIiB9KSwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB3b3JraW5nQmFua0NvbnRlbnQNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCBCOiBET1dOTE9BRCBNQUlOIERCIChNTVBUMi5LUCkNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfSwgY2FjaGU6ICduby1zdG9yZScNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50REJDb250ZW50ID0gKGF3YWl0IGRiUmVzLnRleHQoKSkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZGJMaW5lcyA9IGN1cnJlbnREQkNvbnRlbnQuc3BsaXQoJ1xuJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IG1heENHID0gMDsNCiAgICAgICAgICAgICAgICAgICAgZGJMaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RDb2wgPSBsaW5lLnNwbGl0KCd8JylbMF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb2wudG9VcHBlckNhc2UoKS5zdGFydHNXaXRoKCJDRyIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBwYXJzZUludChmaXJzdENvbC5yZXBsYWNlKCJDRyIsICIiKSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA+IG1heENHKSBtYXhDRyA9IG47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEZldGNoIEV4ZW1wdCBMaXN0DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4UmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogRVhFTVBUX0ZJTEUgfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiBudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGV4ZW1wdFBocmFzZXMgPSAoZXhSZXMgJiYgZXhSZXMub2spID8gKGF3YWl0IGV4UmVzLnRleHQoKSkuc3BsaXQoJ1xuJykubWFwKHAgPT4gcC50cmltKCkudG9Mb3dlckNhc2UoKSkuZmlsdGVyKHAgPT4gcCkgOiBbXTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIEM6IEdFTkVSQVRFIE5FVyBSRUNFSVBUUw0KICAgICAgICAgICAgICAgICAgICBsZXQgbmV3UiA9IFtdOw0KICAgICAgICAgICAgICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHRvZGF5U3RyID0gYCR7U3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9LSR7U3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0tJHtub3cuZ2V0RnVsbFllYXIoKX1gOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaW1wb3J0Q29tbWVudCA9ICJBdXRvIEltcG9ydGVkOiIgKyB0b2RheVN0cjsNCg0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiTGluZSBvZiBuZXdseUFkZGVkQmFua0xpbmVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFydHMgPSBiTGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFtdCA9IHBhcnNlRmxvYXQocGFydHNbNF0pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVmVGV4dCA9IHBhcnRzWzFdOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW10IDw9IDAgfHwgcmVmVGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJjYXNoIikpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4ZW1wdFBocmFzZXMuc29tZShwID0+IHJlZlRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwKSkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBtYXhDRysrOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJObyA9ICJDRyIgKyBTdHJpbmcobWF4Q0cpLnBhZFN0YXJ0KDYsICcwJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgckRhdGUgPSBwYXJ0c1swXS5yZXBsYWNlKC9cLy9nLCAnLScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJUb3cgPSAoYW10ID49IDEwMDAwKSA/ICJDT1JQVVMiIDogIk9USEVSUyI7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZSA9IHJlZlRleHQudG9VcHBlckNhc2UoKS5pbmNsdWRlcygiVVBJIikgPyAiVVBJIiA6IChyZWZUZXh0LnRvVXBwZXJDYXNlKCkuaW5jbHVkZXMoIkNIUSIpIHx8IHJlZlRleHQudG9VcHBlckNhc2UoKS5pbmNsdWRlcygiQ0hFUVVFIikgPyAiQ0hFUVVFIiA6ICJPTkxJTkUiKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1JvdyA9IGAke3JOb318JHtyRGF0ZX18fHx8fHx8fCR7YW10fXwke3JlZlRleHR9fCR7bW9kZX18JHtyVG93fXx8JHtpbXBvcnRDb21tZW50fXwwMDAwMDB8fHx8SU5ESUF8YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1IucHVzaChuZXdSb3cpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1IubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCBEOiBVUExPQUQgVVBEQVRFRCBNQUlOIERCDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkREIgPSBjdXJyZW50REJDb250ZW50ICsgIlxuIiArIG5ld1Iuam9pbignXG4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IE1NUFRfRklMRV9EQiwgIm1vZGUiOiAib3ZlcndyaXRlIiB9KSwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogdXBkYXRlZERCDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIFNURVAgRTogQ1JJVElDQUwgRklYIC0gVVBEQVRFIFNFUVVFTkNFLlRYVCAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG11c3QgdXBkYXRlIHRoZSBDbG91ZCBTZXF1ZW5jZSBzbyB0aGUgbmV4dCAiUk4iIGtub3dzIHRoZSBuZXcgc3RhcnRpbmcgcG9pbnQuDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQ6IExhc3RSZWNlaXB0TnVtYmVyfFRvdGFsUmVjb3JkQ291bnQNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RvdGFsQ291bnQgPSBkYkxpbmVzLmxlbmd0aCArIG5ld1IubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFJlY2VpcHRObyA9ICJDRyIgKyBTdHJpbmcobWF4Q0cpLnBhZFN0YXJ0KDYsICcwJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXF1ZW5jZUNvbnRlbnQgPSBgJHtsYXN0UmVjZWlwdE5vfXwke25ld1RvdGFsQ291bnR9YDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogIi9zZXF1ZW5jZS50eHQiLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHNlcXVlbmNlQ29udGVudA0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBTVUNDRVNTIVxuQmFuayB1cGRhdGVkLlxuJHtuZXdSLmxlbmd0aH0gUmVjZWlwdHMgYWRkZWQuXG5TZXF1ZW5jZSB1cGRhdGVkIHRvOiAke2xhc3RSZWNlaXB0Tm99YCk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiQmFuayBVcGRhdGVkLiBObyBEb25vciByZWNlaXB0cyB3ZXJlIG5lZWRlZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlzQmFua1VwZGF0ZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiQWxyZWFkeSB1cCB0byBkYXRlLiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJDUklUSUNBTCBFUlJPUjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKGJ0bikgeyBidG4uaW5uZXJUZXh0ID0gIkJhbmsgVXBkYXRlIjsgYnRuLmRpc2FibGVkID0gZmFsc2U7IH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1N1bW1hcnkgTWFpbiBDYWxscyBhbGwNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHNob3dEb25hdGlvblN1bW1hcnkoKSB7DQogICAgICAgICAgICAvLyAxLiBJbml0aWFsaXplIHRvdGFscyBhcyBudW1iZXJzDQogICAgICAgICAgICBsZXQgdG90YWxzID0geyB0b2RheTogMCwgd2VlazogMCwgbW9udGg6IDAsIHllYXI6IDAsIGZpblllYXI6IDAsIG92ZXJhbGw6IDAgfTsNCg0KICAgICAgICAgICAgTU1QVF9URU1QMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWV2ZW50cycpLmlubmVySFRNTDsNCiAgICAgICAgICAgIE1NUFRfVEVNUDMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MOw0KDQoNCiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAvLyBHZXQgdGltZXN0YW1wcyBmb3IgbWlkbmlnaHQgdG9kYXkgYW5kIDcgZGF5cyBhZ28gdG8gZW5zdXJlIGFjY3VyYXRlICJXZWVrIiBjb3VudGluZw0KICAgICAgICAgICAgY29uc3QgdG9kYXlNaWRuaWdodCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgbm93LmdldERhdGUoKSkuZ2V0VGltZSgpOw0KICAgICAgICAgICAgY29uc3Qgc2V2ZW5EYXlzQWdvID0gdG9kYXlNaWRuaWdodCAtICg3ICogMjQgKiA2MCAqIDYwICogMTAwMCk7DQoNCiAgICAgICAgICAgIGNvbnN0IGN1ck0gPSBub3cuZ2V0TW9udGgoKTsgLy8gMC0xMQ0KICAgICAgICAgICAgY29uc3QgY3VyWSA9IG5vdy5nZXRGdWxsWWVhcigpOw0KDQogICAgICAgICAgICAvLyBGaW5hbmNpYWwgWWVhciBMb2dpYzogU3RhcnRzIEFwcmlsIDFzdA0KICAgICAgICAgICAgLy8gSW4gSmFuIDIwMjYsIHRoZSBGWSBzdGFydGVkIEFwcmlsIDEsIDIwMjUNCiAgICAgICAgICAgIGNvbnN0IGZ5U3RhcnRZZWFyID0gKGN1ck0gPj0gMykgPyBjdXJZIDogY3VyWSAtIDE7DQogICAgICAgICAgICBjb25zdCBmeVN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGZ5U3RhcnRZZWFyLCAzLCAxKS5nZXRUaW1lKCk7DQoNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIGlmICghbGluZS50cmltKCkgfHwgaW5kZXggPT09IDApIHJldHVybjsgLy8gU2tpcCBlbXB0eSBhbmQgaGVhZGVyDQoNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbGluZS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gQ2FuY2VsbGF0aW9uIENoZWNrIChGaWVsZCAxMyBpcyBZRVMgb3IgTk8pDQogICAgICAgICAgICAgICAgaWYgKGZbMTNdICYmIGZbMTNdLnRyaW0oKS50b1VwcGVyQ2FzZSgpID09PSAiWUVTIikgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gQW1vdW50IENvbnZlcnNpb24gKEZpZWxkIDkpDQogICAgICAgICAgICAgICAgLy8gU3RyaXAgY29tbWFzL3NwYWNlcyBhbmQgZm9yY2UgdG8gZmxvYXQNCiAgICAgICAgICAgICAgICBsZXQgYW10ID0gMDsNCiAgICAgICAgICAgICAgICBpZiAoZls5XSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5BbXQgPSBmWzldLnRvU3RyaW5nKCkucmVwbGFjZSgvW15cZC5dL2csICcnKTsNCiAgICAgICAgICAgICAgICAgICAgYW10ID0gcGFyc2VGbG9hdChjbGVhbkFtdCkgfHwgMDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBEYXRlIFBhcnNpbmcgKEZpZWxkIDEpDQogICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGZbMV0gfHwgIiI7DQogICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBkYXRlU3RyLnNwbGl0KC9bXC9cLV0vKTsNCiAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoICE9PSAzKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAvLyBERC9NTS9ZWVlZDQogICAgICAgICAgICAgICAgY29uc3QgZCA9IHBhcnNlSW50KHBhcnRzWzBdLCAxMCk7DQogICAgICAgICAgICAgICAgY29uc3QgbSA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCkgLSAxOw0KICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBwYXJzZUludChwYXJ0c1syXSwgMTApOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlY0RhdGUgPSBuZXcgRGF0ZSh5LCBtLCBkKTsNCiAgICAgICAgICAgICAgICBjb25zdCByZWNUaW1lID0gcmVjRGF0ZS5nZXRUaW1lKCk7DQoNCiAgICAgICAgICAgICAgICAvLyA1LiBBY2N1bXVsYXRlIFRvdGFscw0KICAgICAgICAgICAgICAgIHRvdGFscy5vdmVyYWxsICs9IGFtdDsNCg0KICAgICAgICAgICAgICAgIC8vIFRvZGF5DQogICAgICAgICAgICAgICAgaWYgKHJlY1RpbWUgPT09IHRvZGF5TWlkbmlnaHQpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLnRvZGF5ICs9IGFtdDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBUaGlzIFdlZWsgKDcgRGF5cyBpbmNsdXNpdmUgb2YgY3VycmVudCB0aW1lKQ0KICAgICAgICAgICAgICAgIGlmIChyZWNUaW1lID49IHNldmVuRGF5c0FnbyAmJiByZWNUaW1lIDw9IG5vdy5nZXRUaW1lKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLndlZWsgKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFRoaXMgTW9udGggKEphbiAyMDI2KQ0KICAgICAgICAgICAgICAgIGlmIChtID09PSBjdXJNICYmIHkgPT09IGN1clkpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLm1vbnRoICs9IGFtdDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBUaGlzIFllYXIgKDIwMjYpDQogICAgICAgICAgICAgICAgaWYgKHkgPT09IGN1clkpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLnllYXIgKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEZpbmFuY2lhbCBZZWFyIChBcHJpbCB0byBub3cpDQogICAgICAgICAgICAgICAgaWYgKHJlY1RpbWUgPj0gZnlTdGFydERhdGUgJiYgcmVjVGltZSA8PSBub3cuZ2V0VGltZSgpKSB7DQogICAgICAgICAgICAgICAgICAgIHRvdGFscy5maW5ZZWFyICs9IGFtdDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgZGlzcGxheVN1bW1hcnlUYWJsZSh0b3RhbHMpOw0KICAgICAgICAgICAgc2hvd0RvbmF0aW9uU3VtbWFyeTEoKTsNCiAgICAgICAgICAgIHNob3dEb25hdGlvblN1bW1hcnkzKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TdW1tYXJ5IENvbG91bSAyIE1pZGRsZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gZGlzcGxheVN1bW1hcnlUYWJsZShkYXRhKSB7DQogICAgICAgICAgICBjb25zdCB0YWJsZUhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3VtbWFyeS1jb250YWluZXIiIHN0eWxlPSJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjVweDsgYm9yZGVyOiAycHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogMTJweDsgbWFyZ2luOiAxMHB4IGF1dG87IG1heC13aWR0aDogNTAwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjogI2ZmOTkzMzsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAyMHB4OyBmb250LWZhbWlseTogJ0FyaWFsIEJsYWNrJywgc2Fucy1zZXJpZjsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNmZmY4ZjA7IHBhZGRpbmctYm90dG9tOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBET05BVElPTlMgU1VNTUFSWQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gyPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmY5OTMzOyBjb2xvcjogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyB0ZXh0LWFsaWduOiBsZWZ0OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+Q2F0ZWdvcnk8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6IDEycHg7IHRleHQtYWxpZ246IHJpZ2h0OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+QW1vdW50ICjigrkpPC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsiPlRvZGF5PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS50b2RheS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+VGhpcyBXZWVrPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS53ZWVrLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5UaGlzIE1vbnRoPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS5tb250aC50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+Q2FsZW5kYXIgWWVhciAoJHtuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCl9KTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEueWVhci50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI2ZmZjhmMDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI2QzNTQwMDsiPkZpbmFuY2lhbCBZZWFyPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjZDM1NDAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEuZmluWWVhci50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij5PVkVSQUxMIFRPVEFMPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMS4yZW07Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS5vdmVyYWxsLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDE1cHg7IGZvbnQtc2l6ZTogMTFweDsgY29sb3I6ICM3ZjhjOGQ7IHRleHQtYWxpZ246IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhdGVkIG9uICR7bmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX08YnI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQ2FuY2VsbGVkIHJlY2VpcHRzIGV4Y2x1ZGVkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjZWlwdF9kaXNwbGF5X2FyZWEnKS5pbm5lckhUTUwgPSB0YWJsZUhUTUw7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TdW1tYXJ5IENvbG91bSAxDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBzaG93RG9uYXRpb25TdW1tYXJ5MSgpIHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjYWxjdWxhdGVCcmVha2Rvd25EYXRhKCkubW9kZVN1bW1hcnk7DQogICAgICAgICAgICBsZXQgdG90YWwgPSAwOw0KICAgICAgICAgICAgbGV0IHJvd3NIdG1sID0gIiI7DQoNCiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7DQogICAgICAgICAgICAgICAgdG90YWwgKz0gdmFsdWU7DQogICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij4ke2tleX08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+JHt2YWx1ZS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX08L3RkPjwvdHI+YDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQtZXZlbnRzJykuaW5uZXJIVE1MID0gZ2VuZXJhdGVTdHlsZWRUYWJsZSgiUGF5bWVudCBNb2RlIiwgcm93c0h0bWwsIHRvdGFsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1N1bW1hcnkgQ29sb3VtIDMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHNob3dEb25hdGlvblN1bW1hcnkzKCkgew0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IGNhbGN1bGF0ZUJyZWFrZG93bkRhdGEoKS50b3dhcmRzU3VtbWFyeTsNCiAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7DQogICAgICAgICAgICBsZXQgcm93c0h0bWwgPSAiIjsNCg0KICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHsNCiAgICAgICAgICAgICAgICB0b3RhbCArPSB2YWx1ZTsNCiAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsiPiR7a2V5fTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4ke3ZhbHVlLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfTwvdGQ+PC90cj5gOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MID0gZ2VuZXJhdGVTdHlsZWRUYWJsZSgiQ29udHJpYnV0aW9uIFRvd2FyZHMiLCByb3dzSHRtbCwgdG90YWwpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUmVzZXRzIHNpZGUgcGFuZWxzIGV2ZW50cyBqcGcgLSBmaXJzdCBhbmQgdGhpcmQgY29sb3VtbiBhZnRlciBzdW1tYXJ5ICBkaXNwbGF5DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiByZXNldFNpZGVQYW5lbHMoKSB7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVmdC1ldmVudHMnKS5pbm5lckhUTUwgPSBNTVBUX1RFTVAxOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LWV2ZW50cycpLmlubmVySFRNTCA9IE1NUFRfVEVNUDM7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Gb3IgU3VtbWFyeSAtIEJyZWFrZG93biBjYWxjdWxhdGlvbg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlQnJlYWtkb3duRGF0YSgpIHsNCiAgICAgICAgICAgIGNvbnN0IG1vZGVTdW1tYXJ5ID0geyAiQ2FzaCI6IDAsICJDaGVxdWUiOiAwLCAiVVBJIjogMCwgIk9ubGluZSI6IDAsICJPdGhlcnMiOiAwLCAiUE9TIjogMCB9Ow0KICAgICAgICAgICAgY29uc3QgdG93YXJkc1N1bW1hcnkgPSB7DQogICAgICAgICAgICAgICAgIk9USEVSUyI6IDAsICJDT1JQVVMiOiAwLCAiS1VNQkhBQkhJU0hFS0hBTSI6IDAsICJBTk5BREhBQU5BTSI6IDAsDQogICAgICAgICAgICAgICAgIkFOVVNIQSBQT09KQSI6IDAsICJBQVZBSEFOVEhJIEhPTUFNIjogMCwgIllBVEhJIE1BQUxBWUFNIjogMCwNCiAgICAgICAgICAgICAgICAiQlVJTERJTkciOiAwLCAiTklUSFlBUE9PSkFJIjogMA0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgY29scyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICBpZiAoY29scy5sZW5ndGggPCAxMykgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChjb2xzWzldKSB8fCAwOw0KICAgICAgICAgICAgICAgIGNvbnN0IG1vZGUgPSAoY29sc1sxMV0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0b3dhcmRzID0gKGNvbHNbMTJdIHx8ICIiKS5zcGxpdCgnLScpWzBdLnRyaW0oKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2FuY2VsbGVkID0gKGNvbHNbMTNdIHx8ICIiKS50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gIllFUyI7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWlzQ2FuY2VsbGVkKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFBvcHVsYXRlIE1vZGUgRGF0YQ0KICAgICAgICAgICAgICAgICAgICBpZiAobW9kZVN1bW1hcnkuaGFzT3duUHJvcGVydHkobW9kZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVTdW1tYXJ5W21vZGVdICs9IGFtb3VudDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVTdW1tYXJ5WyJPdGhlcnMiXSArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSBUb3dhcmRzIERhdGENCiAgICAgICAgICAgICAgICAgICAgaWYgKHRvd2FyZHNTdW1tYXJ5Lmhhc093blByb3BlcnR5KHRvd2FyZHMpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0b3dhcmRzU3VtbWFyeVt0b3dhcmRzXSArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0b3dhcmRzU3VtbWFyeVsiT1RIRVJTIl0gKz0gYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiB7IG1vZGVTdW1tYXJ5LCB0b3dhcmRzU3VtbWFyeSB9Ow0KICAgICAgICB9DQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9NYWluIFRhYmxlIFN0eWxlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBJbnRlcm5hbCBoZWxwZXIgdG8ga2VlcCB0aGUgZXhhY3QgZm9ybWF0IG9mIHlvdXIgQ29weSAoNSkgZmlsZQ0KICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVN0eWxlZFRhYmxlKHRpdGxlLCByb3dzLCB0b3RhbCkgew0KICAgICAgICAgICAgcmV0dXJuIGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBoZWlnaHQ6MTAwJTsgb3ZlcmZsb3cteTphdXRvOyBmb250LWZhbWlseTogc2Fucy1zZXJpZjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICMyYzNlNTA7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMS4yZW07Ij4ke3RpdGxlfTwvaDI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDIwcHg7IGJhY2tncm91bmQtY29sb3I6IHdoaXRlOyBmb250LXNpemU6IDEzcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmMzljMTI7IGNvbG9yOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IGxlZnQ7Ij5DYXRlZ29yeTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7Ij5BbW91bnQgKOKCuSk8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7cm93c30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+VE9UQUw8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxLjFlbTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt0b3RhbC50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vU2hvd3MgdXNlcnMgb25saW4gcGhvdG8gb24gdGhlIG1haW4gcGFnZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLyoqDQogICAgICAgICAqIFBIT1RPIExPQURFUiBFTkdJTkUNCiAgICAgICAgICogVXNlcyB0aGUgcHJvdmVuIFhIUiBtZXRob2QgZnJvbSB0aGUgbG9nbyBsb2dpYw0KICAgICAgICAgKi8NCiAgICAgICAgZnVuY3Rpb24gbG9hZFVzZXJQaG90b1ZpYVhIUihwYXRoLCB0YXJnZXRJZCkgew0KICAgICAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7DQogICAgICAgICAgICB4aHIub3BlbignUE9TVCcsICdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcpOw0KICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0KTsgLy8gVXNlcyBnbG9iYWwgdG9rZW4gJ3QnDQogICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignRHJvcGJveC1BUEktQXJnJywgSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IHBhdGggfSkpOw0KICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJzsNCg0KICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSB4aHIucmVzcG9uc2U7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldElkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGltZykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHVybDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAidHJhbnNwYXJlbnQiOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiUGhvdG8gRXJyb3IgIiArIHhoci5zdGF0dXMgKyAiOiAiICsgcGF0aCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldElkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGltZykgaW1nLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjNzc3IjsgLy8gRmFsbGJhY2sgZ3JheQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICB4aHIuc2VuZCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFVJIFdBVENIRVIgJiBQT0xMSU5HIEhBTkRMRVINCiAgICAgICAgICogV2F0Y2hlcyAnYWN0aXZlVXNlckxpc3QnIGZvciBjaGFuZ2VzIGZyb20geW91ciA2MHMgcG9sbA0KICAgICAgICAgKi8NCiAgICAgICAgY29uc3QgcGhvdG9XYXRjaGVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgbGlzdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0aXZlVXNlckxpc3QnKTsNCiAgICAgICAgICAgIGlmICghbGlzdEVsZW1lbnQpIHJldHVybjsNCg0KICAgICAgICAgICAgY29uc3QgcmF3VGV4dCA9IGxpc3RFbGVtZW50LmlubmVyVGV4dC50cmltKCk7DQoNCiAgICAgICAgICAgIC8vIFNhZmV0eTogRG9uJ3QgcnVuIGlmIGVtcHR5LCBqdXN0IHBvbGxpbmcgcGxhY2Vob2xkZXIsIG9yIGlmIGltYWdlcyBhbHJlYWR5IGV4aXN0DQogICAgICAgICAgICBpZiAoIXJhd1RleHQgfHwgcmF3VGV4dCA9PT0gIi0tLSIgfHwgbGlzdEVsZW1lbnQucXVlcnlTZWxlY3RvcignaW1nJykpIHJldHVybjsNCg0KICAgICAgICAgICAgLy8gMS4gUHJlcGFyZSBDb250YWluZXIgZm9yIE11bHRpcGxlIFVzZXJzDQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuc3R5bGUuZmxleFdyYXAgPSAid3JhcCI7DQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICJjZW50ZXIiOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuc3R5bGUuZ2FwID0gIjE1cHgiOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICI1cHgiOw0KDQogICAgICAgICAgICAvLyAyLiBDbGVhciB0ZXh0IGFuZCBidWlsZCBwaG90byBhcnJheQ0KICAgICAgICAgICAgLy8gU3VwcG9ydHMgc2luZ2xlIG5hbWUgb3IgY29tbWEtc2VwYXJhdGVkIG5hbWVzIGZyb20geW91ciBwb2xsZXINCiAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gcmF3VGV4dC5zcGxpdCgnLCcpLm1hcChuID0+IG4udHJpbSgpKTsNCiAgICAgICAgICAgIGxpc3RFbGVtZW50LmlubmVySFRNTCA9ICcnOw0KDQogICAgICAgICAgICBuYW1lcy5mb3JFYWNoKChuYW1lLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAiIikgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcElkID0gYHVzZXItcGljLSR7aW5kZXh9LSR7bmFtZS5yZXBsYWNlKC9ccysvZywgJycpfWA7DQogICAgICAgICAgICAgICAgY29uc3QgcFBhdGggPSAiL0ltYWdlcy8iICsgbmFtZSArICIuanBnIjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsNCiAgICAgICAgICAgICAgICB1c2VyV3JhcHBlci5zdHlsZS5mbGV4RGlyZWN0aW9uID0gImNvbHVtbiI7DQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOw0KICAgICAgICAgICAgICAgIHVzZXJXcmFwcGVyLnN0eWxlLm1pbldpZHRoID0gIjYwcHgiOw0KDQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBpZD0iJHtwSWR9IiBzdHlsZT0iDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQ0cHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA0NHB4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMyk7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD0iJHtuYW1lWzBdfSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDEwcHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDNweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LXNoYWRvdzogMXB4IDFweCAycHggYmxhY2s7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtuYW1lfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIGxpc3RFbGVtZW50LmFwcGVuZENoaWxkKHVzZXJXcmFwcGVyKTsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFRyaWdnZXIgaW5kaXZpZHVhbCBYSFIgbG9hZA0KICAgICAgICAgICAgICAgIGxvYWRVc2VyUGhvdG9WaWFYSFIocFBhdGgsIHBJZCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gSU5JVElBTElaRSBXQVRDSEVSDQogICAgICAgIGNvbnN0IG9ic2VydmVyVGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZVVzZXJMaXN0Jyk7DQogICAgICAgIGlmIChvYnNlcnZlclRhcmdldCkgew0KICAgICAgICAgICAgcGhvdG9XYXRjaGVyLm9ic2VydmUob2JzZXJ2ZXJUYXJnZXQsIHsgY2hpbGRMaXN0OiB0cnVlLCBjaGFyYWN0ZXJEYXRhOiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pOw0KICAgICAgICB9DQoNCg0KICAgICAgICBmdW5jdGlvbiBjaGVja1Vuc2F2ZWRDaGFuZ2VzKGNhbGxiYWNrKSB7DQogICAgICAgICAgICBpZiAoIWlzRGlydHkpIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgdXNlckNob2ljZSA9IGNvbmZpcm0oIlJlY2VpcHQgTm90IFNhdmVkISBcblxuQ2xpY2sgT0sgdG8gRElTQ0FSRCBjaGFuZ2VzLiBcbkNsaWNrIENBTkNFTCB0byBTVEFZIGFuZCBTYXZlLiIpOw0KDQogICAgICAgICAgICBpZiAodXNlckNob2ljZSkgew0KICAgICAgICAgICAgICAgIGlzRGlydHkgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB0b2dnbGVMb2NrKHRydWUpOyAvLyBUaGlzIHJlLWVuYWJsZXMgc2VhcmNoIGFuZCBuYXYgYXV0b21hdGljYWxseQ0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TYXZlcyBhIG1vZGlmaWVkIG9yIG5ldyByZWNlaXB0IC0gYSBhdWRpdCBvZiByZWNlaXB0IGlzIHByb21wdGVkIGJlZm9yZSBzYXZpbmcuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzYXZlUmVjb3JkKCkgew0KICAgICAgICAgICAgLy8gMS4gUnVuIHRoZSBBdWRpdCBmaXJzdA0KICAgICAgICAgICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgcnVuQXVkaXQoKTsNCiAgICAgICAgICAgIGlmICghY29uZmlybWVkKSByZXR1cm47IC8vIFN0b3AgaWYgdXNlciBjYW5jZWxzDQoNCiAgICAgICAgICAgIGNvbnN0IHJlY29yZElkeFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkTnVtYmVyRGlzcGxheScpLnZhbHVlOw0KICAgICAgICAgICAgaWYgKHJlY29yZElkeFRleHQgPT09ICItLS0iKSByZXR1cm47DQogICAgICAgICAgICBjb25zdCBpZHggPSBwYXJzZUludChyZWNvcmRJZHhUZXh0KTsNCiAgICAgICAgICAgIGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3NhdmUnKTsNCg0KICAgICAgICAgICAgLy8gMi4gR2F0aGVyIGRhdGEgaW4gZXhhY3Qgb3JkZXIgKEluZGljZXMgMC0xOSkNCiAgICAgICAgICAgIGNvbnN0IHJvd0RhdGEgPSBbDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUsICAgICAgICAgICAvLyAwDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZSwgICAgICAgICAgICAvLyAxDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZSwgICAgICAgICAgICAvLyAyDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Bob25lJykudmFsdWUsICAgICAgICAgICAvLyAzDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2FkZHJlc3MnKS52YWx1ZS5yZXBsYWNlKC9cbi9nLCAnficpLCAvLyA0DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2VtYWlsJykudmFsdWUsICAgICAgICAgICAvLyA1DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpLnZhbHVlLCAgICAgICAgICAgICAvLyA2DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3N0YXInKS52YWx1ZSwgICAgICAgICAgICAvLyA3DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2dvdGhyYW0nKS52YWx1ZSwgICAgICAgICAvLyA4DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlLCAgICAgICAgICAvLyA5DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlZicpLnZhbHVlLCAgICAgICAgICAgICAvLyAxMA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9tb2RlJykudmFsdWUsICAgICAgICAgICAgLy8gMTENCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlLCAgICAgICAgIC8vIDEyDQogICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKS5jaGVja2VkID8gIllFUyIgOiAiTk8iKSwgLy8gMTMNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY29tbWVudHMnKS52YWx1ZS5yZXBsYWNlKC9cbi9nLCAnficpLCAvLyAxNA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUsICAgICAgICAgIC8vIDE1DQogICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wcmludGVkJykuY2hlY2tlZCA/ICJZRVMiIDogIk5PIiksICAvLyAxNg0KICAgICAgICAgICAgICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcHJhc2FkYW0nKS5jaGVja2VkID8gIllFUyIgOiAiTk8iKSwgLy8gMTcNCiAgICAgICAgICAgICAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvcnB1cycpLmNoZWNrZWQgPyAiWUVTIiA6ICJOTyIpLCAgIC8vIDE4DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvdW50cnknKS52YWx1ZSAgICAgICAgICAgLy8gMTkNCiAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRMaW5lID0gcm93RGF0YS5qb2luKCd8Jyk7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgc2F2ZUJ0bi5pbm5lclRleHQgPSAiU3luY2luZy4uLiI7DQogICAgICAgICAgICAgICAgc2F2ZUJ0bi5kaXNhYmxlZCA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVNbaWR4XSA9IHVwZGF0ZWRMaW5lOw0KDQogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogTU1QVF9GSUxFX0RCLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IEdMT0JBTF9EQl9MSU5FUy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coIk1PRElGSUVEIFJFQ09SRDogIiArIHVwZGF0ZWRMaW5lKTsNCiAgICAgICAgICAgICAgICBhbGVydCgiUmVjb3JkIFNhdmVkIGFuZCBTeW5jZWQuIik7DQogICAgICAgICAgICAgICAgdG9nZ2xlTG9jayh0cnVlKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIlN5bmMgRXJyb3I6ICIgKyBlcnJvci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgc2F2ZUJ0bi5pbm5lclRleHQgPSAiU2F2ZSI7DQogICAgICAgICAgICAgICAgc2F2ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFByb21wdCBmb3IgdXNlciB3aGVuIGhlIGxlYXZlcyByZWNlaXB0IHdpdGhvdXQgc2F2aW5nDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBjb25maXJtTG9jaygpIHsNCiAgICAgICAgICAgIGlmIChpc0RpcnR5KSB7DQogICAgICAgICAgICAgICAgY29uc3QgdXNlckNob2ljZSA9IGNvbmZpcm0oIlJlY2VpcHQgTm90IFNhdmVkISBcblxuQ2xpY2sgT0sgdG8gRElTQ0FSRCBjaGFuZ2VzIGFuZCBMb2NrLiBcbkNsaWNrIENBTkNFTCB0byBzdGF5IGFuZCBTYXZlLiIpOw0KICAgICAgICAgICAgICAgIGlmICghdXNlckNob2ljZSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFVzZXIgY2xpY2tlZCBDYW5jZWwsIHNvIGRvIG5vdGhpbmcgKHN0YXkgaW4gZWRpdCBtb2RlKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIElmIG5vdCBkaXJ0eSwgb3IgaWYgdXNlciBjaG9zZSB0byBkaXNjYXJkLCBwcm9jZWVkIHRvIGxvY2sNCiAgICAgICAgICAgIGlzRGlydHkgPSBmYWxzZTsNCiAgICAgICAgICAgIHRvZ2dsZUxvY2sodHJ1ZSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gUk4gQnV0dG9uIC0gQ3JlYXRlcyBhIG5ldyByZWNlaXB0IGJ5IGFzc2lnbmluZyBuZXcgcmVjZWlwdCBudW1iZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1JlY2VpcHQoKSB7DQogICAgICAgICAgICBjb25zdCBybkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fcm4nKTsNCg0KICAgICAgICAgICAgLy8gMS4gRGlzYWJsZSBidXR0b24gdG8gcHJldmVudCBkb3VibGUtY2xpY2tzDQogICAgICAgICAgICBybkJ0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICBybkJ0bi5pbm5lclRleHQgPSAiQXNzaWduaW5nLi4uIjsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnYWN0aW9uJywgJ2dldE5ld1JlY2VpcHQnKTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIENhbGwgdGhlIEdvb2dsZSBTY3JpcHQNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHNjcmlwdFVSTCwgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgYm9keTogZm9ybURhdGENCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFBhcnNlIHRoZSBKU09OIHJlc3BvbnNlDQogICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0VGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZXN1bHRUZXh0KTsNCg0KICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlY2VpcHQgJiYgZGF0YS5pbmRleCkgew0KICAgICAgICAgICAgICAgICAgICAvLyA0LiBVcGRhdGUgdGhlIGhpZGRlbi9kaXNwbGF5IHJlY29yZCBpbmRleA0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkTnVtYmVyRGlzcGxheScpLnZhbHVlID0gZGF0YS5pbmRleDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA1LiBQb3B1bGF0ZSBGaWVsZHMgd2l0aCBEZWZhdWx0cw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVjbm8nKS52YWx1ZSA9IGRhdGEucmVjZWlwdDsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hZGRyZXNzJykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2VtYWlsJykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVmJykudmFsdWUgPSAiIjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBZb3VyIHJlcXVlc3RlZCBkZWZhdWx0cw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGluY29kZScpLnZhbHVlID0gIjAwMDAwMCI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb3VudHJ5JykudmFsdWUgPSAiSU5ESUEiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbW9kZScpLnZhbHVlID0gIkNBU0giOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlID0gIk9USEVSUyI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRvIENhbmNlbGxlZD1ZRVMgaW5pdGlhbGx5IGFzIGEgcGxhY2Vob2xkZXINCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NhbmNlbCcpLmNoZWNrZWQgPSB0cnVlOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDYuIFVubG9jayBmb3IgZW50cnkNCiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlTG9jayhmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGlzRGlydHkgPSB0cnVlOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDcuIFN5bmMgbG9jYWwgbWVtb3J5IHNvIHRoZSBuZXcgcm93IGV4aXN0cyBpbiB0aGUgYnJvd3NlcidzIGxpc3QNCiAgICAgICAgICAgICAgICAgICAgLy8gV2UgY3JlYXRlIGEgYmxhbmsgcGlwZXMgc3RyaW5nIHRvIHJlcHJlc2VudCB0aGUgbmV3IHJvdyBsb2NhbGx5DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsYW5rUm93ID0gYCR7ZGF0YS5yZWNlaXB0fXx8fHx8fHx8fHx8fHxZRVN8fDAwMDAwMHx8fE98SU5ESUFgOw0KICAgICAgICAgICAgICAgICAgICAvL2NvbnN0IGJsYW5rUm93ID0gYCR7ZGF0YS5yZWNlaXB0fXx8fHx8fHx8fHx8fHxZRVN8fDAwMDAwMHxOT3xOT3xOT3xJTkRJQWA7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgR0xPQkFMX0RCX0xJTkVTICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLnB1c2goYmxhbmtSb3cpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5ldyBSZWNlaXB0IEFzc2lnbmVkOiAiICsgZGF0YS5yZWNlaXB0ICsgIlxuUmVjb3JkIEluZGV4OiAiICsgZGF0YS5pbmRleCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGRhdGEgcmVjZWl2ZWQgZnJvbSBzZXJ2ZXIiKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJSTiBFcnJvcjoiLCBlKTsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3IgZ2V0dGluZyBuZXcgbnVtYmVyOiAiICsgZS5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICBybkJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHJuQnRuLmlubmVyVGV4dCA9ICJSTiI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gYnkgZGVmYXVsdCBhbGwgcmVjZWlwdCBmaWVsZHMgYXJlIGxvY2tlZC4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUxvY2soc2hvdWxkTG9jaykgew0KICAgICAgICAgICAgY29uc3QgZmllbGRzID0gWydmaWVsZF9yZWNubycsICdmaWVsZF9kYXRlJywgJ2ZpZWxkX25hbWUnLCAnZmllbGRfcGhvbmUnLCAnZmllbGRfYWRkcmVzcycsICdmaWVsZF9lbWFpbCcsICdmaWVsZF9wYW4nLCAnZmllbGRfc3RhcicsICdmaWVsZF9nb3RocmFtJywgJ2ZpZWxkX2Ftb3VudCcsICdmaWVsZF9yZWYnLCAnZmllbGRfbW9kZScsICdmaWVsZF90b3dhcmRzJywgJ2ZpZWxkX2NvbW1lbnRzJywgJ2ZpZWxkX3BpbmNvZGUnLCAnZmllbGRfY291bnRyeScsICdmaWVsZF9jYW5jZWwnLCAnZmllbGRfcHJpbnRlZCcsICdmaWVsZF9wcmFzYWRhbScsICdmaWVsZF9jb3JwdXMnXTsNCg0KICAgICAgICAgICAgY29uc3QgY2hlY2tib3hSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hlY2tib3hfcm93Jyk7DQogICAgICAgICAgICBjb25zdCBzSW5wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3NlYXJjaCcpOw0KICAgICAgICAgICAgY29uc3Qgc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hCdG4nKTsNCiAgICAgICAgICAgIGNvbnN0IG5hdkJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnRuLW5hdicpOw0KICAgICAgICAgICAgY29uc3Qgc2F2ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fc2F2ZScpOw0KICAgICAgICAgICAgY29uc3Qgcm5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLXJuJyk7IC8vIEFkZGVkDQoNCiAgICAgICAgICAgIGZpZWxkcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsLnR5cGUgPT09ICJjaGVja2JveCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmRpc2FibGVkID0gc2hvdWxkTG9jazsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnJlYWRPbmx5ID0gc2hvdWxkTG9jazsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmQgPSBzaG91bGRMb2NrID8gIiNmZmZmZTAiIDogIiNmZmZmZmYiOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFzaG91bGRMb2NrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrRGlydHkgPSAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEaXJ0eSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNhdmVCdG4pIHNhdmVCdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc0lucCkgc0lucC5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNCdG4pIHNCdG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdkJ0bnMuZm9yRWFjaChiID0+IGIuZGlzYWJsZWQgPSB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5vbmlucHV0ID0gbWFya0RpcnR5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZWwub25jaGFuZ2UgPSBtYXJrRGlydHk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgaWYgKGNoZWNrYm94Um93KSB7DQogICAgICAgICAgICAgICAgY2hlY2tib3hSb3cuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2hvdWxkTG9jayA/ICIjZmZmZmUwIiA6ICIjZmZmZmZmIjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl91bmxvY2snKS5kaXNhYmxlZCA9ICFzaG91bGRMb2NrOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9sb2NrJykuZGlzYWJsZWQgPSBzaG91bGRMb2NrOw0KICAgICAgICAgICAgaWYgKHNhdmVCdG4pIHNhdmVCdG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgaWYgKHJuQnRuKSBybkJ0bi5kaXNhYmxlZCA9ICFzaG91bGRMb2NrOyAvLyBSTiBhY3RpdmUgb25seSB3aGVuIGxvY2tlZA0KDQogICAgICAgICAgICBpZiAoc2hvdWxkTG9jaykgew0KICAgICAgICAgICAgICAgIGlzRGlydHkgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBpZiAoc0lucCkgc0lucC5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGlmIChzQnRuKSBzQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgbmF2QnRucy5mb3JFYWNoKGIgPT4gYi5kaXNhYmxlZCA9IGZhbHNlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBFc3NlbnRpYWwgZml4ZXMgLSBtaXNjDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAtLS0gSU5JVElBTElaQVRJT04gQU5EIFNFQVJDSCBGSVggLS0tDQogICAgICAgIChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBjb25zdCBwaG9uZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Bob25lJyk7DQogICAgICAgICAgICBjb25zdCBmZXRjaEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fZmV0Y2gnKTsNCiAgICAgICAgICAgIGNvbnN0IHNlYXJjaEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hCdG4nKTsNCg0KICAgICAgICAgICAgLy8gMS4gVGVsZXBob25lIEZldGNoIEJ1dHRvbiBDb2xvciBMb2dpYw0KICAgICAgICAgICAgaWYgKHBob25lSW5wdXQgJiYgZmV0Y2hCdG4pIHsNCiAgICAgICAgICAgICAgICBwaG9uZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1JlYWR5ID0gdGhpcy52YWx1ZS50cmltKCkubGVuZ3RoID49IDEwOw0KICAgICAgICAgICAgICAgICAgICBmZXRjaEJ0bi5kaXNhYmxlZCA9ICFpc1JlYWR5Ow0KICAgICAgICAgICAgICAgICAgICAvLyBUdXJucyBncmVlbiB3aGVuIDEwIGRpZ2l0cyBhcmUgZW50ZXJlZA0KICAgICAgICAgICAgICAgICAgICBmZXRjaEJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gaXNSZWFkeSA/ICIjNENBRjUwIiA6ICIjZTFlMWUxIjsNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2hCdG4uc3R5bGUuY29sb3IgPSBpc1JlYWR5ID8gIndoaXRlIiA6ICJibGFjayI7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIDIuIFNFQVJDSCBCVVRUT04gRklYOiBSZXNldCBpbmRleCBpZiBhdCB0aGUgZW5kIG9mIERCDQogICAgICAgICAgICBpZiAoc2VhcmNoQnRuKSB7DQogICAgICAgICAgICAgICAgLy8gV2Ugb3ZlcnJpZGUgdGhlIGNsaWNrIHRvIGVuc3VyZSBpdCBkb2Vzbid0IGdldCBzdHVjayBhZnRlciBhIE5ldyBSTg0KICAgICAgICAgICAgICAgIHNlYXJjaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50UmVjb3JkSW5kZXggIT09ICd1bmRlZmluZWQnICYmIGN1cnJlbnRSZWNvcmRJbmRleCA+PSBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYXQgdGhlIHZlcnkgbGFzdCByZWNvcmQsIHJlc2V0IHRvIHN0YXJ0IHNvIHNlYXJjaCBjYW4gZmluZCBvbGRlciByZWNvcmRzDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmVjb3JkSW5kZXggPSAwOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIC8vIFRoZSBvcmlnaW5hbCBwZXJmb3JtU2VhcmNoKCkgZnJvbSB5b3VyIGZpbGUgd2lsbCBub3cgcnVuIGNvcnJlY3RseQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAzLiBBdXRvLVVuY2hlY2sgJ0NhbmNlbCcgYm94IHdoZW4gdXNlciBzdGFydHMgdHlwaW5nDQogICAgICAgICAgICBbJ2ZpZWxkX25hbWUnLCAnZmllbGRfYW1vdW50JywgJ2ZpZWxkX3Bob25lJ10uZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgaWYgKGVsKSB7DQogICAgICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsQ2hlY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY2FuY2VsJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuY2VsQ2hlY2sgJiYgY2FuY2VsQ2hlY2suY2hlY2tlZCkgY2FuY2VsQ2hlY2suY2hlY2tlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSkoKTsNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRmV0Y2ggZG9ub3IgYmFzaWMgZGV0YWlscyBmcm9tIHBhc3QgKGxhdGVzdCkgcmVjZWlwdHMgd2l0aCB0aGUgaGVscCBvZiB0ZWxlcG9uZSBudW1iZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIC0tLSBEQVRBIEZFVENISU5HIExPR0lDIC0tLQ0KICAgICAgICBhc3luYyBmdW5jdGlvbiBmZXRjaERvbm9yRGV0YWlscygpIHsNCiAgICAgICAgICAgIGNvbnN0IHBob25lVG9GaW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Bob25lJykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCg0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsNCg0KICAgICAgICAgICAgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIG92ZXJsYXkgaXMgdmlzaWJsZQ0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7DQogICAgICAgICAgICAgICAgLy8gU2VhcmNoIGZyb20gbmV3ZXN0IHRvIG9sZGVzdCAoUmV2ZXJzZSBMb29wKQ0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMTsgaSA+PSAxOyBpLS0pIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBHTE9CQUxfREJfTElORVNbaV07DQogICAgICAgICAgICAgICAgICAgIGlmICghbGluZSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGxldCBjb2xzID0gbGluZS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIFRlbGVwaG9uZSBDb2x1bW4gKEluZGV4IDMpDQogICAgICAgICAgICAgICAgICAgIC8vIFdlIG1hdGNoIHRoZSBsYXN0IDEwIGRpZ2l0cyB0byBpZ25vcmUgKzkxIG9yIGxlYWRpbmcgemVyb3MNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNsZWFuRGJQaG9uZSA9IChjb2xzWzNdIHx8ICIiKS5yZXBsYWNlKC9cRC9nLCAiIikuc2xpY2UoLTEwKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNsZWFuSW5wdXRQaG9uZSA9IHBob25lVG9GaW5kLnJlcGxhY2UoL1xEL2csICIiKS5zbGljZSgtMTApOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChjbGVhbkRiUGhvbmUgPT09IGNsZWFuSW5wdXRQaG9uZSAmJiBjbGVhbkRiUGhvbmUubGVuZ3RoID49IDEwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgdGhlIGRhdGEgdG8geW91ciBmaWVsZHMNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9uYW1lJykudmFsdWUgPSBjb2xzWzJdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2FkZHJlc3MnKS52YWx1ZSA9IChjb2xzWzRdIHx8ICIiKS5yZXBsYWNlKC9+L2csICdcbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2VtYWlsJykudmFsdWUgPSBjb2xzWzVdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpLnZhbHVlID0gY29sc1s2XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9nb3RocmFtJykudmFsdWUgPSBjb2xzWzhdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BpbmNvZGUnKS52YWx1ZSA9IGNvbHNbMTVdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvdW50cnknKS52YWx1ZSA9IGNvbHNbMTldIHx8ICJJTkRJQSI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBhIG5vdGUgaW4gY29tbWVudHMNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBgJHtTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9LSR7U3RyaW5nKGQuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9LSR7ZC5nZXRGdWxsWWVhcigpfWA7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY29tbWVudHMnKS52YWx1ZSA9IGBBdXRvLUZldGNoZWQgZnJvbSBSTjogJHtjb2xzWzBdfSBvbiAke3RvZGF5fWA7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCg0KICAgICAgICAgICAgICAgIGlmICghZm91bmQpIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5ldyBEb25vciAtIE5vIHByZXZpb3VzIHJlY29yZHMgZm91bmQgZm9yIHRoaXMgbnVtYmVyLiIpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFVubG9jayB0aGUgZm9ybSBzbyB0aGUgdXNlciBjYW4gZWRpdCB0aGUgZmV0Y2hlZCBkYXRhDQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG9nZ2xlTG9jayA9PT0gImZ1bmN0aW9uIikgdG9nZ2xlTG9jayhmYWxzZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwgMzAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBTZWFyY2ggUmVjb3JkcyAtIFJvdW5kIFJvYmluIE1ldGhvZA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gLS0tIEZJTkFMIFNFQVJDSCBGSVg6IFBSRVZFTlRTIEdFVFRJTkcgU1RVQ0sgQVQgRU5EIC0tLQ0KICAgICAgICBmdW5jdGlvbiBwZXJmb3JtU2VhcmNoKCkgew0KICAgICAgICAgICAgY29uc3QgcmF3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3NlYXJjaCcpLnZhbHVlLnRyaW0oKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgaWYgKCFyYXcpIHJldHVybjsNCg0KICAgICAgICAgICAgLy8gRk9SQ0UgU1RFUC1CQUNLOiBJZiB3ZSBhcmUgYXQgdGhlIGVuZCwgc3RhcnQgbG9va2luZyBmcm9tIHRoZSByZWNvcmQgQkVGT1JFIGl0Lg0KICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSAoY3VycmVudFJlY29yZEluZGV4ID4gMCkgPyBjdXJyZW50UmVjb3JkSW5kZXggLSAxIDogR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDE7DQoNCiAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOw0KICAgICAgICAgICAgbGV0IGkgPSBzdGFydEluZGV4Ow0KICAgICAgICAgICAgbGV0IGNvdW50ID0gMDsNCg0KICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSB3aG9sZSBkYXRhYmFzZSBvbmNlDQogICAgICAgICAgICB3aGlsZSAoY291bnQgPCBHTE9CQUxfREJfTElORVMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgaWYgKGNoZWNrU2VhcmNoTWF0Y2goaSwgcmF3KSkgew0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmVjb3JkSW5kZXggPSBpOw0KICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpLS07DQogICAgICAgICAgICAgICAgaWYgKGkgPCAwKSBpID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDE7IC8vIFdyYXAgYXJvdW5kIHRvIGVuZA0KICAgICAgICAgICAgICAgIGNvdW50Kys7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChmb3VuZCkgew0KICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQoY3VycmVudFJlY29yZEluZGV4KTsNCiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjX3NsaWRlcicpOw0KICAgICAgICAgICAgICAgIGlmIChzbGlkZXIpIHNsaWRlci52YWx1ZSA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCiAgICAgICAgICAgICAgICAvLyBTeW5jIHRoZSBzZWFyY2ggdHJhY2tpbmcNCiAgICAgICAgICAgICAgICBsYXN0Rm91bmRTZWFyY2hJbmRleCA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIk5vIG90aGVyIG1hdGNoZXMgZm91bmQuIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIEVuc3VyZSB5b3VyIGhlbHBlciBpcyBzdHJpY3RseSBjaGVja2luZyBkYXRhDQogICAgICAgIGZ1bmN0aW9uIGNoZWNrU2VhcmNoTWF0Y2goaWR4LCBxdWVyeSkgew0KICAgICAgICAgICAgY29uc3QgbGluZSA9IEdMT0JBTF9EQl9MSU5FU1tpZHhdOw0KICAgICAgICAgICAgaWYgKCFsaW5lKSByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICByZXR1cm4gbGluZS50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBVc2VyIG5hbWUgcmVnaXN0ZXJlZCBhcyBsb2dnZWQgaW4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHdyaXRlVXNlckxvZyhhY3Rpb24pIHsNCiAgICAgICAgICAgIGlmICghTU1QVF9VU0VSX05BTUUpIHJldHVybjsNCiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7TU1QVF9MT0dfRElSfSR7TU1QVF9VU0VSX05BTUV9LnR4dGA7DQogICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCk7DQogICAgICAgICAgICBjb25zdCBsb2dFbnRyeSA9IGBbJHt0aW1lc3RhbXB9XSAke2FjdGlvbn1cbmA7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgbGV0IGV4aXN0aW5nQ29udGVudCA9ICIiOw0KICAgICAgICAgICAgICAgIC8vIFVzZSAndCcgYXMgcGVyIHlvdXIgQmFzZSBmaWxlDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGZpbGVOYW1lIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSBleGlzdGluZ0NvbnRlbnQgPSBhd2FpdCByZXMudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSBleGlzdGluZ0NvbnRlbnQgKyBsb2dFbnRyeTsNCiAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogZmlsZU5hbWUsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IHVwZGF0ZWRDb250ZW50DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsgY29uc29sZS5lcnJvcigiTG9nZ2luZyBmYWlsZWQ6IiwgZXJyKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vcmVtb3ZlIHVzZXIgZnJvbSBsaXN0IGlmIG5vdCBwb2xsZWQgZm9yIDIgbWludXRlcw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZnVuY3Rpb24geW91IGFza2VkIGZvciAtIHBsYWNlIGl0IHdpdGggeW91ciBvdGhlciB1c2VyLWhhbmRsaW5nIGZ1bmN0aW9ucw0KICAgICAgICBhc3luYyBmdW5jdGlvbiByZW1vdmVVc2VyRnJvbVBvbGxpbmcodXNlck5hbWUpIHsNCiAgICAgICAgICAgIC8vIDEuIExvZyB0aGUgZXZlbnQgYmVmb3JlIHRoZXkgYXJlIHJlbW92ZWQNCiAgICAgICAgICAgIGF3YWl0IHdyaXRlVXNlckxvZyhgU0VTU0lPTiBFTkQ6IFVzZXIgJHt1c2VyTmFtZX0gZGlzY29ubmVjdGVkL3JlbW92ZWQgZnJvbSBwb2xsaW5nLmApOw0KDQogICAgICAgICAgICAvLyAyLiBZb3VyIGV4aXN0aW5nIGxvZ2ljIHRvIGFjdHVhbGx5IHJlbW92ZSB0aGVtIGZyb20gdGhlIFVJIG9yIGxpc3QNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVc2VyICR7dXNlck5hbWV9IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBhY3RpdmUgcG9sbGluZy5gKTsNCg0KICAgICAgICAgICAgLy8gSWYgeW91IGhhdmUgYSBzcGVjaWZpYyBVSSBlbGVtZW50IGZvciB0aGUgdXNlciBsaXN0LCB1cGRhdGUgaXQgaGVyZQ0KICAgICAgICAgICAgLy8gdXBkYXRlQWN0aXZlVXNlckxpc3QoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIExvY2F0ZSB0aGlzIGluIHlvdXIgPHNjcmlwdD4gc2VjdGlvbg0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpOw0KICAgICAgICAgICAgaWYgKHRhcmdldCkgew0KICAgICAgICAgICAgICAgIC8vIFBST0JFOiBBZGQgdGhpcyBsaW5lIHRvIGlnbm9yZSB0aGUgc2F2ZSBidXR0b25zDQogICAgICAgICAgICAgICAgaWYgKHRhcmdldC5pZCA9PT0gJ2J0bl9zYXZlJyB8fCB0YXJnZXQuaWQgPT09ICdiYW5rLXN5bmMtYnRuJykgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgYnRuVGV4dCA9IHRhcmdldC5pbm5lclRleHQgfHwgdGFyZ2V0LnZhbHVlIHx8ICJJY29uIEJ1dHRvbiI7DQogICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKGBDTElDS0VEIEJVVFRPTjogWyR7YnRuVGV4dH1dYCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQoNCiAgICAgICAgLy8gMi4gTEFVTkNIIExPRyAoSW5zaWRlIHlvdXIgZXhpc3RpbmcgaW5pdGlhbGl6ZU1NUFQgb3IgcmlnaHQgYWZ0ZXIpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvZ0xhdW5jaCgpIHsNCiAgICAgICAgICAgIC8vIFdhaXQgYSB0aW55IGJpdCBmb3IgdGhlIG5hbWUgdG8gYmUgYXZhaWxhYmxlDQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIik7DQogICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCJMQVVOQ0hFRDogSFRNTCBTZXNzaW9uIFN0YXJ0ZWQiKTsNCiAgICAgICAgICAgIH0sIDIwMDApOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyBUaGlzIHJ1bnMgNSBzZWNvbmRzIGFmdGVyIGxhdW5jaCBhcyBhIHNlcGFyYXRlICJIZWFsdGggQ2hlY2siDQogICAgICAgIC8vIEJ1bGxldHByb29mIEludGVncml0eSBDaGVjaw0KICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBHTE9CQUxfREJfTElORVMgPT09ICd1bmRlZmluZWQnIHx8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPT09IDApIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIC8vIDEuIEdldCBBY3R1YWwgREIgRGF0YQ0KICAgICAgICAgICAgICAgIGNvbnN0IGxhc3REQkxpbmUgPSBHTE9CQUxfREJfTElORVNbR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbFJOID0gbGFzdERCTGluZS5zcGxpdCgnfCcpWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxDb3VudCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGg7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBGZXRjaCBTZXF1ZW5jZSB3aXRoIENBQ0hFIEJVU1RFUg0KICAgICAgICAgICAgICAgIC8vIEFkZGluZyBhIHRpbWVzdGFtcCBlbnN1cmVzIERyb3Bib3gvQnJvd3NlciBjYW5ub3Qgc2VydmUgYW4gb2xkIHZlcnNpb24NCiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUJ1c3RlciA9IERhdGUubm93KCk7DQogICAgICAgICAgICAgICAgY29uc3Qgc2VxUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9EYXRhQmFzZXMvc2VxdWVuY2UudHh0JyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDdXN0b20tQnVzdGVyJzogY2FjaGVCdXN0ZXIgLy8gU29tZSBicm93c2VycyBuZWVkIHRoaXMgaW4gaGVhZGVyDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChzZXFSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VxVGV4dCA9IChhd2FpdCBzZXFSZXMudGV4dCgpKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFtmaWxlUk4sIGZpbGVDb3VudF0gPSBzZXFUZXh0LnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkludGVncml0eSBDaGVjayAtPiBEQjoiLCBhY3R1YWxSTiwgIkZpbGU6IiwgZmlsZVJOKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAzLiBDb21wYXJlDQogICAgICAgICAgICAgICAgICAgIGlmIChhY3R1YWxSTiAhPT0gZmlsZVJOKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBhaXIgPSBjb25maXJtKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBNSVNNQVRDSCBERVRFQ1RFRCFcblxuYCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYERhdGFiYXNlOiAke2FjdHVhbFJOfVxuYCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNlcXVlbmNlIEZpbGU6ICR7ZmlsZVJOfVxuXG5gICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgVGhlIHNlcXVlbmNlIGZpbGUgaXMgb3V0ZGF0ZWQuIFN5bmMgaXQgbm93P2ANCiAgICAgICAgICAgICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXBhaXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJmb3JtU2VxdWVuY2VGaXgoYWN0dWFsUk4sIGFjdHVhbENvdW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJJbnRlZ3JpdHkgY2hlY2sgZXJyb3I6IiwgZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sIDQwMDApOyAvLyBTaG9ydGVyIHdhaXQgdGltZQ0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEFkbWluIFBhbmVsDQogICAgICAgIC8vIFVwZGF0ZXMgY29udHJvbC1saXN0IC0gc2VsZWN0IGFsbG93ZWQgY29udHJvbHMgZm9yIGEgcGFydGljdWxhciB1c2VyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAxLiBVUERBVEVEIEZFQVRVUkVTIExJU1QNCiAgICAgICAgY29uc3QgcHJvamVjdEZlYXR1cmVzID0gWw0KICAgICAgICAgICAgImJ0bi1hZG1pbi1hY2Nlc3MiLCAiYnRuLWRldm90ZWUtYWNjZXNzIiwgIm1hc3Rlci1oZWFkZXIiLCAiZGFzaGJvYXJkLWNvbnRhaW5lciIsICJlbnRyeS1jb250YWluZXIiLCAicmVjZWlwdC1wcmV2aWV3LXJvdyIsDQogICAgICAgICAgICAiYnRuX3NhdmUiLCAiYnRuX3JuIiwgImJ0bl91bmxvY2siLCAiYnRuX2xvY2siLCAic2VhcmNoQnRuIiwgImJhbmstc3luYy1idG4iLCAiYnRuX2NvbnNlbnQiLCAiYnRuU3VtbWFyeSIsDQogICAgICAgICAgICAic2VjdGlvbnMiLCAiTWluUmVjb3JkTnVtYmVyIg0KICAgICAgICBdOw0KDQogICAgICAgIC8vIDIuIE9QRU4gUE9SVEFMIChDb3JyZWN0bHkgcGFyc2luZyBEZXZpY2UgSUQgfCBVc2VybmFtZSB8IFBhc3N3b3JkKQ0KICAgICAgICBhc3luYyBmdW5jdGlvbiBvcGVuU2VjdXJpdHlQb3J0YWwoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gKHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgPyB0IDogTU1QVF9BVVRIX0tFWTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9TZXR0aW5ncy9BcHByb3ZlZC50eHQnIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCB1c2VyTGlzdCA9IFtdOw0KICAgICAgICAgICAgICAgIGlmICh1c2VyUmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCB1c2VyUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBlbXB0eSBsaW5lcywgY29tbWVudHMgc3RhcnRpbmcgd2l0aCAjLCBhbmQgbGluZXMgd2l0aG91dCBwaXBlcw0KICAgICAgICAgICAgICAgICAgICB1c2VyTGlzdCA9IHRleHQuc3BsaXQoJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAodSA9PiB1LnRyaW0oKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIodSA9PiB1ICE9PSAiIiAmJiAhdS5zdGFydHNXaXRoKCcjJykgJiYgdS5pbmNsdWRlcygnfCcpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSB0YWtlIHRoZSBtaWRkbGUgcGFydCAoVXNlcm5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLmxlbmd0aCA+PSAyID8gcGFydHNbMV0udHJpbSgpIDogbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHUgPT4gdSAhPT0gbnVsbCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgbGV0IGh0bWxIZWFkZXIgPSBgDQo8ZGl2IGlkPSJwb3J0YWwtb3ZlcmxheSIgc3R5bGU9InBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7IHotaW5kZXg6MTAwMDA7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgcGFkZGluZzoyMHB4OyBvdmVyZmxvdy15OmF1dG87Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHdpZHRoOjgwMHB4OyBhbGlnbi1zZWxmOmZsZXgtc3RhcnQ7IGJveC1zaGFkb3c6MCAxMHB4IDMwcHggcmdiYSgwLDAsMCwwLjQpOyBib3JkZXItcmFkaXVzOjRweDsgZm9udC1mYW1pbHk6QXJpYWw7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJwYWRkaW5nOjIwcHg7IGJhY2tncm91bmQ6IzgwMDAwMDsgY29sb3I6d2hpdGU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9Im1hcmdpbjowOyI+U2VjdXJpdHkgUG9ydGFsPC9oMj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5TZWxlY3QgVXNlcjogPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InBvcnRhbC11c2VyLXNlbGVjdG9yIiBvbmNoYW5nZT0ibG9hZFVzZXJTZXR0aW5ncyh0aGlzLnZhbHVlKSIgc3R5bGU9InBhZGRpbmc6NXB4OyBib3JkZXItcmFkaXVzOjRweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IFVzZXIgLS08L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3VzZXJMaXN0Lm1hcCh1ID0+IGA8b3B0aW9uIHZhbHVlPSIke3V9Ij4ke3V9PC9vcHRpb24+YCkuam9pbignJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icG9ydGFsLWNvbnRlbnQtYXJlYSIgc3R5bGU9Im1pbi1oZWlnaHQ6MjAwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9InBhZGRpbmc6NDBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiM2NjY7Ij5TZWxlY3QgYSB1c2VybmFtZSB0byBsb2FkIHRoZSBzZWN1cml0eSBmaWxlLjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246cmlnaHQ7IGJvcmRlci10b3A6MXB4IHNvbGlkICNlZWU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzYXZlU2VjdXJpdHlGaWxlKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiM4MDAwMDA7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjEycHggMzBweDsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NHB4OyBjdXJzb3I6cG9pbnRlcjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlNBVkUgQ0hBTkdFUzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0YWwtb3ZlcmxheScpLnJlbW92ZSgpIiBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDsgcGFkZGluZzoxMnB4IDI1cHg7IGJvcmRlcjoxcHggc29saWQgI2NjYzsgYmFja2dyb3VuZDpub25lOyBjdXJzb3I6cG9pbnRlcjsiPkNBTkNFTDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQo8L2Rpdj5gOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBodG1sSGVhZGVyKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIkVycm9yOiAiICsgZS5tZXNzYWdlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gMy4gTE9BRCBEQVRBIChQYXRoIGlzIG5vdyBjb3JyZWN0bHkgL1NldHRpbmdzL1VzZXJuYW1lLnR4dCkNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZFVzZXJTZXR0aW5ncyh0YXJnZXRVc2VyKSB7DQogICAgICAgICAgICBpZiAoIXRhcmdldFVzZXIpIHJldHVybjsNCiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRhbC1jb250ZW50LWFyZWEnKTsNCiAgICAgICAgICAgIGNvbnRlbnRBcmVhLmlubmVySFRNTCA9ICc8cCBzdHlsZT0icGFkZGluZzoyMHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPkxvYWRpbmcgJyArIHRhcmdldFVzZXIgKyAnLnR4dC4uLjwvcD4nOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gKHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgPyB0IDogTU1QVF9BVVRIX0tFWTsNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3RhcmdldFVzZXJ9LnR4dGAgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IHNldHRpbmdzID0ge307DQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgdGV4dC5zcGxpdCgnXG4nKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSBzZXR0aW5nc1twYXJ0c1swXS50cmltKCldID0gcGFydHNbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBsZXQgcm93c0h0bWwgPSBgPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ij48dGJvZHk+YDsNCg0KICAgICAgICAgICAgICAgIHByb2plY3RGZWF0dXJlcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gc2V0dGluZ3NbaWRdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPT09ICJNaW5SZWNvcmROdW1iZXIiIHx8IGlkID09PSAic2VjdGlvbnMiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzoxNXB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyBmb250LXdlaWdodDpib2xkOyI+JHtpZH08L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImlucHV0LSR7aWR9IiB2YWx1ZT0iJHt2YWx9IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNlOTFlNjM7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+YDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkWSA9ICh2YWwgPT09ICdZJyB8fCB2YWwgPT09ICcnKSA/ICdzZWxlY3RlZCcgOiAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkTiA9ICh2YWwgPT09ICdOJykgPyAnc2VsZWN0ZWQnIDogJyc7DQogICAgICAgICAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzoxNXB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyBmb250LXdlaWdodDpib2xkOyI+JHtpZH08L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpbnB1dC0ke2lkfSIgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6OHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlkiICR7c2VsZWN0ZWRZfT5ZPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik4iICR7c2VsZWN0ZWROfT5OPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPmA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGA8L3Rib2R5PjwvdGFibGU+YDsNCiAgICAgICAgICAgICAgICBjb250ZW50QXJlYS5pbm5lckhUTUwgPSByb3dzSHRtbDsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29udGVudEFyZWEuaW5uZXJIVE1MID0gIjxwIHN0eWxlPSdwYWRkaW5nOjIwcHg7Jz5FcnJvciBsb2FkaW5nIHNldHRpbmdzLjwvcD4iOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyA0LiBTQVZFIChQYXRoIGZpeGVkIHRvIC9TZXR0aW5ncy9Vc2VybmFtZS50eHQpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHNhdmVTZWN1cml0eUZpbGUoKSB7DQogICAgICAgICAgICBjb25zdCB0YXJnZXRVc2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRhbC11c2VyLXNlbGVjdG9yJykudmFsdWU7DQogICAgICAgICAgICBpZiAoIXRhcmdldFVzZXIpIHJldHVybiBhbGVydCgiU2VsZWN0IHVzZXIhIik7DQoNCiAgICAgICAgICAgIGxldCBmaWxlTGluZXMgPSBbXTsNCiAgICAgICAgICAgIHByb2plY3RGZWF0dXJlcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBpbnB1dC0ke2lkfWApOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgZmlsZUxpbmVzLnB1c2goYCR7aWR9IHwgJHtlbC52YWx1ZS50cmltKCl9YCk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBmaWxlTGluZXMuam9pbignXG4nKTsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBgL1NldHRpbmdzLyR7dGFyZ2V0VXNlcn0udHh0YCwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogZmlsZUNvbnRlbnQNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlNhdmVkOiAiICsgdGFyZ2V0VXNlciArICIudHh0Iik7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0YWwtb3ZlcmxheScpLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIlNhdmUgRXJyb3I6ICIgKyBlLm1lc3NhZ2UpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQ2hlY2tzIGlmIG91ciBtYWluIERCIGlzIHJlYWR5IGZvciB1c2UNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHN0YXJ0SW50ZWdyaXR5UHJvYmUoYXR0ZW1wdHMpIHsNCiAgICAgICAgICAgIGlmIChhdHRlbXB0cyA8PSAwKSByZXR1cm47IC8vIFN0b3AgdHJ5aW5nIGFmdGVyIDEwIGF0dGVtcHRzDQoNCiAgICAgICAgICAgIC8vIDEuIENoZWNrIGlmIFlPVVIgY29yZSBkYXRhIGlzIHJlYWR5DQogICAgICAgICAgICBpZiAodHlwZW9mIEdMT0JBTF9EQl9MSU5FUyAhPT0gJ3VuZGVmaW5lZCcgJiYgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSB7DQoNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU3lzdGVtIFJlYWR5LiBQcm9iaW5nIFNlcXVlbmNlLi4uIik7DQogICAgICAgICAgICAgICAgcGVyZm9ybVNlcXVlbmNlQ2hlY2soKTsNCg0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyAyLiBOb3QgcmVhZHkgeWV0PyBXYWl0IDIgc2Vjb25kcyBhbmQgdHJ5IGFnYWluDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlN5c3RlbSBidXN5Li4uIHJldHJ5aW5nIHByb2JlIGluIDJzIik7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzdGFydEludGVncml0eVByb2JlKGF0dGVtcHRzIC0gMSksIDIwMDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIExvb2tzIGZvciBzZXF1ZW5jZS50eHQgYW5kIGNoZWNrcyBsYXN0IHJlY29yZCBhbmQgcmVjZWlwdCBDRyBudW1iZXIgLSBpZiBub3Qgb2sgLSBwcm9tcHRzIGZvciBhdXRvIGNvcnJlY3Rpb24NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1TZXF1ZW5jZUNoZWNrKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBHZXQgdGhlIHRvdGFsIGNvdW50IChpcnJlc3BlY3RpdmUgb2YgcHJlZml4KQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ291bnQgPSBHTE9CQUxfREJfTElORVMubGVuZ3RoOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gRmluZCB0aGUgbGF0ZXN0IENHIHJlY2VpcHQgYnkgc2VhcmNoaW5nIGJhY2t3YXJkIGZyb20gdGhlIGVuZA0KICAgICAgICAgICAgICAgIGxldCBkYlJOID0gIiI7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlaXB0TnVtYmVyID0gR0xPQkFMX0RCX0xJTkVTW2ldLnNwbGl0KCd8JylbMF0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocmVjZWlwdE51bWJlci5zdGFydHNXaXRoKCJDRyIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYlJOID0gcmVjZWlwdE51bWJlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBGb3VuZCB0aGUgaGlnaGVzdC9sYXRlc3QgQ0cgbnVtYmVyLCBzdG9wIHNlYXJjaGluZw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IElmIG5vIENHIGZvdW5kIGF0IGFsbCwgdXNlIHRoZSBsYXN0IGxpbmUncyBudW1iZXINCiAgICAgICAgICAgICAgICBpZiAoIWRiUk4gJiYgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgZGJSTiA9IEdMT0JBTF9EQl9MSU5FU1tHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMV0uc3BsaXQoJ3wnKVswXS50cmltKCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9EYXRhQmFzZXMvc2VxdWVuY2UudHh0JyB9KQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBjYWNoZTogJ25vLXN0b3JlJw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gKGF3YWl0IHJlcy50ZXh0KCkpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2ZpbGVSTiwgZmlsZUNvdW50XSA9IHRleHQuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlIGZvdW5kIENHIG51bWJlciB3aXRoIHdoYXQgaXMgaW4gc2VxdWVuY2UudHh0DQogICAgICAgICAgICAgICAgICAgIGlmIChkYlJOICE9PSBmaWxlUk4pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGFpciA9IGNvbmZpcm0oYFNFUVVFTkNFIE1JU01BVENIIVxuXG5MYXRlc3QgQ0cgaW4gREI6ICR7ZGJSTn1cbkZpbGUgc2F5czogJHtmaWxlUk59XG5Ub3RhbCBSZWNvcmRzOiAke2RiQ291bnR9XG5cblVwZGF0ZSBzZXF1ZW5jZSBmaWxlP2ApOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGFpcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL0RhdGFCYXNlcy9zZXF1ZW5jZS50eHQnLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBkYlJOICsgInwiICsgZGJDb3VudA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiUHJvYmUgZmV0Y2ggZmFpbGVkLiBOZXR3b3JrIG1pZ2h0IGJlIGJ1c3kuIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gTG9va3MgZm9yIFVzZXJOYW1lLnR4dCBhbmQgY2hlY2tzIHdoYXQgYXJlIHRoZSBjb250cm9scyB0byBiZSBhbGxvd2VkIC0gZnVsbCBhY2Nlc3MgaWYgZmlsZSBub3QgZm91bmQuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBTdGFydCB0aGUgcHJvYmUgKHRyeSAxMCB0aW1lcywgZXZlcnkgMiBzZWNvbmRzKQ0KICAgICAgICBzdGFydEludGVncml0eVByb2JlKDEwKTsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkQW5kQXBwbHlTZWN1cml0eSh1c2VyTmFtZSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3VzZXJOYW1lfS50eHRgIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSByZXR1cm47IC8vIElmIG5vIGZpbGUgZXhpc3RzLCB1c2VyIGhhcyBmdWxsIGFjY2Vzcw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgLy9jb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xuJyk7DQoNCg0KICAgICAgICAgICAgICAgIC8vIFNraXAgY29tbWVudHMgYW5kIGZvcm1hdHRpbmcgbGluZXMNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xuJykuZmlsdGVyKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsID0gbGluZS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBsICE9PSAiIiAmJiAhbC5zdGFydHNXaXRoKCcjJykgJiYgbC5pbmNsdWRlcygnfCcpOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2lkLCBhY2Nlc3NdID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaWQgJiYgYWNjZXNzICYmIGFjY2Vzcy50cmltKCkgPT09ICJOIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkLnRyaW0oKSkgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShpZC50cmltKCkpWzBdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7IC8vIERJU0FQUEVBUg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTZWN1cml0eTogSGlkZGVuICR7aWR9YCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIlNlY3VyaXR5IGZpbGUgbm90IGZvdW5kIGZvciB1c2VyLCBncmFudGluZyBkZWZhdWx0IGFjY2Vzcy4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBpZiBtaW5yZWNvcmQgbnVtYmVyIHNwZWNpZmllZCBpbiB1c2VybmFtZS50eHQgdGhlbiBibG9ja3MgdXNlciB0byB2aWV3IHByZXZpb3VzIHJlY29yZHMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8qKg0KKiBTZWN1cml0eSBHYXRlIGZvciBOYXZpZ2F0aW9uDQoqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRJbmRleCAtIFRoZSBpbmRleCB0aGUgdXNlciBpcyB0cnlpbmcgdG8gbW92ZSB0bw0KKi8NCiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVOYXZpZ2F0aW9uU2VjdXJpdHkodGFyZ2V0SW5kZXgpIHsNCiAgICAgICAgICAgIC8vIElmIHRoZSB0YXJnZXQgaW5kZXggaXMgYWN0dWFsbHkgYSByZWNvcmQgbnVtYmVyICgxLWJhc2VkKSwNCiAgICAgICAgICAgIC8vIHdlIHVzZSBpdCBkaXJlY3RseS4gT3RoZXJ3aXNlLCB3ZSBhc3N1bWUgaXQncyBhIDAtYmFzZWQgYXJyYXkgaW5kZXguDQogICAgICAgICAgICBjb25zdCB0YXJnZXRSTiA9IHRhcmdldEluZGV4ICsgMTsNCg0KICAgICAgICAgICAgaWYgKHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID4gMCAmJiB0YXJnZXRSTiA8IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIvCfm5EgU0VDVVJJVFkgQkxPQ0tcblxuWW91ciBhY2Nlc3MgbGV2ZWwgZG9lcyBub3QgcGVybWl0IHZpZXdpbmcgcmVjb3JkcyBiZWZvcmU6ICIgKyB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STik7DQoNCiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgc2xpZGVyIHZpc3VhbCBpZiBpdCBtb3ZlZA0KICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgc2xpZGVyLnZhbHVlID0gY3VycmVudFJlY29yZEluZGV4Ow0KDQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBEZW55IG5hdmlnYXRpb24NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBBbGxvdyBuYXZpZ2F0aW9uDQogICAgICAgIH0NCg0KICAgICAgICAvLyBJZiBhIGZsb29yIGlzIHNldCwgYW5kIHdlIGFyZSBjdXJyZW50bHkgYXQgYSBsb3dlciByZWNvcmQsIGp1bXAgdG8gdGhlIGZsb29yDQogICAgICAgIGlmICh3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA+IDApIHsNCiAgICAgICAgICAgIC8vIElmIGN1cnJlbnQgaW5kZXggaXMgMCBvciBsZXNzIHRoYW4gdGhlIGZsb29yLCBsb2FkIHRoZSBmbG9vciByZWNvcmQNCiAgICAgICAgICAgIGlmICgoY3VycmVudFJlY29yZEluZGV4ICsgMSkgPCB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STikgew0KICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOIC0gMTsNCiAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKGN1cnJlbnRSZWNvcmRJbmRleCk7DQogICAgICAgICAgICAgICAgdXBkYXRlU2xpZGVyKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gbG9va3MgZm9yIGFwcHJvdmVkLnR4dCBhbmQgYWxsb3dzIHVzZXIgdG8gZW50ZXIgc3cgLSBiYXNlZCBvbiBkZXZpY2UgaWQgYW5kIHBhc3N3b3JkDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5QZXJzb25hbFNlY3VyaXR5R2F0ZShhcHByb3ZlZExpc3RUZXh0LCBjdXJyZW50RGV2SUQpIHsNCiAgICAgICAgICAgIC8vIDEuIElkZW50aWZ5IHRoZSBzcGVjaWZpYyByb3cgZm9yIHRoaXMgZGV2aWNlDQogICAgICAgICAgICBjb25zdCBsaW5lcyA9IGFwcHJvdmVkTGlzdFRleHQuc3BsaXQoJ1xuJykuZmlsdGVyKGwgPT4gbC50cmltKCkgIT09ICIiKTsNCiAgICAgICAgICAgIGNvbnN0IG15Um93ID0gbGluZXMuZmluZChsaW5lID0+IGxpbmUuaW5jbHVkZXMoY3VycmVudERldklEKSk7DQoNCiAgICAgICAgICAgIGlmICghbXlSb3cpIHJldHVybjsNCg0KICAgICAgICAgICAgY29uc3QgcGFydHMgPSBteVJvdy5zcGxpdCgnfCcpLm1hcChwID0+IHAudHJpbSgpKTsNCiAgICAgICAgICAgIGNvbnN0IHVOYW1lID0gcGFydHNbMV07DQogICAgICAgICAgICBjb25zdCB1UGFzcyA9IHBhcnRzWzJdIHx8ICIwIjsNCg0KICAgICAgICAgICAgY2FwdHVyZVNlY3VyaXR5U25hcHNob3QoKTsNCg0KICAgICAgICAgICAgLy8gMi4gSWYgUGFzc3dvcmQgaXMgIjAiLCBza2lwIHRoZSB3aW5kb3cgYW5kIGp1c3QgbG9jayB0aGUgdXNlcg0KICAgICAgICAgICAgaWYgKHVQYXNzID09PSAiMCIpIHsNCiAgICAgICAgICAgICAgICBsb2NrQW5kUmVmcmVzaFVzZXIodU5hbWUpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMy4gT3RoZXJ3aXNlLCBwb3AgdGhlIHdpbmRvdw0KICAgICAgICAgICAgY29uc3QgZ2F0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgZ2F0ZS5pZCA9ICJzZWN1cml0eV9oaWphY2siOw0KICAgICAgICAgICAgZ2F0ZS5zdHlsZSA9ICJwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgyNTUsMjUwLDI0MCwwLjk4KTsgei1pbmRleDo5OTk5OTk7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7IHRyYW5zaXRpb246IDAuM3M7IjsNCg0KICAgICAgICAgICAgZ2F0ZS5pbm5lckhUTUwgPSBgDQo8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBwYWRkaW5nOjQwcHg7IGJvcmRlci1yYWRpdXM6MTVweDsgYm9yZGVyOjNweCBzb2xpZCAjRkY5OTMzOyB0ZXh0LWFsaWduOmNlbnRlcjsgYm94LXNoYWRvdzowIDEwcHggMzBweCByZ2JhKDAsMCwwLDAuMSk7IHdpZHRoOjMyMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJnYXRlX3Bob3RvX2NvbnRhaW5lciI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9ImNvbG9yOiMzMzM7IG1hcmdpbjoxMHB4IDA7Ij4ke3VOYW1lfTwvaDI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJnYXRlX2lucHV0IiBwbGFjZWhvbGRlcj0iRW50ZXIgUElOIiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxNXB4OyBib3JkZXI6MnB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6OHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC1zaXplOjIycHg7IG91dGxpbmU6bm9uZTsgbWFyZ2luLWJvdHRvbToxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJnYXRlX3ZlcmlmeSIgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6MTJweDsgYmFja2dyb3VuZDojMjhhNzQ1OyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6OHB4OyBmb250LXdlaWdodDpib2xkOyBjdXJzb3I6cG9pbnRlcjsgZm9udC1zaXplOjE2cHg7Ij5VTkxPQ0sgQVBQPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBpZD0iZ2F0ZV9lcnIiIHN0eWxlPSJjb2xvcjpyZWQ7IG1hcmdpbi10b3A6MTBweDsgZGlzcGxheTpub25lOyI+SW52YWxpZCBQYXNzd29yZDwvcD4NCjwvZGl2PmA7DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZ2F0ZSk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9pbnB1dCcpLmZvY3VzKCk7DQoNCiAgICAgICAgICAgIC8vIEZldGNoIFBob3RvIChOb24tYmxvY2tpbmcpDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHBob3RvUGF0aCA9IGAvSW1hZ2VzLyR7dU5hbWV9LmpwZ2A7DQogICAgICAgICAgICAgICAgY29uc3QgcFIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogcGhvdG9QYXRoIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBpZiAocFIub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IGF3YWl0IHBSLmJsb2IoKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfcGhvdG9fY29udGFpbmVyJykuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSIke1VSTC5jcmVhdGVPYmplY3RVUkwoYil9IiBzdHlsZT0id2lkdGg6MTIwcHg7IGhlaWdodDoxMjBweDsgYm9yZGVyLXJhZGl1czo1MCU7IGJvcmRlcjozcHggc29saWQgI0ZGOTkzMzsgb2JqZWN0LWZpdDpjb3ZlcjsgbWFyZ2luLWJvdHRvbToxMHB4OyI+YDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKCJObyBjdXN0b20gcGhvdG8uIik7IH0NCg0KICAgICAgICAgICAgY29uc3QgdmVyaWZ5ID0gKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9pbnB1dCcpLnZhbHVlID09PSB1UGFzcykgew0KICAgICAgICAgICAgICAgICAgICBnYXRlLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICAgICBsb2NrQW5kUmVmcmVzaFVzZXIodU5hbWUpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX2VycicpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9pbnB1dCcpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfdmVyaWZ5Jykub25jbGljayA9IHZlcmlmeTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX2lucHV0Jykub25rZXlwcmVzcyA9IChlKSA9PiB7IGlmIChlLmtleSA9PT0gJ0VudGVyJykgdmVyaWZ5KCk7IH07DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAgICAgICogVGhlICJIYW1tZXIiIC0gZm9yY2VzIHRoZSBhcHAgdG8gYWNrbm93bGVkZ2UgVEhJUyB1c2VyIGFuZCBubyBvbmUgZWxzZS4NCiAgICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIGxvY2tBbmRSZWZyZXNoVXNlcihmaW5hbE5hbWUpIHsNCiAgICAgICAgICAgIHdpbmRvdy5NTVBUX1VTRVJfTkFNRSA9IGZpbmFsTmFtZTsNCg0KICAgICAgICAgICAgLy8gRm9yY2UgaGVhZGVyL3NpZGViYXIgdXBkYXRlDQogICAgICAgICAgICBjb25zdCB1c2VyTGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcGxheVVzZXInKTsNCiAgICAgICAgICAgIGlmICh1c2VyTGFiZWwpIHVzZXJMYWJlbC5pbm5lclRleHQgPSBmaW5hbE5hbWU7DQoNCiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0aXZlVXNlckxpc3QnKTsNCiAgICAgICAgICAgIGlmIChhY3RpdmVMaXN0KSBhY3RpdmVMaXN0LmlubmVyVGV4dCA9IGZpbmFsTmFtZTsNCg0KICAgICAgICAgICAgLy8gUmUtcnVuIHBlcm1pc3Npb24gbG9naWMgZm9yIFRISVMgdXNlciBzcGVjaWZpY2FsbHkNCiAgICAgICAgICAgIGlmICh0eXBlb2YgYXBwbHlVc2VyUGVybWlzc2lvbnMgPT09ICJmdW5jdGlvbiIpIHsNCiAgICAgICAgICAgICAgICBhcHBseVVzZXJQZXJtaXNzaW9ucyhmaW5hbE5hbWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBoaWRlIGxvZ2ljIHJ1bnMgQUZURVIgdGhlIHBhZ2UgYW5kIGFsbCBkYXRhIChpbWFnZXMvc3RhdHMpIGFyZSByZWFkeQ0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIC8vIDEtc2Vjb25kIGRlbGF5IHRvIGVuc3VyZSBhbnkgaW50ZXJuYWwgJ2xvYWRSZWNvcmQnIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkIHJlbmRlcmluZyByb3dzDQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAvLyBSZXBsYWNlICdjdXJyZW50VXNlcicgd2l0aCB3aGF0ZXZlciB2YXJpYWJsZSBzdG9yZXMgeW91ciBsb2dnZWQtaW4gbmFtZQ0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudFVzZXIgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgICAgIGFwcGx5VXNlclBlcm1pc3Npb25zKGN1cnJlbnRVc2VyKTsNCiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZVNlY3VyaXR5U25hcHNob3QoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LCAxMDAwKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIGxvb2tzIGZvciB1c2VybmFtZS50eHQgYW5kIGVuYWJsZXMgLyBkaXNhYmxlcyBjb250cm9scyBmb3IgdGhhdCBwYXJ0aWN1bGFyIHVzZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGFwcGx5VXNlclBlcm1pc3Npb25zKHVzZXJOYW1lKSB7DQogICAgICAgICAgICAvLyAxLiBJbml0aWFsIGRlYnVnIGFsZXJ0DQogICAgICAgICAgICAvL2FsZXJ0KCJGdW5jdGlvbiBTdGFydGVkIGZvcjogIiArIHVzZXJOYW1lKTsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSAiL1NldHRpbmdzLyIgKyB1c2VyTmFtZS50cmltKCkgKyAiLnR4dCI7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgInBhdGgiOiBmaWxlUGF0aCB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcbicpOw0KDQogICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2lkLCBhY2Nlc3NdID0gbGluZS5zcGxpdCgnfCcpLm1hcChzID0+IHMudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZCkgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBBLiBNaW4gUmVjb3JkIExvZ2ljIC0tLQ0KICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPT09ICJNaW5SZWNvcmROdW1iZXIiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmbG9vclZhbHVlID0gcGFyc2VJbnQoYWNjZXNzKSB8fCAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gPSBmbG9vclZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZFNsaWRlcicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5zZXRBdHRyaWJ1dGUoJ21pbicsIGZsb29yVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChzbGlkZXIudmFsdWUpIDwgZmxvb3JWYWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSBmbG9vclZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxvYWRSZWNvcmRCeUluZGV4ID09PSAiZnVuY3Rpb24iKSBsb2FkUmVjb3JkQnlJbmRleChmbG9vclZhbHVlIC0gMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEIuIFNlY3Rpb25zIExvZ2ljICgxLTcpIC0tLQ0KICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPT09ICJzZWN0aW9ucyIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoIlNlY3Rpb25zIHJlYWQ6IFsiICsgYWNjZXNzICsgIl0iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5U2VjdGlvbkFjY2VzcyhhY2Nlc3MpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEMuIFN0YW5kYXJkIFVJIFRvZ2dsZXMgKE4gPSBIaWRlKSAtLS0NCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAjJHtpZH0sIC4ke2lkfWApOw0KICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2Nlc3MgPT09ICJOIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBhbGVydCgiRXJyb3I6ICIgKyBlLm1lc3NhZ2UpOyB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBhcHBseVNlY3Rpb25BY2Nlc3MoYWxsb3dlZFN0cmluZykgew0KICAgICAgICAgICAgLy8gV2UgdGFyZ2V0IHRoZSBjb250YWluZXJzIGV4YWN0bHkgYXMgeW91IGRlZmluZWQgdGhlbQ0KICAgICAgICAgICAgY29uc3Qgc2VjdGlvbk1hcCA9IHsNCiAgICAgICAgICAgICAgICAnMCc6ICcjcmFkaW8tZG9jaycsIC8vSW50ZXJuZXQgUmFkaW8NCiAgICAgICAgICAgICAgICAnMSc6ICcucGFuY2hhbmctb3V0ZXInLA0KICAgICAgICAgICAgICAgICcyJzogJy5mbGFzaGJhY2stY29udGFpbmVyJywNCiAgICAgICAgICAgICAgICAnMyc6ICcuY2hpdHJhbS1jb250YWluZXInLA0KICAgICAgICAgICAgICAgICc0JzogJy5tbXB0LWFyY2hpdmUtYm94JywNCiAgICAgICAgICAgICAgICAnNSc6ICcjYXVkaW9fYXJjaGl2ZV9zZWN0aW9uJywNCiAgICAgICAgICAgICAgICAnNic6ICcjdmlkZW8tYXJjaGl2ZS1ib3gnLCAvLyBUYXJnZXRlZCB2aWEgdGhlIElEIHdlIGFkZGVkIGluIFN0ZXAgMQ0KICAgICAgICAgICAgICAgICc3JzogJyNwYW5jaGFuZ19zZWN0aW9uJywNCiAgICAgICAgICAgICAgICAnOCc6ICcubHVuYXItc2VjdGlvbicsDQogICAgICAgICAgICAgICAgJzgnOiAnLm5hdi1zZWN0aW9uJywNCiAgICAgICAgICAgICAgICAnRyc6ICcuZ3VydS1zZWN0aW9uJw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgT2JqZWN0LmtleXMoc2VjdGlvbk1hcCkuZm9yRWFjaChudW0gPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gc2VjdGlvbk1hcFtudW1dOw0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7DQoNCiAgICAgICAgICAgICAgICBpZiAoZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gSUYgdGhlIG51bWJlciBpcyBpbiB0aGUgc3RyaW5nIChlLmcuICcxMjMnKSwga2VlcC9zaG93IGl0Lg0KICAgICAgICAgICAgICAgICAgICAvLyBJRiBOT1QgKGUuZy4gJzYnIGlzIG1pc3NpbmcpLCBoaWRlIGl0IGltbWVkaWF0ZWx5Lg0KICAgICAgICAgICAgICAgICAgICBpZiAoYWxsb3dlZFN0cmluZy5pbmNsdWRlcyhudW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoJ2Rpc3BsYXknLCAnbm9uZScsICdpbXBvcnRhbnQnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFRha2VzIGEgc25hcCBvZiB1c2VyIHdoaWxlIGxhdW5jaCBhbmQgcHV0cyBpbiBsb2cgZm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBJTkRFUEVOREVOVCBTRUNVUklUWSBTTkFQU0hPVA0KICAgICAgICBhc3luYyBmdW5jdGlvbiBjYXB0dXJlU2VjdXJpdHlTbmFwc2hvdCgpIHsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBHZXQgQ2FtZXJhDQogICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyB2aWRlbzogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgICAgICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtOw0KICAgICAgICAgICAgICAgIGF3YWl0IHZpZGVvLnBsYXkoKTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIENhcHR1cmUgSW1hZ2UNCiAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsNCiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSB2aWRlby52aWRlb1dpZHRoOw0KICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSB2aWRlby52aWRlb0hlaWdodDsNCiAgICAgICAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UodmlkZW8sIDAsIDApOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gY2FudmFzLnRvQmxvYihyZXMsICdpbWFnZS9qcGVnJywgMC44KSk7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBTaW1wbGUgRmlsZW5hbWUgKFVzZXJfRGF0ZV9UaW1lLmpwZykNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5vdy5nZXRGdWxsWWVhcigpICsgIi0iICsNCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKSArICItIiArDQogICAgICAgICAgICAgICAgICAgIFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpICsgIl8iICsNCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nKG5vdy5nZXRIb3VycygpKS5wYWRTdGFydCgyLCAnMCcpICsgIi0iICsNCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nKG5vdy5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJyk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke01NUFRfTE9HX0RJUn1Vc2VyXyR7dGltZXN0YW1wfS5qcGdgOw0KDQogICAgICAgICAgICAgICAgLy8gNC4gVXBsb2FkIHRvIERyb3Bib3ggKFVzZXMgdGhlIGdsb2JhbCB0b2tlbiAndCcpDQogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGZpbGVOYW1lLCBtb2RlOiAnYWRkJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBibG9iDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyA1LiBUdXJuIG9mZiBDYW1lcmENCiAgICAgICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5zdG9wKCkpOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAvLyBTaWxlbnQgZmFpbCAtIHByZXZlbnRzIHRoZSBhcHAgZnJvbSBoYW5naW5nIGlmIG5vIGNhbWVyYSBpcyBmb3VuZA0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiU25hcHNob3Qgc2tpcHBlZC4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FkbWluIFBhbmVsDQogICAgICAgIC8vIFNob3dzIGxhdGVzdCB0d28gcGhvdG9zIG9mIHVzZXJzIGxvZ2dlZCBpbiBhZG1pbiBwYW5lbA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZEFkbWluU25hcHMoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIHRoZSBsaXN0IG9mIGZpbGVzDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvbGlzdF9mb2xkZXInLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfTE9HX0RJUiB9KQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gU29ydCBieSBkYXRlIGFuZCB0YWtlIGxhdGVzdCAyDQogICAgICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBkYXRhLmVudHJpZXMNCiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmID0+IGYubmFtZS5lbmRzV2l0aCgnLmpwZycpKQ0KICAgICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jbGllbnRfbW9kaWZpZWQpIC0gbmV3IERhdGUoYS5jbGllbnRfbW9kaWZpZWQpKQ0KICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMik7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBQb3B1bGF0ZSB0aGUgY2VsbHMNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNuYXAtYm94LSR7aSArIDF9YCk7DQogICAgICAgICAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gIiI7IC8vIENsZWFyIGV4aXN0aW5nDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVzW2ldKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZ2V0X3RlbXBvcmFyeV9saW5rJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBmaWxlc1tpXS5wYXRoX2xvd2VyIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtEYXRhID0gYXdhaXQgbGlua1Jlcy5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgdGltZSBmcm9tIGZpbGVuYW1lIFVzZXJfWVlZWS1NTS1ERF9ISC1NTS5qcGcNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBmaWxlc1tpXS5uYW1lLnNwbGl0KCdfJylbMl0/LnJlcGxhY2UoJy5qcGcnLCAnJykgfHwgIkxvZyI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTBweDsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzY2NjsgbWFyZ2luLWJvdHRvbToycHg7Ij4ke3RpbWV9PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIke2xpbmtEYXRhLmxpbmt9IiBzdHlsZT0id2lkdGg6NzBweDsgaGVpZ2h0OjcwcHg7IG9iamVjdC1maXQ6Y292ZXI7IGJvcmRlcjoxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czo0cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiQ291bGQgbm90IGxvYWQgc2VjdXJpdHkgc25hcHNob3RzLiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEF1ZGl0cyB0aGUgZW50cmllcyBvZiBSZWNlaXB0IGZpbGxlZCBqdXN0IGJlZm9yZSBzYXZpbmcgYW5kIHBvaW50cyBvdXQgcG9zc2libGUgZXJyb3JzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBydW5BdWRpdCgpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IChpZCkgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmNoZWNrZWQ7DQogICAgICAgICAgICAgICAgY29uc3QgZ2V0VmFsID0gKGlkKSA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkudmFsdWUudHJpbSgpOw0KDQogICAgICAgICAgICAgICAgLy8gMS4gREFUQSBWQUxJREFUSU9ODQogICAgICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBnZXRWYWwoJ2ZpZWxkX3Bob25lJykucmVwbGFjZSgvXEQvZywgJycpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBhbiA9IGdldFZhbCgnZmllbGRfcGFuJykudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9IGdldFZhbCgnZmllbGRfZW1haWwnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGdldFZhbCgnZmllbGRfYW1vdW50JykpIHx8IDA7DQogICAgICAgICAgICAgICAgY29uc3QgaXNDYW5jZWxsZWQgPSBpc0NoZWNrZWQoJ2ZpZWxkX2NhbmNlbCcpOw0KDQogICAgICAgICAgICAgICAgbGV0IGVycm9ycyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBibGFua3MgPSBbXTsNCg0KICAgICAgICAgICAgICAgIC8vIENvbXByZWhlbnNpdmUgQmxhbmsgQ2hlY2sgKEFsbCB0ZXh0L3RleHRhcmVhIGZpZWxkcykNCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0RmllbGRzID0gew0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfcmVjbm8nOiAnUmVjZWlwdCBObycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9kYXRlJzogJ0RhdGUnLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfbmFtZSc6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3Bob25lJzogJ1Bob25lJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2FkZHJlc3MnOiAnQWRkcmVzcycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9lbWFpbCc6ICdFbWFpbCcsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9wYW4nOiAnUEFOJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3N0YXInOiAnU3RhcicsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9nb3RocmFtJzogJ0dvdGhyYW0nLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfYW1vdW50JzogJ0Ftb3VudCcsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9yZWYnOiAnUmVmZXJlbmNlL0NocSBObycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9jb21tZW50cyc6ICdDb21tZW50cycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9waW5jb2RlJzogJ1BpbmNvZGUnDQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGZvciAobGV0IGlkIGluIHRleHRGaWVsZHMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRWYWwoaWQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBibGFua3MucHVzaCh0ZXh0RmllbGRzW2lkXSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBGb3JtYXQgJiBMb2dpY2FsIFZhbGlkYXRpb25zDQogICAgICAgICAgICAgICAgaWYgKHBob25lLmxlbmd0aCA+IDAgJiYgcGhvbmUubGVuZ3RoICE9PSAxMCkgew0KICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgi4pqg77iPIFBob25lIG51bWJlciBtdXN0IGJlIGV4YWN0bHkgMTAgZGlnaXRzLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChwYW4ubGVuZ3RoID4gMCAmJiAhL1tBLVpdezV9WzAtOV17NH1bQS1aXXsxfS8udGVzdChwYW4pKSB7DQogICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCLimqDvuI8gUEFOIGZvcm1hdCBpcyBpbnZhbGlkIChFeHBlY3RlZDogQUFBQUExMTExQSkuIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gLS0tIE5FVyBFTUFJTCBWQUxJREFUSU9OIC0tLQ0KICAgICAgICAgICAgICAgIGlmIChlbWFpbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsUmVnZXggPSAvXlteXHNAXStAW15cc0BdK1wuW15cc0BdKyQvOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWVtYWlsUmVnZXgudGVzdChlbWFpbCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCLimqDvuI8gRW1haWwgZm9ybWF0IGlzIGludmFsaWQgKEV4cGVjdGVkOiBuYW1lQGRvbWFpbi5jb20pLiIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gWmVybyBBbW91bnQgSGlnaGxpZ2h0IExvZ2ljDQogICAgICAgICAgICAgICAgbGV0IGFtb3VudFdhcm5pbmcgPSAiIjsNCiAgICAgICAgICAgICAgICBpZiAoIWlzQ2FuY2VsbGVkICYmIGFtb3VudCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBhbW91bnRXYXJuaW5nID0gYDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZjJmMjsgY29sb3I6I2Q5MzAyNTsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNkOTMwMjU7IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tYm90dG9tOjE1cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IHRleHQtYWxpZ246Y2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pqg77iPIENSSVRJQ0FMOiBBbW91bnQgaXMgMC4gUGxlYXNlIHZlcmlmeSBpZiB0aGlzIGlzIGludGVudGlvbmFsLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goIuKaoO+4jyBBbW91bnQgaXMgemVyby4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEJVSUxEIFRIRSBBVURJVCBVSQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbEhlYWRlciA9IGlzQ2FuY2VsbGVkID8NCiAgICAgICAgICAgICAgICAgICAgYDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6cmVkOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjEuMmVtOyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWJvdHRvbToxNXB4OyI+ISEhIFJFQ0VJUFQgSVMgQ0FOQ0VMTEVEICEhITwvZGl2PmAgOiAiIjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1c0dyaWQgPSBgDQo8ZGl2IHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMTBweDsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgcGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czogNXB4OyI+DQo8ZGl2PkNhbmNlbGxlZDogJHtpc0NhbmNlbGxlZCA/ICc8YiBzdHlsZT0iY29sb3I6cmVkOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPGRpdj5QcmludGVkOiAke2lzQ2hlY2tlZCgnZmllbGRfcHJpbnRlZCcpID8gJzxiIHN0eWxlPSJjb2xvcjpncmVlbjsiPllFUzwvYj4nIDogJ05PJ308L2Rpdj4NCjxkaXY+UHJhc2FkYW06ICR7aXNDaGVja2VkKCdmaWVsZF9wcmFzYWRhbScpID8gJzxiIHN0eWxlPSJjb2xvcjpncmVlbjsiPllFUzwvYj4nIDogJ05PJ308L2Rpdj4NCjxkaXY+Q29ycHVzIFNpZ25lZDogJHtpc0NoZWNrZWQoJ2ZpZWxkX2NvcnB1cycpID8gJzxiIHN0eWxlPSJjb2xvcjpncmVlbjsiPllFUzwvYj4nIDogJ05PJ308L2Rpdj4NCjwvZGl2PmA7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgb3ZlcmxheS5zdHlsZSA9ICJwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjg1KTsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHotaW5kZXg6MTAwMDE7IGZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7IjsNCg0KDQogICAgICAgICAgICAgICAgb3ZlcmxheS5pbm5lckhUTUwgPSBgDQo8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBwYWRkaW5nOjI1cHg7IGJvcmRlci1yYWRpdXM6MTJweDsgd2lkdGg6NTgwcHg7IGJveC1zaGFkb3c6IDAgMTBweCAzMHB4IHJnYmEoMCwwLDAsMC41KTsgbWF4LWhlaWdodDogOTB2aDsgb3ZlcmZsb3cteTogYXV0bzsiPg0KJHtjYW5jZWxIZWFkZXJ9DQoke2Ftb3VudFdhcm5pbmd9DQoNCjxoMiBzdHlsZT0ibWFyZ2luLXRvcDowOyBib3JkZXItYm90dG9tOjJweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWJvdHRvbToxMHB4OyI+UmVjZWlwdCBBdWRpdCBSZXBvcnQ8L2gyPg0KDQo8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjE1cHg7IGxpbmUtaGVpZ2h0OjEuNTsiPg0KPGI+UmVjZWlwdDo8L2I+ICR7Z2V0VmFsKCdmaWVsZF9yZWNubycpfSB8IDxiPkRhdGU6PC9iPiAke2dldFZhbCgnZmllbGRfZGF0ZScpfTxicj4NCjxiPk5hbWU6PC9iPiAke2dldFZhbCgnZmllbGRfbmFtZScpfTxicj4NCjxiPkFtb3VudDo8L2I+IDxzcGFuIHN0eWxlPSIke2Ftb3VudCA9PT0gMCA/ICdjb2xvcjpyZWQ7IGZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc2l6ZToxLjJlbTsnIDogJyd9Ij7igrkke2Ftb3VudH08L3NwYW4+IHwgPGI+VG93YXJkczo8L2I+ICR7Z2V0VmFsKCdmaWVsZF90b3dhcmRzJyl9DQo8L2Rpdj4NCg0KPGg0IHN0eWxlPSJtYXJnaW46IDE1cHggMCA1cHggMDsgY29sb3I6IzU1NTsiPkRhdGFiYXNlIFN0YXR1cyBGbGFnczo8L2g0Pg0KJHtzdGF0dXNHcmlkfQ0KDQoke2JsYW5rcy5sZW5ndGggPiAwID8gYA0KPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyBiYWNrZ3JvdW5kOiNlOGY0ZmQ7IHBhZGRpbmc6MTBweDsgYm9yZGVyLWxlZnQ6NXB4IHNvbGlkICMyMTk2RjM7Ij4NCjxiIHN0eWxlPSJjb2xvcjojMGQ0N2ExOyI+VGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIGJsYW5rOjwvYj48YnI+DQo8c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuOWVtOyBjb2xvcjojMzMzOyI+JHtibGFua3Muam9pbignLCAnKX08L3NwYW4+DQo8L2Rpdj4NCmAgOiAiIn0NCg0KJHtlcnJvcnMubGVuZ3RoID4gMCA/IGANCjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDsgYmFja2dyb3VuZDojZmZmM2NkOyBwYWRkaW5nOjEwcHg7IGJvcmRlci1sZWZ0OjVweCBzb2xpZCAjZmZjMTA3OyI+DQo8YiBzdHlsZT0iY29sb3I6Izg1NjQwNDsiPlZhbGlkYXRpb24gQWxlcnRzOjwvYj48YnI+DQoke2Vycm9ycy5qb2luKCc8YnI+Jyl9DQo8L2Rpdj4NCmAgOiAiIn0NCg0KPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgbWFyZ2luLXRvcDoyNXB4OyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsgcGFkZGluZy10b3A6IDE1cHg7Ij4NCjxidXR0b24gaWQ9ImF1ZGl0X2JhY2siIHN0eWxlPSJwYWRkaW5nOjEwcHggMjBweDsgbWFyZ2luLXJpZ2h0OjEwcHg7IGN1cnNvcjpwb2ludGVyOyBib3JkZXItcmFkaXVzOjVweDsgYm9yZGVyOjFweCBzb2xpZCAjY2NjOyBiYWNrZ3JvdW5kOiB3aGl0ZTsiPkdvIEJhY2sgJiBFZGl0PC9idXR0b24+DQo8YnV0dG9uIGlkPSJhdWRpdF9jb25maXJtIiBzdHlsZT0icGFkZGluZzoxMHB4IDMwcHg7IGJhY2tncm91bmQ6IzI4YTc0NTsgY29sb3I6d2hpdGU7IGJvcmRlcjpub25lOyBib3JkZXItcmFkaXVzOjVweDsgY3Vyc29yOnBvaW50ZXI7IGZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc2l6ZTogMS4xZW07Ij5DT05GSVJNICYgU1lOQzwvYnV0dG9uPg0KPC9kaXY+DQo8L2Rpdj5gOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpdF9iYWNrJykub25jbGljayA9ICgpID0+IHsgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdmVybGF5KTsgcmVzb2x2ZShmYWxzZSk7IH07DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGl0X2NvbmZpcm0nKS5vbmNsaWNrID0gKCkgPT4geyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXkpOyByZXNvbHZlKHRydWUpOyB9Ow0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIEVuc3VyZSBpdCBydW5zIGFmdGVyIHRoZSBwYWdlIGhhcyBmaW5pc2hlZCBhbGwgaXRzIGludGVybmFsIGRhdGEtbG9hZGluZw0KICAgICAgICB3aW5kb3cub25sb2FkID0gKCkgPT4gew0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50VXNlciAhPT0gJ3VuZGVmaW5lZCcpIGFwcGx5VXNlclBlcm1pc3Npb25zKGN1cnJlbnRVc2VyKTsNCiAgICAgICAgICAgIH0sIDEwMDApOw0KICAgICAgICB9Ow0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIEFub255IFJlY2VpcHRzIEF1dG9maWxsIGZyb20ga25vd24gcmVjZWlwdCB0byBhbm9ueSAtIGlucHV0IGZyb20gTU1QVF9MSU5LX0FOT05ZIEFub255RmlsbC50eHQgaW4gU2V0dGluZ3MgRm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5Bbm9ueUZpbGwoKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdPdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKE1NUFRfTElOS19BTk9OWSk7DQogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKCJMaW5rIHVucmVhY2hhYmxlIik7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBtYXBwaW5nVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBtYXBwaW5nVGV4dC5zcGxpdCgnXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLmluY2x1ZGVzKCd8JykpOw0KDQogICAgICAgICAgICAgICAgbGV0IGNoYW5nZU1hZGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBsZXQgdXBkYXRlQ291bnQgPSAwOw0KDQogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFt0YXJnZXRSTiwgc291cmNlUk5dID0gbGluZS5zcGxpdCgnfCcpLm1hcChwID0+IHAudHJpbSgpKTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VSb3cgPSBHTE9CQUxfREJfTElORVMuZmluZChyID0+IHIuc3RhcnRzV2l0aChzb3VyY2VSTiArICJ8IikpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRJbmRleCA9IEdMT0JBTF9EQl9MSU5FUy5maW5kSW5kZXgociA9PiByLnN0YXJ0c1dpdGgodGFyZ2V0Uk4gKyAifCIpKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlUm93ICYmIHRhcmdldEluZGV4ICE9PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IHNvdXJjZVJvdy5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBHTE9CQUxfREJfTElORVNbdGFyZ2V0SW5kZXhdLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSAxLiBESVJFQ1QgUkVQTElDQVRJT04gLS0tDQogICAgICAgICAgICAgICAgICAgICAgICB0WzJdID0gc1syXTsgIC8vIE5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRbM10gPSBzWzNdOyAgLy8gUGhvbmUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRbNF0gPSBzWzRdOyAgLy8gQWRkcmVzcw0KICAgICAgICAgICAgICAgICAgICAgICAgdFs1XSA9IHNbNV07ICAvLyBFbWFpbA0KICAgICAgICAgICAgICAgICAgICAgICAgdFs2XSA9IHNbNl07ICAvLyBQQU4NCiAgICAgICAgICAgICAgICAgICAgICAgIHRbN10gPSBzWzddOyAgLy8gU3Rhcg0KICAgICAgICAgICAgICAgICAgICAgICAgdFs4XSA9IHNbOF07ICAvLyBHb3RocmFtDQogICAgICAgICAgICAgICAgICAgICAgICB0WzE1XSA9IHNbMTVdOyAvLyBQaW4gQ29kZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdFsxOV0gPSBzWzE5XTsgLy8gQ291bnRyeQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gMi4gRElSRUNUIENPTU1FTlQgQVBQRU5EIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gY2hlY2tzLCBubyAiaWYiIGJsb2Nrcy4gSnVzdCBhcHBlbmQgdG8gaW5kZXggMTQuDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RlID0gIkRldGFpbHMgSW1wb3J0ZWQgZnJvbSAiICsgc291cmNlUk47DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRDb21tZW50ID0gKHRbMTRdIHx8ICIiKS50cmltKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYW4gb2xkIGNvbW1lbnQsIGFkZCBwaXBlOyBvdGhlcndpc2UganVzdCB0aGUgbm90ZS4NCiAgICAgICAgICAgICAgICAgICAgICAgIHRbMTRdID0gb2xkQ29tbWVudCA/IChvbGRDb21tZW50ICsgIiA6ICIgKyBub3RlKSA6IG5vdGU7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSAzLiBSRS1KT0lOIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTW3RhcmdldEluZGV4XSA9IHQuam9pbignfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTWFkZSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlTWFkZSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBBVVRIRU5USUNBVElPTg0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlblBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlblJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHRva2VuUGFyYW1zDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCB0b2tlblJlcy5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gVVBMT0FEDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwbG9hZFJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuRGF0YS5hY2Nlc3NfdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBHTE9CQUxfREJfTElORVMuam9pbignXG4nKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAodXBsb2FkUmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiQW5vbnlGaWxsOiBEb25lLiAiICsgdXBkYXRlQ291bnQgKyAiIHJlY29yZHMgdXBkYXRlZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkFub255RmlsbCBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQmFja3VwcyBDb21wbGV0ZSBBcHAgRm9sZGVyIHdpdGggYWxsIGZpbGVzIGFuZCBwdXRzIGluIEJhY2t1cCBGb2xkZXIgd2l0aCBUaW1lc3RhbXANCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bk1NUFRCYWNrdXAoKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gR2VuZXJhdGUgVGltZXN0YW1wIGZvciBGb2xkZXIgTmFtZQ0KICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbm93LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSArICJfIiArDQogICAgICAgICAgICAgICAgICAgIG5vdy5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArICItIiArDQogICAgICAgICAgICAgICAgICAgIG5vdy5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RGlyID0gTU1QVF9CQUNLVVBfRElSICsgdGltZXN0YW1wOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gR2V0IEFjY2VzcyBUb2tlbiB1c2luZyB5b3VyIGNyZWRlbnRpYWxzDQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5QYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHRva2VuUGFyYW1zDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXdhaXQgdG9rZW5SZXMuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gdG9rZW5EYXRhLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGxldCBjb3B5RW50cmllcyA9IFtdOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gU1RFUCBBOiBDb3B5IENvcmUgSW5kaXZpZHVhbCBGaWxlcyAoUmVhZC1vbmx5IGxpbmtzKQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcmVGaWxlcyA9IFsNCiAgICAgICAgICAgICAgICAgICAgTU1QVF9GSUxFX0RCLCBNTVBUX0ZJTEVfVVNFUlMsIE1NUFRfRklMRV9BUFBST1ZFRCwNCiAgICAgICAgICAgICAgICAgICAgTU1QVF9GSUxFX0xPR08sIE1NUFRfRklMRV9EUk9QRE9XTlMsIE1NUFRfRklMRV9DQVNILA0KICAgICAgICAgICAgICAgICAgICBNTVBUX0ZJTEVfQkFOSywgRVhFTVBUX0ZJTEUsIE1NUFRfRklMRV9TRVENCiAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgY29yZUZpbGVzLmZvckVhY2gocGF0aCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvcHlFbnRyaWVzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgZnJvbV9wYXRoOiBwYXRoLA0KICAgICAgICAgICAgICAgICAgICAgICAgdG9fcGF0aDogdGFyZ2V0RGlyICsgIi8iICsgcGF0aC5zcGxpdCgnLycpLnBvcCgpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gNC4gU1RFUCBCOiBEeW5hbWljIEZvbGRlciBDb3B5IChFeGNsdWRpbmcgUGFuY2hhbmcpDQogICAgICAgICAgICAgICAgLy8gU2NhbnMgdGhlIHJvb3Qgb2YgeW91ciBBcHAgZm9sZGVyDQogICAgICAgICAgICAgICAgY29uc3QgbGlzdFJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2xpc3RfZm9sZGVyJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogIiIgfSkNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChsaXN0UmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3REYXRhID0gYXdhaXQgbGlzdFJlcy5qc29uKCk7DQogICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLmVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lTG93ZXIgPSBlbnRyeS5uYW1lLnRvTG93ZXJDYXNlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgYWxsIGZvbGRlcnMgRVhDRVBUICdwYW5jaGFuZycNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeVsiLnRhZyJdID09PSAiZm9sZGVyIiAmJiBuYW1lTG93ZXIgIT09ICJwYW5jaGFuZyIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5RW50cmllcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbV9wYXRoOiBlbnRyeS5wYXRoX2xvd2VyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b19wYXRoOiB0YXJnZXREaXIgKyAiLyIgKyBlbnRyeS5uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBbHNvIGNhdGNoIGFueSBsb29zZSBmaWxlcyBpbiByb290IChsaWtlIHZpZGVvcy50eHQpIG5vdCBhbHJlYWR5IGluIGNvcmVGaWxlcw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZW50cnlbIi50YWciXSA9PT0gImZpbGUiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBbHJlYWR5TGlzdGVkID0gY29yZUZpbGVzLnNvbWUoY2YgPT4gY2YudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhuYW1lTG93ZXIpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQWxyZWFkeUxpc3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5RW50cmllcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21fcGF0aDogZW50cnkucGF0aF9sb3dlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvX3BhdGg6IHRhcmdldERpciArICIvIiArIGVudHJ5Lm5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIEJhdGNoIENvcHkNCiAgICAgICAgICAgICAgICBpZiAoY29weUVudHJpZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vMi9maWxlcy9jb3B5X2JhdGNoX3YyJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWNjZXNzVG9rZW4sICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZW50cmllczogY29weUVudHJpZXMgfSkNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNS4gU1RFUCBDOiBQcm9jZXNzIEV4dGVybmFsIE9ubGluZSBMaW5rcyAoRG93bmxvYWQvVXBsb2FkKQ0KICAgICAgICAgICAgICAgIGNvbnN0IG9ubGluZUxpbmtzID0gWw0KICAgICAgICAgICAgICAgICAgICB7IHVybDogTU1QVF9VUkxfRVhQRU5TRVMsIG5hbWU6ICJFeHBlbnNlcy54bHN4IiB9LA0KICAgICAgICAgICAgICAgICAgICB7IHVybDogQkFOS19TVEFURU1FTlRfVVJMLCBuYW1lOiAiQmFua1N0YXRlbWVudC54bHMiIH0sDQogICAgICAgICAgICAgICAgICAgIHsgdXJsOiBNTVBUX0xJTktfQU5PTlksIG5hbWU6ICJBbm9ueUZpbGwudHh0IiB9DQogICAgICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBvbmxpbmVMaW5rcykgew0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZVJlcyA9IGF3YWl0IGZldGNoKGl0ZW0udXJsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBmaWxlUmVzLmJsb2IoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiB0YXJnZXREaXIgKyAiLyIgKyBpdGVtLm5hbWUsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGJsb2INCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoIkxpbmsgYmFja3VwIGZhaWxlZDogIiArIGl0ZW0ubmFtZSk7IH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBhbGVydCgiQmFja3VwIFN1Y2Nlc3MhXG5BbGwgZm9sZGVycyAoZXhjZXB0IFBhbmNoYW5nKSBzYXZlZCB0bzogIiArIHRhcmdldERpcik7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJCYWNrdXAgRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBUZXh0IERvd25sb2FkIEZ1bmN0aW9uIGZvciB0aGUgYWRtaW4gcGFuZWwgZnVuY3Rpb25zDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBkb3dubG9hZFR4dCh0ZXh0LCBmaWxlbmFtZSkgew0KICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt0ZXh0XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7DQogICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7DQogICAgICAgICAgICBhLmNsaWNrKCk7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOw0KICAgICAgICB9DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENpdHkgTmFtZSBFcnJvciBhbmQgU3VnZ2VzdGlvbnMgZm9yIENvcnJlY3Rpb25zIGRvd25sb2FkcyA2IHRleHQgZmlsZXMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkNpdHlFeHRyYWN0aW9uKG1vZGUgPSAnbm9ybWFsJykgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChNTVBUX0RCX1JBV19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhd0NvbnRlbnQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSByYXdDb250ZW50LnNwbGl0KC9ccj9cbnxcci8pOw0KDQogICAgICAgICAgICAgICAgbGV0IGxpc3QxX0FsbCA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBsaXN0M19NYXAgPSB7fTsNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDZfTWFwID0ge307DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZWZDaXRpZXMgPSBbIk11bWJhaSIsICJEZWxoaSIsICJCZW5nYWx1cnUiLCAiQmFuZ2Fsb3JlIiwgIkh5ZGVyYWJhZCIsICJBaG1lZGFiYWQiLCAiQ2hlbm5haSIsICJLb2xrYXRhIiwgIlN1cmF0IiwgIlB1bmUiLCAiSmFpcHVyIiwgIkx1Y2tub3ciLCAiS2FucHVyIiwgIk5hZ3B1ciIsICJJbmRvcmUiLCAiVGhhbmUiLCAiQmhvcGFsIiwgIlZpc2FraGFwYXRuYW0iLCAiUGF0bmEiLCAiVmFkb2RhcmEiLCAiR2hhemlhYmFkIiwgIkx1ZGhpYW5hIiwgIkFncmEiLCAiTmFzaGlrIiwgIkZhcmlkYWJhZCIsICJNZWVydXQiLCAiUmFqa290IiwgIlZhcmFuYXNpIiwgIlNyaW5hZ2FyIiwgIkF1cmFuZ2FiYWQiLCAiQW1yaXRzYXIiLCAiUmFuY2hpIiwgIkd3YWxpb3IiLCAiSmFiYWxwdXIiLCAiQ29pbWJhdG9yZSIsICJWaWpheWF3YWRhIiwgIk1hZHVyYWkiLCAiUmFpcHVyIiwgIktvdGEiLCAiQ2hhbmRpZ2FyaCIsICJHdXdhaGF0aSIsICJTb2xhcHVyIiwgIkthbmNoaXB1cmFtIiwgIk15c29yZSIsICJUaXJ1Y2hpcmFwcGFsbGkiLCAiVHJpY2h5IiwgIlNhbGVtIiwgIlRpcnVwcHVyIiwgIlNyaXJhbmdhbSIsICJTZWN1bmRlcmFiYWQiLCAiVGhpcnV2ZWRhZ2FtIiwgIkNhbGlmb3JuaWEiLCAiVGFtaWxuYWR1IiwgIkJldGhsZWhlbSIsICJEb2hhIl07DQogICAgICAgICAgICAgICAgY29uc3QgcmVmQ291bnRyaWVzID0gWyJVQUUiLCAiVUsiLCAiVVNBIiwgIlNpbmdhcG9yZSIsICJNYWxheXNpYSIsICJBdXN0cmFsaWEiLCAiQ2FuYWRhIiwgIkdlcm1hbnkiLCAiRnJhbmNlIiwgIkphcGFuIiwgIkR1YmFpIiwgIlFhdGFyIiwgIkt1d2FpdCIsICJPbWFuIiwgIkJhaHJhaW4iLCAiU2F1ZGkgQXJhYmlhIiwgIlVuaXRlZCBLaW5nZG9tIiwgIlVuaXRlZCBBcmFiIEVtaXJhdGVzIiwgIlVuaXRlZCBTdGF0ZXMiLCAiU3dpdHplcmxhbmQiLCAiTmV0aGVybGFuZHMiXTsNCg0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNpbWlsYXJpdHkoczEsIHMyKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsb25nZXIgPSBzMS50b0xvd2VyQ2FzZSgpLCBzaG9ydGVyID0gczIudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHMxLmxlbmd0aCA8IHMyLmxlbmd0aCkgeyBsb25nZXIgPSBzMi50b0xvd2VyQ2FzZSgpOyBzaG9ydGVyID0gczEudG9Mb3dlckNhc2UoKTsgfQ0KICAgICAgICAgICAgICAgICAgICBsZXQgbG9uZ2VyTGVuZ3RoID0gbG9uZ2VyLmxlbmd0aDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxvbmdlckxlbmd0aCA9PSAwKSByZXR1cm4gMS4wOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBlZGl0RGlzdGFuY2UgPSAoczEsIHMyKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29zdHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHMxLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3RWYWx1ZSA9IGk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gczIubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkgY29zdHNbal0gPSBqOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChqID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlID0gY29zdHNbaiAtIDFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMxLmNoYXJBdChpIC0gMSkgIT0gczIuY2hhckF0KGogLSAxKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IE1hdGgubWluKE1hdGgubWluKG5ld1ZhbHVlLCBsYXN0VmFsdWUpLCBjb3N0c1tqXSkgKyAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29zdHNbaiAtIDFdID0gbGFzdFZhbHVlOyBsYXN0VmFsdWUgPSBuZXdWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIGNvc3RzW3MyLmxlbmd0aF0gPSBsYXN0VmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29zdHNbczIubGVuZ3RoXTsNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChsb25nZXJMZW5ndGggLSBlZGl0RGlzdGFuY2Uoc2hvcnRlciwgbG9uZ2VyKSkgLyBwYXJzZUZsb2F0KGxvbmdlckxlbmd0aCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRMaW5lID0gbGluZXNbMF0uaW5jbHVkZXMoJ3wnKSAmJiBsaW5lc1swXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJyZWNlaXB0IikgPyAxIDogMDsNCg0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBzdGFydExpbmU7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lICYmIGkgPT09IGxpbmVzLmxlbmd0aCAtIDEpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkc1sxM10gPT09ICJZRVMiKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlaXB0Tm8gPSBmaWVsZHNbMF0gfHwgIlVOS05PV04iOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY2l0eSA9ICIiOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZHNbNF0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhlIHRpbGRlcyB0byBzcGFjZSBjb252ZXJzaW9uDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5BZGRyZXNzID0gZmllbGRzWzRdLnJlcGxhY2UoL34vZywgIiAiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgd29yZHMgPSBjbGVhbkFkZHJlc3Muc3BsaXQoL1xzKy8pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyYWIgdGhlIHJhdyBsYXN0IHdvcmQgKHdoaWNoIG1pZ2h0IGNvbnRhaW4gY29sb25zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHkgPSB3b3Jkc1t3b3Jkcy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGxpc3QxX0FsbC5wdXNoKGAke2NpdHl9LCAke3JlY2VpcHROb31gKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoY2l0eSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZWRDb3VudHJ5ID0gcmVmQ291bnRyaWVzLmZpbmQoYyA9PiBjLnRvTG93ZXJDYXNlKCkgPT09IGNpdHkudG9Mb3dlckNhc2UoKSB8fCBnZXRTaW1pbGFyaXR5KGNpdHksIGMpID4gMC44NSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZENvdW50cnkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpc3Q2X01hcFttYXRjaGVkQ291bnRyeV0pIGxpc3Q2X01hcFttYXRjaGVkQ291bnRyeV0gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0Nl9NYXBbbWF0Y2hlZENvdW50cnldLnB1c2gocmVjZWlwdE5vKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaXN0M19NYXBbY2l0eV0pIGxpc3QzX01hcFtjaXR5XSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QzX01hcFtjaXR5XS5wdXNoKHJlY2VpcHRObyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBsaXN0Ml9VbmlxdWUgPSBPYmplY3Qua2V5cyhsaXN0M19NYXApLnNvcnQoKTsNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDNfU3RyaW5ncyA9IGxpc3QyX1VuaXF1ZS5tYXAoYyA9PiBgJHtjfSwgJHtsaXN0M19NYXBbY10uam9pbignLCAnKX1gKTsNCg0KICAgICAgICAgICAgICAgIGxldCBsaXN0NF9BbGxTdWdnZXN0aW9ucyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBsaXN0NV9BY3Rpb25zT25seSA9IFtdOw0KDQogICAgICAgICAgICAgICAgbGlzdDJfVW5pcXVlLmZvckVhY2gob3JpZ2luYWwgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgc3VnZ2VzdGlvbiA9ICIiOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBORVcgQ09MT04gTE9HSUMgLS0tDQogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSAib3JpZ2luYWwiIGhhcyBhIGNvbG9uLCB3ZSBzdWdnZXN0IHJlcGxhY2luZyBjb2xvbiB3aXRoIGNvbW1hK3NwYWNlDQogICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbC5pbmNsdWRlcygnOicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uID0gb3JpZ2luYWwuc3BsaXQoJzonKS5tYXAocGFydCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FwaXRhbGl6ZSBlYWNoIHBhcnQgZm9yIGEgY2xlYW4gc3VnZ2VzdGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zbGljZSgxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJywgJyk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGFuZGFyZCBTaW1pbGFyaXR5IExvZ2ljIGZvciBzaW5nbGUgd29yZHMNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiZXN0U2NvcmUgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcmVmIG9mIHJlZkNpdGllcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IGdldFNpbWlsYXJpdHkob3JpZ2luYWwsIHJlZik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3JlID4gMC43NSAmJiBzY29yZSA+IGJlc3RTY29yZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0U2NvcmUgPSBzY29yZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbiA9IHJlZjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3VnZ2VzdGlvbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZFJlZiA9IFsuLi5yZWZDaXRpZXNdLnNvcnQoKGEsIGIpID0+IGIubGVuZ3RoIC0gYS5sZW5ndGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHJlZiBvZiBzb3J0ZWRSZWYpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgKC4rPykoJHtyZWZ9KSRgLCAnaScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnZXgudGVzdChvcmlnaW5hbCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IG9yaWdpbmFsLm1hdGNoKHJlZ2V4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcmVmaXggPSBtYXRjaFsxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG1hdGNoWzFdLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXpBLVpdL2csICIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb24gPSBgJHtwcmVmaXh9LCAke3JlZn1gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBsZXQgaXNKdXN0Q2FzaW5nID0gc3VnZ2VzdGlvbi50b0xvd2VyQ2FzZSgpID09PSBvcmlnaW5hbC50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxPdXQgPSAoaXNKdXN0Q2FzaW5nIHx8ICFzdWdnZXN0aW9uIHx8IG9yaWdpbmFsLmxlbmd0aCA8IDQpID8gIiIgOiBzdWdnZXN0aW9uOw0KDQogICAgICAgICAgICAgICAgICAgIGxpc3Q0X0FsbFN1Z2dlc3Rpb25zLnB1c2gob3JpZ2luYWwucGFkRW5kKDMwLCAnICcpICsgIiB8ICIgKyBmaW5hbE91dCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dCAhPT0gIiIpIGxpc3Q1X0FjdGlvbnNPbmx5LnB1c2gob3JpZ2luYWwucGFkRW5kKDMwLCAnICcpICsgIiB8ICIgKyBmaW5hbE91dCk7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDZfU3RyaW5ncyA9IE9iamVjdC5rZXlzKGxpc3Q2X01hcCkuc29ydCgpLm1hcChjb3VudHJ5ID0+IGAke2NvdW50cnl9LCAke2xpc3Q2X01hcFtjb3VudHJ5XS5qb2luKCcsICcpfWApOw0KDQogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGlzdDVfQWN0aW9uc09ubHkpKSB7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5HTE9CQUxfQ0lUWV9BVURJVF9EQVRBID0gbGlzdDVfQWN0aW9uc09ubHkuam9pbignXG4nKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB3aW5kb3cuR0xPQkFMX0NJVFlfQVVESVRfREFUQSA9IGxpc3Q1X0FjdGlvbnNPbmx5Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAnYXVkaXQnKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXIgPSAiT1JJR0lOQUwgTkFNRSIucGFkRW5kKDMwLCAnICcpICsgIiB8IFNVR0dFU1RFRCBDT1JSRUNUSU9OXG4iICsgIi0iLnJlcGVhdCg2MCkgKyAiXG4iOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGxpc3QxX0FsbC5qb2luKCdcbicpLCAiMV9DaXRpZXNfUmVjb3Jkcy50eHQiKTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGRvd25sb2FkVHh0KGxpc3QyX1VuaXF1ZS5qb2luKCdcbicpLCAiMl9DaXRpZXNfVW5pcXVlX0xpc3QudHh0IiksIDYwMCk7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkb3dubG9hZFR4dChsaXN0M19TdHJpbmdzLmpvaW4oJ1xuJyksICIzX0NpdGllc19Db3JyZWN0aW9uX01hcC50eHQiKSwgMTIwMCk7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkb3dubG9hZFR4dChoZWFkZXIgKyBsaXN0NF9BbGxTdWdnZXN0aW9ucy5qb2luKCdcbicpLCAiNF9DaXRpZXNfRnVsbF9BdWRpdC50eHQiKSwgMTgwMCk7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkb3dubG9hZFR4dChoZWFkZXIgKyBsaXN0NV9BY3Rpb25zT25seS5qb2luKCdcbicpLCAiNV9DaXRpZXNfQWN0aW9uc19Pbmx5LnR4dCIpLCAyNDAwKTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRUeHQobGlzdDZfU3RyaW5ncy5qb2luKCdcbicpLCAiNl9Db3VudHJpZXNfTWFwLnR4dCIpOw0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiQXVkaXQgQ29tcGxldGUhXG5cbkNvbG9ucyBkZXRlY3RlZDogU3VnZ2VzdGlvbnMgbm93IGNvcnJlY3RseSB1c2UgY29tbWFzLiIpOw0KICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgICAgIH0sIDMwMDApOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENvdW50cnkgY29ycmVjdGlvbiBpbiB0aGUgREIgYmFzZWQgb24gaW5wdXQgQ0lUWV9DT1JSRUNUSU9OU19VUkwgQ2l0eUNvcnJlY3Rpb25zLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkNpdHlDb3JyZWN0aW9uQXBwbHkoaXNBdWRpdCA9IGZhbHNlKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBGZXRjaCB5b3VyIGFwcHJvdmVkIGNvcnJlY3Rpb25zIGZpbGUNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyUmVzID0gYXdhaXQgZmV0Y2goQ0lUWV9DT1JSRUNUSU9OU19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJUZXh0ID0gYXdhaXQgY29yclJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICAvLyBQYXJzZSBpbnRvIGEgTWFwIHsgInNvY2lldHk6QXVuZGg6UHVuZSI6ICJTb2NpZXR5LCBBdW5kaCwgUHVuZSIgfQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJlY3Rpb25NYXAgPSB7fTsNCiAgICAgICAgICAgICAgICBjb3JyVGV4dC5zcGxpdCgvXHI/XG4vKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAobGluZS5pbmNsdWRlcygnfCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbanVuaywgY29ycmVjdF0gPSBsaW5lLnNwbGl0KCd8JykubWFwKHMgPT4gcy50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGp1bmspIGNvcnJlY3Rpb25NYXBbanVua10gPSBjb3JyZWN0Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBGZXRjaCB0aGUgbGl2ZSBkYXRhYmFzZSAodXNpbmcgdGhlIEF1dGhlbnRpY2F0ZWQgbG9naWMpDQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBsZXQgZGJMaW5lcyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKTsNCg0KICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VDb3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBQcm9jZXNzIGV2ZXJ5IGxpbmUgaW4gdGhlIERCDQogICAgICAgICAgICAgICAgY29uc3QgY2xlYW5lZExpbmVzID0gZGJMaW5lcy5tYXAobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICghbGluZS50cmltKCkpIHJldHVybiBsaW5lOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gbGluZS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEFkZHJlc3MgaXMgaW5kZXggNA0KICAgICAgICAgICAgICAgICAgICBsZXQgYWRkcmVzcyA9IGZpZWxkc1s0XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZHJlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFkZHJlc3MgYnkgc3BhY2Ugb3IgdGlsZGUgdG8gaXNvbGF0ZSB0aGUgbGFzdCAiY2h1bmsiDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgd29yZHMgPSBhZGRyZXNzLnRyaW0oKS5zcGxpdCgvW1xzfl0rLyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSBUSEUgRklYOiBQcmVzZXJ2ZSBjb2xvbnMgZHVyaW5nIGxvb2t1cCAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG5vIGxvbmdlciBzdHJpcCBjb2xvbnMgaGVyZSwgc28gb3JpZ2luYWxDaXR5ID0gInNvY2lldHk6QXVuZGg6UHVuZSINCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmlnaW5hbENpdHkgPSB3b3Jkc1t3b3Jkcy5sZW5ndGggLSAxXTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyByYXcgY2h1bmsgKHdpdGggY29sb25zKSBpcyBpbiBvdXIgY29ycmVjdGlvbiBsaXN0DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ycmVjdGlvbk1hcC5oYXNPd25Qcm9wZXJ0eShvcmlnaW5hbENpdHkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlcGxhY2VtZW50ID0gY29ycmVjdGlvbk1hcFtvcmlnaW5hbENpdHldOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGVscGVyIHRvIGVzY2FwZSBzcGVjaWFsIGNoYXJhY3RlcnMgZm9yIFJlZ2V4DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXNjYXBlZEp1bmsgPSBvcmlnaW5hbENpdHkucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xdXFxdL2csICdcXCQmJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09ICIiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0cmlwIHRoZSBqdW5rIHdvcmQgZnJvbSB0aGUgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1s0XSA9IGFkZHJlc3MucmVwbGFjZShuZXcgUmVnRXhwKGVzY2FwZWRKdW5rICsgIiQiKSwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTd2FwIHRoZSBqdW5rICh3aXRoIGNvbG9ucykgd2l0aCB0aGUgY29ycmVjdCBzdHJpbmcgKHdpdGggY29tbWFzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbNF0gPSBhZGRyZXNzLnJlcGxhY2UobmV3IFJlZ0V4cChlc2NhcGVkSnVuayArICIkIiksIHJlcGxhY2VtZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDQuIElmIGNoYW5nZXMgb2NjdXJyZWQsIHVwbG9hZCBiYWNrIHRvIERyb3Bib3gNCiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlQ291bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBjbGVhbmVkTGluZXMuam9pbignXG4nKTsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IG5ld0NvbnRlbnQNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBTdWNjZXNzISBBcHBsaWVkICR7Y2hhbmdlQ291bnR9IGNvcnJlY3Rpb25zIHRvIHRoZSBkYXRhYmFzZS5cblxuQ29sb25zIHdlcmUgY29ycmVjdGx5IGlkZW50aWZpZWQgYW5kIHJlcGxhY2VkLmApOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gbWF0Y2hpbmcgZW50cmllcyAoaW5jbHVkaW5nIHRob3NlIHdpdGggY29sb25zKSBmb3VuZCB0byBjb3JyZWN0LiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkNvcnJlY3Rpb24gRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDb3VudHJ5IGNvcnJlY3Rpb24gaW4gdGhlIERCIGJhc2VkIG9uIGlucHV0IENvdW50cnlDb3JyZWN0aW9ucy50eHQgaW4gU2V0dGluZ3MgRm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5Db3VudHJ5RmllbGRDb3JyZWN0aW9uKCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIGNvbnN0IENPVU5UUllfQ09SUkVDVElPTlNfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvZ25yMW8yZDRyY2JkYno3NWZ4ZmtiL0NvdW50cnlDb3JyZWN0aW9ucy50eHQ/cmxrZXk9NzRmbHRyeHltOGcwZzg4cWVpZWpqMWJ3eiZkbD0xIjsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyUmVzID0gYXdhaXQgZmV0Y2goQ09VTlRSWV9DT1JSRUNUSU9OU19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJUZXh0ID0gYXdhaXQgY29yclJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25MaW5lcyA9IGNvcnJUZXh0LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihsID0+IGwudHJpbSgpICE9PSAiIik7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBsZXQgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pOw0KDQogICAgICAgICAgICAgICAgbGV0IG1vdmVDb3VudCA9IDA7DQogICAgICAgICAgICAgICAgbGV0IGdsb2JhbFVwcGVyQ291bnQgPSAwOw0KDQogICAgICAgICAgICAgICAgLy8gLS0tIFNURVAgMTogU3VyZ2ljYWwgTW92ZS9DbGVhbiAtLS0NCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbkxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnLCcpLm1hcChwID0+IHAudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA8IDIpIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q291bnRyeSA9IHBhcnRzWzBdLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldElEcyA9IHBhcnRzLnNsaWNlKDEpOw0KDQogICAgICAgICAgICAgICAgICAgIHRhcmdldElEcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlYXJjaEFuY2hvciA9IGlkLnRvVXBwZXJDYXNlKCkgKyAifCI7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRiUm93cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYlJvd3NbaV0udHJpbSgpLnRvVXBwZXJDYXNlKCkuc3RhcnRzV2l0aChzZWFyY2hBbmNob3IpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBkYlJvd3NbaV0uc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGZpZWxkcy5sZW5ndGggPCAyMCkgZmllbGRzLnB1c2goIiIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhZGRyID0gZmllbGRzWzRdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGVhblJlZ2V4ID0gbmV3IFJlZ0V4cCh0YXJnZXRDb3VudHJ5LCAnZ2knKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5SZWdleC50ZXN0KGFkZHIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbNF0gPSBhZGRyLnJlcGxhY2UoY2xlYW5SZWdleCwgIiIpLnJlcGxhY2UoL1t+LDogXSskLywgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1sxOV0gPSB0YXJnZXRDb3VudHJ5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGJSb3dzW2ldID0gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gU1RFUCAyOiBUaGUgRGVlcC1DbGVhbiBHbG9iYWwgU3dlZXAgLS0tDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYlJvd3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYlJvd3NbaV0udHJpbSgpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGRiUm93c1tpXS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB3ZSBoYXZlIDIwIGZpZWxkcyBmb3IgZXZlcnkgcm93DQogICAgICAgICAgICAgICAgICAgIHdoaWxlIChmaWVsZHMubGVuZ3RoIDwgMjApIGZpZWxkcy5wdXNoKCIiKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBUaGUgRklYOiBTdHJpcCBBTEwgaGlkZGVuIGNoYXJhY3RlcnMgdXNpbmcgcmVnZXggXHMrDQogICAgICAgICAgICAgICAgICAgIGxldCByYXdWYWx1ZSA9IGZpZWxkc1sxOV0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhblZhbHVlID0gcmF3VmFsdWUucmVwbGFjZSgvW1xyXG5cdF0rL2csICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCB1cHBlclZhbHVlID0gY2xlYW5WYWx1ZS50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBmaWVsZCBpc24ndCBlbXB0eSBhbmQgZG9lc24ndCBtYXRjaCB0aGUgY2xlYW4gVXBwZXJjYXNlIHZlcnNpb24NCiAgICAgICAgICAgICAgICAgICAgaWYgKGNsZWFuVmFsdWUgIT09ICIiICYmIGNsZWFuVmFsdWUgIT09IHVwcGVyVmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1sxOV0gPSB1cHBlclZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgZGJSb3dzW2ldID0gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFVwcGVyQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBGSU5BTCBTQVZFIC0tLQ0KICAgICAgICAgICAgICAgIGlmIChtb3ZlQ291bnQgPiAwIHx8IGdsb2JhbFVwcGVyQ291bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBkYlJvd3Muam9pbignXG4nKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoYERBVEFCQVNFIFNZTkNFRFxuXG4xLiBBZGRyZXNzIENsZWFudXBzOiAke21vdmVDb3VudH1cbjIuIEhpZGRlbi1DaGFyICYgVXBwZXJjYXNlIEZpeGVzOiAke2dsb2JhbFVwcGVyQ291bnR9YCk7DQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJTdWNjZXNzOiBEYXRhYmFzZSBpcyAxMDAlIHN0YW5kYXJkaXplZC4gTm8gbWl4ZWQtY2FzZSBvciBoaWRkZW4gY2hhcmFjdGVycyByZW1haW4uIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDaGVja3MgTmFtZXMgb2YgYWxsIGRvbm9ycyBhbmQgcHJlcGFyZXMgbGlzdCBhbmQgc3VnZ2VzdGlvbnMgZm9yIGNvcnJlY3Rpb25zLiBEb3dubG9hZHMgNCB0ZXh0IGZpbGVzLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuRG9ub3JOYW1lQ2hlY2sobW9kZSA9ICdub3JtYWwnKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKHJvdyA9PiByb3cudHJpbSgpICE9PSAiIik7DQoNCiAgICAgICAgICAgICAgICBsZXQgYWxsTmFtZXMgPSBkYlJvd3MubWFwKHJvdyA9PiAocm93LnNwbGl0KCd8JylbMl0gfHwgIiIpLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgbGV0IHVuaXF1ZU5hbWVzID0gWy4uLm5ldyBTZXQoYWxsTmFtZXMpXS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0SW5kaWFuTmFtZSA9IChuYW1lKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICghbmFtZSkgcmV0dXJuICIiOw0KICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5zdGFydHNXaXRoKCcoJykpIHJldHVybiBuYW1lOyAvLyBTa2lwIG9yZ3MNCg0KICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5pbmNsdWRlcygnJicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZS5zcGxpdCgnJicpLm1hcChuID0+IGZvcm1hdEluZGlhbk5hbWUobi50cmltKCkpKS5qb2luKCcgJiAnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGxldCBwYXJ0cyA9IG5hbWUuc3BsaXQoL1xzKy8pLmZpbHRlcihwID0+IHAubGVuZ3RoID4gMCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBpbml0aWFscyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICBsZXQgbWFpbk5hbWVzID0gW107DQoNCiAgICAgICAgICAgICAgICAgICAgcGFydHMuZm9yRWFjaChwYXJ0ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaXRpYWxzOiAxLTMgY2hhcnMsIG5vIGRvdWJsZSB2b3dlbHMNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0Lmxlbmd0aCA8PSAzICYmICEvW2FlaW91eV17Mix9L2kudGVzdChwYXJ0KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxzLnB1c2gocGFydC50b1VwcGVyQ2FzZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbk5hbWVzLnB1c2gocGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4ubWFpbk5hbWVzLCAuLi5pbml0aWFsc10uam9pbignICcpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgLy8gQXJyYXlzIGZvciBGaWxlIDMgYW5kIEZpbGUgNA0KICAgICAgICAgICAgICAgIGxldCBhbGxDb21wYXJpc29ucyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBjb3JyZWN0aW9uc09ubHkgPSBbXTsNCg0KICAgICAgICAgICAgICAgIHVuaXF1ZU5hbWVzLmZvckVhY2gob3JpZ2luYWwgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgc3VnZ2VzdGVkID0gZm9ybWF0SW5kaWFuTmFtZShvcmlnaW5hbCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gYCR7b3JpZ2luYWwucGFkRW5kKDQwKX0gfCAke3N1Z2dlc3RlZH1gOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEZpbGUgMyBnZXRzIGV2ZXJ5dGhpbmcNCiAgICAgICAgICAgICAgICAgICAgYWxsQ29tcGFyaXNvbnMucHVzaChsaW5lKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBGaWxlIDQgZ2V0cyBvbmx5IHRoZSBvbmVzIHRoYXQgY2hhbmdlZA0KICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwgIT09IHN1Z2dlc3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGlvbnNPbmx5LnB1c2gobGluZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRvd25sb2FkVHh0ID0gKGNvbnRlbnQsIGZpbGVOYW1lKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gZmlsZU5hbWU7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgLy8gVEhFIEJSSURHRTogQ29udmVydCBhcnJheSB0byBzdHJpbmcgYW5kIHN0b3JlIGdsb2JhbGx5DQogICAgICAgICAgICAgICAgd2luZG93LkdMT0JBTF9ET05PUl9OQU1FX0RBVEEgPSBBcnJheS5pc0FycmF5KGNvcnJlY3Rpb25zT25seSkgPyBjb3JyZWN0aW9uc09ubHkuam9pbignXG4nKSA6IGNvcnJlY3Rpb25zT25seTsNCg0KICAgICAgICAgICAgICAgIC8vIFRIRSBFWElUOiBCeXBhc3MgZG93bmxvYWRzIGlmIGluIGF1ZGl0IG1vZGUNCiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2F1ZGl0Jykgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRG9ub3IgTmFtZSBkYXRhIGNhcHR1cmVkLiBTa2lwcGluZyBGaWxlIDQgZG93bmxvYWQuIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBTZXF1ZW5jZSBvZiA0IGZpbGVzDQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoYWxsTmFtZXMuc29ydCgpLmpvaW4oJ1xuJyksICIxLiBDR19BbGxfRG9ub3JfTmFtZXMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQodW5pcXVlTmFtZXMuam9pbignXG4nKSwgIjIuIENHX1VuaXF1ZV9Eb25vcl9OYW1lcy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChhbGxDb21wYXJpc29ucy5qb2luKCdcbicpLCAiMy4gQ0dfTmFtZV9Gb3JtYXRfU3VnZ2VzdGlvbnMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoY29ycmVjdGlvbnNPbmx5LmpvaW4oJ1xuJyksICI0LiBDR19Db3JyZWN0aW9uc19Pbmx5LnR4dCIpOw0KDQogICAgICAgICAgICAgICAgYWxlcnQoYEF1ZGl0IENvbXBsZXRlIVxuXG5VbmlxdWUgTmFtZXM6ICR7dW5pcXVlTmFtZXMubGVuZ3RofVxuUmVjb3JkcyBOZWVkaW5nIENvcnJlY3Rpb246ICR7Y29ycmVjdGlvbnNPbmx5Lmxlbmd0aH1cblxuQ2hlY2sgRmlsZSA0IGZvciB0aGUgYWN0aW9uIGl0ZW1zLmApOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBOYW1lIGNvcnJlY3Rpb24gaW4gdGhlIERCIGJhc2VkIG9uIGlucHV0IE5BTUVfQ09SUkVDVElPTlNfVVJMIE5hbWVDb3JyZWN0aW9ucy50eHQgaW4gU2V0dGluZ3MgRm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5Eb25vck5hbWVDb3JyZWN0aW9uKCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggdGhlIENvcnJlY3Rpb24gTWFwDQogICAgICAgICAgICAgICAgY29uc3QgY29yclJlcyA9IGF3YWl0IGZldGNoKE5BTUVfQ09SUkVDVElPTlNfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyVGV4dCA9IGF3YWl0IGNvcnJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJMaW5lcyA9IGNvcnJUZXh0LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihsaW5lID0+IGxpbmUuaW5jbHVkZXMoJ3wnKSk7DQoNCiAgICAgICAgICAgICAgICAvLyBCdWlsZCBhIGxvb2t1cCBvYmplY3Q6IHsgIk9yaWdpbmFsIE5hbWUiOiAiU3VnZ2VzdGVkIE5hbWUiIH0NCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyZWN0aW9uTWFwID0ge307DQogICAgICAgICAgICAgICAgY29yckxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFtvcmlnaW5hbCwgc3VnZ2VzdGVkXSA9IGxpbmUuc3BsaXQoJ3wnKS5tYXAoaXRlbSA9PiBpdGVtLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbCAmJiBzdWdnZXN0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25NYXBbb3JpZ2luYWxdID0gc3VnZ2VzdGVkOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBGZXRjaCB0aGUgRGF0YWJhc2UNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBsZXQgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pOw0KDQogICAgICAgICAgICAgICAgbGV0IGNvcnJlY3Rpb25Db3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBTd2VlcCBhbmQgUmVwbGFjZQ0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGJSb3dzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghZGJSb3dzW2ldLnRyaW0oKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGRiUm93c1tpXS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudE5hbWUgPSAoZmllbGRzWzJdIHx8ICIiKS50cmltKCk7IC8vIE5hbWUgaXMgRmllbGQgMg0KDQogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBuYW1lIGV4aXN0cyBpbiBvdXIgY29ycmVjdGlvbiBtYXAgKFBlcmZlY3QgTWF0Y2gpDQogICAgICAgICAgICAgICAgICAgIGlmIChjb3JyZWN0aW9uTWFwLmhhc093blByb3BlcnR5KGN1cnJlbnROYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzJdID0gY29ycmVjdGlvbk1hcFtjdXJyZW50TmFtZV07DQogICAgICAgICAgICAgICAgICAgICAgICBkYlJvd3NbaV0gPSBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGlvbkNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBTYXZlIGJhY2sgdG8gRHJvcGJveCBpZiBjaGFuZ2VzIHdlcmUgbWFkZQ0KICAgICAgICAgICAgICAgIGlmIChjb3JyZWN0aW9uQ291bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBkYlJvd3Muam9pbignXG4nKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoYFNVQ0NFU1M6IERhdGFiYXNlIHVwZGF0ZWQuXG5cblRvdGFsIERvbm9yIE5hbWVzIGNvcnJlY3RlZDogJHtjb3JyZWN0aW9uQ291bnR9YCk7DQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBtYXRjaGluZyBuYW1lcyBmb3VuZCBmb3IgY29ycmVjdGlvbi4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJOYW1lIENvcnJlY3Rpb24gRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDaGVja3MgQWRkcmVzcyBvZiBhbGwgZG9ub3JzIGFuZCBwcmVwYXJlcyBsaXN0IGFuZCBzdWdnZXN0aW9ucyBmb3IgY29ycmVjdGlvbnMuIERvd25sb2FkcyA0IHRleHQgZmlsZXMuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5BZGRyZXNzQ2hlY2sobW9kZSA9ICdub3JtYWwnKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKHJvdyA9PiByb3cudHJpbSgpICE9PSAiIik7DQoNCiAgICAgICAgICAgICAgICBsZXQgYWxsQWRkcmVzc2VzID0gZGJSb3dzLm1hcChyb3cgPT4gKHJvdy5zcGxpdCgnfCcpWzRdIHx8ICIiKS50cmltKCkpOw0KICAgICAgICAgICAgICAgIGxldCB1bmlxdWVBZGRyZXNzZXMgPSBbLi4ubmV3IFNldChhbGxBZGRyZXNzZXMpXS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0QWRkcmVzcyA9IChhZGRyKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICghYWRkcikgcmV0dXJuICIiOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDEuIEZsYXR0ZW4gbGluZSBicmVha3Mgd2l0aCB+DQogICAgICAgICAgICAgICAgICAgIGxldCBmbGF0dGVuZWQgPSBhZGRyLnJlcGxhY2UoL1tcclxuXSsvZywgJyB+ICcpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDIuIFNwbGl0IGludG8gd29yZHMNCiAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRzID0gZmxhdHRlbmVkLnNwbGl0KC9ccysvKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZvcm1hdHRlZFdvcmRzID0gd29yZHMubWFwKHdvcmQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3b3JkKSByZXR1cm4gIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNQRUNJQUwgVFdFQUs6IFdvcmRzIHN0YXJ0aW5nIHdpdGggJA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQuc3RhcnRzV2l0aCgnJCcpICYmIHdvcmQubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYWluUGFydCA9IHdvcmQuc2xpY2UoMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICckJyArIG1haW5QYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbWFpblBhcnQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUnVsZSAxOiBBbHdheXMgVVBQRVJDQVNFIGZvciAzIGNoYXJzIG9yIGxlc3MNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JkLmxlbmd0aCA8PSAzKSByZXR1cm4gd29yZC50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBSdWxlIDI6IFNlbnRlbmNlIENhc2UgZm9yIGV2ZXJ5dGhpbmcgZWxzZSAoaW5jbHVkaW5nIEFwYXJ0bWVudDoyNykNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkV29yZHMuam9pbignICcpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgbGV0IGFsbENvbXBhcmlzb25zID0gW107DQogICAgICAgICAgICAgICAgbGV0IGNvcnJlY3Rpb25zT25seSA9IFtdOw0KDQogICAgICAgICAgICAgICAgdW5pcXVlQWRkcmVzc2VzLmZvckVhY2gob3JpZ2luYWwgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgc3VnZ2VzdGVkID0gZm9ybWF0QWRkcmVzcyhvcmlnaW5hbCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBkaXNwbGF5TGluZSA9IGAke29yaWdpbmFsLnBhZEVuZCgxMjApfSB8ICR7c3VnZ2VzdGVkfWA7DQoNCiAgICAgICAgICAgICAgICAgICAgYWxsQ29tcGFyaXNvbnMucHVzaChkaXNwbGF5TGluZSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbCAhPT0gc3VnZ2VzdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0aW9uc09ubHkucHVzaChkaXNwbGF5TGluZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRvd25sb2FkVHh0ID0gKGNvbnRlbnQsIGZpbGVOYW1lKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gZmlsZU5hbWU7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgLy8gVEhFIEJSSURHRTogVXNlIHRoZSBjb3JyZWN0IHZhcmlhYmxlIG5hbWUgd2UganVzdCBpZGVudGlmaWVkDQogICAgICAgICAgICAgICAgd2luZG93LkdMT0JBTF9BRERSRVNTX0NPUlJFQ1RJT05fREFUQSA9IEFycmF5LmlzQXJyYXkoY29ycmVjdGlvbnNPbmx5KSA/IGNvcnJlY3Rpb25zT25seS5qb2luKCdcbicpIDogY29ycmVjdGlvbnNPbmx5Ow0KDQogICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdhdWRpdCcpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkFkZHJlc3MgZGF0YSBjYXB0dXJlZCBzdWNjZXNzZnVsbHkgdmlhIGNvcnJlY3Rpb25zT25seS4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAgICAgLy8gRmlsZSBTZXF1ZW5jZQ0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGFsbEFkZHJlc3Nlcy5zb3J0KCkuam9pbignXG4nKSwgIjEuIENHX0FsbF9BZGRyZXNzZXMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQodW5pcXVlQWRkcmVzc2VzLmpvaW4oJ1xuJyksICIyLiBDR19VbmlxdWVfQWRkcmVzc2VzLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGFsbENvbXBhcmlzb25zLmpvaW4oJ1xuJyksICIzLiBDR19BZGRyZXNzX0Zvcm1hdF9TdWdnZXN0aW9ucy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChjb3JyZWN0aW9uc09ubHkuam9pbignXG4nKSwgIjQuIENHX0FkZHJlc3NfQ29ycmVjdGlvbnNfT25seS50eHQiKTsNCg0KICAgICAgICAgICAgICAgIGFsZXJ0KGBBdWRpdCBDb21wbGV0ZSFcblxuUmV2aWV3IEZpbGUgNCBmb3IgdGhlICR7Y29ycmVjdGlvbnNPbmx5Lmxlbmd0aH0gaXRlbXMgbmVlZGluZyBjaGFuZ2VzLmApOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBBRERSRVNTIGNvcnJlY3Rpb24gaW4gdGhlIERCIGJhc2VkIG9uIGlucHV0IEFkZHJlc3NDb3JyZWN0aW9ucy50eHQgaW4gU2V0dGluZ3MgRm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBHbG9iYWwgQ29uc3RhbnQgZm9yIEFkZHJlc3MgQ29ycmVjdGlvbnMNCiAgICAgICAgY29uc3QgQUREUkVTU19DT1JSRUNUSU9OU19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9kY2w3djYwcWJ1aHV1Z3MxZjdtN3AvQWRkcmVzc0NvcnJlY3Rpb25zLnR4dD9ybGtleT1qYnd3NGxmZ2Q5MHJqa3Qxa3NzbDE2bDhkJmRsPTEiOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkFkZHJlc3NDb3JyZWN0aW9uKCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggdGhlIENvcnJlY3Rpb24gTWFwIGZyb20gRHJvcGJveA0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJSZXMgPSBhd2FpdCBmZXRjaChBRERSRVNTX0NPUlJFQ1RJT05TX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yclRleHQgPSBhd2FpdCBjb3JyUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyTGluZXMgPSBjb3JyVGV4dC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIobGluZSA9PiBsaW5lLmluY2x1ZGVzKCd8JykpOw0KDQogICAgICAgICAgICAgICAgLy8gQnVpbGQgbG9va3VwOiB7ICJPcmlnaW5hbCBBZGRyZXNzIjogIlN1Z2dlc3RlZCBBZGRyZXNzIiB9DQogICAgICAgICAgICAgICAgY29uc3QgYWRkcmVzc01hcCA9IHt9Ow0KICAgICAgICAgICAgICAgIGNvcnJMaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IHBhcnRzWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Z2dlc3RlZCA9IHBhcnRzWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbCAmJiBzdWdnZXN0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzTWFwW29yaWdpbmFsXSA9IHN1Z2dlc3RlZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gRmV0Y2ggdGhlIE1haW4gRGF0YWJhc2UNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBsZXQgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pOw0KDQogICAgICAgICAgICAgICAgbGV0IHVwZGF0ZUNvdW50ID0gMDsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFN3ZWVwIERhdGFiYXNlIGFuZCBBcHBseSBDb3JyZWN0aW9ucw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGJSb3dzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghZGJSb3dzW2ldLnRyaW0oKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGRiUm93c1tpXS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudEFkZHJlc3MgPSAoZmllbGRzWzRdIHx8ICIiKS50cmltKCk7IC8vIEFkZHJlc3MgaXMgRmllbGQgNA0KDQogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZlY3QgTWF0Y2ggQ2hlY2sNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZHJlc3NNYXAuaGFzT3duUHJvcGVydHkoY3VycmVudEFkZHJlc3MpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbNF0gPSBhZGRyZXNzTWFwW2N1cnJlbnRBZGRyZXNzXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRiUm93c1tpXSA9IGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNC4gU2F2ZSB0byBEcm9wYm94IGlmIHVwZGF0ZXMgd2VyZSBmb3VuZA0KICAgICAgICAgICAgICAgIGlmICh1cGRhdGVDb3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGRiUm93cy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBhbGVydChgU1VDQ0VTUzogRGF0YWJhc2UgdXBkYXRlZC5cblxuVG90YWwgQWRkcmVzc2VzIGNvcnJlY3RlZDogJHt1cGRhdGVDb3VudH1gKTsNCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIG1hdGNoaW5nIGFkZHJlc3NlcyBmb3VuZCB0byBjb3JyZWN0LiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkFkZHJlc3MgQ29ycmVjdGlvbiBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFBBTkVMIFNIT1cgQU5EIEhJREUgdG9nZ2xlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB0b2dnbGVBZG1pblRhYmxlKCkgew0KICAgICAgICAgICAgaW5pdENvdW50cnlEcm9wZG93bigpOw0KICAgICAgICAgICAgY29uc3QgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRtaW4tcGFuZWwtY29udGFpbmVyJyk7DQogICAgICAgICAgICBjb25zdCBpc09wZW5pbmcgPSAocGFuZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKTsNCiAgICAgICAgICAgIHBhbmVsLnN0eWxlLmRpc3BsYXkgPSBpc09wZW5pbmcgPyAnYmxvY2snIDogJ25vbmUnOw0KDQogICAgICAgICAgICBpZiAoaXNPcGVuaW5nKSB7DQogICAgICAgICAgICAgICAgbG9hZEFkbWluU25hcHMoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENvdW50cnkgU2VsZWN0aW9uIGZvciBMYWJlbCBDcmVhdGlvbg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gMS4gUG9wdWxhdGUgRHJvcGRvd24gaW1tZWRpYXRlbHkNCiAgICAgICAgZnVuY3Rpb24gaW5pdENvdW50cnlEcm9wZG93bigpIHsNCiAgICAgICAgICAgIGNvbnN0IGNvdW50cmllcyA9IFsiSU5ESUEiLCAiVVNBIiwgIlVBRSIsICJVSyIsICJTSU5HQVBPUkUiLCAiQVVTVFJBTElBIiwgIkNBTkFEQSIsICJVTklURUQgQVJBQiBFTUlSQVRFUyIsICJNQUxBWVNJQSIsICJPTUFOIiwgIktVV0FJVCJdOw0KICAgICAgICAgICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLWNvdW50cnktZmlsdGVyJyk7DQogICAgICAgICAgICBzZWxlY3QuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+QWxsIENvdW50cmllczwvb3B0aW9uPic7DQogICAgICAgICAgICBjb3VudHJpZXMuZm9yRWFjaChjID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgb3B0LnZhbHVlID0gYzsNCiAgICAgICAgICAgICAgICBvcHQudGV4dENvbnRlbnQgPSBjOw0KICAgICAgICAgICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBQREYgR2VuZXJhdGlvbiBmb3IgQWxsIFVuaXF1ZSBEb25vcnMgTGFiZWxzLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gMi4gVGhlIFBERiBHZW5lcmF0aW9uIExvZ2ljDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQWRkcmVzc0xhYmVscygpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHsganNQREYgfSA9IHdpbmRvdy5qc3BkZjsNCiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZENvdW50cnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtY291bnRyeS1maWx0ZXInKS52YWx1ZTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICAvLyBSZXZlcnNlIHRvIGdldCBMQVRFU1QgcmVjb3JkcyBmaXJzdA0KICAgICAgICAgICAgICAgIGxldCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKHJvdyA9PiByb3cudHJpbSgpICE9PSAiIikucmV2ZXJzZSgpOw0KDQogICAgICAgICAgICAgICAgbGV0IGxhYmVsc1RvQ3JlYXRlID0gW107DQogICAgICAgICAgICAgICAgbGV0IHByb2Nlc3NlZFBob25lcyA9IG5ldyBTZXQoKTsNCg0KICAgICAgICAgICAgICAgIC8vIExJTUlUIFJFTU9WRUQ6IFByb2Nlc3NpbmcgdGhlIGVudGlyZSBkYXRhYmFzZQ0KICAgICAgICAgICAgICAgIGZvciAobGV0IHJvdyBvZiBkYlJvd3MpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGYgPSByb3cuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHBob25lID0gKGZbM10gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWUgPSAoZlsyXSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgYWRkciA9IChmWzRdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBpc0NhbmNlbGxlZCA9IChmWzEzXSB8fCAiIikudG9VcHBlckNhc2UoKSA9PT0gIllFUyI7DQogICAgICAgICAgICAgICAgICAgIGxldCBjb3VudHJ5ID0gKGZbMTldIHx8ICIiKS50cmltKCkudG9VcHBlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNDYW5jZWxsZWQgfHwgIW5hbWUgfHwgIWFkZHIpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRDb3VudHJ5ICE9PSAiQUxMIiAmJiBjb3VudHJ5ICE9PSBzZWxlY3RlZENvdW50cnkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGhvbmUgJiYgcHJvY2Vzc2VkUGhvbmVzLmhhcyhwaG9uZSkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIGxhYmVsc1RvQ3JlYXRlLnB1c2goZik7DQogICAgICAgICAgICAgICAgICAgIGlmIChwaG9uZSkgcHJvY2Vzc2VkUGhvbmVzLmFkZChwaG9uZSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGxhYmVsc1RvQ3JlYXRlLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gcmVjb3JkcyBmb3VuZCBmb3IgdGhlIHNlbGVjdGlvbi4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRvYyA9IG5ldyBqc1BERigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsV2lkdGggPSAxMDU7DQogICAgICAgICAgICAgICAgY29uc3QgbGFiZWxIZWlnaHQgPSA3NC4yNTsNCg0KICAgICAgICAgICAgICAgIGxhYmVsc1RvQ3JlYXRlLmZvckVhY2goKGYsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IDAgJiYgaW5kZXggJSA4ID09PSAwKSBkb2MuYWRkUGFnZSgpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9IGluZGV4ICUgODsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IChwb3MgJSAyKSAqIGxhYmVsV2lkdGg7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKHBvcyAvIDIpICogbGFiZWxIZWlnaHQ7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ3V0dGluZyBndWlkZXMNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldERyYXdDb2xvcigyMDApOw0KICAgICAgICAgICAgICAgICAgICBkb2MucmVjdCh4LCB5LCBsYWJlbFdpZHRoLCBsYWJlbEhlaWdodCk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGN1clkgPSB5ICsgODsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFkWCA9IHggKyAxMDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlnaHRQYWRYID0geCArIGxhYmVsV2lkdGggLSAxMDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSBsYWJlbFdpZHRoIC0gMjA7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMS4gUkVGRVJFTkNFIChSaWdodCBBbGlnbmVkKQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDgpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgUmVmIDogJHtmWzBdIHx8ICIifWAsIHJpZ2h0UGFkWCwgY3VyWSwgeyBhbGlnbjogInJpZ2h0IiB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBjdXJZICs9IDY7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMi4gTkFNRSAoMTRwdCBCb2xkLCBXcmFwcGVkKQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDE0KTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZ1bGxOYW1lID0gYFNtdC5TaHJpLiAke2ZbMl19YDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHdyYXBwZWROYW1lID0gZG9jLnNwbGl0VGV4dFRvU2l6ZShmdWxsTmFtZSwgYXZhaWxhYmxlV2lkdGgpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCh3cmFwcGVkTmFtZSwgcGFkWCwgY3VyWSk7DQoNCiAgICAgICAgICAgICAgICAgICAgY3VyWSArPSAod3JhcHBlZE5hbWUubGVuZ3RoICogNikgKyAyOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDMuIEFERFJFU1MgJiBDSVRZIEVYVFJBQ1RJT04NCiAgICAgICAgICAgICAgICAgICAgbGV0IGNsZWFuRnVsbEFkZHIgPSAoZls0XSB8fCAiIikucmVwbGFjZSgvfi9nLCAnICcpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFkZHJXb3JkcyA9IGNsZWFuRnVsbEFkZHIuc3BsaXQoL1xzKy8pOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY2l0eSA9IGFkZHJXb3Jkcy5sZW5ndGggPiAwID8gYWRkcldvcmRzLnBvcCgpIDogIiI7DQogICAgICAgICAgICAgICAgICAgIGxldCBhZGRyQm9keSA9IGFkZHJXb3Jkcy5qb2luKCIgIik7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNC4gQUREUkVTUyBCT0RZICgxMXB0IE5vcm1hbCwgV3JhcHBlZCkNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDExKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHdyYXBwZWRBZGRyID0gZG9jLnNwbGl0VGV4dFRvU2l6ZShhZGRyQm9keSwgYXZhaWxhYmxlV2lkdGgpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCh3cmFwcGVkQWRkciwgcGFkWCwgY3VyWSk7DQoNCiAgICAgICAgICAgICAgICAgICAgY3VyWSArPSAod3JhcHBlZEFkZHIubGVuZ3RoICogNSkgKyAxOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDUuIENJVFkgLSBQSU5DT0RFICgxMXB0IEJvbGQpDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgJHtjaXR5LnRvVXBwZXJDYXNlKCl9IC0gJHsoZlsxNV0gfHwgIiIpLnRyaW0oKX1gLCBwYWRYLCBjdXJZKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA2LiBDT1VOVFJZICgxMXB0IE5vcm1hbCkNCiAgICAgICAgICAgICAgICAgICAgY3VyWSArPSA2Ow0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCgoZlsxOV0gfHwgIiIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpLCBwYWRYLCBjdXJZKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA3LiBQSE9ORSAoMTFwdCBCb2xkKQ0KICAgICAgICAgICAgICAgICAgICBjdXJZICs9IDk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgUGhvbmUgOiAkeyhmWzNdIHx8ICIiKS50cmltKCl9YCwgcGFkWCwgY3VyWSk7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyBEWU5BTUlDIEZJTEVOQU1FDQogICAgICAgICAgICAgICAgY29uc3QgY291bnRyeU5hbWUgPSBzZWxlY3RlZENvdW50cnkgPT09ICJBTEwiID8gIkFsbCBDb3VudHJpZXMiIDogc2VsZWN0ZWRDb3VudHJ5Ow0KICAgICAgICAgICAgICAgIGRvYy5zYXZlKGBNTVBUIERvbm9yIEFkZHJlc3MgTGFiZWxzLSAke2NvdW50cnlOYW1lfS5wZGZgKTsNCg0KICAgICAgICAgICAgICAgIGFsZXJ0KGBTdWNjZXNzISBHZW5lcmF0ZWQgJHtsYWJlbHNUb0NyZWF0ZS5sZW5ndGh9IHVuaXF1ZSBsYWJlbHMgZm9yICR7Y291bnRyeU5hbWV9LmApOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBGVUxMIEZsZWdlZCBBdWRpdCBvZiBUaGUgRGF0YWJhc2UNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkRhdGFiYXNlQXVkaXRQREYoKSB7DQogICAgICAgICAgICBsZXQgc3RhdHMgPSB7DQogICAgICAgICAgICAgICAgdG90YWw6IDAsIGNhbmNlbGxlZDogMCwgbm9OYW1lOiAwLCBub1Bob25lOiAwLCBub0FkZHI6IDAsDQogICAgICAgICAgICAgICAgbm9QaW46IDAsIG5vRW1haWw6IDAsIG5vUGFuOiAwLCBub1JlZjogMCwgbm9Db21tOiAwLA0KICAgICAgICAgICAgICAgIG5vQW10OiAwLCBub1ByYXNhZGFtOiAwLCBub1ByaW50OiAwLCBwZW5kaW5nQ29uc2VudDogMA0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgY29uc3QgY2xlYW5TdHIgPSAoc3RyKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFzdHIpIHJldHVybiAiIjsNCiAgICAgICAgICAgICAgICByZXR1cm4gc3RyLnRvU3RyaW5nKCkubm9ybWFsaXplKCJORkQiKS5yZXBsYWNlKC9bXlx4MjAtXHg3RV0vZywgIiIpOw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgLy8gMS4gREFUQSBQUk9DRVNTSU5HIChMb2NrZWQgQ29yZSBMb2dpYyAtIElnbm9yZXMgQ0FOQ0VMTEVEKQ0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZbMTNdID09PSAiWUVTIikgc3RhdHMuY2FuY2VsbGVkKys7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3RhdHMudG90YWwrKzsNCiAgICAgICAgICAgICAgICBjb25zdCBhbXQgPSBwYXJzZUZsb2F0KGZbOV0pIHx8IDA7DQogICAgICAgICAgICAgICAgY29uc3QgdG93YXJkcyA9IChmWzEyXSB8fCAiIikudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBwaW4gPSAoZlsxNV0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCByYXdQaG9uZSA9IChmWzNdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgY29uc3QgY2xlYW5QaG9uZSA9IHJhd1Bob25lLnJlcGxhY2UoL1xEL2csICcnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBpc1BsYWNlaG9sZGVyID0gY2xlYW5QaG9uZS5zdGFydHNXaXRoKCI4ODg4OCIpIHx8IGNsZWFuUGhvbmUuc3RhcnRzV2l0aCgiOTk5OTkiKTsNCg0KICAgICAgICAgICAgICAgIGlmICghZlsyXSB8fCBmWzJdLnRyaW0oKSA9PT0gIiIpIHN0YXRzLm5vTmFtZSsrOw0KICAgICAgICAgICAgICAgIGlmICghcmF3UGhvbmUgfHwgaXNQbGFjZWhvbGRlcikgc3RhdHMubm9QaG9uZSsrOw0KICAgICAgICAgICAgICAgIGlmICghZls0XSB8fCBmWzRdLnRyaW0oKSA9PT0gIiIgfHwgZls0XSA9PT0gIn4iKSBzdGF0cy5ub0FkZHIrKzsNCiAgICAgICAgICAgICAgICBpZiAoIXBpbiB8fCBwaW4gPT09ICIwMDAwMDAiIHx8IHBpbi5sZW5ndGggIT09IDYgfHwgIS9eWzEtOV1bMC05XXs1fSQvLnRlc3QocGluKSkgc3RhdHMubm9QaW4rKzsNCiAgICAgICAgICAgICAgICBpZiAoIWZbNV0gfHwgZls1XS50cmltKCkgPT09ICIiKSBzdGF0cy5ub0VtYWlsKys7DQogICAgICAgICAgICAgICAgaWYgKCFmWzZdIHx8IGZbNl0udHJpbSgpID09PSAiIikgc3RhdHMubm9QYW4rKzsNCiAgICAgICAgICAgICAgICBpZiAoIWZbMTBdIHx8IGZbMTBdLnRyaW0oKSA9PT0gIiIpIHN0YXRzLm5vUmVmKys7DQogICAgICAgICAgICAgICAgaWYgKCFmWzE0XSB8fCBmWzE0XS50cmltKCkgPT09ICIiIHx8IGZbMTRdID09PSAifiIpIHN0YXRzLm5vQ29tbSsrOw0KICAgICAgICAgICAgICAgIGlmIChhbXQgPCAxKSBzdGF0cy5ub0FtdCsrOw0KICAgICAgICAgICAgICAgIGlmIChmWzE3XSA9PT0gIk5PIikgc3RhdHMubm9QcmFzYWRhbSsrOw0KICAgICAgICAgICAgICAgIGlmIChmWzE2XSA9PT0gIk5PIikgc3RhdHMubm9QcmludCsrOw0KICAgICAgICAgICAgICAgIGlmIChhbXQgPj0gMTAwMDAgJiYgdG93YXJkcy5pbmNsdWRlcygiQ09SUFVTIikgJiYgZlsxOF0gPT09ICJOTyIpIHN0YXRzLnBlbmRpbmdDb25zZW50Kys7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgeyBqc1BERiB9ID0gd2luZG93LmpzcGRmOw0KICAgICAgICAgICAgY29uc3QgZG9jID0gbmV3IGpzUERGKHsNCiAgICAgICAgICAgICAgICBwdXRPbmx5VXNlZEZvbnRzOiB0cnVlLA0KICAgICAgICAgICAgICAgIGNvbXByZXNzOiB0cnVlDQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gSWYgdGhlIGVuY3J5cHRpb24gcGx1Z2luIGlzIGxvYWRlZCwgdGhpcyB3aWxsIG5vdyB3b3JrDQogICAgICAgICAgICBpZiAodHlwZW9mIGRvYy5zZXRFbmNyeXB0aW9uID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgZG9jLnNldEVuY3J5cHRpb24oew0KICAgICAgICAgICAgICAgICAgICB1c2VyUGFzc3dvcmQ6ICJNTVBUIiwNCiAgICAgICAgICAgICAgICAgICAgb3duZXJQYXNzd29yZDogIk1NUFQiLA0KICAgICAgICAgICAgICAgICAgICB1c2VyUGVybWlzc2lvbnM6IFsicHJpbnQiLCAibW9kaWZ5IiwgImNvcHkiLCAiYW5ub3QtZm9ybXMiXQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFbmNyeXB0aW9uIHBsdWdpbiBtaXNzaW5nIGZyb20gdGhlIGxvYWRlZCBqc1BERiBsaWJyYXJ5LiIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCB0b3RhbFBhZ2VzRXhwID0gInt0b3RhbF9wYWdlc19jb3VudF9zdHJpbmd9IjsNCiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gbm93LnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tSU4nLCB7IGRheTogJzItZGlnaXQnLCBtb250aDogJ3Nob3J0JywgeWVhcjogJ251bWVyaWMnIH0pOw0KICAgICAgICAgICAgY29uc3QgdGltZVN0YW1wID0gbm93LnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpLnNsaWNlKDAsIDE2KTsNCiAgICAgICAgICAgIGxldCBwTWFwID0geyBzdW1tYXJ5OiAwLCBwYW46IDAsIGNvdW50cnk6IDAsIHBob25lOiAwLCBwaW5jb2RlOiAwLCBkb2xsYXI6IDAsIGNpdHk6IDAsIGRvbm9yTmFtZXM6IDAsIGFkZHJDb3JyOiAwIH07DQoNCiAgICAgICAgICAgIGNvbnN0IGRyYXdCcmFuZGluZyA9IChwYWdlVGl0bGUsIGlzSW5kZXggPSBmYWxzZSkgPT4gew0KICAgICAgICAgICAgICAgIC8vIFNMQVRFIEJMVUUgSEVBREVSDQogICAgICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcig3MCwgMTMwLCAxODApOyBkb2MucmVjdCgwLCAwLCAyMTAsIDQwLCAnRicpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1LCAyNTUsIDI1NSk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOyBkb2Muc2V0Rm9udFNpemUoMjIpOw0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KGNsZWFuU3RyKHBhZ2VUaXRsZSksIDEwNSwgMTgsIHsgYWxpZ246ICJjZW50ZXIiIH0pOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMSk7DQogICAgICAgICAgICAgICAgZG9jLnRleHQoY2xlYW5TdHIoYE1NUFQgSW50ZXJuYWwgQXVkaXQgfCBHZW5lcmF0ZWQ6ICR7ZGF0ZVN0cn0gJHtub3cudG9Mb2NhbGVUaW1lU3RyaW5nKCl9YCksIDEwNSwgMjgsIHsgYWxpZ246ICJjZW50ZXIiIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gQ09PTCBHUkVZIEZPT1RFUg0KICAgICAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoMTQ5LCAxNjUsIDE2Nik7IGRvYy5yZWN0KDAsIDI4MiwgMjEwLCAxNSwgJ0YnKTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSwgMjU1LCAyNTUpOyBkb2Muc2V0Rm9udFNpemUoOC41KTsNCiAgICAgICAgICAgICAgICBkb2MudGV4dCgiSU5URVJOQUwgU0VDVVJJVFkgRE9DVU1FTlQgLSBNTVBUIEFETUlOSVNUUkFUSU9OIiwgMTUsIDI5Mik7DQoNCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSwgMjU1LCAwKTsgLy8gWWVsbG93IGZvciB2aXNpYmlsaXR5DQogICAgICAgICAgICAgICAgZG9jLnRleHQoZG9jLmludGVybmFsLmdldEN1cnJlbnRQYWdlSW5mbygpLnBhZ2VOdW1iZXIgKyAiIC8gIiArIHRvdGFsUGFnZXNFeHAsIDIwMCwgMjkyLCB7IGFsaWduOiAicmlnaHQiIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKCFpc0luZGV4KSB7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1LCAyNTUsIDI1NSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KCJCYWNrIHRvIEluZGV4IiwgMTMwLCAyOTIsIHsgYWxpZ246ICJjZW50ZXIiIH0pOw0KICAgICAgICAgICAgICAgICAgICBkb2MubGluaygxMjAsIDI4NSwgMjAsIDEwLCB7IHBhZ2VOdW1iZXI6IDEgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgLy8gUEFHRSAxOiBJTkRFWA0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJBVURJVCBOQVZJR0FUSU9OIElOREVYIiwgdHJ1ZSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgMjogU1VNTUFSWQ0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5zdW1tYXJ5ID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiRVhFQ1VUSVZFIEFVRElUIFNVTU1BUlkiKTsNCiAgICAgICAgICAgIGxldCBzeSA9IDU1Ow0KICAgICAgICAgICAgY29uc3QgZGF0YVJvd3MgPSBbDQogICAgICAgICAgICAgICAgWyJUb3RhbCBBY3RpdmUgUmVjZWlwdHMgKEV4Y2wuIENhbmNlbGxlZCkiLCBzdGF0cy50b3RhbCwgIiMyYzNlNTAiXSwNCiAgICAgICAgICAgICAgICBbIlRvdGFsIENhbmNlbGxlZCAoSWdub3JlZCkiLCBzdGF0cy5jYW5jZWxsZWQsICIjZTc0YzNjIl0sDQogICAgICAgICAgICAgICAgWyJObyBOYW1lIEZvdW5kIiwgc3RhdHMubm9OYW1lLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gVGVsZXBob25lIC8gUGxhY2Vob2xkZXIiLCBzdGF0cy5ub1Bob25lLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gQWRkcmVzcyAvIEVtcHR5Iiwgc3RhdHMubm9BZGRyLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiSW52YWxpZCBQaW5jb2RlIiwgc3RhdHMubm9QaW4sICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBFbWFpbCBJRCIsIHN0YXRzLm5vRW1haWwsICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBQQU4gTnVtYmVyIiwgc3RhdHMubm9QYW4sICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBSZWZlcmVuY2UgRGV0YWlscyIsIHN0YXRzLm5vUmVmLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gQ29tbWVudHMgUHJvdmlkZWQiLCBzdGF0cy5ub0NvbW0sICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBBbW91bnQgRm91bmQiLCBzdGF0cy5ub0FtdCwgIiNjMDM5MmIiXSwNCiAgICAgICAgICAgICAgICBbIlByYXNhZGFtIFN0YXR1cyAoTk8pIiwgc3RhdHMubm9QcmFzYWRhbSwgIiNkMzU0MDAiXSwNCiAgICAgICAgICAgICAgICBbIk5vdCBQcmludGVkIChOTykiLCBzdGF0cy5ub1ByaW50LCAiI2QzNTQwMCJdLA0KICAgICAgICAgICAgICAgIFsiUGVuZGluZyBDb25zZW50IExldHRlcnMqIiwgc3RhdHMucGVuZGluZ0NvbnNlbnQsICIjZmYwMDAwIl0NCiAgICAgICAgICAgIF07DQogICAgICAgICAgICBkYXRhUm93cy5mb3JFYWNoKChyLCBpKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGkgJSAyID09PSAwKSB7IGRvYy5zZXRGaWxsQ29sb3IoMjQ1KTsgZG9jLnJlY3QoMTUsIHN5IC0gOCwgMTgwLCAxMiwgJ0YnKTsgfQ0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoclsyXSk7IGRvYy5zZXRGb250U2l6ZSgxMSk7IGRvYy50ZXh0KGNsZWFuU3RyKHJbMF0pLCAyNSwgc3kpOw0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KHJbMV0udG9TdHJpbmcoKSwgMTg1LCBzeSwgeyBhbGlnbjogInJpZ2h0IiB9KTsgc3kgKz0gMTI7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gUEFHRSAzOiBQQU4NCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAucGFuID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiRGVmZWN0aXZlIFBBTiBOdW1iZXJzIik7DQogICAgICAgICAgICBsZXQgcG55ID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoMTU1LCA4OSwgMTgyKTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2MudGV4dCgiUmVjZWlwdCBOby4iLCAyNSwgNTkpOyBkb2MudGV4dCgiSW52YWxpZCBQQU4gVmFsdWUiLCAxMDAsIDU5KTsNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsLnNwbGl0KCd8Jyk7IGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBhbiA9IChmWzZdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgaWYgKHBhbiAmJiAhL15bQS1aXXs1fVswLTldezR9W0EtWl17MX0kLy50ZXN0KHBhbikpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBueSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIlBBTiAoQ29udC4pIik7IHBueSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChmWzBdLCAyNSwgcG55KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQocGFuLCAxMDAsIHBueSk7IHBueSArPSA5Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBQQUdFIDQ6IENPVU5UUklFUyAoVXNpbmcgUmV2ZXJzZSBTZWFyY2gpDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLmNvdW50cnkgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJDb3VudHJpZXMgaW4gQWRkcmVzcyBGaWVsZCIpOw0KICAgICAgICAgICAgbGV0IGN5WSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDM5LCAxNzQsIDk2KTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2MudGV4dCgiUmVjZWlwdCBOby4iLCAyNSwgNTkpOyBkb2MudGV4dCgiQWRkcmVzcyBFbnRyeSIsIDgwLCA1OSk7DQoNCiAgICAgICAgICAgIGNvbnN0IGNvdW50cmllcyA9IFsiVVNBIiwgIlVLIiwgIlVOSVRFRCBLSU5HRE9NIiwgIlVBRSIsICJDQU5BREEiLCAiQVVTVFJBTElBIiwgIlNJTkdBUE9SRSJdOw0KDQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbC5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgIC8vIEZpZWxkIDEzIGlzIENhbmNlbGxlZC4gSmFuIDI2IGluc3RydWN0aW9uOiBJZ25vcmUgQ0FOQ0VMTEVEIHJlY2VpcHRzLg0KICAgICAgICAgICAgICAgIGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgYWRyID0gKGZbNF0gfHwgIiIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgIGlmICghYWRyKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAvLyBSRVZFUlNFIFNFQVJDSCBMT0dJQzoNCiAgICAgICAgICAgICAgICAvLyBTcGxpdCBieSBjb21tb24gZGVsaW1pdGVycyBhbmQgbG9vayBhdCB0aGUgdmVyeSBsYXN0IHNlZ21lbnQNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGFkci5zcGxpdCgvW1xzLF0rLyk7DQogICAgICAgICAgICAgICAgY29uc3QgbGFzdFNlZ21lbnQgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTsgLy8gR2V0IHRoZSBsYXN0IHdvcmQNCiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmRMYXN0U2VnbWVudCA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0c1twYXJ0cy5sZW5ndGggLSAyXSA6ICIiOw0KDQogICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGxhc3Qgc2VnbWVudCAob3IgbGFzdCB0d28gZm9yICJVTklURUQgS0lOR0RPTSIpIG1hdGNoZXMgb3VyIGxpc3QNCiAgICAgICAgICAgICAgICBjb25zdCBpc0ZvcmVpZ24gPSBjb3VudHJpZXMuc29tZShjID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09ICJVTklURUQgS0lOR0RPTSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhZHIuZW5kc1dpdGgoIlVOSVRFRCBLSU5HRE9NIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhc3RTZWdtZW50ID09PSBjOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKGlzRm9yZWlnbikgew0KICAgICAgICAgICAgICAgICAgICBpZiAoY3lZID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiQ291bnRyaWVzIChDb250LikiKTsgY3lZID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGZbMF0sIDI1LCBjeVkpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoOSk7DQogICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXlpbmcgb25seSB0aGUgZW5kIG9mIHRoZSBhZGRyZXNzIHRvIGhpZ2hsaWdodCB0aGUgY291bnRyeQ0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChjbGVhblN0cihmWzRdLnNsaWNlKC01NSkpLCA4MCwgY3lZKTsNCiAgICAgICAgICAgICAgICAgICAgY3lZICs9IDk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCg0KICAgICAgICAgICAgLy8gUEFHRSA1OiBQSE9ORVMNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAucGhvbmUgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJJbmNvcnJlY3QgVGVsZXBob25lIE51bWJlcnMiKTsNCiAgICAgICAgICAgIGxldCB0eSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDUyLCA3MywgOTQpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KCJSZWNlaXB0IE5vLiIsIDI1LCA1OSk7IGRvYy50ZXh0KCJJbnZhbGlkIFBob25lIFZhbHVlIiwgMTAwLCA1OSk7DQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbC5zcGxpdCgnfCcpOyBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCBwaCA9IChmWzNdIHx8ICIiKS50cmltKCk7IGNvbnN0IGNwID0gcGgucmVwbGFjZSgvXEQvZywgJycpOw0KICAgICAgICAgICAgICAgIGlmIChwaCAmJiAhY3Auc3RhcnRzV2l0aCgiODg4ODgiKSAmJiAhY3Auc3RhcnRzV2l0aCgiOTk5OTkiKSAmJiBjcC5sZW5ndGggIT09IDEwKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIlBob25lcyAoQ29udC4pIik7IHR5ID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGZbMF0sIDI1LCB0eSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KHBoLCAxMDAsIHR5KTsgdHkgKz0gOTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gUEFHRSA2OiBQSU5DT0RFDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLnBpbmNvZGUgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJJbnZhbGlkIFBJTkNPREUgUmVjb3JkcyIpOw0KICAgICAgICAgICAgbGV0IHBjeSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDI0MywgMTU2LCAxOCk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnRleHQoIlJlY2VpcHQgTm8uIiwgMjUsIDU5KTsgZG9jLnRleHQoIkludmFsaWQgUGluY29kZSIsIDEwMCwgNTkpOw0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGwuc3BsaXQoJ3wnKTsgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSByZXR1cm47DQogICAgICAgICAgICAgICAgaWYgKChmWzE5XSB8fCAiSU5ESUEiKS50cmltKCkudG9VcHBlckNhc2UoKSAhPT0gIklORElBIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBpbiA9IChmWzE1XSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgIGlmICghZls0XSB8fCBmWzRdID09PSAifiIgfHwgIWZbMl0pIHJldHVybjsNCiAgICAgICAgICAgICAgICBpZiAoIS9eWzEtOV1bMC05XXs1fSQvLnRlc3QocGluKSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAocGN5ID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiUGluY29kZSAoQ29udC4pIik7IHBjeSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChmWzBdLCAyNSwgcGN5KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQocGluIHx8ICJbRU1QVFldIiwgMTAwLCBwY3kpOyBwY3kgKz0gOTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gUEFHRSA3OiBET0xMQVIgU0lHTiAoJCkNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuZG9sbGFyID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiSW52YWxpZCBOYW1lcyBvciBBZGRyZXNzICgkKSIpOw0KICAgICAgICAgICAgbGV0IGR5ID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoMjMxLCA3NiwgNjApOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KCJSZWNlaXB0IE5vLiIsIDI1LCA1OSk7IGRvYy50ZXh0KCJEZXRhaWxzIiwgNzAsIDU5KTsNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsLnNwbGl0KCd8Jyk7IGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGlmICgoKGZbMl0gfHwgIiIpICsgKGZbNF0gfHwgIiIpKS5pbmNsdWRlcygiJCIpKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBbYE5hbWU6ICR7ZlsyXX1gLCBgQWRkcjogJHtmWzRdfWBdOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxpdFR4dCA9IGRvYy5zcGxpdFRleHRUb1NpemUoaW5mby5qb2luKCJcbiIpLCAxMTUpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZHkgKyAxNSA+IDI3NSkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIkRvbGxhciBDaGVjayAoQ29udC4pIik7IGR5ID0gNjU7IH0NCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGZbMF0sIDI1LCBkeSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy5zZXRGb250U2l6ZSg5KTsgZG9jLnRleHQoc3BsaXRUeHQsIDcwLCBkeSk7IGR5ICs9IDE1Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBQQUdFIDg6IENJVFkgQ09SUkVDVElPTg0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5jaXR5ID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiQ2l0eSBOYW1lIFZhbGlkYXRpb24iKTsNCiAgICAgICAgICAgIGxldCBjdHlZID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoMTQyLCA2OCwgMTczKTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2MudGV4dCgiT3JpZ2luYWwiLCAyNSwgNTkpOyBkb2MudGV4dCgiU3VnZ2VzdGVkIiwgMTEwLCA1OSk7DQogICAgICAgICAgICBsZXQgY2l0eVJhdyA9IHdpbmRvdy5HTE9CQUxfQ0lUWV9BVURJVF9EQVRBIHx8ICIiOw0KICAgICAgICAgICAgaWYgKGNpdHlSYXcpIHsNCiAgICAgICAgICAgICAgICBTdHJpbmcoY2l0eVJhdykuc3BsaXQoJ1xuJykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocHRzLmxlbmd0aCA+PSAyICYmICFsaW5lLmluY2x1ZGVzKCdPUklHSU5BTCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R5WSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIkNpdHkgKENvbnQuKSIpOyBjdHlZID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSg5KTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChjbGVhblN0cihwdHNbMF0udHJpbSgpKSwgMjUsIGN0eVkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQoY2xlYW5TdHIocHRzWzFdLnRyaW0oKSksIDExMCwgY3R5WSk7IGN0eVkgKz0gNzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBQQUdFIDk6IERPTk9SIE5BTUVTDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLmRvbm9yTmFtZXMgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJEb25vciBOYW1lIENvcnJlY3Rpb25zIik7DQogICAgICAgICAgICBsZXQgZG55WSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDQxLCAxMjgsIDE4NSk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnRleHQoIk9yaWdpbmFsIiwgMjUsIDU5KTsgZG9jLnRleHQoIkNvcnJlY3RlZCIsIDExMCwgNTkpOw0KICAgICAgICAgICAgbGV0IGRvbm9yUmF3ID0gd2luZG93LkdMT0JBTF9ET05PUl9OQU1FX0RBVEEgfHwgIiI7DQogICAgICAgICAgICBpZiAoZG9ub3JSYXcpIHsNCiAgICAgICAgICAgICAgICBTdHJpbmcoZG9ub3JSYXcpLnNwbGl0KCdcbicpLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHB0cyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHB0cy5sZW5ndGggPj0gMiAmJiAhbGluZS5pbmNsdWRlcygnT1JJR0lOQUwnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRueVkgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJOYW1lcyAoQ29udC4pIik7IGRueVkgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDkpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGNsZWFuU3RyKHB0c1swXS50cmltKCkpLCAyNSwgZG55WSk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChjbGVhblN0cihwdHNbMV0udHJpbSgpKSwgMTEwLCBkbnlZKTsgZG55WSArPSA3Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIFBBR0UgMTA6IEFERFJFU1MgQ09SUkVDVElPTlMNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuYWRkckNvcnIgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJBZGRyZXNzIENvcnJlY3Rpb25zIik7DQogICAgICAgICAgICBsZXQgYWR5WSA9IDcwOw0KICAgICAgICAgICAgY29uc3QgY29sV2lkdGggPSA3NTsNCiAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoMjIsIDE2MCwgMTMzKTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2MudGV4dCgiT3JpZ2luYWwgQWRkcmVzcyIsIDI1LCA1OSk7IGRvYy50ZXh0KCJDb3JyZWN0ZWQgQWRkcmVzcyIsIDExNSwgNTkpOw0KICAgICAgICAgICAgbGV0IGFkZHJSYXcgPSB3aW5kb3cuR0xPQkFMX0FERFJFU1NfQ09SUkVDVElPTl9EQVRBIHx8ICIiOw0KICAgICAgICAgICAgaWYgKGFkZHJSYXcpIHsNCiAgICAgICAgICAgICAgICBTdHJpbmcoYWRkclJhdykuc3BsaXQoJ1xuJykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocHRzLmxlbmd0aCA+PSAyICYmICFsaW5lLmluY2x1ZGVzKCdPUklHSU5BTCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnVyA9IGRvYy5zcGxpdFRleHRUb1NpemUoY2xlYW5TdHIocHRzWzBdLnRyaW0oKSksIGNvbFdpZHRoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJXID0gZG9jLnNwbGl0VGV4dFRvU2l6ZShjbGVhblN0cihwdHNbMV0udHJpbSgpKSwgY29sV2lkdGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93SCA9IE1hdGgubWF4KG9yaWdXLmxlbmd0aCwgY29yclcubGVuZ3RoKSAqIDU7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWR5WSArIHJvd0ggPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJBZGRyZXNzIChDb250LikiKTsgYWR5WSA9IDcwOyB9DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoOCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQob3JpZ1csIDI1LCBhZHlZKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KGNvcnJXLCAxMTUsIGFkeVkpOyBhZHlZICs9IHJvd0ggKyA2Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldERyYXdDb2xvcigyMzApOyBkb2MubGluZSgyMCwgYWR5WSAtIDMsIDE5MCwgYWR5WSAtIDMpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIFVQREFURSBJTkRFWCBMSU5LUw0KICAgICAgICAgICAgZG9jLnNldFBhZ2UoMSk7DQogICAgICAgICAgICBjb25zdCBuYXYgPSBbDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkV4ZWN1dGl2ZSBBdWRpdCBTdW1tYXJ5IiwgdGFyZ2V0OiBwTWFwLnN1bW1hcnksIGNvbG9yOiBbNDQsIDYyLCA4MF0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiRGVmZWN0aXZlIFBBTiBOdW1iZXJzIiwgdGFyZ2V0OiBwTWFwLnBhbiwgY29sb3I6IFsxNTUsIDg5LCAxODJdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkNvdW50cmllcyBpbiBBZGRyZXNzIEZpZWxkIiwgdGFyZ2V0OiBwTWFwLmNvdW50cnksIGNvbG9yOiBbMzksIDE3NCwgOTZdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkluY29ycmVjdCBUZWxlcGhvbmUgTnVtYmVycyIsIHRhcmdldDogcE1hcC5waG9uZSwgY29sb3I6IFs1MiwgNzMsIDk0XSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJJbnZhbGlkIFBJTkNPREUgUmVjb3JkcyIsIHRhcmdldDogcE1hcC5waW5jb2RlLCBjb2xvcjogWzI0MywgMTU2LCAxOF0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiSW52YWxpZCBOYW1lcyBvciBBZGRyZXNzICgkKSIsIHRhcmdldDogcE1hcC5kb2xsYXIsIGNvbG9yOiBbMjMxLCA3NiwgNjBdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkNpdHkgTmFtZSBWYWxpZGF0aW9uIiwgdGFyZ2V0OiBwTWFwLmNpdHksIGNvbG9yOiBbMTQyLCA2OCwgMTczXSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJEb25vciBOYW1lIENvcnJlY3Rpb25zIiwgdGFyZ2V0OiBwTWFwLmRvbm9yTmFtZXMsIGNvbG9yOiBbNDEsIDEyOCwgMTg1XSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJBZGRyZXNzIENvcnJlY3Rpb25zIiwgdGFyZ2V0OiBwTWFwLmFkZHJDb3JyLCBjb2xvcjogWzIyLCAxNjAsIDEzM10gfQ0KICAgICAgICAgICAgXTsNCiAgICAgICAgICAgIGxldCBpeSA9IDY1Ow0KICAgICAgICAgICAgbmF2LmZvckVhY2goaXQgPT4gew0KICAgICAgICAgICAgICAgIGlmICghaXQudGFyZ2V0KSByZXR1cm47DQogICAgICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcigyNDgpOyBkb2MucmVjdCgyMCwgaXksIDE3MCwgMTQsICdGJyk7DQogICAgICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcihpdC5jb2xvclswXSwgaXQuY29sb3JbMV0sIGl0LmNvbG9yWzJdKTsgZG9jLnJlY3QoMjAsIGl5LCA0LCAxNCwgJ0YnKTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKGl0LmNvbG9yWzBdLCBpdC5jb2xvclsxXSwgaXQuY29sb3JbMl0pOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgZG9jLnNldEZvbnRTaXplKDEyKTsNCiAgICAgICAgICAgICAgICBkb2MudGV4dChpdC5sYWJlbCwgMzIsIGl5ICsgOS41KTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKGl0LmNvbG9yWzBdLCBpdC5jb2xvclsxXSwgaXQuY29sb3JbMl0pOyBkb2MucmVjdCgxNzIsIGl5ICsgMi41LCAxMiwgOSwgJ0YnKTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy50ZXh0KGl0LnRhcmdldC50b1N0cmluZygpLCAxNzgsIGl5ICsgOC41LCB7IGFsaWduOiAiY2VudGVyIiB9KTsNCiAgICAgICAgICAgICAgICBkb2MubGluaygyMCwgaXksIDE3MCwgMTQsIHsgcGFnZU51bWJlcjogaXQudGFyZ2V0IH0pOyBpeSArPSAxODsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBpZiAodHlwZW9mIGRvYy5wdXRUb3RhbFBhZ2VzID09PSAnZnVuY3Rpb24nKSBkb2MucHV0VG90YWxQYWdlcyh0b3RhbFBhZ2VzRXhwKTsNCiAgICAgICAgICAgIGRvYy5zYXZlKGBNTVBUX0RhdGFiYXNlX0F1ZGl0XyR7dGltZVN0YW1wfS5wZGZgKTsNCiAgICAgICAgICAgIGNvbnN0IGxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsgaWYgKGxvYWRlcikgbG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgIH0NCg0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHRyaWdnZXJGdWxsQXVkaXQoKSB7DQogICAgICAgICAgICBjb25zdCBsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBhd2FpdCBydW5DaXR5RXh0cmFjdGlvbignYXVkaXQnKTsNCiAgICAgICAgICAgICAgICBhd2FpdCBydW5Eb25vck5hbWVDaGVjaygnYXVkaXQnKTsNCiAgICAgICAgICAgICAgICBhd2FpdCBydW5BZGRyZXNzQ2hlY2soJ2F1ZGl0Jyk7IC8vIEFkZGVkDQoNCiAgICAgICAgICAgICAgICBhd2FpdCBydW5EYXRhYmFzZUF1ZGl0UERGKCk7DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJBdWRpdCBFcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKGxvYWRlcikgbG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFBBTiBOdW1iZXJzIEF1dG8gQ29ycmVjdCAtIChVcHBlcmNhc2UgZm9yIGFsbCBQQU4gRklFTERTKQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5QQU5Db3JyZWN0aW9uKCkgew0KICAgICAgICAgICAgY29uc3QgbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKGxvYWRlcikgbG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSB0aGUgb3ZlcmxheSByZW5kZXJzIGJlZm9yZSB0aGUgQ1BVIHdvcmtzDQogICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgY29ycmVjdGlvbkNvdW50ID0gMDsNCg0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIC8vIDEuIFByb2Nlc3MgdGhlIGdsb2JhbCBhcnJheSBkaXJlY3RseQ0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBHTE9CQUxfREJfTElORVNbaV07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmUpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gbGluZS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBQQU4gaXMgSW5kZXggNiAoN3RoIGNvbHVtbikNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZHMubGVuZ3RoID4gNikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWwgPSBmaWVsZHNbNl0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVwcGVyVmFsID0gdmFsLnRvVXBwZXJDYXNlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsICE9PSB1cHBlclZhbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbNl0gPSB1cHBlclZhbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTW2ldID0gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGlvbkNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMi4gU3luYyB0byBDbG91ZCBpZiBjaGFuZ2VzIHdlcmUgbWFkZQ0KICAgICAgICAgICAgICAgICAgICBpZiAoY29ycmVjdGlvbkNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQVVUSEVOVElDQVRJT046IFVzaW5nIHlvdXIgTU1QVF9BVVRIIHN5c3RlbSB0byBnZXQgYSBmcmVzaCB0b2tlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5QYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlblJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogdG9rZW5QYXJhbXMNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXdhaXQgdG9rZW5SZXMuanNvbigpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBVUExPQUQ6IFNhdmluZyB0aGUgbW9kaWZpZWQgR0xPQkFMX0RCX0xJTkVTDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGxvYWRSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbkRhdGEuYWNjZXNzX3Rva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEdMT0JBTF9EQl9MSU5FUy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwbG9hZFJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IHNjcmVlbiBkaXNwbGF5DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzaG93UmVjb3JkID09PSAnZnVuY3Rpb24nKSBzaG93UmVjb3JkKGN1cnJlbnRSZWNvcmRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYFBBTiBDb3JyZWN0aW9uIFN1Y2Nlc3MhXG5Ub3RhbCBSZWNvcmRzIFVwZGF0ZWQ6ICR7Y29ycmVjdGlvbkNvdW50fWApOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNsb3VkIFN5bmMgRmFpbGVkLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlNjYW4gQ29tcGxldGU6IE5vIGxvd2VyY2FzZSBQQU4gZW50cmllcyBmb3VuZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlBBTiBFcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRlcikgbG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwgMTAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFVuaXF1ZSBEb25vciBMaXN0IENyZWF0aW9uIExvZ2ljDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5VbmlxdWVEb25vckxpc3QoKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb25vci1zZWFyY2gtaW5wdXQnKS52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goTU1QVF9EQl9SQVdfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCByYXdDb250ZW50ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gcmF3Q29udGVudC5zcGxpdCgvXHI/XG58XHIvKTsNCg0KICAgICAgICAgICAgICAgIC8vIFVzZSBhIE1hcCB0byBzdG9yZSBhZ2dyZWdhdGVkIGRhdGENCiAgICAgICAgICAgICAgICBsZXQgZG9ub3JNYXAgPSBuZXcgTWFwKCk7DQoNCiAgICAgICAgICAgICAgICAvLyBTY2FuIEFMTCByZWNvcmRzIChub3QganVzdCByZXZlcnNlKSB0byBlbnN1cmUgd2UgbWlzcyBub3RoaW5nDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBoZWFkZXIgb3IgZW1wdHkgbGluZXMNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lIHx8IGxpbmUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygicmVjZWlwdHxkYXRlIikpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjZWlwdE5vID0gZmllbGRzWzBdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gZmllbGRzWzJdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG9uZSA9IGZpZWxkc1szXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkcmVzcyA9IGZpZWxkc1s0XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChmaWVsZHNbOV0pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbCA9IGZpZWxkc1sxM10gfHwgIk5PIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGluID0gZmllbGRzWzE1XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnRyeSA9IGZpZWxkc1sxOV0gfHwgIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIFNUUklDVCBJR05PUkUgTE9HSUMgLS0tDQogICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWwgPT09ICJZRVMiKSBjb250aW51ZTsgLy8gSWdub3JlIEFMTCBjYW5jZWxsZWQgcmVjb3Jkcw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBob25lLnRyaW0oKSB8fCBwaG9uZS5zdGFydHNXaXRoKCI4ODg4OCIpIHx8IHBob25lLnN0YXJ0c1dpdGgoIjk5OTk5IikpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAobGluZS5pbmNsdWRlcygiJCIpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYW1lLnRyaW0oKSAmJiBhbW91bnQgPD0gMCkgY29udGludWU7IC8vIFNraXAgZ2hvc3QgcmVjb3Jkcw0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBTRUFSQ0ggRklMVEVSIChpZiBhcHBsaWNhYmxlKSAtLS0NCiAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaFRlcm0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvd2VyTGluZSA9IGxpbmUudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hUZXJtLmluY2x1ZGVzKCc7JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtcyA9IHNlYXJjaFRlcm0uc3BsaXQoJzsnKS5tYXAodCA9PiB0LnRyaW0oKS50b0xvd2VyQ2FzZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlcm1zLnNvbWUodCA9PiBsb3dlckxpbmUuaW5jbHVkZXModCkpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VhcmNoVGVybS5pbmNsdWRlcygnLCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybXMgPSBzZWFyY2hUZXJtLnNwbGl0KCcsJykubWFwKHQgPT4gdC50cmltKCkudG9Mb3dlckNhc2UoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtcy5ldmVyeSh0ID0+IGxvd2VyTGluZS5pbmNsdWRlcyh0KSkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxvd2VyTGluZS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBBR0dSRUdBVElPTiBMT0dJQyAtLS0NCiAgICAgICAgICAgICAgICAgICAgaWYgKCFkb25vck1hcC5oYXMocGhvbmUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkb25vck1hcC5zZXQocGhvbmUsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLCBwaG9uZSwgYWRkcmVzcywgcGluLCBjb3VudHJ5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGVzdFJlY2VpcHQ6IHJlY2VpcHRObywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEFtb3VudDogYW1vdW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAxDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleGlzdGluZyA9IGRvbm9yTWFwLmdldChwaG9uZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy50b3RhbEFtb3VudCArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5jb3VudCArPSAxOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIHJlY2VpcHQgbnVtYmVyIGlzIGhpZ2hlciB0aGFuIHdoYXQgd2UgaGF2ZSwgdXBkYXRlIHRoZSAiTGF0ZXN0IiBkZXRhaWxzDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgd2UgaGF2ZSB0aGUgbW9zdCByZWNlbnQgTmFtZS9BZGRyZXNzIGV2ZW4gaWYgd2UgcHJvY2VzcyBvdXQgb2Ygb3JkZXINCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChyZWNlaXB0Tm8ucmVwbGFjZSgvXEQvZywgJycpKSA+IHBhcnNlSW50KGV4aXN0aW5nLmxhdGVzdFJlY2VpcHQucmVwbGFjZSgvXEQvZywgJycpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLm5hbWUgPSBuYW1lOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmFkZHJlc3MgPSBhZGRyZXNzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLnBpbiA9IHBpbjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5jb3VudHJ5ID0gY291bnRyeTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5sYXRlc3RSZWNlaXB0ID0gcmVjZWlwdE5vOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgdW5pcXVlRG9ub3JzID0gQXJyYXkuZnJvbShkb25vck1hcC52YWx1ZXMoKSk7DQoNCiAgICAgICAgICAgICAgICBpZiAodW5pcXVlRG9ub3JzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gZG9ub3JzIGZvdW5kIG1hdGNoaW5nIHRoZSBjcml0ZXJpYS4iKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBnZW5lcmF0ZVVuaXF1ZURvbm9yUERGKHVuaXF1ZURvbm9ycywgc2VhcmNoVGVybSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRG9ub3IgTGlzdCBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBQREYgZmlsZSBHZW5lcmF0aW9uIGZvciBVbmlxdWUgRG9ub3IgTGlzdA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVVbmlxdWVEb25vclBERihkb25vcnMsIHNlYXJjaFRlcm0pIHsNCiAgICAgICAgICAgIGNvbnN0IHsganNQREYgfSA9IHdpbmRvdy5qc3BkZjsNCiAgICAgICAgICAgIGNvbnN0IGRvYyA9IG5ldyBqc1BERigncCcsICdtbScsICdhNCcpOw0KICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpOw0KDQogICAgICAgICAgICAvLyAxLiBTb3J0IGJ5IFRvdGFsIEFtb3VudCAoSGlnaGVzdCBvbiB0b3ApDQogICAgICAgICAgICBkb25vcnMuc29ydCgoYSwgYikgPT4gYi50b3RhbEFtb3VudCAtIGEudG90YWxBbW91bnQpOw0KDQogICAgICAgICAgICBsZXQgdGl0bGUzID0gIiI7DQogICAgICAgICAgICBpZiAoc2VhcmNoVGVybSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBzZWFyY2hUZXJtLmluY2x1ZGVzKCc7JykgPyAiT1IiIDogIkFORCI7DQogICAgICAgICAgICAgICAgdGl0bGUzID0gYFNlYXJjaCBSZXN1bHRzIGZvcjogJHtzZWFyY2hUZXJtLnJlcGxhY2UoL1s7LF0vZywgIiAiICsgdHlwZSArICIgIil9YDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgdGFibGVEYXRhID0gZG9ub3JzLm1hcChkID0+IHsNCiAgICAgICAgICAgICAgICAvLyBBZHZhbmNlZCBBZGRyZXNzIExvZ2ljOiBTcGxpdCBieSBzcGFjZSwgdGlsZGUsIG9yIGNvbG9uIHRvIGZpbmQgdGhlIGNpdHkNCiAgICAgICAgICAgICAgICBjb25zdCBhZGRyUGFydHMgPSBkLmFkZHJlc3MudHJpbSgpLnNwbGl0KC9bXHN+Ol0rLyk7DQogICAgICAgICAgICAgICAgY29uc3QgY2l0eSA9IGFkZHJQYXJ0cy5sZW5ndGggPiAwID8gYWRkclBhcnRzW2FkZHJQYXJ0cy5sZW5ndGggLSAxXSA6ICIiOw0KICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSByZW1haW5pbmcgYWRkcmVzcyBmb3IgZGlzcGxheQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0FkZHIgPSBkLmFkZHJlc3MucmVwbGFjZSgvWzp+XS9nLCAnLCAnKS50cmltKCk7DQogICAgICAgICAgICAgICAgY29uc3QgbWFpbkFkZHIgPSByZW1haW5pbmdBZGRyLnNwbGl0KCcsICcpLnNsaWNlKDAsIC0xKS5qb2luKCcsICcpOw0KDQogICAgICAgICAgICAgICAgcmV0dXJuIFsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ29sdW1uIDE6IE5hbWUgJiBDb250YWN0DQogICAgICAgICAgICAgICAgICAgIC8veyBjb250ZW50OiBgJHtkLm5hbWV9XG4ke2QucGhvbmV9XG4ke2QucmVjZWlwdE5vfWAsIHN0eWxlczogeyBmb250U3R5bGU6ICdib2xkJyB9IH0sDQogICAgICAgICAgICAgICAgICAgIHsgY29udGVudDogYCR7ZC5uYW1lfVxuJHtkLnBob25lfVxuJHtkLmxhdGVzdFJlY2VpcHR9YCwgc3R5bGVzOiB7IGZvbnRTdHlsZTogJ2JvbGQnIH0gfSwNCiAgICAgICAgICAgICAgICAgICAgLy8gQ29sdW1uIDI6IENvbnRyaWJ1dGlvbg0KICAgICAgICAgICAgICAgICAgICB7IGNvbnRlbnQ6IGBScy4gJHtkLnRvdGFsQW1vdW50LnRvTG9jYWxlU3RyaW5nKCdlbi1JTicsIHsgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyLCBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSl9XG4ke2QuY291bnR9IFRpbWVzYCwgc3R5bGVzOiB7IGhhbGlnbjogJ2NlbnRlcicsIGZvbnRTdHlsZTogJ2JvbGQnIH0gfSwNCiAgICAgICAgICAgICAgICAgICAgLy97IGNvbnRlbnQ6IGBScy4gJHtkLnRvdGFsQW1vdW50LnRvTG9jYWxlU3RyaW5nKCl9XG4ke2QuY291bnR9IFRpbWVzYCwgc3R5bGVzOiB7IGhhbGlnbjogJ2NlbnRlcicsIGZvbnRTdHlsZTogJ2JvbGQnIH0gfSwNCiAgICAgICAgICAgICAgICAgICAgLy8gQ29sdW1uIDM6IEFkZHJlc3MgRGV0YWlscyAoQ2l0eSAtIFBpbmNvZGUgLSBDb3VudHJ5IG9uIGxhc3QgbGluZSkNCiAgICAgICAgICAgICAgICAgICAgeyBjb250ZW50OiBgJHttYWluQWRkcn1cbiR7Y2l0eS50b1VwcGVyQ2FzZSgpfSAtICR7ZC5waW59IC0gJHtkLmNvdW50cnkudG9VcHBlckNhc2UoKX1gLCBzdHlsZXM6IHsgZm9udFN0eWxlOiAnYm9sZCcgfSB9DQogICAgICAgICAgICAgICAgXTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBkb2MuYXV0b1RhYmxlKHsNCiAgICAgICAgICAgICAgICBoZWFkOiBbWydOYW1lICYgQ29udGFjdCcsICdDb250cmlidXRpb24nLCAnQWRkcmVzcyBEZXRhaWxzJ11dLA0KICAgICAgICAgICAgICAgIGJvZHk6IHRhYmxlRGF0YSwNCiAgICAgICAgICAgICAgICBzdGFydFk6IDUwLCAvLyBQdXNoZWQgZG93biBzaWduaWZpY2FudGx5IHRvIHByZXZlbnQgYW55IG92ZXJsYXANCiAgICAgICAgICAgICAgICBtYXJnaW46IHsgdG9wOiA1MCB9LCAvLyBFbnN1cmVzIHN1YnNlcXVlbnQgcGFnZXMgZG9uJ3Qgb3ZlcmxhcCBoZWFkZXINCiAgICAgICAgICAgICAgICB0aGVtZTogJ2dyaWQnLA0KICAgICAgICAgICAgICAgIGhlYWRTdHlsZXM6IHsNCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiBbMCwgNTEsIDEwMl0sDQogICAgICAgICAgICAgICAgICAgIHRleHRDb2xvcjogMjU1LA0KICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMTEsDQogICAgICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogJ2JvbGQnLA0KICAgICAgICAgICAgICAgICAgICBjZWxsUGFkZGluZzogNCwNCiAgICAgICAgICAgICAgICAgICAgaGFsaWduOiAnY2VudGVyJw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgYm9keVN0eWxlczogew0KICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMTAsDQogICAgICAgICAgICAgICAgICAgIGNlbGxQYWRkaW5nOiA0LA0KICAgICAgICAgICAgICAgICAgICBsaW5lQ29sb3I6IFsxODAsIDE4MCwgMTgwXSwNCiAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiBbMCwgMCwgMF0gLy8gU2hhcnAgYmxhY2sgdGV4dA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgY29sdW1uU3R5bGVzOiB7DQogICAgICAgICAgICAgICAgICAgIDA6IHsgY2VsbFdpZHRoOiA1NSB9LA0KICAgICAgICAgICAgICAgICAgICAxOiB7IGNlbGxXaWR0aDogNDAgfSwNCiAgICAgICAgICAgICAgICAgICAgMjogeyBjZWxsV2lkdGg6ICdhdXRvJyB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBkaWREcmF3UGFnZTogZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gUGVybWFuZW50IEhlYWRlciBmb3IgQWxsIFBhZ2VzDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxOCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCwgNTEsIDEwMik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KHVuZGVmaW5lZCwgJ2JvbGQnKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoIk15bGFpIE1haGEgUGVyaWF5YXZhIEFudXNoYW0gVHJ1c3QiLCAxMDUsIDE1LCB7IGFsaWduOiAnY2VudGVyJyB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTdGF0cyAmIFRpbWVzdGFtcA0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTApOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDEwMCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KHVuZGVmaW5lZCwgJ2JvbGQnKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYFVuaXF1ZSBEb25vciBMaXN0IENyZWF0ZWQgb246ICR7dGltZXN0YW1wfWAsIDE0LCAyNSk7DQoNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDEzKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwLCAxMDIsIDApOyAvLyBEYXJrIEdyZWVuIGZvciB0b3RhbCBjb3VudA0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgVG90YWwgVW5pcXVlIERvbm9yczogJHtkb25vcnMubGVuZ3RofWAsIDE0LCAzMyk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRpdGxlMykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDExKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMTUwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KHRpdGxlMywgMTQsIDQwKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIFN0eWxpc2ggRGl2aWRlciBMaW5lDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXREcmF3Q29sb3IoMCwgNTEsIDEwMik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRMaW5lV2lkdGgoMSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5saW5lKDE0LCA0MywgMTk2LCA0Myk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRm9vdGVyDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VTaXplID0gZG9jLmludGVybmFsLnBhZ2VTaXplOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlSGVpZ2h0ID0gcGFnZVNpemUuaGVpZ2h0ID8gcGFnZVNpemUuaGVpZ2h0IDogcGFnZVNpemUuZ2V0SGVpZ2h0KCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMTUwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQodW5kZWZpbmVkLCAnYm9sZCcpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCgiSW50ZXJuYWwgRG9jdW1lbnQiLCAxNCwgcGFnZUhlaWdodCAtIDEwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYFBhZ2UgJHtkYXRhLnBhZ2VOdW1iZXJ9YCwgMTk2LCBwYWdlSGVpZ2h0IC0gMTAsIHsgYWxpZ246ICdyaWdodCcgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnN0IGZpbGVTdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bOi5dL2csICctJykuc2xpY2UoMCwgMTkpOw0KICAgICAgICAgICAgZG9jLnNhdmUoYE1NUFRfRG9ub3JfTGlzdF8ke2ZpbGVTdGFtcH0ucGRmYCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIHdpbmRvdy5vbmxvYWQgPSBpbml0aWFsaXplTU1QVDsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzY3JpcHQ+DQogICAgICAgIGZ1bmN0aW9uIGJ1aWxkRllJbmRleCgpIHsNCiAgICAgICAgICAgIC8vIDEuIEluaXRpYWwgRGF0YSBDaGVjaw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBHTE9CQUxfREJfTElORVMgPT09ICd1bmRlZmluZWQnIHx8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPD0gMSkgcmV0dXJuOw0KDQogICAgICAgICAgICAvLyAyLiBTRUNVUklUWSBDSEVDSzogT25seSBkaXNhYmxlIGlmIHJlc3RyaWN0ZWQgYWJvdmUgcmVjb3JkIDENCiAgICAgICAgICAgIC8vIElmIE1pblJlY29yZE51bWJlciBpcyAxLCBpdCBtZWFucyAic3RhcnQgZnJvbSBiZWdpbm5pbmciLCBzbyB0aGV5IGFyZSBOT1QgcmVzdHJpY3RlZC4NCiAgICAgICAgICAgIGNvbnN0IG1pbkFsbG93ZWQgPSB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiB8fCAwOw0KICAgICAgICAgICAgY29uc3QgcmFkaW9zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ2Z5X2ZpbHRlcicpOw0KDQogICAgICAgICAgICBpZiAobWluQWxsb3dlZCA+IDEpIHsgLy8gPC0tLSBGSVhFRDogT25seSBsb2NrIGlmIG51bWJlciBpcyBncmVhdGVyIHRoYW4gMQ0KICAgICAgICAgICAgICAgIHJhZGlvcy5mb3JFYWNoKHIgPT4gew0KICAgICAgICAgICAgICAgICAgICByLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgci5wYXJlbnRFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAiMC41IjsNCiAgICAgICAgICAgICAgICAgICAgci5wYXJlbnRFbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAibm9uZSI7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlNlY3VyaXR5OiBGWSBGaWx0ZXIgZGlzYWJsZWQgKFJlc3RyaWN0ZWQgVXNlciBsb2NrZWQgdG8gaW5kZXg6ICIgKyBtaW5BbGxvd2VkICsgIikiKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBidXR0b25zIGFyZSBFTkFCTEVEIGlmIHRoZXkgYXJlbid0IHJlc3RyaWN0ZWQNCiAgICAgICAgICAgICAgICByYWRpb3MuZm9yRWFjaChyID0+IHsNCiAgICAgICAgICAgICAgICAgICAgci5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICByLnBhcmVudEVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICIxIjsNCiAgICAgICAgICAgICAgICAgICAgci5wYXJlbnRFbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAiYXV0byI7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIDMuIEluaXRpYWxpemUgUmFuZ2VzIGZvciBmdWxsIGFjY2VzcyB1c2Vycw0KICAgICAgICAgICAgZnlSYW5nZXMgPSB7ICJBTEwiOiB7IG1pbjogMSwgbWF4OiBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMSB9IH07DQoNCiAgICAgICAgICAgIC8vIDQuIEJ1aWxkIHRoZSBZZWFyIE1hcA0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2goKGxpbmUsIGlkeCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChpZHggPT09IDApIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCBjb2xzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBjb2xzWzFdID8gY29sc1sxXS50cmltKCkgOiAiIjsNCg0KICAgICAgICAgICAgICAgIGlmIChkYXRlU3RyLmluY2x1ZGVzKCctJykpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBkYXRlU3RyLnNwbGl0KCctJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPj0gMykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbSA9IHBhcnNlSW50KHBhcnRzWzFdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBwYXJzZUludChwYXJ0c1syXSk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydFkgPSAobSA8PSAzKSA/IHkgLSAxIDogeTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ5S2V5ID0gc3RhcnRZLnRvU3RyaW5nKCkuc2xpY2UoLTIpICsgIi0iICsgKHN0YXJ0WSArIDEpLnRvU3RyaW5nKCkuc2xpY2UoLTIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZ5UmFuZ2VzW2Z5S2V5XSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ5UmFuZ2VzW2Z5S2V5XSA9IHsgbWluOiBpZHgsIG1heDogaWR4IH07DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ5UmFuZ2VzW2Z5S2V5XS5tYXggPSBpZHg7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gNS4gQVVUTy1TRUxFQ1QgQ1VSUkVOVCBGWSAoSmFuIDIwMjYgaXMgRlkgMjUtMjYpDQogICAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCBjdXJNb250aCA9IHRvZGF5LmdldE1vbnRoKCkgKyAxOw0KICAgICAgICAgICAgY29uc3QgY3VyWWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICBjb25zdCBzdGFydFkgPSAoY3VyTW9udGggPD0gMykgPyBjdXJZZWFyIC0gMSA6IGN1clllYXI7DQogICAgICAgICAgICBjb25zdCBjdXJyZW50RllLZXkgPSBzdGFydFkudG9TdHJpbmcoKS5zbGljZSgtMikgKyAiLSIgKyAoc3RhcnRZICsgMSkudG9TdHJpbmcoKS5zbGljZSgtMik7DQoNCiAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOw0KICAgICAgICAgICAgcmFkaW9zLmZvckVhY2gociA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHIudmFsdWUgPT09IGN1cnJlbnRGWUtleSkgew0KICAgICAgICAgICAgICAgICAgICByLmNoZWNrZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBhcHBseUZZRmlsdGVyKGN1cnJlbnRGWUtleSk7DQogICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gRmFsbGJhY2sgaWYgY3VycmVudCB5ZWFyIGlzIGVtcHR5DQogICAgICAgICAgICBpZiAoIWZvdW5kKSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWxsUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJmeV9maWx0ZXIiXVt2YWx1ZT0iQUxMIl0nKTsNCiAgICAgICAgICAgICAgICBpZiAoYWxsUmFkaW8pIHsNCiAgICAgICAgICAgICAgICAgICAgYWxsUmFkaW8uY2hlY2tlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGFwcGx5RllGaWx0ZXIoIkFMTCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIGFwcGx5RllGaWx0ZXIodmFsKSB7DQogICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjX3NsaWRlcicpOw0KICAgICAgICAgICAgY29uc3Qgcm5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3X3JlY19idG4nKTsNCiAgICAgICAgICAgIGlmICghc2xpZGVyKSByZXR1cm47DQoNCiAgICAgICAgICAgIC8vIDEuIENBTENVTEFURSBDVVJSRU5UIEZZIChKYW4gMjAyNiBpcyBGWSAyNS0yNikNCiAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIGNvbnN0IGN1ck1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKSArIDE7DQogICAgICAgICAgICBjb25zdCBjdXJZZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgIGNvbnN0IHN0YXJ0WSA9IChjdXJNb250aCA8PSAzKSA/IGN1clllYXIgLSAxIDogY3VyWWVhcjsNCiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGWUtleSA9IHN0YXJ0WS50b1N0cmluZygpLnNsaWNlKC0yKSArICItIiArIChzdGFydFkgKyAxKS50b1N0cmluZygpLnNsaWNlKC0yKTsNCg0KICAgICAgICAgICAgLy8gMi4gUk4gQlVUVE9OIFNBRkVUWQ0KICAgICAgICAgICAgaWYgKHJuQnRuKSB7DQogICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gIkFMTCIgfHwgdmFsID09PSBjdXJyZW50RllLZXkpIHsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uc3R5bGUub3BhY2l0eSA9ICIxIjsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uc3R5bGUuY3Vyc29yID0gInBvaW50ZXIiOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uc3R5bGUub3BhY2l0eSA9ICIwLjMiOw0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5zdHlsZS5jdXJzb3IgPSAibm90LWFsbG93ZWQiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMy4gRklMVEVSIExPR0lDDQogICAgICAgICAgICBpZiAodmFsID09PSAiUlIiKSB7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWFkeUluZGljZXMgPT09ICd1bmRlZmluZWQnIHx8IHJlYWR5SW5kaWNlcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIFJlYWR5IFJlY2VpcHRzIGZvdW5kISIpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImZ5X2ZpbHRlciJdW3ZhbHVlPSJBTEwiXScpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYWxsUmFkaW8pIGFsbFJhZGlvLmNoZWNrZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBhcHBseUZZRmlsdGVyKCJBTEwiKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBDSEFOR0UgSEVSRTogRElTQUJMRSBJTlNURUFEIE9GIEhJREUgLS0tDQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7IC8vIEtlZXAgaXQgdmlzaWJsZQ0KICAgICAgICAgICAgICAgIHNsaWRlci5kaXNhYmxlZCA9IHRydWU7ICAgICAgICAgICAgICAvLyBNYWtlIGl0IHVuY2xpY2thYmxlDQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLm9wYWNpdHkgPSAiMC40IjsgICAgICAgIC8vIEdyYXkgaXQgb3V0IHZpc3VhbGx5DQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLmN1cnNvciA9ICJub3QtYWxsb3dlZCI7DQoNCiAgICAgICAgICAgICAgICBzbGlkZXIubWluID0gMDsNCiAgICAgICAgICAgICAgICBzbGlkZXIubWF4ID0gcmVhZHlJbmRpY2VzLmxlbmd0aCAtIDE7DQogICAgICAgICAgICAgICAgc2xpZGVyLnZhbHVlID0gMDsNCiAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKHJlYWR5SW5kaWNlc1swXSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyAtLS0gUkVTVE9SRSBTTElERVIgRk9SIE5PUk1BTCBWSUVXUyAtLS0NCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUudmlzaWJpbGl0eSA9ICJ2aXNpYmxlIjsNCiAgICAgICAgICAgICAgICBzbGlkZXIuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUub3BhY2l0eSA9ICIxIjsNCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUuY3Vyc29yID0gInBvaW50ZXIiOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSAoZnlSYW5nZXMgJiYgZnlSYW5nZXNbdmFsXSkgPyBmeVJhbmdlc1t2YWxdIDogKGZ5UmFuZ2VzID8gZnlSYW5nZXNbIkFMTCJdIDogbnVsbCk7DQoNCiAgICAgICAgICAgICAgICBpZiAocmFuZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxvb3IgPSAod2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gJiYgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gPiByYW5nZS5taW4pDQogICAgICAgICAgICAgICAgICAgICAgICA/IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JODQogICAgICAgICAgICAgICAgICAgICAgICA6IHJhbmdlLm1pbjsNCg0KICAgICAgICAgICAgICAgICAgICBzbGlkZXIubWluID0gZmxvb3I7DQogICAgICAgICAgICAgICAgICAgIHNsaWRlci5tYXggPSByYW5nZS5tYXg7DQogICAgICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IHJhbmdlLm1heDsNCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChzbGlkZXIudmFsdWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEZpeGVkIEFycm93IE5hdmlnYXRpb24gZm9yIFJSIE1vZGUNCiAgICAgICAgZnVuY3Rpb24gbW92ZUZZUmVjb3JkKGRpcmVjdGlvbikgew0KICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKTsNCiAgICAgICAgICAgIGNvbnN0IHJhZGlvQ2hlY2tlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImZ5X2ZpbHRlciJdOmNoZWNrZWQnKTsNCiAgICAgICAgICAgIGlmICghc2xpZGVyIHx8ICFyYWRpb0NoZWNrZWQpIHJldHVybjsNCg0KICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRNb2RlID0gcmFkaW9DaGVja2VkLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgbmV3VmFsID0gcGFyc2VJbnQoc2xpZGVyLnZhbHVlKSArIGRpcmVjdGlvbjsNCg0KICAgICAgICAgICAgaWYgKG5ld1ZhbCA+PSBwYXJzZUludChzbGlkZXIubWluKSAmJiBuZXdWYWwgPD0gcGFyc2VJbnQoc2xpZGVyLm1heCkpIHsNCiAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSBuZXdWYWw7DQogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkTW9kZSA9PT0gIlJSIikgew0KICAgICAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKHJlYWR5SW5kaWNlc1tuZXdWYWxdKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKG5ld1ZhbCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC8qIENvbXByZXNzZWQgcGFkZGluZyBmb3IgdGhlIG1haW4gd29ya3NwYWNlICovDQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDYwcHggIWltcG9ydGFudDsNCiAgICAgICAgfQ0KDQogICAgICAgICNyYWRpby1kb2NrIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgICAgICAgIGJvdHRvbTogMDsNCiAgICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzAwMjI0NCwgIzAwNDQ4OCk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHggMjBweDsgLyogUmVkdWNlZCB2ZXJ0aWNhbCBwYWRkaW5nICovDQogICAgICAgICAgICBib3gtc2hhZG93OiAwIC0ycHggMTBweCByZ2JhKDAsMCwwLDAuMyk7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdzsgLyogUm93IGluc3RlYWQgb2YgQ29sdW1uICovDQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyAvKiBUaXRsZSBsZWZ0LCBDb250cm9scyByaWdodCAqLw0KICAgICAgICAgICAgei1pbmRleDogMTAwMDA7DQogICAgICAgICAgICBoZWlnaHQ6IDQ1cHg7IC8qIEZpeGVkIHNtYWxsIGhlaWdodCAqLw0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yYWRpby10aXRsZSB7DQogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGNvbG9yOiAjZmY5OTMzOw0KICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yYWRpby1jb250cm9scyB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgI3JhZGlvU2VsZWN0IHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDRweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgICAgIHdpZHRoOiAxODBweDsNCiAgICAgICAgICAgIGhlaWdodDogMjhweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yYWRpby1idG4gew0KICAgICAgICAgICAgcGFkZGluZzogMCAxMnB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAyOHB4Ow0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1wbGF5IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyOGE3NDU7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLXN0b3Agew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2Q5NTM0ZjsNCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGlkPSJyYWRpby1kb2NrIj4NCiAgICAgICAgPGRpdiBjbGFzcz0icmFkaW8tdGl0bGUiPkhpbmR1IERldm90aW9uYWwgUmFkaW88L2Rpdj4NCg0KICAgICAgICA8ZGl2IGNsYXNzPSJyYWRpby1jb250cm9scyI+DQogICAgICAgICAgICA8c2VsZWN0IGlkPSJyYWRpb1NlbGVjdCI+DQogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBMb2FkaW5nIC0tPC9vcHRpb24+DQogICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InJhZGlvLWJ0biBidG4tcGxheSIgb25jbGljaz0icGxheVJhZGlvKCkiPlBMQVk8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InJhZGlvLWJ0biBidG4tc3RvcCIgb25jbGljaz0ic3RvcFJhZGlvKCkiPlNUT1A8L2J1dHRvbj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgDQogICAgICAgIDxhdWRpbyBpZD0icmFkaW9QbGF5ZXIiIGNyb3Nzb3JpZ2luPSJhbm9ueW1vdXMiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48L2F1ZGlvPg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCg0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRSYWRpb3ModG9rZW4pIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX1JBRElPX0ZJTEUgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IElmIHBlcnNvbmFsaXplZCBmaWxlIGlzIG1pc3NpbmcsIGZldGNoIHRoZSBkZWZhdWx0IG9uZQ0KICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJQZXJzb25hbGl6ZWQgcmFkaW8gbm90IGZvdW5kLCBsb2FkaW5nIGRlZmF1bHQuLi4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL1NldHRpbmdzL1JhZGlvcy50eHQnIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoIk5vIFJhZGlvIEZpbGUiKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRpb25zID0gdGV4dC5zcGxpdCgnXG4nKS5maWx0ZXIobCA9PiBsLmluY2x1ZGVzKCcsJykpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhZGlvRHJvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRpb1NlbGVjdCcpOw0KDQogICAgICAgICAgICAgICAgcmFkaW9Ecm9wLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBTdGF0aW9uIC0tPC9vcHRpb24+JyArDQogICAgICAgICAgICAgICAgICAgIHN0YXRpb25zLm1hcChzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtuYW1lLCB1cmxdID0gcy5zcGxpdCgnLCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8b3B0aW9uIHZhbHVlPSIke3VybC50cmltKCl9Ij4ke25hbWUudHJpbSgpfTwvb3B0aW9uPmA7DQogICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJycpOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhZGlvU2VsZWN0JykuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+UmFkaW8gVW5hdmFpbGFibGU8L29wdGlvbj4nOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICBmdW5jdGlvbiBwbGF5UmFkaW8oKSB7DQogICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFkaW9QbGF5ZXInKTsNCiAgICAgICAgICAgIGNvbnN0IHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRpb1NlbGVjdCcpOw0KICAgICAgICAgICAgY29uc3QgdXJsID0gc2VsLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNlbC5vcHRpb25zW3NlbC5zZWxlY3RlZEluZGV4XS50ZXh0Ow0KDQogICAgICAgICAgICBpZiAoIXVybCkgcmV0dXJuOw0KDQogICAgICAgICAgICBwbGF5ZXIuc3JjID0gdXJsOw0KICAgICAgICAgICAgcGxheWVyLnBsYXkoKQ0KICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gT3B0aW9uYWw6IFVwZGF0ZSB5b3VyIGFwcCdzIG1haW4gc3RhdHVzIHRleHQgaWYgeW91IGhhdmUgb25lDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJQbGF5aW5nOiAiICsgbmFtZSk7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiBhbGVydCgiU3RhdGlvbiBvZmZsaW5lLiBUcnkgYW5vdGhlci4iKSk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBzdG9wUmFkaW8oKSB7DQogICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFkaW9QbGF5ZXInKTsNCiAgICAgICAgICAgIHBsYXllci5wYXVzZSgpOw0KICAgICAgICAgICAgcGxheWVyLnNyYyA9ICIiOw0KICAgICAgICB9DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5wYW5jaGFuZy1vdXRlciB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiAxNXB4Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBtYXJnaW46IDEwcHggMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wYW5jaGFuZy1oYWxmIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wYW5jaGFuZy1tYWluLXRpdGxlIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4Ow0KICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wLXN1Yi1oZWFkIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAzMzY2Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBtYXJnaW46IDE1cHggMCA4cHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogM3B4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnAtZXZlbnQtYm94IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY5ZjA7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHggMTBweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDZweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICAvKiBEYXRhIHNwZWNpZmljIHN0eWxpbmcgKi8NCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wLWNlbnRlci1ib3ggew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjRmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDMzNjY7DQogICAgICAgIH0NCiAgICAgICAgLyogQm9sZCBDb2xvciBDb2RpbmcgZm9yIERhdGEgKi8NCiAgICAgICAgLmMtZGF0ZSB7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmMtbmFtZSB7DQogICAgICAgICAgICBjb2xvcjogIzAwMDBmZjsNCiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmMtZXh0cmEgew0KICAgICAgICAgICAgY29sb3I6ICMyZTdkMzI7DQogICAgICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7DQogICAgICAgIH0NCg0KICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsNCiAgICAgICAgICAgIC5wYW5jaGFuZy1vdXRlciB7DQogICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLnAtZXZlbnQtYm94IHsNCiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm9ybWFsOw0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJwYW5jaGFuZy1vdXRlciI+DQogICAgICAgIDxkaXYgY2xhc3M9InBhbmNoYW5nLWhhbGYiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuY2hhbmctbWFpbi10aXRsZSI+VXBjb21pbmcgQW51c2hhbSBEYXRlczwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGlzcC1hbnVzaGFtIj48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtc3ViLWhlYWQiPvCflYnvuI8gUGVyaXlhdmEgSmF5YW50aGk8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImRpc3AtamF5YW50aGkiPjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0icC1zdWItaGVhZCI+8J+Vie+4jyBQZXJpeWF2YSBBcmFkaGFuYTwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGlzcC1hcmFkaGFuYSI+PC9kaXY+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9InBhbmNoYW5nLWhhbGYiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuY2hhbmctbWFpbi10aXRsZSI+VXBjb21pbmcgRWthZGFzaGkgRGF0ZXM8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImRpc3AtZWthZGFzaGkiPjwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRQYW5jaGFuZ1N1aXRlKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBwID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBkLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgbm93LnNldEhvdXJzKDAsIDAsIDAsIDApOw0KDQogICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0TGluZXMocGF0aCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBwYXRoIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0eHQucmVwbGFjZSgvPGJyXHMqXC8/Pi9naSwgJ1xuJykucmVwbGFjZSgvPFtePl0qPi9nLCAnJykuc3BsaXQoJ1xuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihzID0+IHMubGVuZ3RoID4gMCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gMS4gQU5VU0hBTQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MxID0gYXdhaXQgZ2V0TGluZXMoJy9QYW5jaGFuZy9BbnVzaGFtLzAuMS5odG1sJyk7DQogICAgICAgICAgICAgICAgbGV0IGgxID0gIiI7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzMS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAocm93czFbaV0ubWF0Y2goL1xkezEsMn0tXHcrLVxkezR9LykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShyb3dzMVtpXSkgPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDEgKz0gYDxkaXYgY2xhc3M9InAtZXZlbnQtYm94Ij48c3BhbiBjbGFzcz0iYy1kYXRlIj4ke3Jvd3MxW2ldfTwvc3Bhbj4gPHNwYW4gY2xhc3M9ImMtZXh0cmEiPiR7cm93czFbaSArIDFdIHx8ICcnfTwvc3Bhbj48L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwLWFudXNoYW0nKS5pbm5lckhUTUwgPSBoMSB8fCAiTm8gVXBjb21pbmciOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gSkFZQU5USEkNCiAgICAgICAgICAgICAgICBjb25zdCByb3dzMyA9IGF3YWl0IGdldExpbmVzKCcvUGFuY2hhbmcvQW51c2hhbS8wLjMuaHRtbCcpOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93czMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3MzW2ldLm1hdGNoKC9cZHsxLDJ9LVx3Ky1cZHs0fS8pICYmIG5ldyBEYXRlKHJvd3MzW2ldKSA+PSBub3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aW1lID0gKHJvd3MzW2kgKyAxXSB8fCAiIikucmVwbGFjZSgvXC9cZHsyfVwvXGR7NH0vZywgJycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3AtamF5YW50aGknKS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0icC1ldmVudC1ib3ggcC1jZW50ZXItYm94Ij48c3BhbiBjbGFzcz0iYy1kYXRlIj4ke3Jvd3MzW2ldfSAoU2F0KTwvc3Bhbj4gPHNwYW4gY2xhc3M9ImMtZXh0cmEiPlRpbWluZzogJHt0aW1lfTwvc3Bhbj48L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBBUkFESEFOQQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJvd3M0ID0gYXdhaXQgZ2V0TGluZXMoJy9QYW5jaGFuZy9BbnVzaGFtLzAuNC5odG1sJyk7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzNC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAocm93czRbaV0ubWF0Y2goL1xkezEsMn0tXHcrLVxkezR9LykgJiYgbmV3IERhdGUocm93czRbaV0pID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3AtYXJhZGhhbmEnKS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0icC1ldmVudC1ib3ggcC1jZW50ZXItYm94Ij48c3BhbiBjbGFzcz0iYy1kYXRlIj4ke3Jvd3M0W2ldfSAoTW9uKTwvc3Bhbj48L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBFS0FEQVNISQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJvd3NFID0gYXdhaXQgZ2V0TGluZXMoJy9QYW5jaGFuZy9Fa2FkYXNoaS8wLjEuaHRtbCcpOw0KICAgICAgICAgICAgICAgIGxldCBoRSA9ICIiOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93c0UubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSByb3dzRVtpXS5tYXRjaCgvKFxkezEsMn0pLShcZHsyfXxbYS16QS1aXSspLShcZHs0fSkvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkUGFydHMgPSByb3dzRVtpXS5zcGxpdCgnICcpWzBdLnNwbGl0KCctJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkdCA9IG5ldyBEYXRlKGRQYXJ0c1syXSwgbmV3IERhdGUoRGF0ZS5wYXJzZShkUGFydHNbMV0gKyAiIDEsIDIwMTIiKSkuZ2V0TW9udGgoKSwgZFBhcnRzWzBdKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR0ID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhFICs9IGA8ZGl2IGNsYXNzPSJwLWV2ZW50LWJveCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjLWRhdGUiPiR7cm93c0VbaV19PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYy1uYW1lIj4ke3Jvd3NFW2kgKyAxXSB8fCAnJ308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjLWV4dHJhIj4ke3Jvd3NFW2kgKyAyXSB8fCAnJ308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcC1la2FkYXNoaScpLmlubmVySFRNTCA9IGhFIHx8ICJObyBVcGNvbWluZyI7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5sb2coIkxvYWQgRmFpbCIsIGUpOyB9DQogICAgICAgIH0NCiAgICAgICAgbG9hZFBhbmNoYW5nU3VpdGUoKTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLmZsYXNoYmFjay1jb250YWluZXIgew0KICAgICAgICAgICAgbWFyZ2luOiAyMHB4IGF1dG87DQogICAgICAgICAgICBwYWRkaW5nOiAyMHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmFmYTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA5NSU7DQogICAgICAgIH0NCg0KICAgICAgICAuZmxhc2hiYWNrLWhlYWRlci13cmFwcGVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogMTJweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LWNvbnRyb2xzIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBnYXA6IDE1cHg7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgIH0NCg0KICAgICAgICAuZmxhc2hiYWNrLWhlYWRlciB7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnR2VvcmdpYScsIHNlcmlmOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyNnB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogOHB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogSnVtcCB0byBEYXRlIFN0eWxpbmcgKi8NCiAgICAgICAgLmp1bXAtYm94IHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiA4cHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4IDEycHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuanVtcC1ib3ggc2VsZWN0IHsNCiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTsNCiAgICAgICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLnZpZXctdG9nZ2xlIHsNCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZkZjJmMjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweCAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiAxNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC52aWV3LXRvZ2dsZSBsYWJlbCB7DQogICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgICAgICBnYXA6IDVweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAubmF2LWJ0biB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjODAwMDAwOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgd2lkdGg6IDM1cHg7DQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLm5hdi1idG46aG92ZXIgew0KICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZjk5MzM7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1ncmlkIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICBnYXA6IDI1cHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIH0NCg0KICAgICAgICAuZmxhc2hiYWNrLWNhcmQgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIG1heC13aWR0aDogODUwcHg7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDhweCAyMHB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuZmxhc2hiYWNrLWNhcmQgaDQgew0KICAgICAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgICAgICAgICAgICBtYXJnaW46IDAgMCAxMnB4IDA7DQogICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZmY5OTMzOw0KICAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMTBweDsNCiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2staW1nLXdyYXBwZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTJweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2staW1nIHsNCiAgICAgICAgICAgIHdpZHRoOiAxOTBweDsNCiAgICAgICAgICAgIGhlaWdodDogMTUwcHg7DQogICAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiAwLjNzOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5mbGFzaGJhY2staW1nOmhvdmVyIHsNCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOw0KICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogI2ZmOTkzMzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNjAwcHgpIHsNCiAgICAgICAgICAgIC5mbGFzaGJhY2staGVhZGVyIHsNCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDIwcHg7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5mbGFzaGJhY2staW1nIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTQwcHg7DQogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMTBweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLm5hdi1jb250cm9scyB7DQogICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJmbGFzaGJhY2stY29udGFpbmVyIiBpZD0iZmxhc2hiYWNrU2VjdGlvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJmbGFzaGJhY2staGVhZGVyLXdyYXBwZXIiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbnRyb2xzIj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJuYXYtYnRuIiBvbmNsaWNrPSJjaGFuZ2VGbGFzaGJhY2tEYXRlKC0xKSI+4peAPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0iZmxhc2hiYWNrVGl0bGUiIGNsYXNzPSJmbGFzaGJhY2staGVhZGVyIj7wn46e77iPIFRydXN0IE1lbW9yaWVzOiBPbiBUaGlzIERheTwvZGl2Pg0KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4iIG9uY2xpY2s9ImNoYW5nZUZsYXNoYmFja0RhdGUoMSkiPuKWtjwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgZmxleC13cmFwOiB3cmFwOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Imp1bXAtYm94Ij4NCiAgICAgICAgICAgICAgICAgICAg8J+ThSBKdW1wIHRvOg0KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJqdW1wRGF5Ij48L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ianVtcE1vbnRoIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjAiPkphbjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMSI+RmViPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIyIj5NYXI8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjMiPkFwcjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNCI+TWF5PC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI1Ij5KdW48L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjYiPkp1bDwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNyI+QXVnPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI4Ij5TZXA8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjkiPk9jdDwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMTAiPk5vdjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMTEiPkRlYzwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ0ZWxlcG9ydFRvRGF0ZSgpIiBzdHlsZT0iYmFja2dyb3VuZDojODAwMDAwOyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6MTBweDsgcGFkZGluZzoycHggOHB4OyBjdXJzb3I6cG9pbnRlcjsgZm9udC1zaXplOjEycHg7Ij5HTzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idmlldy10b2dnbGUiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJ2aWV3TW9kZSIgdmFsdWU9IjMiIGNoZWNrZWQgb25jbGljaz0ic2V0Vmlld01vZGUoMykiPiBTdW1tYXJ5PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0idmlld01vZGUiIHZhbHVlPSJhbGwiIG9uY2xpY2s9InNldFZpZXdNb2RlKCdhbGwnKSI+IEFsbDwvbGFiZWw+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgICAgIDxkaXYgaWQ9ImZsYXNoYmFja0dyaWQiIGNsYXNzPSJmbGFzaGJhY2stZ3JpZCI+PC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBsZXQgZmxhc2hiYWNrT2Zmc2V0ID0gMDsNCiAgICAgICAgbGV0IGN1cnJlbnRWaWV3TGltaXQgPSAzOw0KDQogICAgICAgIC8vIEluaXRpYWxpemUgRGF5IGRyb3Bkb3duICgxLTMxKQ0KICAgICAgICBjb25zdCBkYXlTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcERheScpOw0KICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAzMTsgaSsrKSB7DQogICAgICAgICAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICBvcHQudmFsdWUgPSBpOyBvcHQuaW5uZXJIVE1MID0gaTsNCiAgICAgICAgICAgIGRheVNlbGVjdC5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gc2V0Vmlld01vZGUobW9kZSkgew0KICAgICAgICAgICAgY3VycmVudFZpZXdMaW1pdCA9IG1vZGU7DQogICAgICAgICAgICBsb2FkRHluYW1pY0ZsYXNoYmFja3MoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIGNoYW5nZUZsYXNoYmFja0RhdGUob2Zmc2V0KSB7DQogICAgICAgICAgICBmbGFzaGJhY2tPZmZzZXQgKz0gb2Zmc2V0Ow0KICAgICAgICAgICAgbG9hZER5bmFtaWNGbGFzaGJhY2tzKCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiB0ZWxlcG9ydFRvRGF0ZSgpIHsNCiAgICAgICAgICAgIGNvbnN0IGQgPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcERheScpLnZhbHVlKTsNCiAgICAgICAgICAgIGNvbnN0IG0gPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcE1vbnRoJykudmFsdWUpOw0KICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBtLCBkKTsNCg0KICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGRpZmZlcmVuY2UgaW4gZGF5cyB0byBzZXQgdGhlIG9mZnNldA0KICAgICAgICAgICAgY29uc3QgZGlmZlRpbWUgPSB0YXJnZXQuZ2V0VGltZSgpIC0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpKS5nZXRUaW1lKCk7DQogICAgICAgICAgICBmbGFzaGJhY2tPZmZzZXQgPSBNYXRoLnJvdW5kKGRpZmZUaW1lIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTsNCiAgICAgICAgICAgIGxvYWREeW5hbWljRmxhc2hiYWNrcygpOw0KICAgICAgICB9DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZER5bmFtaWNGbGFzaGJhY2tzKCkgew0KICAgICAgICAgICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGFzaGJhY2tHcmlkJyk7DQogICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsYXNoYmFja1NlY3Rpb24nKTsNCiAgICAgICAgICAgIGNvbnN0IHRpdGxlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsYXNoYmFja1RpdGxlJyk7DQogICAgICAgICAgICBjb25zdCBkb21haW4gPSAiaHR0cHM6Ly93d3cuZ2FuZXNhc2FybWEuY29tIjsNCiAgICAgICAgICAgIGNvbnN0IFRpbWVsaW5lVVJMX0ZsYXNoID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvcmY4NWVsa3o1ZmMzY2wxaDhrY2NjL1RpbWVMaW5lLnR4dD9ybGtleT11bWtoMHI3d3RmN3VsdTNyenF6Y2diMXljJmRsPTEiOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZS5zZXREYXRlKHRhcmdldERhdGUuZ2V0RGF0ZSgpICsgZmxhc2hiYWNrT2Zmc2V0KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG1tID0gU3RyaW5nKHRhcmdldERhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICAgICAgY29uc3QgZGQgPSBTdHJpbmcodGFyZ2V0RGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICAgICAgY29uc3QgZG90UGF0dGVybiA9IGAuJHttbX0uJHtkZH1gOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhc2hQYXR0ZXJuID0gYC0ke21tfS0ke2RkfWA7DQoNCiAgICAgICAgICAgICAgICAvLyBTeW5jIERyb3Bkb3ducyB3aXRoIGN1cnJlbnQgdmlld2luZyBkYXRlDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBEYXknKS52YWx1ZSA9IHRhcmdldERhdGUuZ2V0RGF0ZSgpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wTW9udGgnKS52YWx1ZSA9IHRhcmdldERhdGUuZ2V0TW9udGgoKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGlzVG9kYXkgPSAodGFyZ2V0RGF0ZS5nZXRNb250aCgpID09PSBub3cuZ2V0TW9udGgoKSAmJiB0YXJnZXREYXRlLmdldERhdGUoKSA9PT0gbm93LmdldERhdGUoKSk7DQogICAgICAgICAgICAgICAgdGl0bGVEaXYuaW5uZXJUZXh0ID0gaXNUb2RheSA/IGDwn46e77iPIFRydXN0IE1lbW9yaWVzOiBPbiBUaGlzIERheWAgOiBg8J+Onu+4jyBNZW1vcmllczogJHt0YXJnZXREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tSU4nLCB7IGRheTogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnIH0pfWA7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFRpbWVsaW5lVVJMX0ZsYXNoKTsNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSByZXR1cm47DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGRhdGEuc3BsaXQoL1xyP1xuLyk7DQoNCiAgICAgICAgICAgICAgICBncmlkLmlubmVySFRNTCA9ICIiOw0KICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50c01hcCA9IHt9Ow0KICAgICAgICAgICAgICAgIGxldCBmb3VuZE1hdGNoID0gZmFsc2U7DQoNCiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoKGxpbmUuaW5jbHVkZXMoZG90UGF0dGVybikgfHwgbGluZS5pbmNsdWRlcyhkYXNoUGF0dGVybikpICYmIGxpbmUubWF0Y2goL1wuKGpwZ3xqcGVnfHBuZykkL2kpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3ZWJQYXRoID0gbGluZS50cmltKCkucmVwbGFjZSgvXFwvZywgJy8nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGxVcmwgPSBkb21haW4gKyBlbmNvZGVVUkkod2ViUGF0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHdlYlBhdGguc3BsaXQoJy8nKS5wb3AoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBmaWxlbmFtZS5tYXRjaCgvXihcZHs0fSkvKSA/IGZpbGVuYW1lLm1hdGNoKC9eKFxkezR9KS8pWzFdIDogIlBhc3QiOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXZlbnROYW1lID0gZmlsZW5hbWUucmVwbGFjZSgvXlxkezR9Wy4tXVxkezJ9Wy4tXVxkezJ9LS8sICcnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9ccypcZCpccypcLihqcGd8anBlZ3xwbmcpJC9pLCAnJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXlxkK1xzKy8sICcnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8tL2csICcgJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJpbSgpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50TmFtZSkgZXZlbnROYW1lID0gIlRydXN0IEFjdGl2aXR5IjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBLZXkgPSBgJHt5ZWFyfXwke2V2ZW50TmFtZX1gOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudHNNYXBbZ3JvdXBLZXldKSBldmVudHNNYXBbZ3JvdXBLZXldID0geyB5ZWFyLCBldmVudE5hbWUsIHBob3RvczogW10gfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c01hcFtncm91cEtleV0ucGhvdG9zLnB1c2goZnVsbFVybCk7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3VuZE1hdGNoID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKCFmb3VuZE1hdGNoKSB7DQogICAgICAgICAgICAgICAgICAgIGdyaWQuaW5uZXJIVE1MID0gYDxkaXYgc3R5bGU9InBhZGRpbmc6NDBweDsgd2lkdGg6MTAwJTsgY29sb3I6IzgwMDAwMDsgZm9udC13ZWlnaHQ6Ym9sZDsgYmFja2dyb3VuZDp3aGl0ZTsgYm9yZGVyLXJhZGl1czoxMHB4OyI+Tm8gcmVjb3JkcyBmb3VuZCBmb3IgJHt0YXJnZXREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tSU4nLCB7IGRheTogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnIH0pfS48L2Rpdj5gOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGV2ZW50c01hcCkuc29ydCgoYSwgYikgPT4gYi5zcGxpdCgnfCcpWzBdIC0gYS5zcGxpdCgnfCcpWzBdKS5mb3JFYWNoKGtleSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cCA9IGV2ZW50c01hcFtrZXldOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5jbGFzc05hbWUgPSAnZmxhc2hiYWNrLWNhcmQnOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheVBob3RvcyA9IGN1cnJlbnRWaWV3TGltaXQgPT09ICdhbGwnID8gZ3JvdXAucGhvdG9zIDogZ3JvdXAucGhvdG9zLnNsaWNlKDAsIDMpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjYXJkLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0PiR7Z3JvdXAuZXZlbnROYW1lfSAke2lzVG9kYXkgPyBgKCR7Z3JvdXAueWVhcn0pYCA6IGAtICR7Z3JvdXAueWVhcn1gfTwvaDQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsYXNoYmFjay1pbWctd3JhcHBlciI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2Rpc3BsYXlQaG90b3MubWFwKHNyYyA9PiBgPGltZyBzcmM9IiR7c3JjfSIgY2xhc3M9ImZsYXNoYmFjay1pbWciIG9uY2xpY2s9IndpbmRvdy5vcGVuKHRoaXMuc3JjKSIgb25lcnJvcj0idGhpcy5zdHlsZS5kaXNwbGF5PSdub25lJyI+YCkuam9pbignJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICBncmlkLmFwcGVuZENoaWxkKGNhcmQpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfQ0KICAgICAgICB9DQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgbG9hZER5bmFtaWNGbGFzaGJhY2tzKTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KDQogICAgPHN0eWxlPg0KICAgICAgICAuY2hpdHJhbS1jb250YWluZXIgew0KICAgICAgICAgICAgbWFyZ2luOiAyMHB4IGF1dG87DQogICAgICAgICAgICBwYWRkaW5nOiAyMHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmFmYTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA5NSU7DQogICAgICAgIH0NCg0KICAgICAgICAuY2hpdHJhbS1oZWFkZXIgew0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ0dlb3JnaWEnLCBzZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjZweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgI2ZmOTkzMzsNCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAuY2hpdHJhbS1ncmlkIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAuY2hpdHJhbS1ib3ggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC44cyBlYXNlLWluLW91dDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sYW5kc2NhcGUtYm94IHsNCiAgICAgICAgICAgIHdpZHRoOiA0NTBweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wb3J0cmFpdC1ib3ggew0KICAgICAgICAgICAgd2lkdGg6IDMyMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0taW1nIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgaGVpZ2h0OiBhdXRvOw0KICAgICAgICAgICAgbWF4LWhlaWdodDogNDAwcHg7DQogICAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0tbGFiZWwgew0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgIH0NCg0KICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogODAwcHgpIHsNCiAgICAgICAgICAgIC5sYW5kc2NhcGUtYm94LCAucG9ydHJhaXQtYm94IHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDQwMHB4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tY29udGFpbmVyIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1oZWFkZXIiPvCflYnvuI8gQ2hpdHJhIFB1cmFuYW08L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1ncmlkIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tYm94IGxhbmRzY2FwZS1ib3giPg0KICAgICAgICAgICAgICAgIDxpbWcgaWQ9ImltZ19sYW5kc2NhcGUiIHNyYz0iIiBjbGFzcz0iY2hpdHJhbS1pbWciIG9uY2xpY2s9IndpbmRvdy5vcGVuKHRoaXMuc3JjKSIgdGl0bGU9IlZpZXcgRnVsbCBJbWFnZSI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1sYWJlbCIgaWQ9ImxibF9sYW5kc2NhcGUiPkNvbm5lY3RpbmcgdG8gRGl2aW5lIEdhbGxlcnkuLi48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1ib3ggcG9ydHJhaXQtYm94Ij4NCiAgICAgICAgICAgICAgICA8aW1nIGlkPSJpbWdfcG9ydHJhaXQiIHNyYz0iIiBjbGFzcz0iY2hpdHJhbS1pbWciIG9uY2xpY2s9IndpbmRvdy5vcGVuKHRoaXMuc3JjKSIgdGl0bGU9IlZpZXcgRnVsbCBJbWFnZSI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1sYWJlbCIgaWQ9ImxibF9wb3J0cmFpdCI+Q29ubmVjdGluZyB0byBEaXZpbmUgR2FsbGVyeS4uLjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgY29uc3QgQ0hJVFJBTV9DT05GSUcgPSB7DQogICAgICAgICAgICBmb2xkZXI6ICIvUGFuY2hhbmcvQ2hpdGhyYVB1cmFuYW0vIiwNCiAgICAgICAgICAgIGxhbmRzY2FwZUNvdW50OiA0MSwNCiAgICAgICAgICAgIHBvcnRyYWl0Q291bnQ6IDgwLA0KICAgICAgICAgICAgaW50ZXJ2YWw6IDcwMDANCiAgICAgICAgfTsNCg0KICAgICAgICBsZXQgY3VycmVudEwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBDSElUUkFNX0NPTkZJRy5sYW5kc2NhcGVDb3VudCkgKyAxOw0KICAgICAgICBsZXQgY3VycmVudFAgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBDSElUUkFNX0NPTkZJRy5wb3J0cmFpdENvdW50KSArIDE7DQogICAgICAgIGxldCBkcm9wYm94VG9rZW4gPSAiIjsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZXREcm9wYm94TGluayhmaWxlTmFtZSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2dldF90ZW1wb3JhcnlfbGluaycsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgZHJvcGJveFRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IENISVRSQU1fQ09ORklHLmZvbGRlciArIGZpbGVOYW1lIH0pDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5saW5rOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkxpbmsgRmV0Y2ggRmFpbDoiLCBmaWxlTmFtZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuICIiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ2hpdHJhbSgpIHsNCiAgICAgICAgICAgIC8vIDEuIEdldCBBY2Nlc3MgVG9rZW4gKHVzaW5nIHlvdXIgZ2xvYmFsIE1NUFQgY29uc3RhbnRzKQ0KICAgICAgICAgICAgaWYgKCFkcm9wYm94VG9rZW4pIHsNCiAgICAgICAgICAgICAgICBjb25zdCBwID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOw0KICAgICAgICAgICAgICAgIGRyb3Bib3hUb2tlbiA9IGQuYWNjZXNzX3Rva2VuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAyLiBQcmVwYXJlIEZpbGUgTmFtZXMNCiAgICAgICAgICAgIGNvbnN0IGxOdW0gPSBTdHJpbmcoY3VycmVudEwpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICBjb25zdCBwTnVtID0gU3RyaW5nKGN1cnJlbnRQKS5wYWRTdGFydCgyLCAnMCcpOw0KDQogICAgICAgICAgICAvLyAzLiBGZXRjaCBUZW1wIExpbmtzIGZyb20gRHJvcGJveA0KICAgICAgICAgICAgY29uc3QgW2xVcmwsIHBVcmxdID0gYXdhaXQgUHJvbWlzZS5hbGwoWw0KICAgICAgICAgICAgICAgIGdldERyb3Bib3hMaW5rKGBMJHtsTnVtfS5qcGdgKSwNCiAgICAgICAgICAgICAgICBnZXREcm9wYm94TGluayhgUCR7cE51bX0uanBnYCkNCiAgICAgICAgICAgIF0pOw0KDQogICAgICAgICAgICAvLyA0LiBVcGRhdGUgVUkgKExhbmRzY2FwZSkNCiAgICAgICAgICAgIGNvbnN0IGxJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX2xhbmRzY2FwZScpOw0KICAgICAgICAgICAgY29uc3QgbEJveCA9IGxJbWcucGFyZW50RWxlbWVudDsNCiAgICAgICAgICAgIGxCb3guc3R5bGUub3BhY2l0eSA9IDAuMzsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChsVXJsKSBsSW1nLnNyYyA9IGxVcmw7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xibF9sYW5kc2NhcGUnKS5pbm5lclRleHQgPSBgS2FuY2hpIE1haGFwZXJpeWF2YWA7DQogICAgICAgICAgICAgICAgbEJveC5zdHlsZS5vcGFjaXR5ID0gMTsNCiAgICAgICAgICAgIH0sIDgwMCk7DQoNCiAgICAgICAgICAgIC8vIDUuIFVwZGF0ZSBVSSAoUG9ydHJhaXQpDQogICAgICAgICAgICBjb25zdCBwSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ19wb3J0cmFpdCcpOw0KICAgICAgICAgICAgY29uc3QgcEJveCA9IHBJbWcucGFyZW50RWxlbWVudDsNCiAgICAgICAgICAgIHBCb3guc3R5bGUub3BhY2l0eSA9IDAuMzsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChwVXJsKSBwSW1nLnNyYyA9IHBVcmw7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xibF9wb3J0cmFpdCcpLmlubmVyVGV4dCA9IGBLYW5jaGkgTWFoYXBlcml5YXZhYDsNCiAgICAgICAgICAgICAgICBwQm94LnN0eWxlLm9wYWNpdHkgPSAxOw0KICAgICAgICAgICAgfSwgODAwKTsNCg0KICAgICAgICAgICAgLy8gNi4gSW5jcmVtZW50IG9yIFJlc2V0DQogICAgICAgICAgICBjdXJyZW50TCA9IGN1cnJlbnRMID49IENISVRSQU1fQ09ORklHLmxhbmRzY2FwZUNvdW50ID8gMSA6IGN1cnJlbnRMICsgMTsNCiAgICAgICAgICAgIGN1cnJlbnRQID0gY3VycmVudFAgPj0gQ0hJVFJBTV9DT05GSUcucG9ydHJhaXRDb3VudCA/IDEgOiBjdXJyZW50UCArIDE7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBJbml0aWFsaXplDQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gew0KICAgICAgICAgICAgdXBkYXRlQ2hpdHJhbSgpOw0KICAgICAgICAgICAgc2V0SW50ZXJ2YWwodXBkYXRlQ2hpdHJhbSwgQ0hJVFJBTV9DT05GSUcuaW50ZXJ2YWwpOw0KICAgICAgICB9KTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLm1tcHQtYXJjaGl2ZS1ib3ggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMjVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMzBweCAxMHB4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsMCwwLDAuMSk7DQogICAgICAgIH0NCg0KICAgICAgICAuYXJjaGl2ZS1oZWFkZXIgew0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXNpemU6IDIycHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2ZmZjVlNjsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmFyY2hpdmUtY29udHJvbHMgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTVweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgfQ0KDQogICAgICAgICNzY3JpcHR1cmVfZHJvcGRvd24gew0KICAgICAgICAgICAgd2lkdGg6IDM4MHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiA0NXB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMCAxMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgI0ZGOTkzMzsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmYWYwOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1hcmNoaXZlLWRvd25sb2FkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM4MDAwMDAgMCUsICM0YTAwMDAgMTAwJSk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDMwcHg7DQogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5idG4tYXJjaGl2ZS1kb3dubG9hZDpob3ZlciB7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjAzKTsNCiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLDAsMCwwLjIpOw0KICAgICAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJtbXB0LWFyY2hpdmUtYm94Ij4NCiAgICAgICAgPGRpdiBjbGFzcz0iYXJjaGl2ZS1oZWFkZXIiPvCfk5wgU2NyaXB0dXJlcyBmcm9tIE1NUFQgQXJjaGl2ZXM8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYXJjaGl2ZS1jb250cm9scyI+DQogICAgICAgICAgICA8c2VsZWN0IGlkPSJzY3JpcHR1cmVfZHJvcGRvd24iPg0KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gTG9hZGluZyBUaXRsZXMgZnJvbSBEcml2ZS4uLiAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYXJjaGl2ZS1kb3dubG9hZCIgb25jbGljaz0iaGFuZGxlQXJjaGl2ZURvd25sb2FkKCkiPvCfk6UgRG93bmxvYWQgUERGPC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyBjb2xvcjogIzY2NjsgbWFyZ2luLXRvcDogMTVweDsiPk5vdGU6IFNjYW5uZWQgdmVyc2lvbnMgYXJlIHByb3ZpZGVkIGZvciBwZXJzb25hbCBzcGlyaXR1YWwgc3R1ZHkuPC9wPg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8c2NyaXB0Pg0KDQogICAgICAgIC8vIC0tLSBHT09HTEUgRFJJVkUgQVJDSElWRSBMT0dJQyAtLS0NCiAgICAgICAgLy8gUkVQTEFDRSAnWU9VUl9BUFBTX1NDUklQVF9VUkwnIHdpdGggdGhlIG9uZSB5b3UgZ2V0IGZyb20gR29vZ2xlIFNjcmlwdCBEZXBsb3ltZW50DQogICAgICAgIGNvbnN0IEFSQ0hJVkVfQlJJREdFX1VSTCA9ICJodHRwczovL3NjcmlwdC5nb29nbGUuY29tL21hY3Jvcy9zL0FLZnljYndxMXdOTDd4ZlJLWnFTcDFjNVVHR2hlbmJfSWwyWFlDc2NHUHNwa04wQXp4UXJfbFd5SWdqSkgtR2ZjSTdMdVZqSmZBL2V4ZWMiOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRNTVBUQXJjaGl2ZSgpIHsNCiAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3duID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmlwdHVyZV9kcm9wZG93bicpOw0KICAgICAgICAgICAgaWYgKCFkcm9wZG93bikgcmV0dXJuOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vICdyZWRpcmVjdDogZm9sbG93JyBpcyByZXF1aXJlZCBmb3IgR29vZ2xlIEFwcHMgU2NyaXB0IFdlYiBBcHBzDQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChBUkNISVZFX0JSSURHRV9VUkwsIHsgcmVkaXJlY3Q6ICJmb2xsb3ciIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOw0KDQogICAgICAgICAgICAgICAgZHJvcGRvd24uaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IGEgU2NyaXB0dXJlIC0tPC9vcHRpb24+JzsNCg0KICAgICAgICAgICAgICAgIGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPk5vIGZpbGVzIGZvdW5kIGluIGZvbGRlcjwvb3B0aW9uPic7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgICAgIC8vb3B0LnZhbHVlID0gYGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91Yz9leHBvcnQ9ZG93bmxvYWQmaWQ9JHtmaWxlLmlkfWA7DQogICAgICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdS8wL3VjP2lkPSR7ZmlsZS5pZH0mZXhwb3J0PWRvd25sb2FkYDsNCiAgICAgICAgICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gZmlsZS5uYW1lOw0KICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiQXJjaGl2ZSBFcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgICAgIGRyb3Bkb3duLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPkFyY2hpdmUgT2ZmbGluZSAoQ2hlY2sgVVJMKTwvb3B0aW9uPic7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUFyY2hpdmVEb3dubG9hZCgpIHsNCiAgICAgICAgICAgIGNvbnN0IHVybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JpcHR1cmVfZHJvcGRvd24nKS52YWx1ZTsNCiAgICAgICAgICAgIGlmICghdXJsKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIlBsZWFzZSBzZWxlY3QgYSBzY3JpcHR1cmUgdGl0bGUgZmlyc3QuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBGaWxlIElEIGZyb20gdGhlIFVSTA0KICAgICAgICAgICAgY29uc3QgZmlsZUlkID0gdXJsLnNwbGl0KCdpZD0nKVsxXTsNCg0KICAgICAgICAgICAgLy8gV2UgdXNlIGEgImJ5cGFzcyIgVVJMIHN0cnVjdHVyZS4NCiAgICAgICAgICAgIC8vIFRoaXMgdGVsbHMgR29vZ2xlIHRvIHNraXAgdGhlIGNvbmZpcm1hdGlvbiBwYWdlIGJ5IHByZS1jb25maXJtaW5nIHRoZSBkb3dubG9hZC4NCiAgICAgICAgICAgIGNvbnN0IGZvcmNlRG93bmxvYWRVcmwgPSBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL3VjP2V4cG9ydD1kb3dubG9hZCZpZD0ke2ZpbGVJZH0mY29uZmlybT10YDsNCg0KICAgICAgICAgICAgd2luZG93Lm9wZW4oZm9yY2VEb3dubG9hZFVybCwgJ19ibGFuaycpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyBBZGQgdGhpcyB0byB5b3VyIGV4aXN0aW5nIHdpbmRvdy5sb2FkIGxpc3RlbmVyIG9yIGNyZWF0ZSBhIG5ldyBvbmU6DQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgaW5pdE1NUFRBcmNoaXZlKTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxkaXYgY2xhc3M9Im1tcHQtdW5pZmllZC1ib3giIGlkPSJhdWRpb19hcmNoaXZlX3NlY3Rpb24iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJhcmNoaXZlLWhlYWRlciI+DQogICAgICAgICAgICDwn46nIEF1ZGlvIEJvb2tzIEZyb20gTU1QVCBBcmNoaXZlcw0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgZ2FwOiAxNXB4OyBhbGlnbi1pdGVtczogZmxleC1lbmQ7IGZsZXgtd3JhcDogd3JhcDsgbWFyZ2luOiAyMHB4IDA7Ij4NCiAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGxlZnQ7Ij4NCiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogNXB4OyI+Qm9vazwvbGFiZWw+DQogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYXVkaW9fYm9va19kcm9wZG93biIgb25jaGFuZ2U9ImxvYWRBdWRpb0NoYXB0ZXJzKCkiIHN0eWxlPSJtaW4td2lkdGg6IDIyMHB4OyBoZWlnaHQ6IDM4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDRweDsgcGFkZGluZzogNXB4OyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgQm9vayAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGxlZnQ7Ij4NCiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogNXB4OyI+Q2hhcHRlcjwvbGFiZWw+DQogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYXVkaW9fY2hhcHRlcl9kcm9wZG93biIgZGlzYWJsZWQgb25jaGFuZ2U9InVwZGF0ZUF1ZGlvVUkoKSIgc3R5bGU9Im1pbi13aWR0aDogMzAwcHg7IGhlaWdodDogMzhweDsgYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogNHB4OyBwYWRkaW5nOiA1cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBiYWNrZ3JvdW5kOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBDaGFwdGVyIC0tPC9vcHRpb24+DQogICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA4cHg7Ij4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fYXVkaW9fcGxheSIgZGlzYWJsZWQgb25jbGljaz0icGxheUF1ZGlvQm9vaygpIiBjbGFzcz0iYnRuLXJuIiBzdHlsZT0iYmFja2dyb3VuZDogIzI4YTc0NTsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDAgMjBweDsgaGVpZ2h0OiAzOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7Ij7ilrYgUGxheTwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9hdWRpb19zdG9wIiBkaXNhYmxlZCBvbmNsaWNrPSJzdG9wQXVkaW9Cb29rKCkiIGNsYXNzPSJidG4tcm4iIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZDMyZjJmOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMCAyMHB4OyBoZWlnaHQ6IDM4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsiPuKWoCBTdG9wPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0iYXVkaW9fcGxheWVyX2NvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiByZWxhdGl2ZTsgbWFyZ2luOiAxMHB4IGF1dG87IGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgb3ZlcmZsb3c6IGhpZGRlbjsgYmFja2dyb3VuZDogIzAwMDsgaGVpZ2h0OiA4NXB4OyBtYXgtd2lkdGg6IDkwMHB4OyI+DQogICAgICAgICAgICA8ZGl2IGlkPSJwbGF5X2luc3RydWN0aW9uIiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMTAwJTsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogI2ZmOTkzMzsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTRweDsgdG9wOiAxMHB4OyB6LWluZGV4OiA1OyBwb2ludGVyLWV2ZW50czogbm9uZTsiPg0KICAgICAgICAgICAgICAgIENsaWNrIFBsYXkgb24gdGhlIHBsYXllciBiZWxvdyB0byBzdGFydA0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8aWZyYW1lIGlkPSJnb29nbGVfYXVkaW9faWZyYW1lIiBzcmM9IiIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTYwIiBmcmFtZWJvcmRlcj0iMCIgc3R5bGU9Im1hcmdpbi10b3A6IC0zNXB4OyI+PC9pZnJhbWU+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9ImF1ZGlvX3N0YXR1cyIgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM4MDAwMDA7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tdG9wOiAxMHB4OyI+Q29ubmVjdGluZyB0byBBcmNoaXZlLi4uPC9kaXY+DQogICAgPC9kaXY+DQoNCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIC8vIFNjcmlwdCBsb2dpYyByZW1haW5zIHRoZSBzYW1lIChyZXN0b3JlcyB0aGUgY29ubmVjdGluZyBtZXNzYWdlKQ0KICAgICAgICBjb25zdCBHT09HTEVfQVVESU9fVVJMID0gImh0dHBzOi8vc2NyaXB0Lmdvb2dsZS5jb20vbWFjcm9zL3MvQUtmeWNieEdJMkFnd2RzZ3FaLXFGWEV4bU1NWUV5TzRLX2FGbS03SDNBU25sZEtmQVR4VDhHLUdfc2J1SG9LNDB0cXVfYmMtL2V4ZWMiOw0KICAgICAgICBsZXQgYXVkaW9MaWJEYXRhID0gW107DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gaW5pdEF1ZGlvQXJjaGl2ZSgpIHsNCiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19zdGF0dXMnKTsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChHT09HTEVfQVVESU9fVVJMKTsNCiAgICAgICAgICAgICAgICBhdWRpb0xpYkRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYm9va1NlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19ib29rX2Ryb3Bkb3duJyk7DQogICAgICAgICAgICAgICAgYm9va1NlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgQm9vayAtLTwvb3B0aW9uPic7DQogICAgICAgICAgICAgICAgYXVkaW9MaWJEYXRhLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGlkeDsNCiAgICAgICAgICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gaXRlbS5ib29rTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgYm9va1NlbC5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHN0YXR1cy5pbm5lclRleHQgPSAiQXJjaGl2ZSBSZWFkeS4iOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIHN0YXR1cy5pbm5lclRleHQgPSAiQXJjaGl2ZSBjb25uZWN0aW9uIGVycm9yLiI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpbml0QXVkaW9BcmNoaXZlKCk7DQoNCiAgICAgICAgZnVuY3Rpb24gbG9hZEF1ZGlvQ2hhcHRlcnMoKSB7DQogICAgICAgICAgICBjb25zdCBpZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fYm9va19kcm9wZG93bicpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgY2hhcFNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19jaGFwdGVyX2Ryb3Bkb3duJyk7DQogICAgICAgICAgICBzdG9wQXVkaW9Cb29rKCk7DQogICAgICAgICAgICBjaGFwU2VsLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBDaGFwdGVyIC0tPC9vcHRpb24+JzsNCiAgICAgICAgICAgIGlmIChpZHggPT09ICIiKSB7IGNoYXBTZWwuZGlzYWJsZWQgPSB0cnVlOyByZXR1cm47IH0NCiAgICAgICAgICAgIGF1ZGlvTGliRGF0YVtpZHhdLmNoYXB0ZXJzLmZvckVhY2goZmlsZSA9PiB7DQogICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGZpbGUuaWQ7DQogICAgICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gZmlsZS5uYW1lLnJlcGxhY2UoL1wuW14vLl0rJC8sICIiKTsNCiAgICAgICAgICAgICAgICBjaGFwU2VsLmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGNoYXBTZWwuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUF1ZGlvVUkoKSB7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3BsYXknKS5kaXNhYmxlZCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fY2hhcHRlcl9kcm9wZG93bicpLnZhbHVlID09PSAiIik7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBwbGF5QXVkaW9Cb29rKCkgew0KICAgICAgICAgICAgY29uc3QgZmlsZUlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX2NoYXB0ZXJfZHJvcGRvd24nKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19wbGF5ZXJfY29udGFpbmVyJyk7DQogICAgICAgICAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29vZ2xlX2F1ZGlvX2lmcmFtZScpOw0KICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX3N0YXR1cycpOw0KICAgICAgICAgICAgaWYgKCFmaWxlSWQpIHJldHVybjsNCiAgICAgICAgICAgIGlmcmFtZS5zcmMgPSBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL2ZpbGUvZC8ke2ZpbGVJZH0vcHJldmlld2A7DQogICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3BsYXknKS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3N0b3AnKS5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgc3RhdHVzLmlubmVyVGV4dCA9ICJTdHJlYW1pbmc6ICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fY2hhcHRlcl9kcm9wZG93bicpLnNlbGVjdGVkT3B0aW9uc1swXS50ZXh0Ow0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gc3RvcEF1ZGlvQm9vaygpIHsNCiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19wbGF5ZXJfY29udGFpbmVyJyk7DQogICAgICAgICAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29vZ2xlX2F1ZGlvX2lmcmFtZScpOw0KICAgICAgICAgICAgaWZyYW1lLnNyYyA9ICIiOw0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3N0b3AnKS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fc3RhdHVzJykuaW5uZXJUZXh0ID0gIkFyY2hpdmUgUmVhZHkuIjsNCiAgICAgICAgICAgIHVwZGF0ZUF1ZGlvVUkoKTsNCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPGRpdiBpZD0idmlkZW8tYXJjaGl2ZS1ib3giIGNsYXNzPSJtbXB0LXVuaWZpZWQtYm94IiBzdHlsZT0iZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyB3aWR0aDogMTAwJTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsgcGFkZGluZzogMjVweDsgYm9yZGVyLXJhZGl1czogMTJweDsgYmFja2dyb3VuZDogI2ZmZjsgbWFyZ2luOiAxNXB4IDA7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyI+DQoNCiAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjogIzgwMDAwMDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDI0cHg7IG1hcmdpbi10b3A6IDA7IG1hcmdpbi1ib3R0b206IDE1cHg7Ij4NCiAgICAgICAgICAgIPCfjqwgVmlkZW9zIEZyb20gTU1QVCBBcmNoaXZlcw0KICAgICAgICA8L2gyPg0KDQogICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTVweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOiAxNXB4OyBsaW5lLWhlaWdodDogMS42OyI+DQogICAgICAgICAgICA8c3Ryb25nIHN0eWxlPSJjb2xvcjogIzgwMDAwMDsgZm9udC1zaXplOiAxN3B4OyI+Tm90ZTo8L3N0cm9uZz4NCiAgICAgICAgICAgIDxzdHJvbmcgc3R5bGU9InRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogOTAwOyBmb250LXNpemU6IDE2cHg7Ij5TZWxlY3QgdGhlIHJlcXVpcmVkIGVwaXNvZGUgZnJvbSB0aGUgcGxheWxpc3QgaWNvbiBhdCB0aGUgdG9wLXJpZ2h0IGNvcm5lciBvZiB0aGUgdmlkZW8gd2luZG93Ljwvc3Ryb25nPg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDIwcHg7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDE1cHg7IGZsZXgtd3JhcDogd3JhcDsiPg0KICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGZvbnQtc2l6ZTogMTZweDsiPlRvcGljOjwvbGFiZWw+DQogICAgICAgICAgICA8c2VsZWN0IGlkPSJ0b3BpY19zZWxlY3QiIG9uY2hhbmdlPSJQcmVwYXJlVmlkZW8oKSIgc3R5bGU9IndpZHRoOiAzMjBweDsgaGVpZ2h0OiAzOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOyBib3JkZXItcmFkaXVzOiA1cHg7IHBhZGRpbmc6IDVweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGJhY2tncm91bmQ6ICNmZmY7Ij4NCiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIExvYWRpbmcgQXJjaGl2ZSAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IkxhdW5jaElmcmFtZSgpIiBzdHlsZT0iYmFja2dyb3VuZDogIzI4YTc0NTsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDEwcHggMzBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE1cHg7IGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7Ij7ilrYgUGxheTwvYnV0dG9uPg0KICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuX3N0b3AiIG9uY2xpY2s9IlN0b3BJZnJhbWUoKSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IGJhY2tncm91bmQ6ICNkYzM1NDU7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAxMHB4IDMwcHg7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxNXB4OyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpOyI+4pyWIFN0b3A8L2J1dHRvbj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0iRGl2VmlkVGl0bGUxIiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc2l6ZTogMjBweDsgbWFyZ2luLWJvdHRvbTogNXB4OyBtaW4taGVpZ2h0OiAyNnB4OyI+UmVhZHkuPC9kaXY+DQogICAgICAgIDxkaXYgaWQ9IkRpdlRpbWVyIiBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyBjb2xvcjogYmx1ZTsgdGV4dC1hbGlnbjogY2VudGVyOyBoZWlnaHQ6IDIwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyI+PC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0idmlkX2NvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IG1hcmdpbjogMjBweCBhdXRvIDAgYXV0bzsgd2lkdGg6IDEwMCU7IG1heC13aWR0aDogNTYwcHg7IGFzcGVjdC1yYXRpbzogMTYvOTsgYmFja2dyb3VuZDogIzAwMDsgYm9yZGVyOiA0cHggc29saWQgIzgwMDAwMDsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDZweCAxOHB4IHJnYmEoMCwwLDAsMC4zKTsiPg0KICAgICAgICAgICAgPGlmcmFtZSBpZD0iaWZyX21haW4iIG5hbWU9Imlmcl9tYWluIiBzcmM9ImFib3V0OmJsYW5rIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmcmFtZWJvcmRlcj0iMCINCiAgICAgICAgICAgICAgICAgICAgYWxsb3c9ImFjY2VsZXJvbWV0ZXI7IGF1dG9wbGF5OyBjbGlwYm9hcmQtd3JpdGU7IGVuY3J5cHRlZC1tZWRpYTsgZ3lyb3Njb3BlOyBwaWN0dXJlLWluLXBpY3R1cmU7IHdlYi1zaGFyZSINCiAgICAgICAgICAgICAgICAgICAgcmVmZXJyZXJwb2xpY3k9InN0cmljdC1vcmlnaW4td2hlbi1jcm9zcy1vcmlnaW4iIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICB2YXIgVGFyZ2V0VXJsID0gIiI7DQogICAgICAgIHZhciBhcmNoaXZlRGF0YSA9IFtdOw0KICAgICAgICBjb25zdCBpZnIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWZyX21haW4nKTsNCiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZF9jb250YWluZXInKTsNCiAgICAgICAgY29uc3Qgc3RvcEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fc3RvcCcpOw0KICAgICAgICBjb25zdCBEQVRBX1NPVVJDRSA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2pra2JzYmh6ZGRqd3JqbnpzODBmdS9WaWRlb3MudHh0P3Jsa2V5PXM0dWNoaXA0b3RidG40dzg3dzh4OXpoa2omZGw9MSI7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gTG9hZEFyY2hpdmUoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goREFUQV9TT1VSQ0UpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTE2bGUnKS5kZWNvZGUoYnVmZmVyKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQucmVwbGFjZSgvXlx1RkVGRi8sICcnKS5zcGxpdCgvXHI/XG4vKS5maWx0ZXIobCA9PiBsLmluY2x1ZGVzKCcsJykpOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvcGljX3NlbGVjdCcpOw0KICAgICAgICAgICAgICAgIHNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBDaG9vc2UgYSBUb3BpYyAtLTwvb3B0aW9uPic7DQoNCiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnLCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoIDwgMikgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmdWxsVXJsID0gcGFydHNbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0SWQgPSBmdWxsVXJsLm1hdGNoKC9bPyZdbGlzdD0oW14mXSspLyk/LlsxXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lUb2tlbiA9IGZ1bGxVcmwubWF0Y2goL1s/Jl1zaT0oW14mXSspLyk/LlsxXSB8fCAiVnkzRndVanRTdGZROFg2cCI7DQoNCiAgICAgICAgICAgICAgICAgICAgYXJjaGl2ZURhdGEucHVzaCh7IG5hbWU6IHBhcnRzWzBdLnRyaW0oKSwgaWQ6IGxpc3RJZCwgc2k6IHNpVG9rZW4gfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBpOyBvcHQudGV4dENvbnRlbnQgPSBwYXJ0c1swXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIHNlbC5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZWaWRUaXRsZTEnKS5pbm5lclRleHQgPSAiRGF0YSBMb2FkIEVycm9yIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIFByZXBhcmVWaWRlbygpIHsNCiAgICAgICAgICAgIGNvbnN0IGlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3BpY19zZWxlY3QnKS52YWx1ZTsNCiAgICAgICAgICAgIGlmIChpZHggPT09ICIiKSB7IFRhcmdldFVybCA9ICIiOyByZXR1cm47IH0NCiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBhcmNoaXZlRGF0YVtpZHhdOw0KICAgICAgICAgICAgVGFyZ2V0VXJsID0gImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL3ZpZGVvc2VyaWVzP3NpPSIgKyBpdGVtLnNpICsgIiZsaXN0PSIgKyBpdGVtLmlkICsgIiZhdXRvcGxheT0xIjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZWaWRUaXRsZTEnKS5pbm5lclRleHQgPSBpdGVtLm5hbWU7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBMYXVuY2hJZnJhbWUoKSB7DQogICAgICAgICAgICBpZiAoVGFyZ2V0VXJsID09PSAiIikgeyBhbGVydCgiUGxlYXNlIHNlbGVjdCBhIHRvcGljIik7IHJldHVybjsgfQ0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgICAgc3RvcEJ0bi5zdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7DQogICAgICAgICAgICBpZnIuc3JjID0gImFib3V0OmJsYW5rIjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICJFc3RhYmxpc2hpbmcgQ29ubmVjdGlvbi4uLiI7DQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBpZnIuc3JjID0gVGFyZ2V0VXJsOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICIiOw0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBTdG9wSWZyYW1lKCkgew0KICAgICAgICAgICAgaWZyLnNyYyA9ICJhYm91dDpibGFuayI7DQogICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIHN0b3BCdG4uc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICJQbGF5ZXIgU3RvcHBlZC4iOw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICIiOyB9LCAyMDAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIExvYWRBcmNoaXZlKCk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8ZGl2IGNsYXNzPSJtbXB0LXVuaWZpZWQtYm94IiBpZD0icGFuY2hhbmdfc2VjdGlvbiIgc3R5bGU9ImJvcmRlci1jb2xvcjogI2ZmOTkzMzsiPg0KICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6IDI0cHg7IGNvbG9yOiAjODAwMDAwOyBmb250LWZhbWlseTogJ0dlb3JnaWEnLCBzZXJpZjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDIwcHg7Ij4NCiAgICAgICAgICAgIPCflYnvuI8gVG9kYXkncyBQYW5jaGFuZw0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGlkPSJwYW5jaGFuZ19jb250ZW50Ij4NCiAgICAgICAgICAgIDxkaXYgaWQ9InBhbmNoYW5nX2xvYWRpbmciIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM2NjY7Ij5GZXRjaGluZyBBbG1hbmFjLi4uPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgaWQ9InBhbmNoYW5nX2Rpc3BsYXkiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+DQogICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJkYXRlLXRhYmxlIiBzdHlsZT0ibWFyZ2luOiAwIGF1dG8gMjBweCBhdXRvOyBtYXgtd2lkdGg6IDYwMHB4OyBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOyI+DQogICAgICAgICAgICAgICAgICAgIDx0aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggaWQ9InBhbl9oZWFkZXJfZGF0ZSIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICM4MDAwMDA7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgZm9udC1zaXplOiAxOHB4OyI+PC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+DQogICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjgwcHgsIDFmcikpOyBnYXA6IDE1cHg7IHRleHQtYWxpZ246IGxlZnQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjEuIFRJVEhJPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgaWQ9InRhYmxlX3RpdGhpIiBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOiAxM3B4OyI+PC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjIuIE5BS1NIQVRSQTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJ0YWJsZV9uYWtzaGF0cmEiIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6IDEzcHg7Ij48L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW4tY2FyZCIgc3R5bGU9ImJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogI2ZmZmRlNjsgcGFkZGluZzogMTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmOTkzMzsgbWFyZ2luLWJvdHRvbTogOHB4OyI+My4gWU9HQTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJ0YWJsZV95b2dhIiBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOiAxM3B4OyI+PC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjQuIEtBUkFOQTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJ0YWJsZV9rYXJhbmEiIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6IDEzcHg7Ij48L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW4tY2FyZCIgc3R5bGU9ImJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogI2ZmZmRlNjsgcGFkZGluZzogMTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmOTkzMzsgbWFyZ2luLWJvdHRvbTogOHB4OyI+NS4gVkFSQSAoRGF5KTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZGlzcGxheV92YXJhIiBzdHlsZT0iZm9udC1zaXplOiAxNnB4OyBmb250LXdlaWdodDogYm9sZDsgcGFkZGluZzogNXB4OyI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICAvLyBFbnN1cmUgdGhpcyBpcyBhdCB0aGUgdG9wIG9mIHlvdXIgc2NyaXB0DQogICAgICAgIGNvbnN0IFBBTkNIQU5HX0JBU0UgPSAnL1BhbmNoYW5nJzsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRGFpbHlQYW5jaGFuZygpIHsNCiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCB5eXl5ID0gbm93LmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICBjb25zdCBtbSA9IFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICBjb25zdCBkZCA9IFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgY29uc3QgdG9kYXlJU08gPSBgJHt5eXl5fS0ke21tfS0ke2RkfWA7DQoNCiAgICAgICAgICAgIGNvbnN0IGRhaWx5UGF0aCA9IGAke1BBTkNIQU5HX0JBU0V9LyR7eXl5eX0vJHttbX0vJHt5eXl5fSR7bW19JHtkZH0uaHRtbGA7DQoNCiAgICAgICAgICAgIGNvbnN0IGthYWxhVGltaW5ncyA9IHsNCiAgICAgICAgICAgICAgICAnU3VuZGF5JzogeyByYWh1OiAnNDozMCBwbSB0byA2OjAwIHBtJywgZ3VsaWthOiAnMzowMCBwbSB0byA0OjMwIHBtJywgeWFtOiAnMTI6MDAgcG0gdG8gMTozMCBwbScgfSwNCiAgICAgICAgICAgICAgICAnTW9uZGF5JzogeyByYWh1OiAnNzozMCBhbSB0byA5OjAwIGFtJywgZ3VsaWthOiAnMTozMCBwbSB0byAzOjAwIHBtJywgeWFtOiAnMTA6MzAgYW0gdG8gMTI6MDAgcG0nIH0sDQogICAgICAgICAgICAgICAgJ1R1ZXNkYXknOiB7IHJhaHU6ICczOjAwIHBtIHRvIDQ6MzAgcG0nLCBndWxpa2E6ICcxMjowMCBwbSB0byAxOjMwIHBtJywgeWFtOiAnOTowMCBhbSB0byAxMDozMCBhbScgfSwNCiAgICAgICAgICAgICAgICAnV2VkbmVzZGF5JzogeyByYWh1OiAnMTI6MDAgcG0gdG8gMTozMCBwbScsIGd1bGlrYTogJzEwOjMwIGFtIHRvIDEyOjAwIHBtJywgeWFtOiAnNzozMCBhbSB0byA5OjAwIGFtJyB9LA0KICAgICAgICAgICAgICAgICdUaHVyc2RheSc6IHsgcmFodTogJzE6MzAgcG0gdG8gMzowMCBwbScsIGd1bGlrYTogJzk6MDAgYW0gdG8gMTA6MzAgYW0nLCB5YW06ICc2OjAwIGFtIHRvIDc6MzAgYW0nIH0sDQogICAgICAgICAgICAgICAgJ0ZyaWRheSc6IHsgcmFodTogJzEwOjMwIGFtIHRvIDEyOjAwIHBtJywgZ3VsaWthOiAnNzozMCBhbSB0byA5OjAwIGFtJywgeWFtOiAnMzowMCBwbSB0byA0OjMwIHBtJyB9LA0KICAgICAgICAgICAgICAgICdTYXR1cmRheSc6IHsgcmFodTogJzk6MDAgYW0gdG8gMTA6MzAgYW0nLCBndWxpa2E6ICc2OjAwIGFtIHRvIDc6MzAgYW0nLCB5YW06ICcxOjMwIHBtIHRvIDM6MDAgcG0nIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggU3VucmlzZS9TdW5zZXQgZm9yIENoZW5uYWkgZnJvbSBPcGVuLU1ldGVvIEFQSQ0KICAgICAgICAgICAgICAgIGxldCBzdW5JbmZvID0gIkxvYWRpbmcgdGltZXMuLi4iOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1blJlcyA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5vcGVuLW1ldGVvLmNvbS92MS9mb3JlY2FzdD9sYXRpdHVkZT0xMy4wODI3JmxvbmdpdHVkZT04MC4yNzA3JmRhaWx5PXN1bnJpc2Usc3Vuc2V0JnRpbWV6b25lPWF1dG8mc3RhcnRfZGF0ZT0ke3RvZGF5SVNPfSZlbmRfZGF0ZT0ke3RvZGF5SVNPfWApOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW5EYXRhID0gYXdhaXQgc3VuUmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0VGltZSA9ICh0KSA9PiBuZXcgRGF0ZSh0KS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLUlOJywgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnLCBob3VyMTI6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgICAgIHN1bkluZm8gPSBgU3VucmlzZSBpcyBhdCA8Yj4ke2Zvcm1hdFRpbWUoc3VuRGF0YS5kYWlseS5zdW5yaXNlWzBdKX08L2I+IGFuZCBTdW5zZXQgaXMgYXQgPGI+JHtmb3JtYXRUaW1lKHN1bkRhdGEuZGFpbHkuc3Vuc2V0WzBdKX08L2I+YDsNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgc3VuSW5mbyA9ICJTdW5yaXNlIGFuZCBTdW5zZXQgZGF0YSBjdXJyZW50bHkgdW5hdmFpbGFibGUiOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDIuIERyb3Bib3ggRmV0Y2ggTG9naWMNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5SZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogdG9rZW5QYXJhbXMgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXdhaXQgdG9rZW5SZXMuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gdG9rZW5EYXRhLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBkYWlseVBhdGggfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKCJTeW5jaW5nLi4uIik7DQogICAgICAgICAgICAgICAgY29uc3QgcmF3RGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHJhd0RhdGEuc3BsaXQoJywnKS5tYXAocCA9PiBwLnRyaW0oKSk7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gQ09NUEFDVCBIRUFERVIgKE5PIElDT04pIC0tLQ0KICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5faGVhZGVyX2RhdGUnKTsNCiAgICAgICAgICAgICAgICBjb25zdCB2YXJhTmFtZSA9IHBhcnRzWzFdID8gcGFydHNbMV0uc3BsaXQoJzonKVswXS50cmltKCkgOiAiIjsNCg0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kID0gImxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM4MDAwMDAgMCUsICM0YTAwMDAgMTAwJSkiOw0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gIjE1cHgiOw0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiMTBweCAxMHB4IDAgMCI7DQogICAgICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLnN0eWxlLnRleHRBbGlnbiA9ICJjZW50ZXIiOw0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5ib3JkZXJCb3R0b20gPSAiM3B4IHNvbGlkICNGRkQ3MDAiOw0KDQogICAgICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogYmFzZWxpbmU7IGdhcDogMTVweDsgbWFyZ2luLWJvdHRvbTogNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogMjZweDsgZm9udC13ZWlnaHQ6IDgwMDsgY29sb3I6ICNGRkQ3MDA7IHRleHQtc2hhZG93OiAycHggMnB4IDRweCByZ2JhKDAsMCwwLDAuNSk7Ij4ke3BhcnRzWzBdfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iZm9udC1zaXplOiAyMHB4OyBmb250LXdlaWdodDogNjAwOyBjb2xvcjogI0ZGRkZGRjsgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjRkZENzAwOyBwYWRkaW5nLWxlZnQ6IDE1cHg7Ij4ke3ZhcmFOYW1lfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBwYWRkaW5nOiAycHggMTJweDsgYm9yZGVyOiAxcHggc29saWQgI0ZGRDcwMDsgYm9yZGVyLXJhZGl1czogMjBweDsgZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICNGRkQ3MDA7IGxldHRlci1zcGFjaW5nOiAwLjVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRJTUUgU1BFQ0lGSUVEIEFSRSBFTkQgVElNRSBJTiBJU1QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOw0KDQogICAgICAgICAgICAgICAgLy8gLS0tIFRBQkxFUyBQT1BVTEFUSU9OIC0tLQ0KICAgICAgICAgICAgICAgIGNvbnN0IGZpbGxUYWJsZSA9IChpZCwgc3RhcnQpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRibCkgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB0YmwuaW5uZXJIVE1MID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWMgPSBwYXJ0c1tzdGFydCArIGldOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlYyAmJiByZWMuaW5jbHVkZXMoJzonKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSByZWMuc3Vic3RyaW5nKDAsIHJlYy5pbmRleE9mKCc6JykpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gcmVjLnN1YnN0cmluZyhyZWMuaW5kZXhPZignOicpICsgMSkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAiIiAmJiAodGltZSA9PT0gIiIgfHwgdGltZSA9PT0gIi0tOi0tIikpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByb3cgPSB0YmwuaW5zZXJ0Um93KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmlubmVySFRNTCA9IGA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OjcwMDsgcGFkZGluZzo2cHggNHB4OyBjb2xvcjojMzMzOyBmb250LXNpemU6MTRweDsgd2lkdGg6NjUlOyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyI+JHtuYW1lfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojZDMyZjJmOyBwYWRkaW5nOjZweCA0cHg7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4ke3RpbWV9PC90ZD5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGZpbGxUYWJsZSgndGFibGVfdGl0aGknLCAzKTsNCiAgICAgICAgICAgICAgICBmaWxsVGFibGUoJ3RhYmxlX25ha3NoYXRyYScsIDcpOw0KICAgICAgICAgICAgICAgIGZpbGxUYWJsZSgndGFibGVfeW9nYScsIDExKTsNCiAgICAgICAgICAgICAgICBmaWxsVGFibGUoJ3RhYmxlX2thcmFuYScsIDE1KTsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5X3ZhcmEnKS5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogI2ZmZjljNDsgYm9yZGVyOiAycHggc29saWQgI0ZGRDcwMDsgcGFkZGluZzogOHB4OyBib3JkZXItcmFkaXVzOiA2cHg7IGNvbG9yOiAjODAwMDAwOyBmb250LXNpemU6IDIycHg7IGZvbnQtd2VpZ2h0OiA5MDA7IHRleHQtYWxpZ246IGNlbnRlcjsiPiR7dmFyYU5hbWV9PC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBISU5EVSBDQUxFTkRBUiAmIEtBQUxBUyAtLS0NCiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFBhcnRzID0gcGFydHMubGVuZ3RoOw0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbEx1bmFyID0gcGFydHNbdG90YWxQYXJ0cyAtIDJdIHx8ICctLSc7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsU29sYXIgPSBwYXJ0c1t0b3RhbFBhcnRzIC0gM10gfHwgJy0tJzsNCiAgICAgICAgICAgICAgICBjb25zdCB2YWxNYWxheWFsYW0gPSBwYXJ0c1t0b3RhbFBhcnRzIC0gNF0gfHwgJy0tJzsNCiAgICAgICAgICAgICAgICBjb25zdCB2YWxUYW1pbCA9IHBhcnRzW3RvdGFsUGFydHMgLSA1XSB8fCAnLS0nOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5S2FhbGEgPSBrYWFsYVRpbWluZ3NbdmFyYU5hbWVdIHx8IHsgcmFodTogJy0tJywgZ3VsaWthOiAnLS0nLCB5YW06ICctLScgfTsNCg0KICAgICAgICAgICAgICAgIGxldCBjYWxlbmRhckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaW5kdV9jYWxlbmRhcl9zZWN0aW9uJyk7DQogICAgICAgICAgICAgICAgaWYgKCFjYWxlbmRhckRpdikgew0KICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckRpdi5pZCA9ICdoaW5kdV9jYWxlbmRhcl9zZWN0aW9uJzsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhbmNoYW5nX2Rpc3BsYXknKS5hcHBlbmRDaGlsZChjYWxlbmRhckRpdik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY2FsZW5kYXJEaXYuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogIzgwMDAwMDsgY29sb3I6ICNGRkQ3MDA7IHBhZGRpbmc6IDhweDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxNnB4OyBtYXJnaW4tdG9wOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHggNnB4IDAgMDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNGRkQ3MDA7Ij5IaW5kdSBDYWxlbmRhciBmb3IgVG9kYXk8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGJhY2tncm91bmQ6ICNmZmZkZTc7IGJvcmRlcjogMXB4IHNvbGlkICNGRkQ3MDA7IG1hcmdpbi1ib3R0b206IDE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+VGFtaWw8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6IzgwMDAwMDsgZm9udC13ZWlnaHQ6ODAwOyI+JHt2YWxUYW1pbH08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPk1hbGF5YWxhbTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojODAwMDAwOyBmb250LXdlaWdodDo4MDA7Ij4ke3ZhbE1hbGF5YWxhbX08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlNvbGFyPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiM4MDAwMDA7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dmFsU29sYXJ9PC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5MdW5hcjwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojODAwMDAwOyBmb250LXdlaWdodDo4MDA7Ij4ke3ZhbEx1bmFyfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICM4MDAwMDA7IGNvbG9yOiAjRkZENzAwOyBwYWRkaW5nOiA4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTZweDsgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjRkZENzAwOyI+VG9kYXkncyBLYWFsYXM8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGJhY2tncm91bmQ6ICNmZmZkZTc7IGJvcmRlcjogMXB4IHNvbGlkICNGRkQ3MDA7IG1hcmdpbi1ib3R0b206IDE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+UmFodSBLYWFsYTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojZDMyZjJmOyBmb250LXdlaWdodDo4MDA7Ij4ke3RvZGF5S2FhbGEucmFodX08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPkd1bGlrYSBLYWFsYTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojZDMyZjJmOyBmb250LXdlaWdodDo4MDA7Ij4ke3RvZGF5S2FhbGEuZ3VsaWthfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+WWFtYW5nYWRhPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiNkMzJmMmY7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dG9kYXlLYWFsYS55YW19PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjNGEwMDAwLCAjODAwMDAwLCAjNGEwMDAwKTsgY29sb3I6ICNGRkQ3MDA7IHBhZGRpbmc6IDEwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHg7IGJvcmRlcjogMXB4IHNvbGlkICNGRkQ3MDA7IGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMik7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUb2RheSBpbiBDaGVubmFpOiAke3N1bkluZm99DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYDsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5jaGFuZ19sb2FkaW5nJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuY2hhbmdfZGlzcGxheScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiU3luYyBGYWlsZWQiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gQ2FsbCBpdCBhdCB0aGUgdmVyeSBib3R0b20gb2YgeW91ciBzY3JpcHQgdGFncw0KICAgICAgICBsb2FkRGFpbHlQYW5jaGFuZygpOw0KDQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5sdW5hci1zZWN0aW9uIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBtYXJnaW46IDEwcHggMDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sdW5hci1oZWFkIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAvKiBNYXRjaGVzIHlvdXIgaDMgZm9udC1zaXplIGV4YWN0bHkgKi8NCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOw0KICAgICAgICAgICAgbWFyZ2luOiAwIDAgMTVweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7DQogICAgICAgIH0NCg0KICAgICAgICAubHVuYXItZmxleCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiAxMHB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgICB9DQoNCiAgICAgICAgLmx1bmFyLWl0ZW0gew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIC8qIEJyaWdodCBDb250cmFzdCBUaGVtZTogRGVlcCBOYXZ5IGJhY2tncm91bmQgd2l0aCBHb2xkL1doaXRlIHRleHQgKi8NCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDMzNjY7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgcGFkZGluZzogMTJweCA0cHg7DQogICAgICAgICAgICBtaW4taGVpZ2h0OiA5MHB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAxMHB4IHJnYmEoMCwwLDAsMC41KTsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAubHVuYXItaXRlbSBiIHsNCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICAgICAgY29sb3I6ICNmMGFkNGU7IC8qIEJyaWdodCBHb2xkIGZvciBIZWFkZXIgKi8NCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7DQogICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAubHVuYXItdGV4dCB7DQogICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOyAvKiBIaWdoIENvbnRyYXN0IFdoaXRlICovDQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmx1bmFyLXRpbWUgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4Ow0KICAgICAgICAgICAgY29sb3I6ICMwMGZmZmY7IC8qIEN5YW4gZm9yIFRpbWluZ3MgdG8gc3RhbmQgb3V0ICovDQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDVweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0ibHVuYXItc2VjdGlvbiI+DQogICAgICAgIDxkaXYgY2xhc3M9Imx1bmFyLWhlYWQiPvCfjJkgSGluZHUgTHVuYXIgQ2FsZW5kYXI8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0ibHVuYXItZmxleCI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsdW5hci1pdGVtIj4NCiAgICAgICAgICAgICAgICA8Yj5BbWF2YXN5YTwvYj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJsbi0wMSIgY2xhc3M9Imx1bmFyLXRleHQiPlN5bmNpbmcuLi48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibHVuYXItaXRlbSI+DQogICAgICAgICAgICAgICAgPGI+UGF1cm5pbWE8L2I+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0ibG4tMDIiIGNsYXNzPSJsdW5hci10ZXh0Ij5TeW5jaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imx1bmFyLWl0ZW0iPg0KICAgICAgICAgICAgICAgIDxiPkdyYWhhbmE8L2I+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0ibG4tMDMiIGNsYXNzPSJsdW5hci10ZXh0Ij5TeW5jaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkSGluZHVMdW5hcigpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBkLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgbm93LnNldEhvdXJzKDAsIDAsIDAsIDApOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0cyA9IFsNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2xuLTAxJywgZmlsZTogJy9QYW5jaGFuZy9IaW5kdUx1bmFyQ2FsZW5kYXIvMC4xLmh0bWwnLCB0eXBlOiAnZG91YmxlJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnbG4tMDInLCBmaWxlOiAnL1BhbmNoYW5nL0hpbmR1THVuYXJDYWxlbmRhci8wLjIuaHRtbCcsIHR5cGU6ICdkb3VibGUnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdsbi0wMycsIGZpbGU6ICcvUGFuY2hhbmcvSGluZHVMdW5hckNhbGVuZGFyLzAuMy5odG1sJywgdHlwZTogJ3NpbmdsZScgfQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHggb2YgdGFyZ2V0cykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiB4LmZpbGUgfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaCA9IGF3YWl0IHJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU3RyaXAgdGFncyBidXQga2VlcCBzdHJ1Y3R1cmFsIHNlcGFyYXRpb24NCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYW5UZXh0ID0gaC5yZXBsYWNlKC88W14+XSo+L2csICd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MgPSBjbGVhblRleHQuc3BsaXQoJ3wnKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcyAhPT0gIiIpOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBvdXQgPSAiTm8gVXBjb21pbmciOw0KDQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gcm93c1tpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSByb3cubWF0Y2goLyhcZHsyfSlbLS86XShcZHsyfXxbYS16QS1aXSspWy0vOl0oXGR7NH0pLyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hTihtWzJdKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdCA9IG5ldyBEYXRlKG1bMV0gKyAiICIgKyBtWzJdICsgIiAiICsgbVszXSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHQgPSBuZXcgRGF0ZShgJHttWzNdfS0ke21bMl19LSR7bVsxXX1gKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHQgPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4LnR5cGUgPT09ICdkb3VibGUnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXQgPSBgPHNwYW4+JHtyb3d9PC9zcGFuPjxzcGFuIGNsYXNzPSJsdW5hci10aW1lIj4ke3Jvd3NbaSArIDFdIHx8ICcnfTwvc3Bhbj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0ID0gYDxzcGFuPiR7cm93fTwvc3Bhbj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh4LmlkKS5pbm5lckhUTUwgPSBvdXQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygiTHVuYXIgRXJyb3IiLCBlKTsgfQ0KICAgICAgICB9DQogICAgICAgIGxvYWRIaW5kdUx1bmFyKCk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5uYXYtc2VjdGlvbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LW1haW4taGVhZCB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyMnB4OyAvKiBTbGlnaHRseSBsYXJnZXIgZm9yIHRoZSBpY29uICovDQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAzcHggZG91YmxlICM4MDAwMDA7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtZ3JpZCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiA4cHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LWNvbCB7DQogICAgICAgICAgICBmbGV4OiAxOw0KICAgICAgICAgICAgbWluLXdpZHRoOiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1jb2wtdGl0bGUgew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjI7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7DQogICAgICAgICAgICBoZWlnaHQ6IDQycHg7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7DQogICAgICAgIH0NCg0KICAgICAgICAuYmctc2h5YW1hbGEgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzRiMDA4MjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5iZy1jaGFpdHJhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNiMjIyMjI7DQogICAgICAgIH0NCg0KICAgICAgICAuYmctYXNhZGhhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDY0MDA7DQogICAgICAgIH0NCg0KICAgICAgICAuYmctc2hhcmFkaGEgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmOGMwMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtYm94IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY5ZjA7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogOHB4IDRweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDZweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAubmF2LWJveCAuZC1kYXRlIHsNCiAgICAgICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzcHg7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5uYXYtYm94IC5kLWRheSB7DQogICAgICAgICAgICAgICAgY29sb3I6ICMwMDAwZmY7DQogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1mb290ZXIgew0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTVweDsNCiAgICAgICAgICAgIHBhZGRpbmctdG9wOiAxMnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICAgICAgZ2FwOiAxMnB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAuZXZlbnQtcGlsbCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmNGZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzAwMzM2NjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMThweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwOw0KICAgICAgICB9DQoNCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDgwMHB4KSB7DQogICAgICAgICAgICAubmF2LWdyaWQgew0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOw0KICAgICAgICAgICAgICAgIGdhcDogMTBweDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJuYXYtc2VjdGlvbiI+DQogICAgICAgIDxkaXYgaWQ9Im5hdi15ZWFyLXRpdGxlIiBjbGFzcz0ibmF2LW1haW4taGVhZCI+8J+qtyBOYXZhcmF0aHJpPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWdyaWQiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbC10aXRsZSBiZy1zaHlhbWFsYSI+U2h5YW1hbGE8YnI+TmF2YXJhdGhyaTwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbC1zaHlhbWFsYSI+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wtdGl0bGUgYmctY2hhaXRyYSI+Q2hhaXRyYTxicj5OYXZhcmF0aHJpPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0iY29sLWNoYWl0cmEiPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sLXRpdGxlIGJnLWFzYWRoYSI+QXNhZGhhPGJyPk5hdmFyYXRocmk8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjb2wtYXNhZGhhIj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbC10aXRsZSBiZy1zaGFyYWRoYSI+U2hhcmFkaGE8YnI+TmF2YXJhdGhyaTwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbC1zaGFyYWRoYSI+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWZvb3RlciI+DQogICAgICAgICAgICA8ZGl2IGlkPSJldi12YXNhbnRoYSIgY2xhc3M9ImV2ZW50LXBpbGwiPkxvYWRpbmcuLi48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImV2LWF5dWRoYSIgY2xhc3M9ImV2ZW50LXBpbGwiPkxvYWRpbmcuLi48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImV2LXZpamF5YSIgY2xhc3M9ImV2ZW50LXBpbGwiPkxvYWRpbmcuLi48L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkTmF2YXJhdGhyaSgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZC5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjdXJZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdi15ZWFyLXRpdGxlJykuaW5uZXJIVE1MID0gYPCfqrcgTmF2YXJhdGhyaSAtICR7Y3VyWWVhcn1gOw0KDQogICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0TmF2TGluZXMocGF0aCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBwYXRoIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0eHQucmVwbGFjZSgvPGJyXHMqXC8/Pi9naSwgJ1xuJykucmVwbGFjZSgvPFtePl0qPi9nLCAnJykuc3BsaXQoJ1xuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihzID0+IHMubGVuZ3RoID4gNSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgY29uZmlncyA9IFsNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbC1zaHlhbWFsYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS8wLjIuaHRtbCcgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbC1jaGFpdHJhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpLzAuMy5odG1sJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnY29sLWFzYWRoYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS8wLjQuaHRtbCcgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbC1zaGFyYWRoYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS8wLjEuaHRtbCcgfQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbmYgb2YgY29uZmlncykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGF3YWl0IGdldE5hdkxpbmVzKGNvbmYucGF0aCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBodG1sID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1tpXS5pbmNsdWRlcyhjdXJZZWFyKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9Im5hdi1ib3giPjxzcGFuIGNsYXNzPSJkLWRhdGUiPiR7bGluZXNbaV19PC9zcGFuPjxzcGFuIGNsYXNzPSJkLWRheSI+JHtsaW5lc1tpICsgMV0gfHwgJyd9PC9zcGFuPjwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmYuaWQpLmlubmVySFRNTCA9IGh0bWwgfHwgIjxkaXYgc3R5bGU9J3RleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjEwcHg7IGZvbnQtc2l6ZToxMXB4Oyc+Tm8gRGF0YTwvZGl2PiI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgZXZGaWxlcyA9IFsNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2V2LXZhc2FudGhhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpL0V2ZW50czIuaHRtbCcsIG1hdGNoOiAnVkFTQU5USEEgUEFOQ0hBTUknIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdldi1heXVkaGEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvRXZlbnRzMy5odG1sJywgbWF0Y2g6ICdBWVVESEEgUE9PSkEnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdldi12aWpheWEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvRXZlbnRzNC5odG1sJywgbWF0Y2g6ICdWSUpBWUEgREFTQU1JJyB9DQogICAgICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZXYgb2YgZXZGaWxlcykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBldi5wYXRoIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gdHh0LnJlcGxhY2UoL1xuL2csICcnKS5zcGxpdCgnLCcpLm1hcChzID0+IHMudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kRGF0ZSA9ICJOL0EiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydElkeCA9IHBhcnRzLmZpbmRJbmRleChwID0+IHAuaW5jbHVkZXMoZXYubWF0Y2gpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0SWR4ICE9PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHN0YXJ0SWR4OyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHNbal0uaW5jbHVkZXMoY3VyWWVhcikpIHsgZm91bmREYXRlID0gcGFydHNbal07IGJyZWFrOyB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXYuaWQpLmlubmVySFRNTCA9IGA8Yj4ke2V2Lm1hdGNofTwvYj4gOiAke2ZvdW5kRGF0ZX1gOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfQ0KICAgICAgICB9DQogICAgICAgIGxvYWROYXZhcmF0aHJpKCk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5ndXJ1LXNlY3Rpb24gew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtaGVhZCB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlZWU7DQogICAgICAgICAgICBtYXJnaW46IDAgMCAxNXB4Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ndXJ1LWxpc3Qgew0KICAgICAgICAgICAgbWF4LWhlaWdodDogNDAwcHg7DQogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOw0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtcm93LWl0ZW0gew0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwMzM2NjsNCiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgICAgICAgICAgcGFkZGluZzogMTJweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7DQogICAgICAgICAgICBib3JkZXItbGVmdDogNnB4IHNvbGlkICNmMGFkNGU7DQogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtZGF0ZSB7DQogICAgICAgICAgICBjb2xvcjogI2YwYWQ0ZTsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzQxNWE3NzsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAzcHg7DQogICAgICAgIH0NCg0KICAgICAgICAuZ3VydS1ldmVudC1saW5lIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4Ow0KICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiA1cHg7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTdHlsZSBmb3IgdGhlIGR5bmFtaWMgR3VydSBMaW5rcyAqLw0KICAgICAgICAuZ3VydS1saW5rIHsNCiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7DQogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb24tY29sb3I6ICNmMGFkNGU7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmd1cnUtbGluazpob3ZlciB7DQogICAgICAgICAgICAgICAgY29sb3I6ICNmMGFkNGU7DQogICAgICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9Imd1cnUtc2VjdGlvbiI+DQogICAgICAgIDxkaXYgY2xhc3M9Imd1cnUtaGVhZCI+8J+Vie+4jyBHdXJ1IEFyYWRoYW5hcyBhbmQgSmF5YW50aGlzPC9kaXY+DQogICAgICAgIDxkaXYgaWQ9Imd1cnUtZXZlbnQtbGlzdCIgY2xhc3M9Imd1cnUtbGlzdCI+DQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoyMHB4OyBjb2xvcjojNjY2OyI+U3luY2luZy4uLjwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBleHRyYWN0IDItZGlnaXQgbnVtYmVyIGFuZCBjcmVhdGUgdGhlIGxpbmsNCiAgICAgICAgZnVuY3Rpb24gd3JhcFdpdGhHdXJ1TGluayh0ZXh0KSB7DQogICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2goL1xkezJ9Lyk7DQogICAgICAgICAgICBpZiAobWF0Y2gpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBtYXRjaFswXTsNCiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9teWxhaXBlcml5YXZhLmdpdGh1Yi5pby9BY2hhcnlhL0Eke251bX0uaHRtbGA7DQogICAgICAgICAgICAgICAgcmV0dXJuIGA8YSBocmVmPSIke3VybH0iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iZ3VydS1saW5rIj4ke3RleHR9PC9hPmA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdGV4dDsNCiAgICAgICAgfQ0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRHdXJ1QXJhZGhhbmFzKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBwID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogcCB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gYXdhaXQgci5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdCA9IGQuYWNjZXNzX3Rva2VuOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBub3cuc2V0SG91cnMoMCwgMCwgMCwgMCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9QYW5jaGFuZy9HdXJ1L0V2ZW50cy5odG1sJyB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgcmF3VGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjbGVhblRleHQgPSByYXdUZXh0LnJlcGxhY2UoLzxbXj5dKj4vZywgJ1xuJyk7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBjbGVhblRleHQuc3BsaXQoJ1xuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihzID0+IHMubGVuZ3RoID4gMCk7DQoNCiAgICAgICAgICAgICAgICBsZXQgZ3JvdXBlZEV2ZW50cyA9IHt9Ow0KDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50TGluZSA9IGxpbmVzW2ldOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gY3VycmVudExpbmUubWF0Y2goLyhcZHsyfSktKFxkezJ9KS0oXGR7NH0pLyk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKG0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50RGF0ZU9iaiA9IG5ldyBEYXRlKHBhcnNlSW50KG1bM10pLCBwYXJzZUludChtWzJdKSAtIDEsIHBhcnNlSW50KG1bMV0pKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50RGF0ZU9iaiA+PSBub3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gY3VycmVudExpbmU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGV0YWlsID0gbGluZXNbaSArIDFdIHx8ICIiOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFncm91cGVkRXZlbnRzW2RhdGVTdHJdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwZWRFdmVudHNbZGF0ZVN0cl0gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBlZEV2ZW50c1tkYXRlU3RyXS5wdXNoKGRldGFpbCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBsZXQgbGlzdEh0bWwgPSAiIjsNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgaW4gZ3JvdXBlZEV2ZW50cykgew0KICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB0aGUgbGluayB3cmFwcGVyIHRvIGVhY2ggZXZlbnQgbGluZQ0KICAgICAgICAgICAgICAgICAgICBsZXQgZXZlbnRzSHRtbCA9IGdyb3VwZWRFdmVudHNbZGF0ZV0NCiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZXZ0ID0+IGA8c3BhbiBjbGFzcz0iZ3VydS1ldmVudC1saW5lIj7igKIgJHt3cmFwV2l0aEd1cnVMaW5rKGV2dCl9PC9zcGFuPmApDQogICAgICAgICAgICAgICAgICAgICAgICAuam9pbignJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGlzdEh0bWwgKz0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3VydS1yb3ctaXRlbSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imd1cnUtZGF0ZSI+JHtkYXRlfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJndXJ1LWRldGFpbCI+JHtldmVudHNIdG1sfTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3VydS1ldmVudC1saXN0JykuaW5uZXJIVE1MID0gbGlzdEh0bWwgfHwgIjxkaXYgc3R5bGU9J3RleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjIwcHg7Jz5ObyB1cGNvbWluZyBldmVudHMgZm91bmQuPC9kaXY+IjsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndXJ1LWV2ZW50LWxpc3QnKS5pbm5lckhUTUwgPSAiU3luYyBFcnJvci4iOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGxvYWRHdXJ1QXJhZGhhbmFzKCk7DQogICAgPC9zY3JpcHQ+DQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQogICAgDQogICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tdG9wOiAzMHB4OyBtYXJnaW4tYm90dG9tOiA1MHB4OyBmb250LWZhbWlseTogc2Fucy1zZXJpZjsiPg0KICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOiAjNTU1OyBmb250LXNpemU6IDE4cHg7IG1hcmdpbi1ib3R0b206IDE1cHg7Ij5JZiBhbnkgaXNzdWVzIHdpdGggdGhlIGFwcGxpY2F0aW9uIGNvbnRhY3QgQWRtaW48L2gzPg0KDQogICAgICAgIDxidXR0b24gb25jbGljaz0iY29udGFjdEFkbWluV2hhdHNBcHAoKSIgc3R5bGU9Ig0KICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjVEMzY2Ow0KICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgcGFkZGluZzogMTVweCAzMHB4Ow0KICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICBib3JkZXItcmFkaXVzOiA1MHB4Ow0KICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgzNywgMjExLCAxMDIsIDAuMyk7DQogICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4Ow0KICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4yczsNCiAgICAiIG9ubW91c2VvdmVyPSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0nc2NhbGUoMS4wNSknIiBvbm1vdXNlb3V0PSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0nc2NhbGUoMSknIj4NCiAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJtYXJnaW4tcmlnaHQ6IDEwcHg7Ij7wn5KsPC9zcGFuPiBNZXNzYWdlIEFkbWluDQogICAgICAgIDwvYnV0dG9uPg0KICAgIDwvZGl2Pg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGZ1bmN0aW9uIGNvbnRhY3RBZG1pbldoYXRzQXBwKCkgew0KICAgICAgICAgICAgY29uc3QgcGhvbmVOdW1iZXIgPSAiOTE4MDUwNzk0MjUyIjsNCiAgICAgICAgICAgIC8vIE9wdGlvbmFsOiBBZGQgYSBwcmUtZmlsbGVkIG1lc3NhZ2Ugc28geW91IGtub3cgd2hlcmUgdGhleSBhcmUgY29taW5nIGZyb20NCiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlbmNvZGVVUklDb21wb25lbnQoIkhlbGxvIEFkbWluLCBJIGFtIGZhY2luZyBhbiBpc3N1ZSB3aXRoIHRoZSBDRyBSZWNlaXB0IEFwcC4iKTsNCiAgICAgICAgICAgIGNvbnN0IHdoYXRzYXBwVXJsID0gYGh0dHBzOi8vd2EubWUvJHtwaG9uZU51bWJlcn0/dGV4dD0ke21lc3NhZ2V9YDsNCg0KICAgICAgICAgICAgd2luZG93Lm9wZW4od2hhdHNhcHBVcmwsICdfYmxhbmsnKTsNCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KDQoNCg0KICAgIA0KICAgIDxzY3JpcHQ+DQogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkU2V0dGluZ3NGaWxlKCkgew0KICAgICAgICAgICAgbGV0IGZpbGVDb250ZW50ID0gIiI7DQogICAgICAgICAgICBmZWF0dXJlcy5mb3JFYWNoKGZlYXQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwZXJtXyR7ZmVhdH1gKS52YWx1ZTsNCiAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSBgJHtmZWF0fXwke3ZhbH1cbmA7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gRm9yIG5vdywgd2Ugc2hvdyBpdCBpbiBhbiBhbGVydCBvciBsb2cuDQogICAgICAgICAgICAvLyBZb3UgY2FuIGNvcHkgdGhpcyB0ZXh0IGFuZCBzYXZlIGl0IGFzIHVzZXJuYW1lLnR4dA0KICAgICAgICAgICAgY29uc29sZS5sb2coIi0tLSBTRVRUSU5HUyBGSUxFIENPTlRFTlQgLS0tIik7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlQ29udGVudCk7DQoNCiAgICAgICAgICAgIC8vIE9wdGlvbmFsOiBUcmlnZ2VyIGFuIGFjdHVhbCBmaWxlIGRvd25sb2FkIGZvciB0aGUgdXNlcg0KICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtmaWxlQ29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOw0KICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gInVzZXJfc2V0dGluZ3NfdGVtcGxhdGUudHh0IjsNCiAgICAgICAgICAgIGxpbmsuY2xpY2soKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy9mdW5jdGlvbiBjb25zZW50QWN0aW9uKCkgew0KICAgICAgICAvLyAgICBhbGVydCgiQ29uc2VudCBHcmFudGVkIGZvciAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUpOw0KICAgICAgICAvLyAgICAvLyBMb2dpYyBmb3Igc2F2ZVJlY29yZCgpIHVzdWFsbHkgZm9sbG93cyBoZXJlDQogICAgICAgIC8vfQ0KDQogICAgICAgIC8vZnVuY3Rpb24gc2F2ZURhdGEoKSB7DQogICAgICAgIC8vICAgIGFsZXJ0KCJSZWNvcmQgU2F2ZWQgTG9jYWxseSIpOw0KICAgICAgICAvLyAgICAvLyBPcmlnaW5hbCBzYXZlUmVjb3JkKCkgbG9naWMgcmVtYWlucyBoZXJlDQogICAgICAgIC8vfQ0KDQoNCiAgICAgICAgZnVuY3Rpb24gbWF0Y2hSZWNvcmQoaWR4LCBxdWVyeSwgY29sSWR4KSB7DQogICAgICAgICAgICBjb25zdCBsaW5lID0gR0xPQkFMX0RCX0xJTkVTW2lkeF0udG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgIGlmIChjb2xJZHggPT09IC0xKSByZXR1cm4gbGluZS5pbmNsdWRlcyhxdWVyeSk7DQogICAgICAgICAgICBjb25zdCBjb2xzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgcmV0dXJuIChjb2xzW2NvbElkeF0gfHwgIiIpLmluY2x1ZGVzKHF1ZXJ5KTsNCiAgICAgICAgfQ0KDQoNCiAgICA8L3NjcmlwdD4NCg0KDQoNCg0KPC9ib2R5Pg0KPC9odG1sPg0K"))));</script>