<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5NTVBUIFJlY2VpcHQgU3lzdGVtIHYzMC40IC0gUmVzdG9yZWQ8L3RpdGxlPg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2h0bWwycGRmLmpzLzAuMTAuMS9odG1sMnBkZi5idW5kbGUubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvaHRtbDJjYW52YXMvMS40LjEvaHRtbDJjYW52YXMubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanNwZGYvMi41LjEvanNwZGYudW1kLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzcGRmLWF1dG90YWJsZS8zLjUuMjUvanNwZGYucGx1Z2luLmF1dG90YWJsZS5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDxzdHlsZT4NCg0KICAgICAgICAubW1wdC11bmlmaWVkLWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAyNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAzMHB4IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQgew0KICAgICAgICAgICAgd2lkdGg6IDE2MHB4OyAvKiBGaXhlZCB3aWR0aCBmb3IgcGVyZmVjdCBhbGlnbm1lbnQgKi8NCiAgICAgICAgICAgIGhlaWdodDogNDVweDsgLyogVW5pZmllZCBoZWlnaHQgKi8NCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzLCBib3gtc2hhZG93IDAuMnM7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQ6aG92ZXIgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsNCiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDZweCAxMnB4IHJnYmEoMCwwLDAsMC4xNSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5idG4tYWRtaW4tdW5pZmllZDphY3RpdmUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgIC8qIFRoZSBNYXN0ZXIgSGlkZSBSdWxlICovDQogICAgICAgIC8qIFRoaXMgcnVsZSBzdGF5cyBhY3RpdmUgZXZlbiBpZiB0aGUgdGFibGUgcmUtcmVuZGVycyAqLw0KICAgICAgICAucGVybS1oaWRkZW4gew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgZGlzYWJsZWQgZWxlbWVudHMgZ2V0IHRoZSBncmV5ZWQtb3V0IGxvb2sgKi8NCiAgICAgICAgYnV0dG9uOmRpc2FibGVkLA0KICAgICAgICBpbnB1dDpkaXNhYmxlZCwNCiAgICAgICAgc2VsZWN0OmRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGUwZTAgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjOTk5OTk5ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjY2NjICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBvcGFjaXR5OiAwLjY7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTYXZlIGJ1dHRvbiBzcGVjaWFsIGNvbG9yIHdoZW4gaXQgYmVjb21lcyBhY3RpdmUgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KDQoNCg0KICAgICAgICAvKiBDb250YWluZXIgZm9yIHRoZSAzLWNvbHVtbiB2aWV3ICovDQoNCiAgICAgICAgLyogVXBkYXRlZCBXb3Jrc3BhY2UgdG8gcHJldmVudCBvdmVybGFwcGluZyAqLw0KICAgICAgICAucmVjZWlwdC13b3Jrc3BhY2Ugew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAvKiBMT0NLIHRoZSBoZWlnaHQgaGVyZS4gU2lkZSBwYW5lbHMgd2lsbCBuZXZlciBiZSB0YWxsZXIgdGhhbiB0aGlzICovDQogICAgICAgICAgICBoZWlnaHQ6IDU1MHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnNpZGUtcGFuZWwgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgICAgLyogRm9yY2UgdGhlIHBhbmVsIHRvIG9iZXkgdGhlIHdvcmtzcGFjZSBoZWlnaHQgKi8NCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIC8qIFRoaXMgaGVpZ2h0OiAwIGlzIGEgdHJpY2sgdG8gbWFrZSBmbGV4Ym94IGlnbm9yZSB0aGUgaW1hZ2Uncw0KICAgICAgICBuYXR1cmFsIHNpemUgYW5kIGZvcmNlIGl0IHRvIHN0YXkgd2l0aGluIHRoZSBjb250YWluZXIgKi8NCiAgICAgICAgICAgIGhlaWdodDogMDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIGltZyB7DQogICAgICAgICAgICAgICAgLyogVGhlc2UgbGluZXMgZm9yY2UgdGhlIHNocmluayB3aXRob3V0IGxvc2luZyByYXRpbyAqLw0KICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgICAgIHdpZHRoOiBhdXRvOw0KICAgICAgICAgICAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluOw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICNyZWNlaXB0X2Rpc3BsYXlfYXJlYSB7DQogICAgICAgICAgICBmbGV4OiAwIDAgYXV0bzsNCiAgICAgICAgICAgIHdpZHRoOiA0ODBwdDsNCiAgICAgICAgICAgIC8qIFRoZSByZWNlaXB0IHNldHMgdGhlIGhlaWdodCBmb3IgdGhlIHdob2xlIHJvdyAqLw0KICAgICAgICB9DQoNCiAgICAgICAgLmV2ZW50LXBob3RvIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgfQ0KDQoNCg0KDQoNCiAgICAgICAgLmFjdGlvbi1mb290ZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAyMHB4Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAyMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1wZGYgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2QzMmYyZjsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi13YSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjVkMzY2Ow0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIENvbnNlbnQgU3BlY2lmaWMgU3R5bGVzICovDQogICAgICAgIC5idG4tY29uc2VudC1hY3RpdmUgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDAwMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgb3BhY2l0eTogMTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tY29uc2VudC1kaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOw0KICAgICAgICAgICAgb3BhY2l0eTogMC4zOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgb3JpZ2luYWwgc3R5bGVzIHByZXNlcnZlZCBmcm9tIGQ0MyAqLw0KICAgICAgICAucmVjZWlwdC1wcmV2aWV3LXJvdyB7DQogICAgICAgICAgICBncmlkLWNvbHVtbjogc3BhbiAyOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgcGFkZGluZzogMzBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZTA7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yZWNlaXB0LWNvbnRhaW5lciB7DQogICAgICAgICAgICB3aWR0aDogNDYwcHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAyLjVweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBzZXJpZjsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwOw0KICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5oZWFkZXItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY29sIHsNCiAgICAgICAgICAgIHdpZHRoOiA3MHB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmFkZHJlc3MtY29sIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC50cnVzdC1uYW1lIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNwdDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRydXN0LWRldGFpbHMgew0KICAgICAgICAgICAgZm9udC1zaXplOiA3LjVwdDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjE7DQogICAgICAgIH0NCg0KICAgICAgICAudmFyaWFibGUtcm93IHsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDZwdDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMwMDA7DQogICAgICAgICAgICBwYWRkaW5nOiAzcHQgMDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZGl2aWRlciB7DQogICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgIzAwMDsNCiAgICAgICAgICAgIG1hcmdpbjogNnB0IDA7DQogICAgICAgIH0NCg0KICAgICAgICAuZG9ub3ItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxhYmVsLWNvbCB7DQogICAgICAgICAgICB3aWR0aDogODVwdDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHQgMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5kYXRhLWNvbCB7DQogICAgICAgICAgICBmb250LXNpemU6IDkuNXB0Ow0KICAgICAgICAgICAgcGFkZGluZzogMnB0IDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdHJ1c3Qtc2lnbiB7DQogICAgICAgICAgICBmb250LXNpemU6IDEwcHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTVwdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdGF4LWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiA4cHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMnB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgOnJvb3Qgew0KICAgICAgICAgICAgLS1zYWZmcm9uOiAjRkY5OTMzOw0KICAgICAgICAgICAgLS1saWdodC1zYWZmcm9uOiAjRkZGNUU2Ow0KICAgICAgICAgICAgLS1kZWVwLXNhZmZyb246ICNGRjhDMDA7DQogICAgICAgICAgICAtLXRleHQtZGFyazogIzMzMzsNCiAgICAgICAgfQ0KDQogICAgICAgICogew0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtc2FmZnJvbik7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZGFyayk7DQogICAgICAgIH0NCg0KICAgICAgICAjYXV0aFNjcmVlbiB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMHZ3Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0LXNhZmZyb24pOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICB6LWluZGV4OiA5OTk5Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY2lyY2xlIHsNCiAgICAgICAgICAgIGhlaWdodDogNDBweDsNCiAgICAgICAgICAgIHdpZHRoOiA0MHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMik7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sb2dvLWxhcmdlIHsNCiAgICAgICAgICAgIGhlaWdodDogMTAwcHg7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm1hc3Rlci1oZWFkZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsNCiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjIlIDU2JSAyMiU7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zYWZmcm9uKTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmhlYWRlci1zZWN0aW9uIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjIpOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5oZWFkZXItc2VjdGlvbjpsYXN0LWNoaWxkIHsNCiAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IG5vbmU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLnNtYWxsLWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmlkLWJhZGdlIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkZGQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICMzMzM7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29udGFpbmVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjYWRkOGU2Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBBREQgVEhFIEZJWCBIRVJFICovDQogICAgICAgIC5lbnRyeS1jb250YWluZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwICFpbXBvcnRhbnQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29sdW1uIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBtaW4td2lkdGg6IDMwMHB4Ow0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC5mb3JtLWdyb3VwIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5mb3JtLWdyb3VwIGxhYmVsIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAgICAgY29sb3I6ICMwMDMzNjY7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAuZm9ybS1ncm91cCBpbnB1dCwgLmZvcm0tZ3JvdXAgc2VsZWN0LCAuZm9ybS1ncm91cCB0ZXh0YXJlYSB7DQogICAgICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICAgICAgcGFkZGluZzogNHB4Ow0KICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAuc3RhdHVzLWNoZWNrcyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMjBweDsNCiAgICAgICAgICAgIGdyaWQtY29sdW1uOiBzcGFuIDI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFjdGlvbiB7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgbWluLXdpZHRoOiA4MHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ29uc2VudCBTcGVjaWZpYyBTdHlsZXMgKi8NCiAgICAgICAgLmJ0bi1jb25zZW50LWFjdGl2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBvcGFjaXR5OiAxOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1jb25zZW50LWRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmNjY2MgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjNjY2Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDsNCiAgICAgICAgICAgIG9wYWNpdHk6IDAuNjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tc2F2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmU4YjU3Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi11bmxvY2sgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YzOWMxMjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tbG9jayB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2Y4YzhkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1uYXYgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjBmMDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLXJuIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyMjhiMjI7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAjZmllbGRfc2VhcmNoIHsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMyMjhiMjIgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIEFjdGlvbiBCdXR0b24gUm93IFN0eWxpbmcgKi8NCiAgICAgICAgLmJ0bi1hY3Rpb24sIC5idG4tc2F2ZSwgLmJ0bi1sb2NrLCAuYnRuLXVubG9jayB7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIHdpZHRoICovDQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIGhlaWdodCAqLw0KICAgICAgICAgICAgbWFyZ2luOiA1cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBISUdIIENPTlRSQVNUIFVOTE9DSzogQnJpZ2h0IEdvbGQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fdW5sb2NrOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkQ3MDAgIWltcG9ydGFudDsgLyogR29sZCAqLw0KICAgICAgICAgICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDsgLyogQmxhY2sgdGV4dCBmb3IgY29udHJhc3QgKi8NCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNEQUE1MjA7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTQVZFOiBHcmVlbiB3aGVuIGVuYWJsZWQgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzFlN2UzNDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIExPQ0s6IE9yYW5nZS9SZWQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fbG9jazpub3QoOmRpc2FibGVkKSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmQ3ZTE0ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNkOTZkMTI7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBESVNBQkxFRCBTVEFURTogVW5pdmVyc2FsIGxvb2sgZm9yIGFsbCBidXR0b25zICovDQogICAgICAgIGJ1dHRvbjpkaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogI2EwYTBhMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYyAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgb3BhY2l0eTogMC41Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ2hlY2tib3ggUm93IENvbnRhaW5lciAqLw0KICAgICAgICAjY2hlY2tib3hfcm93IHsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zczsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQWN0aW9uIEJ1dHRvbiBzaXppbmcgKi8NCiAgICAgICAgI2J0bl91bmxvY2ssICNidG5fbG9jaywgI2J0bl9zYXZlIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMTBweDsNCiAgICAgICAgICAgIGhlaWdodDogMzhweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC8qIEJpZyBXYWl0IE1lc3NhZ2UgT3ZlcmxheSAqLw0KICAgICAgICAjbG9hZGluZ092ZXJsYXkgew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgICAgICAgIHRvcDogMDsNCiAgICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC43KTsNCiAgICAgICAgICAgIHotaW5kZXg6IDk5OTk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBwYWRkaW5nLXRvcDogMjAlOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyNHB0Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KLyoNCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgTWFrZXMgcmVzcG9uaXZlIHNpemUgLSBmb3IgUk4sIFJlY29yZCBhbmQgUmVjZWlwdCBOdW1iZXINCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KICAgICAgICAvKiBBREQgVEhJUyBMSU5FIFRPIEZJWCBUSEUgVE9QIFJPVyAmIFJFQ09SRCBOVU1CRVJTICovDQogICAgICAgIGRpdltzdHlsZSo9ImRpc3BsYXk6IGZsZXgiXSB7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXAgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGdhcDogMTBweCAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHk+DQoNCiAgICA8ZGl2IGlkPSJsb2FkaW5nT3ZlcmxheSI+QXNzaWduaW5nIE5ldyBSZWNlaXB0IE51bWJlci4uLiBQbGVhc2UgV2FpdDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibG9hZGluZy1vdmVybGF5IiBzdHlsZT0icG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC45KTsgei1pbmRleDogOTk5OTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGRpc3BsYXk6IG5vbmU7Ij4NCiAgICAgICAgPGRpdiBzdHlsZT0iYm9yZGVyOiA1cHggc29saWQgI2YzZjNmMzsgYm9yZGVyLXRvcDogNXB4IHNvbGlkICMzNDk4ZGI7IGJvcmRlci1yYWRpdXM6IDUwJTsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTsiPjwvZGl2Pg0KICAgICAgICA8cCBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICMzMzM7Ij5QbGVhc2Ugd2FpdCAtIFdvcmtpbmcuLi48L3A+DQogICAgPC9kaXY+DQoNCiAgICA8c3R5bGU+DQogICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7DQogICAgICAgICAgICAwJSB7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIDEwMCUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQoNCiAgICA8ZGl2IGlkPSJhdXRoU2NyZWVuIj4NCiAgICAgICAgPGRpdiBpZD0ibG9nb0NvbnRhaW5lciI+PC9kaXY+DQogICAgICAgIDxoMiBzdHlsZT0iY29sb3I6IHZhcigtLWRlZXAtc2FmZnJvbik7IG1hcmdpbjogNXB4IDA7Ij5NTVBUIFN5c3RlbTwvaDI+DQogICAgICAgIDxwIGlkPSJzdGF0dXNNc2ciPkNvbm5lY3RpbmcgdG8gQ2xvdWQuLi48L3A+DQogICAgICAgIDxwPkRldmljZSBJRDogPHNwYW4gaWQ9ImRpc3BsYXlEZXZpY2VJRCIgY2xhc3M9ImlkLWJhZGdlIj4uLi48L3NwYW4+PC9wPg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibWFpbkFwcENvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KDQoNCiAgICAgICAgPGhlYWRlciBjbGFzcz0ibWFzdGVyLWhlYWRlciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItc2VjdGlvbiI+DQogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW46MDsgZm9udC1zaXplOjE0cHg7Ij5Vc2VycyBPbmxpbmU8L2gzPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImFjdGl2ZVVzZXJMaXN0IiBjbGFzcz0ic21hbGwtaW5mbyI+LS0tPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZ2FwOjE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ibG9nb0hlYWRlckNvbnRhaW5lciI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8aDEgc3R5bGU9Im1hcmdpbjowOyBmb250LXNpemU6MjBweDsiPk15bGFpIE1haGFwZXJpeWF2YSBBbnVzaGFtIFRydXN0PC9oMT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDRweDsgZm9udC1zaXplOiAxMnB4OyBmb250LXdlaWdodDogYm9sZDsgb3BhY2l0eTogMC45OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVjZWlwdCBHZW5lcmF0aW9uIFNvZnR3YXJlIFZlcnNpb246IDxzcGFuIGlkPSJkaXNwbGF5VmVyc2lvbiI+PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGFzaGJvYXJkLWNvbnRhaW5lciI+DQogICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJzdGF0cy10YWJsZSI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsLWluZm8iIHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMnB4IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pkxhc3QgUmVjOiA8c3BhbiBpZD0iZGFzaF9sYXN0X3JlYyI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+QmFuazogPHNwYW4gaWQ9ImRhc2hfYmFua19kYXRlIj4tLS08L3NwYW4+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5MYXRlc3Q6IDxzcGFuIGlkPSJkYXNoX2xhdGVzdF9yZWMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PkV4cDogPHNwYW4gaWQ9ImRhc2hfZXhwZW5zZXMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlJlYWR5OiA8c3BhbiBpZD0iZGFzaF9yZWFkeV9jb3VudCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+Q2FzaDogPHNwYW4gaWQ9ImRhc2hfY2FzaCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8L2hlYWRlcj4NCg0KDQogICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbnRhaW5lciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbnRyeS1jb2x1bW4iPg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyBiYWNrZ3JvdW5kOiAjMWEyMzdlOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBzdHJldGNoOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsgYm94LXNoYWRvdzogaW5zZXQgMCAwIDEwcHggcmdiYSgwLDAsMCwwLjMpOyI+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjMpOyBwYWRkaW5nLWJvdHRvbTogOHB4OyBtYXJnaW4tYm90dG9tOiAxMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IkFMTCIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IEFMTDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjIxLTIyIiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjEtMjI8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyMi0yMyIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDIyLTIzPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjMtMjQiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyMy0yNDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjI0LTI1IiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjQtMjU8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyNS0yNiIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDI1LTI2PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjYtMjciIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyNi0yNzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6ICNGRkVCM0IgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iUlIiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiBSUjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgtMSkiPiYjMTAwOTQ7PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9InJlY19zbGlkZXIiIHN0eWxlPSJmbGV4OiAxOyIgb25pbnB1dD0iY2hlY2tVbnNhdmVkQ2hhbmdlcygoKSA9PiB7IGlmKHZhbGlkYXRlTmF2aWdhdGlvblNlY3VyaXR5KHRoaXMudmFsdWUpKSBuYXZpZ2F0ZURhdGFiYXNlKHRoaXMudmFsdWUpOyB9KSI+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgxKSI+JiMxMDA5NTs8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWxlZnQ6IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI0ZGRUIzQjsgbWFyZ2luLWJvdHRvbTogMnB4OyI+UkVDRUlQVCBOTzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3JlY25vIiBzdHlsZT0id2lkdGg6IDE0MHB4OyBoZWlnaHQ6IDM4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IDkwMDsgZm9udC1zaXplOiAxNnB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlcjogMnB4IHNvbGlkICNGRjk5MzM7IGJhY2tncm91bmQ6ICNmZmY7IGNvbG9yOiAjMDAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IG1hcmdpbi1ib3R0b206IDJweDsiPlJlYzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJlY29yZE51bWJlckRpc3BsYXkiIHJlYWRvbmx5IHN0eWxlPSJ3aWR0aDogNDVweDsgaGVpZ2h0OiAzOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyOiBub25lOyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogI2UwZTBlMDsgY29sb3I6ICMxYTIzN2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Im5ld19yZWNfYnRuIiBjbGFzcz0iYnRuLXJuIiBzdHlsZT0iaGVpZ2h0OiAzOHB4OyBtaW4td2lkdGg6IDUwcHg7IGJhY2tncm91bmQ6ICNmNDQzMzY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IiBvbmNsaWNrPSJnZW5lcmF0ZU5ld1JOKCkiPlJOPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5OYW1lPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX25hbWUiIG9uaW5wdXQ9InZhbGlkYXRlQ29uc2VudCgpIj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QWRkcmVzczwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9hZGRyZXNzIiByb3dzPSI0Ij48L3RleHRhcmVhPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UGluL0NvdW50cjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyBmbGV4OjE7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfcGluY29kZSIgc3R5bGU9IndpZHRoOiA1MCU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfY291bnRyeSIgc3R5bGU9IndpZHRoOiA1MCU7IiB2YWx1ZT0iSU5ESUEiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RW1haWw8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZW1haWwiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5TdGFyPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3N0YXIiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Hb3RocmFtPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX2dvdGhyYW0iPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbHVtbiI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZGF0ZSI+PC9kaXY+DQogICAgICAgICAgICAgICAgDQoNCg0KICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAxMDBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMDAzMzY2OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBwYWRkaW5nLWxlZnQ6IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZWxlcGhvbmUNCiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IHBhZGRpbmctbGVmdDogMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9waG9uZSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJmbGV4OiAxOyBoZWlnaHQ6IDI1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQtY29sb3I6ICNmZmZkZTY7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJidG5fZmV0Y2giIGRpc2FibGVkIG9uY2xpY2s9ImZldGNoRG9ub3JEZXRhaWxzKCkiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiA1NXB4OyBoZWlnaHQ6IDI3cHg7IGZvbnQtc2l6ZTogMTFweDsgY3Vyc29yOiBwb2ludGVyOyBib3JkZXItcmFkaXVzOiAzcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZldGNoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QW1vdW50PC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZmllbGRfYW1vdW50IiBvbmlucHV0PSJ2YWxpZGF0ZUNvbnNlbnQoKSI+PC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPk1vZGU8L2xhYmVsPjxzZWxlY3QgaWQ9ImZpZWxkX21vZGUiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ub3dhcmRzPC9sYWJlbD48c2VsZWN0IGlkPSJmaWVsZF90b3dhcmRzIiBvbmNoYW5nZT0idmFsaWRhdGVDb25zZW50KCkiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5UcmFucy4gUmVmLjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9yZWYiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Db21tZW50czwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9jb21tZW50cyIgcm93cz0iMiI+PC90ZXh0YXJlYT48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+UEFOPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3BhbiI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjaGVja2JveF9yb3ciIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmUwOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY2FuY2VsIj4gQ2FuY2VsDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByaW50ZWQiPiBQcmludGVkDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByYXNhZGFtIj4gUHJhc2FkYW0NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY29ycHVzIj4gQ29ycHVzIFNpZ25lZA0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjogc3BhbiAyOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6IDEwcHg7IG1hcmdpbi10b3A6IDE1cHg7IHBhZGRpbmctdG9wOiAxNXB4OyBib3JkZXItdG9wOiAycHggc29saWQgIzY2NjsiPg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyI+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fc2F2ZSIgY2xhc3M9ImJ0bi1zYXZlIiBvbmNsaWNrPSJzYXZlUmVjb3JkKCkiIGRpc2FibGVkPlNhdmU8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9jb25zZW50IiBjbGFzcz0iYnRuLWFjdGlvbiBidG4tY29uc2VudC1kaXNhYmxlZCIgZGlzYWJsZWQgb25jbGljaz0iY29uc2VudEFjdGlvbigpIj5Db25zZW50PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fdW5sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0idG9nZ2xlTG9jayhmYWxzZSkiPlVubG9jazwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0iY29uZmlybUxvY2soKSIgZGlzYWJsZWQ+TG9jazwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5TdW1tYXJ5IiBvbmNsaWNrPSJzaG93RG9uYXRpb25TdW1tYXJ5KCkiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1sZWZ0OiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgU3VtbWFyeQ0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJhbmstc3luYy1idG4iIG9uY2xpY2s9InVwZGF0ZUJhbmtTdGF0ZW1lbnRzKHdpbmRvdy5BQ0NFU1NfVE9LRU4pIiBzdHlsZT0iYmFja2dyb3VuZDojMjdhZTYwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMHB4OyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo0cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXdlaWdodDpib2xkOyI+QmFuayBVcGRhdGU8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1hY3Rpb24iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMTdhMmI4OyBjb2xvcjogd2hpdGU7IiBvbmNsaWNrPSJsb2NhdGlvbi5yZWxvYWQoKSI+UmVmcmVzaDwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tYWRtaW4tYWNjZXNzIiBjbGFzcz0iYnRuLWFjdGlvbiIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMxN2EyYjg7IGNvbG9yOiB3aGl0ZTsiIG9uY2xpY2s9InRvZ2dsZUFkbWluVGFibGUoKSI+QWRtaW48L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tZGV2b3RlZS1hY2Nlc3MiIGNsYXNzPSJidG4tYWN0aW9uIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzE3YTJiODsgY29sb3I6IHdoaXRlOyIgb25jbGljaz0id2luZG93Lm9wZW4oJ2h0dHBzOi8vbW1wdGRldm90ZWVzLm5ldGxpZnkuYXBwJywgJ19ibGFuaycpIj5EZXZvdGVlPC9idXR0b24+DQoNCg0KICAgICAgICAgICAgICAgIDxicj48YnI+DQoNCg0KDQoNCg0KDQogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleC1ncm93OiAxOyI+PC9kaXY+DQoNCg0KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfc2VhcmNoIiBwbGFjZWhvbGRlcj0iU2VhcmNoLi4uIj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJzZWFyY2hCdG4iIGNsYXNzPSJidG4tcm4iIG9uY2xpY2s9InBlcmZvcm1TZWFyY2goKSI+U2VhcmNoPC9idXR0b24+DQoNCg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6IDExcHg7IGNvbG9yOiAjNTU1OyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogI2ZmZjsgcGFkZGluZzogNXB4OyBib3JkZXI6IDFweCBkYXNoZWQgI2NjYzsiPg0KICAgICAgICAgICAgICAgICogU2VhcmNoIExvZ2ljOiBSZXZlcnNlIHNlYXJjaC4gTm8gUHJlZml4PUZ1bGwsIE0tPVBob25lLCBOLT1OYW1lLCBULT1UcmFucyBSZWYsIFAtPVBBTi4gTm90IGZvdW5kIHJlc2V0cyB0byBsYXRlc3QgcmVjb3JkLg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9InJlY2VpcHQtcHJldmlldy1yb3ciPg0KDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWNlaXB0LXdvcmtzcGFjZSI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2lkZS1wYW5lbCIgaWQ9ImxlZnQtZXZlbnRzIj4NCiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9ImV2ZW50MS5qcGciIGNsYXNzPSJldmVudC1waG90byIgYWx0PSJSZWNlbnQgRXZlbnQiPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgPGRpdiBpZD0icmVjZWlwdF9kaXNwbGF5X2FyZWEiPjwvZGl2Pg0KDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2lkZS1wYW5lbCIgaWQ9InJpZ2h0LWV2ZW50cyI+DQogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJldmVudDIuanBnIiBjbGFzcz0iZXZlbnQtcGhvdG8iIGFsdD0iUmVjZW50IEV2ZW50Ij4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQoNCiAgICAgICAgPC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1mb290ZXIiIHN0eWxlPSJncmlkLWNvbHVtbjogc3BhbiAyOyI+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tcGRmIiBvbmNsaWNrPSJkb3dubG9hZFJlY2VpcHRQREYoKSI+RG93bmxvYWQgUERGPC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4td2EiIG9uY2xpY2s9InNlbmRXaGF0c0FwcCgpIj5XaGF0c0FwcCBSZWNlaXB0PC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KDQoNCiAgICAgICAgPGRpdiBpZD0ic2VjdXJpdHlQb3J0YWwiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IHBvc2l0aW9uOmZpeGVkOyB0b3A6MTAlOyBsZWZ0OjEwJTsgd2lkdGg6ODAlOyBoZWlnaHQ6ODAlOyBiYWNrZ3JvdW5kOndoaXRlOyBib3JkZXI6MnB4IHNvbGlkICMzMzM7IHotaW5kZXg6OTk5OTsgb3ZlcmZsb3cteTphdXRvOyBwYWRkaW5nOjIwcHg7IGJveC1zaGFkb3c6IDBweCAwcHggMjBweCByZ2JhKDAsMCwwLDAuNSk7Ij4NCiAgICAgICAgICAgIDxoMz5Vc2VyIEFjY2VzcyBDb250cm9sIExpc3Q8L2gzPg0KICAgICAgICAgICAgPHA+VG9nZ2xlIGFjY2VzcyBmb3IgZmVhdHVyZXMuICJZIiA9IFZpc2libGUsICJOIiA9IEhpZGRlbi48L3A+DQogICAgICAgICAgICA8dGFibGUgaWQ9InBlcm1UYWJsZSIgYm9yZGVyPSIxIiBzdHlsZT0id2lkdGg6MTAwJTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyI+DQogICAgICAgICAgICAgICAgPHRoZWFkPjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZWVlOyI+PHRoPkZlYXR1cmUvT2JqZWN0PC90aD48dGg+QWNjZXNzIChZL04pPC90aD48L3RyPjwvdGhlYWQ+DQogICAgICAgICAgICAgICAgPHRib2R5IGlkPSJwZXJtQm9keSI+PC90Ym9keT4NCiAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICA8YnI+DQogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvd25sb2FkU2V0dGluZ3NGaWxlKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOmdyZWVuOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMHB4OyI+R2VuZXJhdGUgU2V0dGluZ3MgRmlsZTwvYnV0dG9uPg0KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VjdXJpdHlQb3J0YWwnKS5zdHlsZS5kaXNwbGF5PSdub25lJyI+Q2xvc2U8L2J1dHRvbj4NCiAgICAgICAgPC9kaXY+DQoNCg0KDQoNCiAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KDQoNCiAgICA8ZGl2IGlkPSJhZG1pbi1wYW5lbC1jb250YWluZXIiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IG1hcmdpbi10b3A6MjBweDsgbWF4LXdpZHRoOiA4MDBweDsiPg0KICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOiAjMDAzMzY2OyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206IDEwcHg7Ij5BZG1pbmlzdHJhdGl2ZSBDb250cm9sIFBhbmVsPC9oMz4NCiAgICAgICAgPHRhYmxlIGJvcmRlcj0iMCIgc3R5bGU9IndpZHRoOjEwMCU7IGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7IGJvcmRlci1zcGFjaW5nOiAxMnB4OyI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwJTsiPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tY29udHJvbC1saXN0IiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6ICNjY2NjY2M7IGNvbG9yOiAjNjY2NjY2OyB3aWR0aDogMTAwJTsgY3Vyc29yOiBub3QtYWxsb3dlZDsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icmV0dXJuIGZhbHNlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRyb2wgTGlzdA0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6NTAlOyI+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZjA5M2ZiIDAlLCAjZjU1NzZjIDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQW5vbnlGaWxsKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQW5vbnlGaWxsDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzQzZTk3YiAwJSwgIzM4ZjlkNyAxMDAlKTsgd2lkdGg6IDEwMCU7IGNvbG9yOiAjMDAzMzY2OyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5NTVBUQmFja3VwKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQmFja3VwIFN5c3RlbQ0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmYTcwOWEgMCUsICNmZWUxNDAgMTAwJSk7IHdpZHRoOiAxMDAlOyBjb2xvcjogIzAwMzM2NjsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQ291bnRyeUZpZWxkQ29ycmVjdGlvbigpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvcnJlY3QgQ291bnRyeSBGaWVsZA0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2YTExY2IgMCUsICMyNTc1ZmMgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5DaXR5RXh0cmFjdGlvbigpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENpdHkgTmFtZXMNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmYwODQ0IDAlLCAjZmZiMTk5IDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQ2l0eUNvcnJlY3Rpb25BcHBseSgpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvcnJlY3QgQ2l0eSBOYW1lcw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMyYjU4NzYgMCUsICM0ZTQzNzYgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5Eb25vck5hbWVDaGVjaygpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIERvbm9yIE5hbWUgQ2hlY2sNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjYTQ0NWIyIDAlLCAjZDQxODcyIDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuRG9ub3JOYW1lQ29ycmVjdGlvbigpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvcnJlY3QgRG9ub3IgTmFtZQ0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMzMGNmZDAgMCUsICMzMzA4NjcgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5BZGRyZXNzQ2hlY2soKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBBZGRyZXNzIENoZWNrDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzA5MjAzZiAwJSwgIzUzNzg5NSAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkFkZHJlc3NDb3JyZWN0aW9uKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29ycmVjdCBBZGRyZXNzDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzhlNDRhZCAwJSwgIzczMmQ5MSAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InRyaWdnZXJGdWxsQXVkaXQoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBBdWRpdCBEYXRhYmFzZQ0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMyZWNjNzEgMCUsICMyN2FlNjAgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5QQU5Db3JyZWN0aW9uKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29ycmVjdCBQQU4NCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMDBiMDliIDAlLCAjOTZjOTNkIDEwMCUpOyB3aWR0aDogMTAwJTsgY29sb3I6ICMwMDMzNjY7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9ImdlbmVyYXRlQWRkcmVzc0xhYmVscygpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIEFkZHJlc3MgTGFiZWxzDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJsYWJlbC1jb3VudHJ5LWZpbHRlciIgc3R5bGU9IndpZHRoOjEwMCU7IGhlaWdodDo0NXB4OyBib3JkZXItcmFkaXVzOjhweDsgcGFkZGluZzoxMHB4OyBmb250LXdlaWdodDpib2xkOyBib3JkZXI6MnB4IHNvbGlkICMwMGIwOWI7IGJhY2tncm91bmQ6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBTEwiPkFsbCBDb3VudHJpZXM8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzFlM2M3MiAwJSwgIzJhNTI5OCAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1blVuaXF1ZURvbm9yTGlzdCgpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIERvbm9yIExpc3QNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZG9ub3Itc2VhcmNoLWlucHV0Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9IlNlYXJjaCAoZS5nLiBQcmFzYWQsIENoZW5uYWkgb3IgUHJhc2FkIDsgQ2hlbm5haSkiDQogICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6MTAwJTsgaGVpZ2h0OjQ1cHg7IGJvcmRlci1yYWRpdXM6OHB4OyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoycHggc29saWQgIzJhNTI5ODsiPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHIgaWQ9ImFkbWluLXBob3RvLXJvdyI+DQogICAgICAgICAgICAgICAgPHRkIGlkPSJzbmFwLWJveC0xIiBzdHlsZT0id2lkdGg6NTAlOyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoxNXB4OyBib3JkZXI6IDFweCBkYXNoZWQgI2NjYzsgYm9yZGVyLXJhZGl1czogOHB4OyI+PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQgaWQ9InNuYXAtYm94LTIiIHN0eWxlPSJ3aWR0aDo1MCU7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjE1cHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyBib3JkZXItcmFkaXVzOiA4cHg7Ij48L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICA8L3RhYmxlPg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8aHIgc3R5bGU9Im1hcmdpbi10b3A6IDQwcHg7IGJvcmRlcjogMDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7Ij4NCg0KICAgIDxzY3JpcHQ+DQoNCg0KICAgICAgICB2YXIgR0xPQkFMX0NJVFlfUkVQT1JUX0RBVEEgPSAiIjsNCiAgICAgICAgdmFyIEdMT0JBTF9ET05PUl9OQU1FX0RBVEEgPSAiIjsNCiAgICAgICAgdmFyIEdMT0JBTF9BRERSRVNTX0NPUlJFQ1RJT05fREFUQSA9ICIiOw0KDQogICAgICAgIGxldCByZWFkeUluZGljZXMgPSBbXTsgLy8gSG9sZHMgaW5kaWNlcyBmb3IgdGhlIFJSIGZpbHRlcg0KDQogICAgICAgIC8vIC0tLSBHTE9CQUwgU1RBQkxFIElEIFNFVFVQIC0tLQ0KICAgICAgICBsZXQgTU1QVF9HTE9CQUxfSUQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnTU1QVF9TVEFCTEVfSUQnKTsNCg0KICAgICAgICAvLyBGb3JjZSBhIG5ldyBJRCBpZiBpdCdzIGVtcHR5IE9SIGlmIGl0IGRvZXNuJ3QgaGF2ZSB5b3VyIHByZWZpeA0KICAgICAgICBpZiAoIU1NUFRfR0xPQkFMX0lEIHx8ICFNTVBUX0dMT0JBTF9JRC5zdGFydHNXaXRoKCJNTVBULURFVi1TVy0iKSkgew0KICAgICAgICAgICAgY29uc3QgcmFuZG9tU3VmZml4ID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDgpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICBNTVBUX0dMT0JBTF9JRCA9ICJNTVBULURFVi1TVy0iICsgcmFuZG9tU3VmZml4Ow0KICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ01NUFRfU1RBQkxFX0lEJywgTU1QVF9HTE9CQUxfSUQpOw0KICAgICAgICB9DQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQoNCg0KICAgICAgICBjb25zdCBmZWF0dXJlcyA9IFsNCiAgICAgICAgICAgIC8vIEZpc2NhbCBZZWFycw0KICAgICAgICAgICAgIkZZMjAyMS0yMDIyIiwgIkZZMjAyMi0yMDIzIiwgIkZZMjAyMy0yMDI0IiwgIkZZMjAyNC0yMDI1IiwgIkZZMjAyNS0yMDI2IiwNCiAgICAgICAgICAgIC8vIFVJIEVsZW1lbnRzIChSb3dzL1NlY3Rpb25zKQ0KICAgICAgICAgICAgIkFkbWluX1JvdyIsICJEYXNoYm9hcmRfU2VjdGlvbiIsICJIaXN0b3J5X1RhYiIsDQogICAgICAgICAgICAvLyBCdXR0b25zDQogICAgICAgICAgICAiYnRuX3NhdmUiLCAiYnRuX2RlbGV0ZSIsICJidG5fcHJpbnQiLCAiYnRuX2NhbmNlbCIsICJidG5fc3luYyIsICJidG5fZXhwb3J0Ig0KICAgICAgICBdOw0KDQoNCg0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1BvcnRhbCBTZWxlY3Rpb24gZm9yIGEgcGFydGljdWxhciB1c2VyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBvcGVuU2VjdXJpdHlQb3J0YWwodGFyZ2V0VXNlcikgew0KICAgICAgICAgICAgdXNlckxpc3QgPSB0ZXh0LnNwbGl0DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gKHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgPyB0IDogTU1QVF9BVVRIX0tFWTsNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3RhcmdldFVzZXJ9LnR4dGAgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IHNldHRpbmdzID0ge307DQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgdGV4dC5zcGxpdCgnXG4nKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSBzZXR0aW5nc1twYXJ0c1swXS50cmltKCldID0gcGFydHNbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9scyA9IFsnYnRuX3VubG9jaycsICdidG5fbG9jaycsICdzZWFyY2hCdG4nLCAnYmFuay1zeW5jLWJ0bicsICdidG5fY29uc2VudCcsICdidG5TdW1tYXJ5J107DQogICAgICAgICAgICAgICAgbGV0IHJvd3NIdG1sID0gIiI7DQoNCiAgICAgICAgICAgICAgICAvLyBMb29wIGZvciBZL04gZHJvcGRvd25zDQogICAgICAgICAgICAgICAgY29udHJvbHMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNldHRpbmdzW2lkXSB8fCAiWSI7DQogICAgICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IGZvbnQtZmFtaWx5OkFyaWFsOyBmb250LXdlaWdodDpib2xkOyI+JHtpZH08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzoxMHB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyI+PHNlbGVjdCBpZD0iaW5wdXQtJHtpZH0iIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjhweDsiPjxvcHRpb24gdmFsdWU9IlkiICR7dmFsID09PSAnWScgPyAnc2VsZWN0ZWQnIDogJyd9Plk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJOIiAke3ZhbCA9PT0gJ04nID8gJ3NlbGVjdGVkJyA6ICcnfT5OPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD48L3RyPmA7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICAvLyBTVEFSVDogVEhJUyBJUyBUSEUgRklFTEQgVEhBVCBXQVMgTUlTU0lORyBGUk9NIFlPVVIgU0NSRUVODQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNlY3Rpb25zID0gc2V0dGluZ3NbJ3NlY3Rpb25zJ10gfHwgIiI7DQogICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6MTVweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsgZm9udC1mYW1pbHk6QXJpYWw7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5zZWN0aW9uczwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6MTBweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5wdXQtc2VjdGlvbnMiIHZhbHVlPSIke2N1cnJlbnRTZWN0aW9uc30iIHBsYWNlaG9sZGVyPSJFbnRlciBkaWdpdHMgMTIzNDU2NyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjZTkxZTYzOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTFweDsgY29sb3I6IzY2NjsgbWFyZ2luLXRvcDo1cHg7Ij5UeXBlIDEtNyBoZXJlIHRvIHNob3cvaGlkZSBhcHAgY29udGFpbmVycy48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+YDsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCg0KICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGluZyBNaW5SZWNvcmROdW1iZXIgcm93DQogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE1pbiA9IHNldHRpbmdzWydNaW5SZWNvcmROdW1iZXInXSB8fCAiIjsNCiAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzoxNXB4OyBmb250LWZhbWlseTpBcmlhbDsgZm9udC13ZWlnaHQ6Ym9sZDsiPk1pblJlY29yZE51bWJlcjwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5wdXQtTWluUmVjb3JkTnVtYmVyIiB2YWx1ZT0iJHtjdXJyZW50TWlufSIgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjZTkxZTYzOyI+PC90ZD48L3RyPmA7DQoNCiAgICAgICAgICAgICAgICAvLyBUaGUgVUkgY29udGFpbmVyDQogICAgICAgICAgICAgICAgY29uc3QgcG9ydGFsSHRtbCA9IGA8ZGl2IGlkPSJwb3J0YWwtb3ZlcmxheSIgc3R5bGU9InBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7IHotaW5kZXg6MTAwMDA7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgcGFkZGluZzoyMHB4OyBvdmVyZmxvdy15OmF1dG87Ij48ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyB3aWR0aDo4MDBweDsgYWxpZ24tc2VsZjpmbGV4LXN0YXJ0OyI+PHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ij48dGJvZHk+JHtyb3dzSHRtbH08L3Rib2R5PjwvdGFibGU+PGRpdiBzdHlsZT0icGFkZGluZzoyMHB4OyB0ZXh0LWFsaWduOnJpZ2h0OyI+PGJ1dHRvbiBvbmNsaWNrPSJzYXZlUG9ydGFsU2V0dGluZ3MoJyR7dGFyZ2V0VXNlcn0nKSIgc3R5bGU9ImJhY2tncm91bmQ6IzgwMDAwMDsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MTBweCAyMHB4OyBjdXJzb3I6cG9pbnRlcjsiPlNBVkUgQ0hBTkdFUzwvYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2PmA7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgcG9ydGFsSHRtbCk7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGFsZXJ0KCJFcnJvcjogIiArIGUubWVzc2FnZSk7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1BvcnRhbCBTZWxlY3Rpb24gU2F2aW5nIGZvciAgYSBwYXJ0aWN1bGFyIHVzZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHNhdmVQb3J0YWxTZXR0aW5ncyh0YXJnZXRVc2VyKSB7DQogICAgICAgICAgICAvLyBDb2xsZWN0IGFsbCBmaWVsZHMgaW5jbHVkaW5nICdzZWN0aW9ucycNCiAgICAgICAgICAgIGNvbnN0IGlkcyA9IFsnYnRuX3VubG9jaycsICdidG5fbG9jaycsICdzZWFyY2hCdG4nLCAnYmFuay1zeW5jLWJ0bicsICdidG5fY29uc2VudCcsICdidG5TdW1tYXJ5JywgJ3NlY3Rpb25zJywgJ01pblJlY29yZE51bWJlciddOw0KICAgICAgICAgICAgbGV0IGZpbGVMaW5lcyA9IFtdOw0KDQogICAgICAgICAgICBpZHMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgaW5wdXQtJHtpZH1gKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIGZpbGVMaW5lcy5wdXNoKGAke2lkfSB8ICR7ZWwudmFsdWUudHJpbSgpfWApOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gZmlsZUxpbmVzLmpvaW4oJ1xuJyk7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSAodHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSA/IHQgOiBNTVBUX0FVVEhfS0VZOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3RhcmdldFVzZXJ9LnR4dGAsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IGZpbGVDb250ZW50DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJVcGRhdGVkIHN1Y2Nlc3NmdWxseSEiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRhbC1vdmVybGF5JykucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRVc2VyID09PSBNTVBUX1VTRVJfTkFNRSkgYXBwbHlVc2VyUGVybWlzc2lvbnModGFyZ2V0VXNlcik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBhbGVydCgiU2F2ZSBlcnJvcjogIiArIGUubWVzc2FnZSk7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0NvbnN0YW50cw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgY29uc3Qgc2NyaXB0VVJMID0gImh0dHBzOi8vc2NyaXB0Lmdvb2dsZS5jb20vbWFjcm9zL3MvQUtmeWNienpiaVpDM19veUFkU3VBVWdYUjZJQlFtTlozZkVSbWhIVVZ4Q01TeTdFQVlDWDhqWDZGZ2VxNE1rcWgtcWJNQVowL2V4ZWMiOw0KDQogICAgICAgIGNvbnN0IE1NUFRfVkVSU0lPTiA9ICIzMC40IjsNCiAgICAgICAgLy8gQWxsIG9yaWdpbmFsIEF1dGhlbnRpY2F0aW9uIEtleXMgcHJlc2VydmVkIGZyb20gZDQzDQogICAgICAgIGNvbnN0IE1NUFRfQVVUSF9LRVkgPSAnMmtnemR2ZWkxMGMzcm1qJzsNCiAgICAgICAgY29uc3QgTU1QVF9BVVRIX1NFQ1JFVCA9ICc3d2pscWszcWtvczZrb3InOw0KICAgICAgICBjb25zdCBNTVBUX0FVVEhfUkVGUkVTSCA9ICdIV2c2a1NURUdzc0FBQUFBQUFBQUFZNmpZXzdPdTdid1M4cFhCMzJjQy1TZ29IZGJWeGlGRDcwWGlVNDV6VTkyJzsNCg0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfREIgPSAnL0RhdGFCYXNlcy9NTVBUMi5LUCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9VU0VSUyA9ICcvU2V0dGluZ3MvVXNlcnMudHh0JzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX0FQUFJPVkVEID0gJy9TZXR0aW5ncy9BcHByb3ZlZC50eHQnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfTE9HTyA9ICcvSW1hZ2VzL0xvZ28uanBnJzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX0RST1BET1dOUyA9ICcvU2V0dGluZ3MvRHJvcERvd24udHh0JzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX0NBU0ggPSAnL1NldHRpbmdzL0Nhc2hEZXBvc2l0ZWQudHh0JzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX0JBTksgPSAnL0RhdGFCYXNlcy9NTVBUMy5LUCc7DQogICAgICAgIGNvbnN0IE1NUFRfVVJMX0VYUEVOU0VTID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvYTVlODh2anpiNncycW1lbDN5c3l4L0V4cGVuc2VzLnhsc3g/cmxrZXk9am1kOGkwanMxc2t4bDJ2eWF2czdwbzh5cCZkbD0xIjsNCiAgICAgICAgY29uc3QgQkFOS19TVEFURU1FTlRfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvZjI3bXV5bG9iZGFqdnpteGNpODVkL0JhbmtTdGF0ZW1lbnQueGxzP3Jsa2V5PXI0M2owc3ZubWxpZzNxbTZpYWlyYnRvamQmZGw9MSI7DQogICAgICAgIGNvbnN0IEVYRU1QVF9GSUxFID0gIi9TZXR0aW5ncy9FeGVtcHQudHh0IjsNCiAgICAgICAgY29uc3QgTU1QVF9MT0dfRElSID0gIi9Mb2dzLyI7IC8vIFRoZSBmb2xkZXIgZm9yIHVzZXIgbG9ncw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfU0VRID0gJy9EYXRhQmFzZXMvc2VxdWVuY2UudHh0JzsNCiAgICAgICAgbGV0IE1NUFRfUkFESU9fRklMRSA9ICcnOw0KDQogICAgICAgIGNvbnN0IE1NUFRfTElOS19BTk9OWSA9ICdodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpLzN0NWQ2ajJhcTF2YXpubDVpOXo3eC9Bbm9ueUZpbGwudHh0P3Jsa2V5PW54Zmw5eTI3cGVlcXYwdHN6ZWpjaTNmZTYmZGw9MSc7DQoNCiAgICAgICAgY29uc3QgTU1QVF9EQl9SQVdfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvajZ1M2hvMTRkeHlkcjV2Nmg1aGJpL01NUFQyLktQP3Jsa2V5PTNla3VycnE4d2t6MDhic3BpeHpnamo1enImc3Q9Y3B0eW5uYmQmcmF3PTEiOw0KDQogICAgICAgIGNvbnN0IENJVFlfQ09SUkVDVElPTlNfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvNDdmYnF3Nzlxb2x5Y3FiMzVzOHVnL0NpdHlDb3JyZWN0aW9ucy50eHQ/cmxrZXk9enczdWI3cjN0MmlvNGJkMnFxM2F1eTQ0eSZkbD0xIjsNCg0KICAgICAgICBjb25zdCBDT1VOVFJZX0NPUlJFQ1RJT05TX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2ducjFvMmQ0cmNiZGJ6NzVmeGZrYi9Db3VudHJ5Q29ycmVjdGlvbnMudHh0P3Jsa2V5PTc0Zmx0cnh5bThnMGc4OHFlaWVqajFid3omZGw9MSI7DQoNCiAgICAgICAgY29uc3QgTkFNRV9DT1JSRUNUSU9OU19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9icWJ4dnhiMWkyM3M4cmRvZjdqdjIvTmFtZUNvcnJlY3Rpb25zLnR4dD9ybGtleT1odHhlNTJnOGV5bTBuZXBhd3ZmaXM1Mm1oJmRsPTEiOw0KDQogICAgICAgIGNvbnN0IE1NUFRfQkFDS1VQX0RJUiA9ICcvQmFja3VwLyc7DQoNCiAgICAgICAgY29uc3QgTU1QVF9JTUdfRVZFTlQxID0gJy9JbWFnZXMvRXZlbnQxLmpwZyc7DQogICAgICAgIGNvbnN0IE1NUFRfSU1HX0VWRU5UMiA9ICcvSW1hZ2VzL0V2ZW50Mi5qcGcnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfRVZFTlRTX1RYVCA9ICcvSW1hZ2VzL0V2ZW50c0RldGFpbHMudHh0JzsNCg0KICAgICAgICB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA9IDA7IC8vIERlZmF1bHQ6IE5vIHJlc3RyaWN0aW9uDQoNCiAgICAgICAgY29uc3QgcGFuZWxDb250ZW50ID0gKHRpdGxlLCB1cmwpID0+IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmY5OTMzOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZsZXgtc2hyaW5rOiAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGl0bGV9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXZlbnQtaW1nLWNvbnRhaW5lciI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIke3VybH0iIGFsdD0iRXZlbnQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KYDsNCg0KICAgICAgICBsZXQgaXNEaXJ0eSA9IGZhbHNlOyAvLyBUcmFja3MgaWYgdGhlIHJlY29yZCBoYXMgdW5zYXZlZCBjaGFuZ2VzDQoNCiAgICAgICAgbGV0IE1NUFRfVEVNUDEgPSAiIjsNCiAgICAgICAgbGV0IE1NUFRfVEVNUDMgPSAiIjsNCg0KICAgICAgICBsZXQgTU1QVF9VU0VSX05BTUUgPSAiIjsNCiAgICAgICAgbGV0IE1NUFRfREVWSUNFX0lEID0gIiI7DQoNCg0KICAgICAgICBsZXQgR0xPQkFMX0RCX0xJTkVTID0gW107DQogICAgICAgIGxldCBjdXJyZW50UmVjb3JkSW5kZXggPSAwOw0KICAgICAgICBsZXQgbGFzdEZvdW5kU2VhcmNoSW5kZXggPSAtMTsNCiAgICAgICAgbGV0IHQgPSAiIjsNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Db25zZW50IGxldHRlciBkb3dubG9hZCBidXR0b24gZW5hYmxlIC8gZGlzYWJsZSBsb2dpYw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gLS0tIE5FVyBDT05TRU5UIExPR0lDIC0tLQ0KICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZUNvbnNlbnQoKSB7DQogICAgICAgICAgICBjb25zdCBhbXQgPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYW1vdW50JykudmFsdWUpIHx8IDA7DQogICAgICAgICAgICBjb25zdCB0b3dhcmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Rvd2FyZHMnKS52YWx1ZS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9jb25zZW50Jyk7DQoNCiAgICAgICAgICAgIC8vIFJ1bGU6IEVuYWJsZWQgKFNvbGlkIFJlZCkgaWYgVG93YXJkcyBpcyBDb3JwdXMgQU5EIEFtb3VudCA+PSAxMCwwMDANCiAgICAgICAgICAgIC8vIE90aGVyd2lzZTogRGlzYWJsZWQgKEZhZGVkIFJlZCkNCiAgICAgICAgICAgIGlmICh0b3dhcmRzLmluY2x1ZGVzKCJDT1JQVVMiKSAmJiBhbXQgPj0gMTAwMDApIHsNCiAgICAgICAgICAgICAgICBidG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gImJ0bi1hY3Rpb24gYnRuLWNvbnNlbnQtYWN0aXZlIjsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgYnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gImJ0bi1hY3Rpb24gYnRuLWNvbnNlbnQtZGlzYWJsZWQiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUG9wdWxhdGVzIHRoZSAyMCBmaWVsZHMgb2YgcmVjZWlwdHMgZnJvbSBkYiBmb3Igc2VsZWN0ZWQgcmVjZWlwdA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gZGlzcGxheVJlY29yZChpbmRleCkgew0KICAgICAgICAgICAgaWYgKCFHTE9CQUxfREJfTElORVNbaW5kZXhdKSByZXR1cm47DQoNCg0KICAgICAgICAgICAgLy8gQUREIFRISVMgTElORSBIRVJFOg0KICAgICAgICAgICAgcmVzZXRTaWRlUGFuZWxzKCk7DQoNCg0KICAgICAgICAgICAgY29uc3QgY29scyA9IEdMT0JBTF9EQl9MSU5FU1tpbmRleF0uc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgLy8gSGVscGVyIHRvIHNhZmVseSBzZXQgdmFsdWVzDQogICAgICAgICAgICBjb25zdCBzZXRWYWwgPSAoaWQsIHZhbCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgZWwudmFsdWUgPSB2YWwgPyB2YWwudHJpbSgpIDogIiI7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBjb25zdCBzZXRDaGVjayA9IChpZCwgdmFsKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgaWYgKGVsKSBlbC5jaGVja2VkID0gKHZhbD8udHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09ICJZRVMiKTsNCiAgICAgICAgICAgIH07DQoNCg0KICAgICAgICAgICAgLy8gQUREIFRISVMgTElORSBIRVJFOg0KICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCJ2aWV3ZWQgcmVjZWlwdCBudW1iZXI6ICIgKyAoY29sc1swXSB8fCAiQkxBTksiKSk7DQoNCiAgICAgICAgICAgIC8vIEVYQUNUIE1BUFBJTkcgRk9SIE1NUFQyLktQIChWMS43IFN0YW5kYXJkcykNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfcmVjbm8nLCBjb2xzWzBdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfZGF0ZScsIGNvbHNbMV0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9uYW1lJywgY29sc1syXSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3Bob25lJywgY29sc1szXSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2FkZHJlc3MnLCBjb2xzWzRdPy5yZXBsYWNlKC9+L2csICdcbicpKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfZW1haWwnLCBjb2xzWzVdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfcGFuJywgY29sc1s2XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3N0YXInLCBjb2xzWzddKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfZ290aHJhbScsIGNvbHNbOF0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9hbW91bnQnLCBjb2xzWzldKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfcmVmJywgY29sc1sxMF0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9tb2RlJywgY29sc1sxMV0pOw0KDQogICAgICAgICAgICAvLyBUb3dhcmRzIG9mdGVuIGNvbnRhaW5zIGEgc3VmZml4IChlLmcuLCAiQ09SUFVTIC0gODBHIiksIHdlIHRyaW0gaXQgZm9yIHRoZSBkcm9wZG93biBtYXRjaA0KICAgICAgICAgICAgY29uc3QgdG93YXJkc1JhdyA9IGNvbHNbMTJdIHx8ICIiOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF90b3dhcmRzJywgdG93YXJkc1Jhdy5zcGxpdCgnLScpWzBdLnRyaW0oKSk7DQoNCiAgICAgICAgICAgIHNldENoZWNrKCdmaWVsZF9jYW5jZWwnLCBjb2xzWzEzXSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2NvbW1lbnRzJywgY29sc1sxNF0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9waW5jb2RlJywgY29sc1sxNV0pOw0KICAgICAgICAgICAgc2V0Q2hlY2soJ2ZpZWxkX3ByaW50ZWQnLCBjb2xzWzE2XSk7DQogICAgICAgICAgICBzZXRDaGVjaygnZmllbGRfcHJhc2FkYW0nLCBjb2xzWzE3XSk7DQogICAgICAgICAgICBzZXRDaGVjaygnZmllbGRfY29ycHVzJywgY29sc1sxOF0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9jb3VudHJ5JywgY29sc1sxOV0gfHwgIklORElBIik7DQoNCiAgICAgICAgICAgIHRvZ2dsZUxvY2sodHJ1ZSk7DQogICAgICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRlQ29uc2VudCA9PT0gImZ1bmN0aW9uIikgdmFsaWRhdGVDb25zZW50KCk7DQogICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZVJlY2VpcHRQcmV2aWV3ID09PSAiZnVuY3Rpb24iKSB1cGRhdGVSZWNlaXB0UHJldmlldyhpbmRleCk7DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNvcmROdW1iZXJEaXNwbGF5JykudmFsdWUgPSBpbmRleDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1JlY2VpcHQgUHJldmlldw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUmVjZWlwdFByZXZpZXcoaW5kZXgpIHsNCiAgICAgICAgICAgIGNvbnN0IGYgPSBHTE9CQUxfREJfTElORVNbaW5kZXhdLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICBjb25zdCBsb2dvU3JjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5Mb2dvSW1nJyk/LnNyYyB8fCAiIjsNCg0KICAgICAgICAgICAgLy8gRXh0cmFjdCBzcGVjaWFsIHRvd2FyZHMge2JyYWNrZXRzfQ0KICAgICAgICAgICAgY29uc3QgY29tbWVudHMgPSBmWzE0XSB8fCAiIjsNCiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxNYXRjaCA9IGNvbW1lbnRzLm1hdGNoKC9cey4qP1x9Lyk7DQogICAgICAgICAgICBjb25zdCBzcGVjaWFsVG93YXJkcyA9IHNwZWNpYWxNYXRjaCA/IHNwZWNpYWxNYXRjaFswXSA6ICIiOw0KDQogICAgICAgICAgICAvLyBEYXRhIE1hcHBpbmcNCiAgICAgICAgICAgIGNvbnN0IHBpbmNvZGUgPSBmWzE1XSB8fCAiIjsNCiAgICAgICAgICAgIGNvbnN0IGNvdW50cnkgPSBmWzE5XSB8fCAiSU5ESUEiOw0KDQogICAgICAgICAgICAvLyAtLS0gV0FURVJNQVJLIExPR0lDIC0tLQ0KICAgICAgICAgICAgY29uc3QgaXNDYW5jZWxsZWQgPSAoZlsxM10/LnRyaW0oKS50b1VwcGVyQ2FzZSgpID09PSAiWUVTIik7DQogICAgICAgICAgICBjb25zdCB3YXRlcm1hcmtIVE1MID0gaXNDYW5jZWxsZWQgPw0KICAgICAgICAgICAgICAgIGA8ZGl2IHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogNTAlOyBsZWZ0OiA1MCU7IHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpIHJvdGF0ZSgtMzBkZWcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDYwcHQ7IGNvbG9yOiByZ2JhKDI1NSwgMCwgMCwgMC4yNSk7IGZvbnQtd2VpZ2h0OiBib2xkOyBib3JkZXI6IDEwcHggc29saWQgcmdiYSgyNTUsIDAsIDAsIDAuMjUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7IHotaW5kZXg6IDEwOyBwb2ludGVyLWV2ZW50czogbm9uZTsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDQU5DRUxMRUQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gIDogIiI7DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNlaXB0X2Rpc3BsYXlfYXJlYScpLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWNlaXB0LWNvbnRhaW5lciIgc3R5bGU9ImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBwb3NpdGlvbjogcmVsYXRpdmU7IG92ZXJmbG93OiBoaWRkZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt3YXRlcm1hcmtIVE1MfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iaGVhZGVyLXRhYmxlIiBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImxvZ28tY29sIiBzdHlsZT0id2lkdGg6IDcwcHQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7bG9nb1NyY30iIHN0eWxlPSJ3aWR0aDogNzBwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJhZGRyZXNzLWNvbCIgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0cnVzdC1uYW1lIiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTRwdDsiPk1ZTEFJIE1BSEFQRVJJWUFWQSBBTlVTSEFNIFRSVVNUIChSRUdELik8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idHJ1c3QtZGV0YWlscyIgc3R5bGU9ImZvbnQtc2l6ZTogOXB0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOZXcgTm8uIDQsIE9sZCBOby4gMjMsIFBpdGNodXBpbGxhaSBTdHJlZXQsIE15bGFwb3JlLCBDaGVubmFpLTYwMCAwMDQuPGJyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGhvbmU6IDYzODA4OTgyMzEsIDg2MTAyMTQxMzguIFdoYXRzQXBwOiA2MzgwODk4MjMxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InZhcmlhYmxlLXJvdyIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgbWFyZ2luLXRvcDogMTVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+RGF0ZTogJHtmWzFdfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJ0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTJwdDsiPlJFQ0VJUFQ8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5ObzogJHtmWzBdfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMTBwdDsgZm9udC1zaXplOiAxMC41cHQ7IGxpbmUtaGVpZ2h0OiAxLjY7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlY2VpdmVkIHdpdGggdGhhbmtzIFJzLiA8Yj4ke2ZbOV19PC9iPiAoPGI+UnVwZWVzICR7dG9Xb3JkcyhmWzldKX0gb25seTwvYj4pIGZvciA8Yj4ke2ZbMTJdfTwvYj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpYSAke2ZbMTFdfSA8Yj4ke2ZbMTBdIHx8ICcnfTwvYj4gZnJvbToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGl2aWRlciIgc3R5bGU9ImJvcmRlci10b3A6IDFweCBzb2xpZCAjY2NjOyBtYXJnaW46IDEwcHggMDsiPjwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iZG9ub3ItdGFibGUiIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgbGluZS1oZWlnaHQ6IDEuODsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6IDIwJTsgdmVydGljYWwtYWxpZ246IHRvcDsiPk5hbWU8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48Yj4ke2ZbMl19PC9iPjwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246IHRvcDsiPlBBTjwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtmWzZdIHx8ICdOL0EnfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyI+JHtzcGVjaWFsVG93YXJkc308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogdG9wOyI+UGhvbmU8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke2ZbM10gfHwgJ04vQSd9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogdG9wOyI+QWRkcmVzczwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7Zls0XX0gLSAke3BpbmNvZGV9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogdG9wOyI+Q291bnRyeTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7Y291bnRyeX08L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaXZpZGVyIiBzdHlsZT0iYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7IG1hcmdpbjogMTBweCAwOyI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogZmxleC1lbmQ7IG1hcmdpbi10b3A6IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOiA3cHQ7IGZvbnQtc3R5bGU6IGl0YWxpYzsiPipDb21wdXRlciBHZW5lcmF0ZWQgUmVjZWlwdCAtIE5vIHNpZ25hdHVyZSBSZXF1aXJlZDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9vdGVyLXRydXN0LXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogOXB0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIE1ZTEFJIE1BSEFQRVJJWUFWQSBBTlVTSEFNIFRSVVNUDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9vdGVyLXRheC1pbmZvIiBzdHlsZT0iZm9udC1zaXplOiA4cHQ7IG1hcmdpbi10b3A6IDE1cHg7IGJvcmRlci10b3A6IDFweCBkYXNoZWQgI2VlZTsgcGFkZGluZy10b3A6IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VjIDEyLUEgVmFsaWQgdGlsbCAzMS0wMy0yMDI2IHwgUEFOIEFBRVRNNTE0NUoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQpgOw0KDQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9GZXRjaCBEcm9ib3ggVG9rZW4gZnJvbSBhcGkNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEFsbCBBdXRoL1Rva2VuL0xvYWQgbG9naWMgcHJlc2VydmVkIGZyb20gZDQzDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldE1NUFRUb2tlbigpIHsNCiAgICAgICAgICAgIGNvbnN0IGggPSBidG9hKE1NUFRfQVVUSF9LRVkudHJpbSgpICsgIjoiICsgTU1QVF9BVVRIX1NFQ1JFVC50cmltKCkpOw0KICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS9vYXV0aDIvdG9rZW4nLCB7DQogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCYXNpYyAnICsgaCwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0sDQogICAgICAgICAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7ICdncmFudF90eXBlJzogJ3JlZnJlc2hfdG9rZW4nLCAncmVmcmVzaF90b2tlbic6IE1NUFRfQVVUSF9SRUZSRVNILnRyaW0oKSB9KQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBjb25zdCBkID0gYXdhaXQgci5qc29uKCk7IHJldHVybiBkLmFjY2Vzc190b2tlbiB8fCBudWxsOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vSW5pdGlhbGl6ZXMgZGF0YSBhdCBsYXVuY2guIHZlcnkgY3J1Y2lhbC4gcHJvYmxlbWF0aWMgZnVuY3Rpb24uIG5vdCB0byBiZSBkaXN0dXJiZWQuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplTU1QVCgpIHsNCiAgICAgICAgICAgIGNvbnN0IGN2cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOyBjb25zdCBnbCA9IGN2cy5nZXRDb250ZXh0KCd3ZWJnbCcpOw0KICAgICAgICAgICAgY29uc3QgZEkgPSBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2RlYnVnX3JlbmRlcmVyX2luZm8nKTsNCiAgICAgICAgICAgIGNvbnN0IHJlbiA9IGdsLmdldFBhcmFtZXRlcihkSS5VTk1BU0tFRF9SRU5ERVJFUl9XRUJHTCk7DQogICAgICAgICAgICBsZXQgaGFzaCA9IDA7IGNvbnN0IHN0ciA9IG5hdmlnYXRvci51c2VyQWdlbnQgKyByZW4gKyBzY3JlZW4ud2lkdGggKyBzY3JlZW4uaGVpZ2h0Ow0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgc3RyLmNoYXJDb2RlQXQoaSk7IGhhc2ggfD0gMDsgfQ0KICAgICAgICAgICAgLy9sZXQgZGV2SUQgPSAiTU1QVC1ERVYtU1ctIiArIE1hdGguYWJzKGhhc2gpOw0KICAgICAgICAgICAgLy9kZXZJRCA9IE1NUFRfR0xPQkFMX0lEOw0KDQogICAgICAgICAgICBjb25zdCBkZXZJRCA9IE1NUFRfR0xPQkFMX0lEOw0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcGxheURldmljZUlEJykuaW5uZXJUZXh0ID0gZGV2SUQ7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcGxheVZlcnNpb24nKS5pbm5lclRleHQgPSBNTVBUX1ZFUlNJT047DQogICAgICAgICAgICBNTVBUX0RFVklDRV9JRCA9IGRldklEOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHQgPSBhd2FpdCBnZXRNTVBUVG9rZW4oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsUiA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsgbWV0aG9kOiAnUE9TVCcsIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfTE9HTyB9KSB9IH0pOw0KICAgICAgICAgICAgICAgIGlmIChsUi5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBiID0gYXdhaXQgbFIuYmxvYigpOyBjb25zdCB1ID0gVVJMLmNyZWF0ZU9iamVjdFVSTChiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ29Db250YWluZXInKS5pbm5lckhUTUwgPSBgPGltZyBzcmM9IiR7dX0iIGNsYXNzPSJsb2dvLWNpcmNsZSBsb2dvLWxhcmdlIj5gOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb0hlYWRlckNvbnRhaW5lcicpLmlubmVySFRNTCA9IGA8aW1nIGlkPSJtYWluTG9nb0ltZyIgc3JjPSIke3V9IiBjbGFzcz0ibG9nby1jaXJjbGUiPmA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnN0IGFSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgeyBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9BUFBST1ZFRCB9KSB9IH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFUID0gYXdhaXQgYVIudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgLy8gMS4gTVVTVCBCRSBPVVRTSURFOiBEZWZpbmUgdGhlIElEIGNsZWFybHkNCiAgICAgICAgICAgICAgICBNTVBUX0RFVklDRV9JRCA9IGRldklEOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gVEhFIE1BSU4gR0FURQ0KICAgICAgICAgICAgICAgIGlmIChhVCAmJiBhVC5pbmNsdWRlcyhNTVBUX0RFVklDRV9JRCkgJiYgTU1QVF9ERVZJQ0VfSUQgIT09ICIiKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gSU5TRVJUIFRISVMgTElORSBIRVJFOg0KICAgICAgICAgICAgICAgICAgICBydW5QZXJzb25hbFNlY3VyaXR5R2F0ZShhVCwgZGV2SUQpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBTVUNDRVNTIFBBVEggLS0tDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJBY2Nlc3MgR3JhbnRlZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aFNjcmVlbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQXBwQ29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQoNCiAgICAgICAgICAgICAgICAgICAgbG9hZERhdGEodCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMS4gTG9nIHRoZSBMYXVuY2ggd2l0aCB0aGUgZGl2aWRlcg0KICAgICAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZVVzZXJMb2coIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIik7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlVXNlckxvZygiTEFVTkNIRUQ6IFNlc3Npb24gU3RhcnRlZCIpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDIuIFBlcmZvcm0gdGhlIFNlcXVlbmNlIENyb3NzLUNoZWNrDQogICAgICAgICAgICAgICAgICAgIGlmIChHTE9CQUxfREJfTElORVMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdExpbmUgPSBHTE9CQUxfREJfTElORVNbR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsTGFzdFJOID0gbGFzdExpbmUuc3BsaXQoJ3wnKVswXS50cmltKCk7IC8vIEdldCBSTiBmcm9tIERCIChlLmcuLCBDRzAwNTk4MikNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbENvdW50ID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSB3aXRoIHRoZSBzZXF1ZW5jZSB2YXJpYWJsZXMgbG9hZGVkIGR1cmluZyBsb2FkRGF0YSgpDQogICAgICAgICAgICAgICAgICAgICAgICAvLyAoSW4geW91ciBzY3JpcHQsIHRoZXNlIGFyZSB1c3VhbGx5ICdsYXN0UmVjZWlwdE5vJyBhbmQgJ3RvdGFsUmVjb3JkQ291bnQnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdHVhbExhc3RSTiAhPT0gbGFzdFJlY2VpcHRObykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJDaG9pY2UgPSBjb25maXJtKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgU0VRVUVOQ0UgTUlTTUFUQ0ggREVURUNURUQhXG5cbmAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgREIgQWN0dWFsOiAke2FjdHVhbExhc3RSTn1cbmAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgU2VxdWVuY2UgRmlsZTogJHtsYXN0UmVjZWlwdE5vfVxuXG5gICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFdvdWxkIHlvdSBsaWtlIHRvIGF1dG8tY29ycmVjdCB0aGUgc2VxdWVuY2UgZmlsZSB0byBtYXRjaCB0aGUgZGF0YWJhc2U/YA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlckNob2ljZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb3JyZWN0U2VxdWVuY2UoYWN0dWFsTGFzdFJOLCBhY3R1YWxDb3VudCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCJXQVJOSU5HOiBTZXF1ZW5jZSBNaXNtYXRjaCBkZXRlY3RlZCBidXQgaWdub3JlZCBieSB1c2VyLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIC8vIDEuIENvbmZpcm0gd2UgcmVhY2hlZCB0aGlzIHBvaW50DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJCbG9ja2luZyBhY2Nlc3MgZm9yIElEOiAiICsgTU1QVF9ERVZJQ0VfSUQpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDIuIFRhcmdldCB0aGUgRU5USVJFIGF1dGggc2NyZWVuIHRvIHByZXZlbnQgbGF5ZXJpbmcgaXNzdWVzDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1haW5BdXRoU2NyZWVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dGhTY3JlZW4nKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAobWFpbkF1dGhTY3JlZW4pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5BdXRoU2NyZWVuLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGhlaWdodDogMTAwdmg7IGJhY2tncm91bmQ6ICNmNGY0ZjQ7IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICNmZmY7IHBhZGRpbmc6IDMwcHg7IGJvcmRlci1yYWRpdXM6IDE1cHg7IGJvcmRlcjogMnB4IHNvbGlkICNmZjRkNGQ7IGJveC1zaGFkb3c6IDAgMTBweCAzMHB4IHJnYmEoMCwwLDAsMC4xKTsgbWF4LXdpZHRoOiA0NTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBzdHlsZT0iY29sb3I6ICNkOTUzNGY7IG1hcmdpbi1ib3R0b206IDEwcHg7Ij7wn5qrIEFDQ0VTUyBSRVNUUklDVEVEPC9oMj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0iY29sb3I6ICM1NTU7Ij5UaGlzIGRldmljZSBpcyBub3QgcmVnaXN0ZXJlZCBpbiB0aGUgc3lzdGVtLjwvcD4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICMxYTFhMWE7IGNvbG9yOiAjMzlmZjE0OyBwYWRkaW5nOiAxNXB4OyBmb250LWZhbWlseTogbW9ub3NwYWNlOyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMjBweCAwOyBib3JkZXI6IDFweCBzb2xpZCAjNDQ0OyB3b3JkLWJyZWFrOiBicmVhay1hbGw7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtNTVBUX0RFVklDRV9JRH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6IDEzcHg7IGNvbG9yOiAjODg4OyI+UHJvdmlkZSB0aGlzIElEIHRvIEFkbWluIGZvciA8Yj5DRyBSZWNlaXB0PC9iPiBhY3RpdmF0aW9uLjwvcD4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibG9jYXRpb24ucmVsb2FkKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZDk1MzRmOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMTJweCAyNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IHdpZHRoOiAxMDAlOyBtYXJnaW4tdG9wOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFVFJZIENPTk5FQ1RJT04NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW1lcmdlbmN5IGZhbGxiYWNrIGlmIGV2ZW4gYXV0aFNjcmVlbiBpcyBtaXNzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9ICI8aDEgc3R5bGU9J2NvbG9yOnJlZDsgdGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbi10b3A6NTBweDsnPkFDQ0VTUyBERU5JRUQ6ICIgKyBNTVBUX0RFVklDRV9JRCArICI8L2gxPiI7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIEhhcmQgc3RvcA0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEFmdGVyIHN1Y2Nlc3NmdWxseSBmZXRjaGluZyBldmVyeXRoaW5nIGFuZCBpZGVudGlmeWluZyB0aGUgdXNlcjoNCiAgICAgICAgICAgICAgICBhd2FpdCBsb2dMYXVuY2goKTsNCg0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1BvcHVsYXRlcyBkcm9wZG93biBtZW51cyBmb3IgVG93YXJkcyBhbmQgTW9kZSAtIGxpc3QgZnJvbSBEcm9wRG93bi50eHQgaW4gc2V0dGluZ3MgZm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRHJvcGRvd25zKHRva2VuKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGRyUiA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RST1BET1dOUyB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWRyUi5vaykgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdHh0ID0gYXdhaXQgZHJSLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHR4dC5zcGxpdCgnXG4nKS5tYXAobCA9PiBsLnRyaW0oKSkuZmlsdGVyKGwgPT4gbC5sZW5ndGggPiAwKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG1TID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX21vZGUnKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0UyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJyk7DQoNCiAgICAgICAgICAgICAgICAvLyBDbGVhciBleGlzdGluZyBvcHRpb25zDQogICAgICAgICAgICAgICAgbVMuaW5uZXJIVE1MID0gIiI7DQogICAgICAgICAgICAgICAgdFMuaW5uZXJIVE1MID0gIiI7DQoNCiAgICAgICAgICAgICAgICBsZXQgY3VyU2VjID0gIiI7DQogICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHNlY3Rpb24gaGVhZGVycyBsaWtlIFtNT0RFXSBvciBbVE9XQVJEU10NCiAgICAgICAgICAgICAgICAgICAgaWYgKGwuc3RhcnRzV2l0aCgnWycpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjdXJTZWMgPSBsLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSB2YWx1ZSAocGFydCBiZWZvcmUgdGhlIGh5cGhlbikNCiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbCA9IGwuc3BsaXQoJy0nKVswXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGlmICghdmFsKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICBvLnZhbHVlID0gdmFsOw0KICAgICAgICAgICAgICAgICAgICBvLnRleHRDb250ZW50ID0gdmFsOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChjdXJTZWMgPT09ICJbTU9ERV0iKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtUy5hcHBlbmRDaGlsZChvKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJTZWMgPT09ICJbVE9XQVJEU10iKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0Uy5hcHBlbmRDaGlsZChvKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJEcm9wZG93bnMgUG9wdWxhdGVkIik7DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJEcm9wZG93biBlcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQ29udmVydHMgbnVtYmVycyB0byB3b3Jkcw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gdG9Xb3JkcyhuKSB7DQogICAgICAgICAgICBsZXQgYSA9IFsnJywgJ09uZSAnLCAnVHdvICcsICdUaHJlZSAnLCAnRm91ciAnLCAnRml2ZSAnLCAnU2l4ICcsICdTZXZlbiAnLCAnRWlnaHQgJywgJ05pbmUgJywgJ1RlbiAnLCAnRWxldmVuICcsICdUd2VsdmUgJywgJ1RoaXJ0ZWVuICcsICdGb3VydGVlbiAnLCAnRmlmdGVlbiAnLCAnU2l4dGVlbiAnLCAnU2V2ZW50ZWVuICcsICdFaWdodGVlbiAnLCAnTmluZXRlZW4gJ107DQogICAgICAgICAgICBsZXQgYiA9IFsnJywgJycsICdUd2VudHknLCAnVGhpcnR5JywgJ0ZvcnR5JywgJ0ZpZnR5JywgJ1NpeHR5JywgJ1NldmVudHknLCAnRWlnaHR5JywgJ05pbmV0eSddOw0KICAgICAgICAgICAgbGV0IG51bSA9ICgnMDAwMDAwMDAwJyArIHBhcnNlSW50KG4pKS5zdWJzdHIoLTkpLm1hdGNoKC9eKFxkezJ9KShcZHsyfSkoXGR7Mn0pKFxkezF9KShcZHsyfSkkLyk7DQogICAgICAgICAgICBpZiAoIW51bSkgcmV0dXJuICIiOw0KICAgICAgICAgICAgbGV0IHN0ciA9ICcnOw0KICAgICAgICAgICAgc3RyICs9IChudW1bMV0gIT0gMCkgPyAoYVtOdW1iZXIobnVtWzFdKV0gfHwgYltudW1bMV1bMF1dICsgJyAnICsgYVtudW1bMV1bMV1dKSArICdDcm9yZSAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVsyXSAhPSAwKSA/IChhW051bWJlcihudW1bMl0pXSB8fCBiW251bVsyXVswXV0gKyAnICcgKyBhW251bVsyXVsxXV0pICsgJ0xha2ggJyA6ICcnOw0KICAgICAgICAgICAgc3RyICs9IChudW1bM10gIT0gMCkgPyAoYVtOdW1iZXIobnVtWzNdKV0gfHwgYltudW1bM11bMF1dICsgJyAnICsgYVtudW1bM11bMV1dKSArICdUaG91c2FuZCAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVs0XSAhPSAwKSA/IChhW051bWJlcihudW1bNF0pXSB8fCBiW251bVs0XVswXV0gKyAnICcgKyBhW251bVs0XVsxXV0pICsgJ0h1bmRyZWQgJyA6ICcnOw0KICAgICAgICAgICAgc3RyICs9IChudW1bNV0gIT0gMCkgPyAoKHN0ciAhPSAnJykgPyAnYW5kICcgOiAnJykgKyAoYVtOdW1iZXIobnVtWzVdKV0gfHwgYltudW1bNV1bMF1dICsgJyAnICsgYVtudW1bNV1bMV1dKSA6ICcnOw0KICAgICAgICAgICAgcmV0dXJuIHN0ci50cmltKCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBuYXZpZ2F0ZURhdGFiYXNlKHYpIHsgY3VycmVudFJlY29yZEluZGV4ID0gdjsgZGlzcGxheVJlY29yZCh2KTsgfQ0KICAgICAgICBmdW5jdGlvbiBjaGFuZ2VSZWNvcmQoZCkgeyBsZXQgbiA9IHBhcnNlSW50KGN1cnJlbnRSZWNvcmRJbmRleCkgKyBkOyBpZiAobiA+PSAwICYmIG4gPCBHTE9CQUxfREJfTElORVMubGVuZ3RoKSB7IGN1cnJlbnRSZWNvcmRJbmRleCA9IG47IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJykudmFsdWUgPSBuOyBkaXNwbGF5UmVjb3JkKG4pOyB9IH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9DcmVhdGVzIGEgTmV3IENHIFJlY2VpcHQgLSBBc3NpbmdzIGEgbmV3IHVuc2VkIENHIHJlY2VpcHQgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZU5ld1JOKCkgew0KICAgICAgICAgICAgY29uc3Qgcm5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLXJuJyk7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdPdmVybGF5Jyk7DQoNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSB0cnVlOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdhY3Rpb24nLCAnZ2V0TmV3UmVjZWlwdCcpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzY3JpcHRVUkwsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IGZvcm1EYXRhIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZWNlaXB0ICYmIGRhdGEuaW5kZXgpIHsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBBREQgVEhJUyBMSU5FIEhFUkU6DQogICAgICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiR0VORVJBVEVEIE5FVyBSRUNFSVBUOiAiICsgZGF0YS5yZWNlaXB0KTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIDE6IFVwZGF0ZSB0aGUgZ2xvYmFsIGluZGV4DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IHBhcnNlSW50KGRhdGEuaW5kZXgpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgMjogRklYIFRIRSBNRU1PUlkgR0FQDQogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBkYXRhYmFzZSBoYXMgNTAwIHJlY29yZHMgKDAtNDk5KSwgYW5kIG5ldyBpbmRleCBpcyA1MDAsDQogICAgICAgICAgICAgICAgICAgIC8vIHdlIE1VU1QgZ3JvdyB0aGUgYXJyYXkgc28gaW5kZXggNTAwIGFjdHVhbGx5IGV4aXN0cy4NCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPD0gY3VycmVudFJlY29yZEluZGV4KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVMucHVzaCgiIik7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIDM6IFJFU0VUIFNFQVJDSCBUUkFDS0VSDQogICAgICAgICAgICAgICAgICAgIC8vIFlvdXIgc2VhcmNoIGVuZ2luZSBsaWtlbHkgdXNlcyBhIHZhcmlhYmxlIHRvIHJlbWVtYmVyIHdoZXJlIGl0IHdhcy4NCiAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXR0aW5nIHRoaXMgZm9yY2VzIHNlYXJjaCB0byByZS1zY2FuIGZyb20gdGhlIG5ldyBlbmQuDQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGFzdEZvdW5kU2VhcmNoSW5kZXggIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsYXN0Rm91bmRTZWFyY2hJbmRleCA9IC0xOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGAke1N0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpfS0ke1N0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9LSR7bm93LmdldEZ1bGxZZWFyKCl9YDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSBGaWVsZHMNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUgPSBkYXRhLnJlY2VpcHQ7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9kYXRlJykudmFsdWUgPSBmb3JtYXR0ZWREYXRlOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIENsZWFyIGVudHJ5IGZpZWxkcw0KICAgICAgICAgICAgICAgICAgICBbJ2ZpZWxkX25hbWUnLCAnZmllbGRfcGhvbmUnLCAnZmllbGRfYWRkcmVzcycsICdmaWVsZF9lbWFpbCcsICdmaWVsZF9wYW4nLCAnZmllbGRfc3RhcicsICdmaWVsZF9nb3RocmFtJywgJ2ZpZWxkX2Ftb3VudCcsICdmaWVsZF9yZWYnLCAnZmllbGRfY29tbWVudHMnXS5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsKSBlbC52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGluY29kZScpLnZhbHVlID0gIjAwMDAwMCI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb3VudHJ5JykudmFsdWUgPSAiSU5ESUEiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbW9kZScpLnZhbHVlID0gIkNhc2giOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlID0gIk9USEVSUyI7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsQ2hlY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY2FuY2VsJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxDaGVjaykgY2FuY2VsQ2hlY2suY2hlY2tlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wcmludGVkJykuY2hlY2tlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcHJhc2FkYW0nKS5jaGVja2VkID0gZmFsc2U7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCA0OiBTeW5jIHRoZSBzcGVjaWZpYyBsaW5lIGluIG1lbW9yeQ0KICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVNbY3VycmVudFJlY29yZEluZGV4XSA9IGAke2RhdGEucmVjZWlwdH18JHtmb3JtYXR0ZWREYXRlfXx8fHx8fHx8fHx8Q2FzaHxPVEhFUlN8WUVTfHwwMDAwMDB8Tk98Tk98fElORElBYDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIDU6IFVwZGF0ZSB0aGUgU2xpZGVyDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChzbGlkZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5tYXggPSBHTE9CQUxfREJfTElORVMubGVuZ3RoOyAvLyAtIDE7IC8vIEV4cGxpY2l0bHkgdXNlIHRoZSBuZXcgYXJyYXkgbGVuZ3RoDQogICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSBjdXJyZW50UmVjb3JkSW5kZXg7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZE51bWJlckRpc3BsYXknKS52YWx1ZSA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCg0KICAgICAgICAgICAgICAgICAgICB0b2dnbGVMb2NrKGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgaXNEaXJ0eSA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gKFRoZSByZXN0IG9mIHlvdXIgZXZlbnQgbGlzdGVuZXIgbG9naWMgZm9yIHVuY2hlY2tpbmcgY2FuY2VsIHN0YXlzIGV4YWN0bHkgdGhlIHNhbWUpDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJGaWVsZHMgPSBbJ2ZpZWxkX25hbWUnLCAnZmllbGRfYW1vdW50JywgJ2ZpZWxkX3Bob25lJywgJ2ZpZWxkX2FkZHJlc3MnXTsNCiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckZpZWxkcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLnRyaW0oKSAhPT0gIiIgJiYgY2FuY2VsQ2hlY2suY2hlY2tlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQ2hlY2suY2hlY2tlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHMgPSBHTE9CQUxfREJfTElORVNbY3VycmVudFJlY29yZEluZGV4XS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHMubGVuZ3RoID49IDE0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sc1sxM10gPSAiTk8iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FU1tjdXJyZW50UmVjb3JkSW5kZXhdID0gY29scy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IG9uY2U6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGUubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICAgICAgcm5CdG4uaW5uZXJUZXh0ID0gIlJOIjsNCiAgICAgICAgICAgICAgICAvLyBEbyBub3QgcmUtZW5hYmxlIHJuQnRuIGhlcmUsIGl0IHN0YXlzIGRpc2FibGVkIHVudGlsIGxvY2tlZCBhcyBwZXIgeW91ciBsb2dpYw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIERvd25sb2FkcyBhIFBERiBSZWNlaXB0DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBkb3dubG9hZFJlY2VpcHRQREYoKSB7DQogICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlY2VpcHQtY29udGFpbmVyJyk7DQogICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHJldHVybjsNCg0KICAgICAgICAgICAgY29uc3QgcmVjTm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVjbm8nKS52YWx1ZTsNCg0KICAgICAgICAgICAgY29uc3Qgb3B0ID0gew0KICAgICAgICAgICAgICAgIG1hcmdpbjogWzAuMiwgMC4yXSwgLy8gW3RvcC9ib3R0b20sIGxlZnQvcmlnaHRdDQogICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJlY05vICsgJy5wZGYnLA0KICAgICAgICAgICAgICAgIGltYWdlOiB7IHR5cGU6ICdqcGVnJywgcXVhbGl0eTogMSB9LA0KICAgICAgICAgICAgICAgIGh0bWwyY2FudmFzOiB7DQogICAgICAgICAgICAgICAgICAgIHNjYWxlOiAyLA0KICAgICAgICAgICAgICAgICAgICB1c2VDT1JTOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICBsb2dnaW5nOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2UgdHdvIGxpbmVzIGFyZSB0aGUga2V5IHRvIGZpeGluZyB0aGUgIkhhbGYgUGFnZSIgY3V0LW9mZjoNCiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWTogMCwNCiAgICAgICAgICAgICAgICAgICAgd2luZG93SGVpZ2h0OiBlbGVtZW50LnNjcm9sbEhlaWdodA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAganNQREY6IHsgdW5pdDogJ2luJywgZm9ybWF0OiAnYTQnLCBvcmllbnRhdGlvbjogJ3BvcnRyYWl0JyB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAvLyBOZXcgbG9naWM6IFVzZSAnaHRtbDJwZGYnIHRvIGNhcHR1cmUgdGhlIGZ1bGwgc2Nyb2xsIGhlaWdodA0KICAgICAgICAgICAgaHRtbDJwZGYoKS5mcm9tKGVsZW1lbnQpLnNldChvcHQpLnRvUGRmKCkuZ2V0KCdwZGYnKS50aGVuKGZ1bmN0aW9uIChwZGYpIHsNCiAgICAgICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIFBERiBvbmx5IGhhcyAxIHBhZ2UNCiAgICAgICAgICAgICAgICB2YXIgdG90YWxQYWdlcyA9IHBkZi5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRvdGFsUGFnZXM7IGkgPiAxOyBpLS0pIHsNCiAgICAgICAgICAgICAgICAgICAgcGRmLmRlbGV0ZVBhZ2UoaSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkuc2F2ZSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFNlbmRzIGEgd2hhdHNhcHAgdGV4dCBtZXNzYWdlIGFsb25nIHdpdGggb3B0aW9uIG9mIHBhc3RpbmcgYWN0dWFsIHJlY2VpcHQgLSBkaXJlY3QgdG8gZG9ub3IgdGVsZXBob25lIG51bWJlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2VuZFdoYXRzQXBwKCkgew0KICAgICAgICAgICAgY29uc3QgcmVjZWlwdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVjZWlwdC1jb250YWluZXInKTsNCg0KICAgICAgICAgICAgLy8gMS4gUEVSRk9STSBDTElQQk9BUkQgQ09QWSAoV2FpdCBmb3IgaXQgdG8gZmluaXNoKQ0KICAgICAgICAgICAgaWYgKHJlY2VpcHRFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gYXdhaXQgaHRtbDJjYW52YXMocmVjZWlwdEVsZW1lbnQsIHsgc2NhbGU6IDIsIHVzZUNPUlM6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IGNhbnZhcy50b0Jsb2IocmVzb2x2ZSkpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gbmV3IENsaXBib2FyZEl0ZW0oeyAiaW1hZ2UvcG5nIjogYmxvYiB9KTsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZShbaXRlbV0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQ2xpcGJvYXJkIEltYWdlIFJlYWR5Iik7DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkNsaXBib2FyZCBFcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMi4gQ09MTEVDVCBEQVRBIEZPUiBURVhUDQogICAgICAgICAgICBjb25zdCByZWNObyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9kYXRlJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHRvd2FyZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZS5yZXBsYWNlKC9cRC9nLCAnJyk7DQoNCiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvbW1lbnRzJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBzcGVjaWFsTWF0Y2ggPSBjb21tZW50cy5tYXRjaCgvXHsuKj9cfS8pOw0KICAgICAgICAgICAgY29uc3Qgc3BlY2lhbFN0ciA9IHNwZWNpYWxNYXRjaCA/IGAgKCR7c3BlY2lhbE1hdGNoWzBdfSlgIDogIiI7DQoNCiAgICAgICAgICAgIGlmICghcGhvbmUpIHsgYWxlcnQoIk5vIHBob25lIG51bWJlciEiKTsgcmV0dXJuOyB9DQoNCiAgICAgICAgICAgIC8vIDMuIEJVSUxEIFRFWFQgVVJMDQogICAgICAgICAgICBjb25zdCBtZXNzYWdlID0NCiAgICAgICAgICAgICAgICBgKk1ZTEFJIE1BSEFQRVJJWUFWQSBBTlVTSEFNIFRSVVNUKiUwQWAgKw0KICAgICAgICAgICAgICAgIGAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJTBBYCArDQogICAgICAgICAgICAgICAgYCpSZWNlaXB0IE5vOiogJHtyZWNOb30lMEFgICsNCiAgICAgICAgICAgICAgICBgKkRhdGU6KiAke2RhdGV9JTBBJTBBYCArDQogICAgICAgICAgICAgICAgYFJlY2VpdmVkIHdpdGggdGhhbmtzIGZyb20gKlNocmkvU210LiAke25hbWV9KiUwQWAgKw0KICAgICAgICAgICAgICAgIGBhIHN1bSBvZiAqUnMuICR7YW1vdW50fSogb25seSUwQWAgKw0KICAgICAgICAgICAgICAgIGB0b3dhcmRzICoke3Rvd2FyZHN9JHtzcGVjaWFsU3RyfSolMEElMEFgICsNCiAgICAgICAgICAgICAgICBgX1RydXN0IFJlZ2lzdHJhdGlvbiB2YWxpZCB0aWxsIDMxLTAzLTIwMjZfYDsNCg0KICAgICAgICAgICAgY29uc3Qgd2FVcmwgPSBgaHR0cHM6Ly9hcGkud2hhdHNhcHAuY29tL3NlbmQ/cGhvbmU9OTEke3Bob25lfSZ0ZXh0PSR7bWVzc2FnZX1gOw0KDQogICAgICAgICAgICAvLyA0LiBPUEVOIFdIQVRTQVBQDQogICAgICAgICAgICB3aW5kb3cub3Blbih3YVVybCwgJ19ibGFuaycpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIERvd25sb2FkcyBhIENvbnNlbnQgbGV0dGVyIGZvciBhIERvbm9yIC0gZm9yIGNvcnB1cyBhbmQgYW1vdW50ID49MTAwMDANCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGNvbnNlbnRBY3Rpb24oKSB7DQogICAgICAgICAgICBjb25zdCByZWNObyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9kYXRlJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBhbW91bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYW1vdW50JykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHBob25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Bob25lJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2FkZHJlc3MnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHJlZiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWYnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHBhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKS52YWx1ZSA6ICIiOw0KDQogICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRBZGRyZXNzID0gYWRkcmVzcy5yZXBsYWNlKC9cbi9nLCAnPGJyPicpOw0KICAgICAgICAgICAgY29uc3QgYW1vdW50SW5Xb3JkcyA9IE51bWJlcihhbW91bnQpLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpICsgIiBPbmx5IjsNCg0KICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgLy8gVXNpbmcgYSBzbGlnaHRseSBzbWFsbGVyIHBhZGRpbmcgdG8gZW5zdXJlIDEtcGFnZSBmaXQNCiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICcwLjZpbiAwLjc1aW4nOw0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gJyJUaW1lcyBOZXcgUm9tYW4iLCBzZXJpZic7DQogICAgICAgICAgICBlbGVtZW50LnN0eWxlLmxpbmVIZWlnaHQgPSAnMS40JzsgLy8gU2xpZ2h0bHkgdGlnaHRlciBsaW5lIGhlaWdodA0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5jb2xvciA9ICcjMDAwJzsNCiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSAnMTJwdCc7DQoNCiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7IG1hcmdpbi1ib3R0b206IDMwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0id2lkdGg6IDU1JTsgdGV4dC1hbGlnbjogbGVmdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+PGI+RnJvbTo8L2I+PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+PGI+JHtuYW1lfTwvYj48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij4ke2Zvcm1hdHRlZEFkZHJlc3N9PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+UGg6ICR7cGhvbmV9PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206IDM1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+PGI+VG86PC9iPjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+PGI+TVlMQUkgTUFIQVBFUklZQVZBIEFOVVNIQU0gVFJVU1Q8L2I+PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5TaHJlZSBHYW5lc2ggRmxhdHMsPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5OZXcgTm8uIDUyLzIsIE5vcnRoIE1hZGEgU3RyZWV0LDwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+TXlsYXBvcmUsIENoZW5uYWkgNjAwIDAwNC48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogMzBweDsgZm9udC1zaXplOiAxM3B0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN1YjogRG9uYXRpb24gVG93YXJkcyBDT1JQVVMgb2YgdGhlIFRydXN0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5TaXIsPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkkgaGVyZWJ5IGNvbmZpcm0gdGhhdCBteSBjb250cmlidXRpb24gYXMgcGVyIGRldGFpbHMgZ2l2ZW4gYmVsb3cgaXMgdG93YXJkcyA8Yj5DT1JQVVM8L2I+IG9mIE15bGFpIE1haGFwZXJpeWF2YSBBbnVzaGFtIFRydXN0LjwvcD4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbjogMjVweCAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9IndpZHRoOiAzNSU7IHBhZGRpbmc6IDRweCAwOyI+QW1vdW50PC90ZD48dGQ+OiBScy4gPGI+JHthbW91bnR9PC9iPjwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+QW1vdW50IGluIFdvcmRzPC90ZD48dGQ+OiBSdXBlZXMgJHthbW91bnRJbldvcmRzfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+UGF5bWVudCBSZWZlcmVuY2U8L3RkPjx0ZD46ICR7cmVmfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+UmVjZWlwdCBOdW1iZXI8L3RkPjx0ZD46IDxiPiR7cmVjTm99PC9iPjwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+RGF0ZTwvdGQ+PHRkPjogJHtkYXRlfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+UGhvbmUgTnVtYmVyPC90ZD48dGQ+OiAke3Bob25lfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+UEFOPC90ZD48dGQ+OiAke3Bhbn08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiA0MHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPllvdXJzIHNpbmNlcmVseSw8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDQ1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPl9fX19fX19fX19fX19fX19fX19fX19fX19fPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyBwYWRkaW5nLXRvcDogNXB4OyI+KDxiPiR7bmFtZX08L2I+KTwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQpgOw0KDQogICAgICAgICAgICBjb25zdCBvcHQgPSB7DQogICAgICAgICAgICAgICAgbWFyZ2luOiAwLA0KICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAnQ29uc2VudCBMZXR0ZXIgJyArIHJlY05vICsgJy5wZGYnLA0KICAgICAgICAgICAgICAgIGltYWdlOiB7IHR5cGU6ICdqcGVnJywgcXVhbGl0eTogMC45OCB9LA0KICAgICAgICAgICAgICAgIGh0bWwyY2FudmFzOiB7IHNjYWxlOiAyLCBsb2dnaW5nOiBmYWxzZSB9LA0KICAgICAgICAgICAgICAgIGpzUERGOiB7IHVuaXQ6ICdpbicsIGZvcm1hdDogJ2E0Jywgb3JpZW50YXRpb246ICdwb3J0cmFpdCcgfQ0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgaHRtbDJwZGYoKS5zZXQob3B0KS5mcm9tKGVsZW1lbnQpLnNhdmUoKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIExvYWRzIEluaXRpYWwgRGF0YSBkdXJpbmcgbGF1bmNoLiAgSW1wb3J0YW50IG5vdCB0byBkaXN0dXJiZWQuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRGF0YSh0KSB7DQogICAgICAgICAgICAvLyAxLiBLSUxMIFRIRSBTUExBU0ggU0NSRUVOIElNTUVESUFURUxZDQogICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgbm8gIlN0dWNrIGF0IERldmljZSBJRCIgc2NyZWVuDQogICAgICAgICAgICAvLyBTaG93IG92ZXJsYXkNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aFNjcmVlbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkFwcENvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJBcHAgdmlzaWJsZS4gTG9hZGluZyBkYXRhIHdpdGggdG9rZW4uLi4iKTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIElERU5USUZZIFVTRVIgKFRoZSBEMjcgZml4KQ0KICAgICAgICAgICAgICAgIC8vIFdlIGZpbmQgdGhlIHJlYWwgbmFtZSBzbyBwb2xsaW5nIGRvZXNuJ3QganVzdCBzaG93ICJVc2VyIg0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwcFIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfQVBQUk9WRUQgfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFwcFIub2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwcFR4dCA9IGF3YWl0IGFwcFIudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBhcHBUeHQuc3BsaXQoJ1xuJykuZmluZChsID0+IGwuaW5jbHVkZXMoTU1QVF9ERVZJQ0VfSUQpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1NUFRfVVNFUl9OQU1FID0gbWF0Y2guc3BsaXQoJ3wnKVsxXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIldlbGNvbWUgIiArIE1NUFRfVVNFUl9OQU1FKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gSU5TRVJUIFNFQ1VSSVRZIENBTEwgSEVSRSAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHBseVVzZXJQZXJtaXNzaW9ucyhNTVBUX1VTRVJfTkFNRSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTU1QVF9SQURJT19GSUxFID0gYC9TZXR0aW5ncy8ke01NUFRfVVNFUl9OQU1FfVJhZGlvcy50eHRgOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFJhZGlvcyh0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS53YXJuKCJJZGVudGl0eSBsb29rdXAgZmFpbGVkLCBkZWZhdWx0aW5nIHRvIFVua25vd24iKTsgfQ0KDQogICAgICAgICAgICAgICAgLy8gMy4gRkVUQ0ggREFUQUJBU0UgJiBTRUNPTkRBUlkgRklMRVMNCiAgICAgICAgICAgICAgICBjb25zdCBkYlIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYlR4dCA9IGF3YWl0IGRiUi50ZXh0KCk7DQogICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTID0gZGJUeHQuc3BsaXQoJ1xuJykubWFwKGwgPT4gbC50cmltKCkpLmZpbHRlcihsID0+IGwubGVuZ3RoID4gMTApOw0KDQogICAgICAgICAgICAgICAgY29uc3QgW2Nhc2hSLCBiYW5rUl0gPSBhd2FpdCBQcm9taXNlLmFsbChbDQogICAgICAgICAgICAgICAgICAgIGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0NBU0ggfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiAoeyBvazogZmFsc2UgfSkpLA0KICAgICAgICAgICAgICAgICAgICBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9CQU5LIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gKHsgb2s6IGZhbHNlIH0pKQ0KICAgICAgICAgICAgICAgIF0pOw0KDQogICAgICAgICAgICAgICAgbGV0IGNhc2hDb250ZW50ID0gY2FzaFIub2sgPyAoYXdhaXQgY2FzaFIudGV4dCgpKS50b1VwcGVyQ2FzZSgpIDogIiI7DQogICAgICAgICAgICAgICAgbGV0IGJhbmtEYXRlID0gIi0tLSI7DQogICAgICAgICAgICAgICAgaWYgKGJhbmtSLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsID0gKGF3YWl0IGJhbmtSLnRleHQoKSkuc3BsaXQoJ1xuJykuZmlsdGVyKGwgPT4gbC5pbmNsdWRlcygnfCcpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGJsLmxlbmd0aCA+IDApIGJhbmtEYXRlID0gYmxbYmwubGVuZ3RoIC0gMV0uc3BsaXQoJ3wnKVswXTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBMT0FEIERST1BET1dOUyAmIERBU0hCT0FSRA0KICAgICAgICAgICAgICAgIGF3YWl0IGxvYWREcm9wZG93bnModCk7DQogICAgICAgICAgICAgICAgdXBkYXRlRGFzaGJvYXJkU3RhdHMoY2FzaENvbnRlbnQsIGJhbmtEYXRlKTsNCg0KDQogICAgICAgICAgICAgICAgbG9hZEV2ZW50UGFuZWxzKHQpOyAvLyBUcmlnZ2VyIHRoZSBldmVudCBjb2x1bW4gbG9hZGluZw0KDQogICAgICAgICAgICAgICAgLy8gNS4gU0VUVVAgU0xJREVSDQogICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKTsNCiAgICAgICAgICAgICAgICBzbGlkZXIubWF4ID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDE7DQoNCiAgICAgICAgICAgICAgICAvLyBTQUZFIFRSSUdHRVI6IE9ubHkgcnVuIGlmIHRoZSBmdW5jdGlvbiBleGlzdHMNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGJ1aWxkRllJbmRleCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgICAgICBidWlsZEZZSW5kZXgoKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB1cGRhdGVEYXNoYm9hcmRTdGF0cyhjYXNoQ29udGVudCwgYmFua0RhdGUpOw0KDQogICAgICAgICAgICAgICAgc2xpZGVyLnZhbHVlID0gc2xpZGVyLm1heDsNCiAgICAgICAgICAgICAgICBjdXJyZW50UmVjb3JkSW5kZXggPSBzbGlkZXIubWF4Ow0KICAgICAgICAgICAgICAgIGNvbnN0IGZsb29yID0gKHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOICYmIHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID4gMCkgPyB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA6IDE7DQogICAgICAgICAgICAgICAgc2xpZGVyLm1pbiA9IGZsb29yOw0KICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQoY3VycmVudFJlY29yZEluZGV4KTsNCg0KDQoNCiAgICAgICAgICAgICAgICAvLyA2LiBTVEFSVCBCQUNLR1JPVU5EIFNFUlZJQ0VTDQogICAgICAgICAgICAgICAgZmV0Y2hFeHBlbnNlRGF0ZSgpOyAvLyBFeGNlbCBmaWxlDQogICAgICAgICAgICAgICAgc3RhcnRCYWNrZ3JvdW5kU3luYyh0KTsgLy8gVXNlciBQb2xsaW5nIChUaGUgRDcxIFN0eWxlKQ0KDQogICAgICAgICAgICAgICAgd2luZG93LkFDQ0VTU19UT0tFTiA9IHQ7IC8vIDwtLS0gQUREIFRISVMgTElORSBPTkxZDQoNCiAgICAgICAgICAgICAgICAvLyBIaWRlIG92ZXJsYXkgb25jZSBldmVyeXRoaW5nIGlzIHJlbmRlcmVkDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoImxvYWREYXRhIENyaXRpY2FsIEVycm9yOiIsIGVycik7DQogICAgICAgICAgICAgICAgYWxlcnQoIkxvYWQgRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gVXBkYXRlcyBEYXNoYm9hcmQgVmFsdWVzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVEYXNoYm9hcmRTdGF0cyhjYXNoRmlsZSwgYkRhdGUpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgbGV0IHJDb3VudCA9IDAsIHJBbXQgPSAwLCBjQ291bnQgPSAwLCBjQW10ID0gMDsNCg0KICAgICAgICAgICAgICAgIHJlYWR5SW5kaWNlcyA9IFtdOyAvLyA8LS0tIElOU0VSVDogUmVzZXQgdGhlIGxpc3QgZXZlcnkgdGltZSBzdGF0cyB1cGRhdGUNCg0KICAgICAgICAgICAgICAgIGxldCBsYXREID0gMCwgbGF0RGlzcCA9ICItLS0iOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN1dE9mZiA9IDIwMjYwMTAxOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNhZmVDYXNoRmlsZSA9IGNhc2hGaWxlIHx8ICIiOyAvLyBTYWZldHkgYWdhaW5zdCAndW5kZWZpbmVkJyBpbmNsdWRlcyBlcnJvcg0KDQogICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChjLmxlbmd0aCA8IDE1KSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgck5vID0gKGNbMF0gfHwgIiIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkU3RyID0gKGNbMV0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW10ID0gcGFyc2VGbG9hdChjWzldKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RlID0gKGNbMTFdIHx8ICIiKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jID0gKGNbMTNdIHx8ICIiKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRyID0gKGNbNF0gfHwgIiIpLnRyaW0oKTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gZFN0ci5yZXBsYWNlKC9cLy9nLCAnLScpLnNwbGl0KCctJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwLmxlbmd0aCA9PT0gMykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeXl5eSA9IHBbMl0ubGVuZ3RoID09PSAyID8gIjIwIiArIHBbMl0gOiBwWzJdOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZENvbXAgPSBwYXJzZUludCh5eXl5ICsgcFsxXS5wYWRTdGFydCgyLCAnMCcpICsgcFswXS5wYWRTdGFydCgyLCAnMCcpKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRDb21wID4gbGF0RCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdEQgPSBkQ29tcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXREaXNwID0gY1swXSArICIgKCIgKyBkU3RyICsgIikiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZENvbXAgPj0gY3V0T2ZmICYmIGNhbmMgIT09ICJZRVMiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FzaCBjaGVjayB3aXRoIHNhZmV0eQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJDbGVhbiA9IHJOby5yZXBsYWNlKCJNUFMiLCAiIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICJDQVNIIiAmJiAhc2FmZUNhc2hGaWxlLmluY2x1ZGVzKHJObykgJiYgIXNhZmVDYXNoRmlsZS5pbmNsdWRlcyhyQ2xlYW4pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjQW10ICs9IGFtdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZHkgY2hlY2sNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkciAhPT0gIiIgJiYgIShjWzE2XSA9PT0gIllFUyIgJiYgY1sxN10gPT09ICJZRVMiKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgckFtdCArPSBhbXQ7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQUREIFRISVMgTElORSBIRVJFOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeUluZGljZXMucHVzaChpbmRleCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBmbXQgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2VuLUlOJywgeyBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgbGFzdFJvdyA9IEdMT0JBTF9EQl9MSU5FU1tHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMV0uc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2xhc3RfcmVjJykuaW5uZXJUZXh0ID0gbGFzdFJvd1swXSArICIgKCIgKyBsYXN0Um93WzFdICsgIikiOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2xhdGVzdF9yZWMnKS5pbm5lclRleHQgPSBsYXREaXNwOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX3JlYWR5X2NvdW50JykuaW5uZXJUZXh0ID0gckNvdW50ICsgIiAo4oK5IiArIGZtdC5mb3JtYXQockFtdCkgKyAiKSI7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfY2FzaCcpLmlubmVyVGV4dCA9IGNDb3VudCArICIgKOKCuSIgKyBmbXQuZm9ybWF0KGNBbXQpICsgIikiOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2JhbmtfZGF0ZScpLmlubmVyVGV4dCA9IGJEYXRlIHx8ICItLS0iOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIlNUQVRTIEVSUk9SOiAiICsgZS5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBVcGRhdGVzIExhc3QgZXhwZW5zZSBhY2NvdW50IGRhdGUgZm9yIGRhc2hib2FyZA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hFeHBlbnNlRGF0ZSgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkZldGNoaW5nIEV4cGVuc2VzIGJhY2tncm91bmQuLi4iKTsNCiAgICAgICAgICAgICAgICBjb25zdCBlUmVzcCA9IGF3YWl0IGZldGNoKE1NUFRfVVJMX0VYUEVOU0VTKTsNCiAgICAgICAgICAgICAgICBpZiAoIWVSZXNwLm9rKSB0aHJvdyBuZXcgRXJyb3IoIkZldGNoIGZhaWxlZCIpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBlUmVzcC5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtib29rID0gWExTWC5yZWFkKGFycmF5QnVmZmVyLCB7IHR5cGU6ICdhcnJheScgfSk7DQogICAgICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB3b3JrYm9vay5TaGVldHNbd29ya2Jvb2suU2hlZXROYW1lc1swXV07DQogICAgICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24oc2hlZXQsIHsgaGVhZGVyOiAxIH0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgY2xlYW5Sb3dzID0ganNvbkRhdGEuZmlsdGVyKHJvdyA9PiByb3cgJiYgcm93Lmxlbmd0aCA+IDAgJiYgcm93WzBdKTsNCiAgICAgICAgICAgICAgICBpZiAoY2xlYW5Sb3dzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwRGF0ZSA9IGNsZWFuUm93c1tjbGVhblJvd3MubGVuZ3RoIC0gMV1bMF0gfHwgIi0tLSI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2V4cGVuc2VzJykuaW5uZXJUZXh0ID0gZXhwRGF0ZTsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkV4cGVuc2UgRGF0ZSB1cGRhdGVkOiIsIGV4cERhdGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIkV4cGVuc2UgZGF0ZSBjb3VsZCBub3QgYmUgbG9hZGVkIChsaWtlbHkgQ09SUykuIERlZmF1bHRpbmcgdG8gLS0tIik7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfZXhwZW5zZXMnKS5pbm5lclRleHQgPSAiLS0tIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBTeW5jcyB1c2VyIHN0YXR1cw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gVEhFIFNZTkMgRlVOQ1RJT04gKENvcnJlY3RlZCBENzEgbG9naWMpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHN0YXJ0QmFja2dyb3VuZFN5bmModG9rZW4pIHsNCiAgICAgICAgICAgIGNvbnN0IHJ1blN5bmMgPSBhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFNTVBUX1VTRVJfTkFNRSB8fCBNTVBUX1VTRVJfTkFNRSA9PT0gIlVua25vd24iKSByZXR1cm47DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9VU0VSUyB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmVMaW5lcyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmVzID0gdHh0LnNwbGl0KCdcbicpLmZpbHRlcihsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gbC5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgZW50cmllcyBmcm9tIGxhc3QgMyBtaW5zDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAubGVuZ3RoID49IDMgJiYgKG5vdyAtIHBhcnNlSW50KHBbMl0pKSA8IDE4MDAwMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgYWN0aXZlTGluZXMgPSBhY3RpdmVMaW5lcy5maWx0ZXIobCA9PiAhbC5zdGFydHNXaXRoKE1NUFRfREVWSUNFX0lEKSk7DQogICAgICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmVzLnB1c2goYCR7TU1QVF9ERVZJQ0VfSUR9fCR7TU1QVF9VU0VSX05BTUV9fCR7bm93fWApOw0KDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9VU0VSUywgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogYWN0aXZlTGluZXMuam9pbignXG4nKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZVVzZXJMaXN0Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChkaXNwbGF5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5LmlubmVyVGV4dCA9IGFjdGl2ZUxpbmVzLm1hcChsID0+IGwuc3BsaXQoJ3wnKVsxXSkuam9pbignLCAnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmxvZygiU3luYyBza2lwcGVkIik7IH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBydW5TeW5jKCk7DQogICAgICAgICAgICBzZXRJbnRlcnZhbChydW5TeW5jLCA0NTAwMCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9VcGRhdGVzIEV2ZW50cyBpbWFnZXMgaW4gY29sb3VtbiAxIGFuZCAzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRXZlbnRQYW5lbHModG9rZW4pIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0VWRU5UU19UWFQgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IHRpdGxlMSA9ICJSZWNlbnQgRXZlbnQiLCB0aXRsZTIgPSAiVXBjb21pbmcgRXZlbnQiOw0KICAgICAgICAgICAgICAgIGlmIChyLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHIudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHR4dC5zcGxpdCgvXHI/XG4vKS5tYXAobCA9PiBsLnRyaW0oKSkuZmlsdGVyKGwgPT4gbC5sZW5ndGggPiAwKTsNCiAgICAgICAgICAgICAgICAgICAgdGl0bGUxID0gbGluZXNbMF0gfHwgdGl0bGUxOw0KICAgICAgICAgICAgICAgICAgICB0aXRsZTIgPSBsaW5lc1sxXSB8fCB0aXRsZTI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgZ2V0SW1nVXJsID0gYXN5bmMgKHBhdGgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZ2V0X3RlbXBvcmFyeV9saW5rJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogcGF0aCB9KQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmxpbms7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IFt1cmwxLCB1cmwyXSA9IGF3YWl0IFByb21pc2UuYWxsKFtnZXRJbWdVcmwoTU1QVF9JTUdfRVZFTlQxKSwgZ2V0SW1nVXJsKE1NUFRfSU1HX0VWRU5UMildKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHBhbmVsQ29udGVudCA9ICh0aXRsZSwgdXJsKSA9PiBgDQo8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmY5OTMzOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc2l6ZTogMTRweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjhjMDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RpdGxlfQ0KPC9kaXY+DQo8ZGl2IGNsYXNzPSJldmVudC1pbWctY29udGFpbmVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHt1cmx9Ij4NCjwvZGl2Pg0KYDsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWV2ZW50cycpLmlubmVySFRNTCA9IHBhbmVsQ29udGVudCh0aXRsZTEsIHVybDEpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1ldmVudHMnKS5pbm5lckhUTUwgPSBwYW5lbENvbnRlbnQodGl0bGUyLCB1cmwyKTsNCiAgICAgICAgICAgICAgICBNTVBUX1RFTVAxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQtZXZlbnRzJykuaW5uZXJIVE1MOw0KICAgICAgICAgICAgICAgIE1NUFRfVEVNUDMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MOw0KDQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcigiRXZlbnQgcGFuZWxzIGZhaWxlZDoiLCBlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vVXBkYXRlcyB0aGUgbGF0ZXN0IEJhbmsgU3RhdGVtZW50cyBmcm9tIGFuIEV4Y2VsIEZpbGUgU3RhdGVtZW50cy54bHMgLSBDcmVhdGVzIG5ldyByY2VpcHRzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBBZGQgdGhpcyB0byB5b3VyIGdsb2JhbCB2YXJpYWJsZXMgYXQgdGhlIHRvcA0KICAgICAgICBsZXQgaXNCYW5rVXBkYXRlZCA9IGZhbHNlOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUJhbmtTdGF0ZW1lbnRzKHRva2VuKSB7DQogICAgICAgICAgICBpZiAoIXRva2VuKSB7IGFsZXJ0KCJFcnJvcjogTm8gVG9rZW4gZm91bmQuIik7IHJldHVybjsgfQ0KICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jhbmstc3luYy1idG4nKTsNCiAgICAgICAgICAgIGlmIChidG4pIHsgYnRuLmlubmVyVGV4dCA9ICJTeW5jaW5nLi4uIjsgYnRuLmRpc2FibGVkID0gdHJ1ZTsgfQ0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIEV4Y2VsICYgQmFuayBTdGF0ZW1lbnQgKE1NUFQzLktQKQ0KICAgICAgICAgICAgICAgIGNvbnN0IGV4Y2VsUmVzID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvZjI3bXV5bG9iZGFqdnpteGNpODVkL0JhbmtTdGF0ZW1lbnQueGxzP3Jsa2V5PXI0M2owc3ZubWxpZzNxbTZpYWlyYnRvamQmZGw9MSIsIHsgY2FjaGU6ICduby1zdG9yZScgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBleGNlbFJlcy5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtib29rID0gWExTWC5yZWFkKGFycmF5QnVmZmVyLCB7IHR5cGU6ICdhcnJheScsIGNlbGxEYXRlczogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBleGNlbFJvd3MgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24od29ya2Jvb2suU2hlZXRzW3dvcmtib29rLlNoZWV0TmFtZXNbMF1dLCB7IGhlYWRlcjogMSB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGJhbmtGaWxlUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfQkFOSyB9KSB9LA0KICAgICAgICAgICAgICAgICAgICBjYWNoZTogJ25vLXN0b3JlJw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IGxvY2FsQmFua0NvbnRlbnQgPSBiYW5rRmlsZVJlcy5vayA/IChhd2FpdCBiYW5rRmlsZVJlcy50ZXh0KCkpLnRyaW0oKSA6ICIiOw0KICAgICAgICAgICAgICAgIGxldCBiYW5rTGluZXMgPSBsb2NhbEJhbmtDb250ZW50LnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwuaW5jbHVkZXMoJ3wnKSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY3VycmVudEJhbCA9IDA7DQogICAgICAgICAgICAgICAgaWYgKGJhbmtMaW5lcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsYXN0TGluZSA9IGJhbmtMaW5lc1tiYW5rTGluZXMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCYWwgPSBwYXJzZUZsb2F0KGxhc3RMaW5lLnNwbGl0KCd8JylbNV0ucmVwbGFjZSgvW15cZC5dL2csICcnKSkgfHwgMDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBsZXQgbmV3bHlBZGRlZEJhbmtMaW5lcyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCB3b3JraW5nQmFua0NvbnRlbnQgPSBsb2NhbEJhbmtDb250ZW50Ow0KDQogICAgICAgICAgICAgICAgLy8gMi4gUHJvY2VzcyBFeGNlbCBSb3dzDQogICAgICAgICAgICAgICAgZm9yIChsZXQgcm93IG9mIGV4Y2VsUm93cykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZVZhbCA9IHJvd1swXTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGlzRGF0ZSA9IGRhdGVWYWwgaW5zdGFuY2VvZiBEYXRlOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaXNEYXRlU3RyID0gdHlwZW9mIGRhdGVWYWwgPT09ICdzdHJpbmcnICYmIC9eXGR7MSwyfVwvXGR7MSwyfVwvXGR7NH0vLnRlc3QoZGF0ZVZhbC50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRGF0ZSAmJiAhaXNEYXRlU3RyKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgZFN0ciA9IGlzRGF0ZSA/IGAke1N0cmluZyhkYXRlVmFsLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKX0vJHtTdHJpbmcoZGF0ZVZhbC5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0vJHtkYXRlVmFsLmdldEZ1bGxZZWFyKCl9YCA6IGRhdGVWYWwudG9TdHJpbmcoKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCByZWYgPSAocm93WzFdIHx8ICIiKS50b1N0cmluZygpLnJlcGxhY2UoL1xzKy9nLCAnICcpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNocSA9IChyb3dbMl0gfHwgIiIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZGViID0gcGFyc2VGbG9hdChyb3dbM10pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgIGxldCBjcmUgPSBwYXJzZUZsb2F0KHJvd1s0XSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHJvd0JhbCA9IHBhcnNlRmxvYXQocm93WzVdKSB8fCAwOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCByb3dTdHJpbmcgPSBgJHtkU3RyfXwke3JlZn18JHtjaHF9fCR7ZGViIHx8ICIifXwke2NyZSB8fCAiIn18JHtyb3dCYWwudG9GaXhlZCgyKX18YDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmtpbmdCYW5rQ29udGVudC5pbmNsdWRlcyhyb3dTdHJpbmcudHJpbSgpKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgd29ya2luZ0JhbmtDb250ZW50ICs9ICh3b3JraW5nQmFua0NvbnRlbnQubGVuZ3RoID4gMCA/ICJcbiIgOiAiIikgKyByb3dTdHJpbmc7DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCYWwgPSByb3dCYWw7DQogICAgICAgICAgICAgICAgICAgIG5ld2x5QWRkZWRCYW5rTGluZXMucHVzaChyb3dTdHJpbmcpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChuZXdseUFkZGVkQmFua0xpbmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCBBOiBVUERBVEUgQkFOSyBGSUxFIChNTVBUMy5LUCkNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IE1NUFRfRklMRV9CQU5LLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHdvcmtpbmdCYW5rQ29udGVudA0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIEI6IERPV05MT0FEIE1BSU4gREIgKE1NUFQyLktQKQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9LCBjYWNoZTogJ25vLXN0b3JlJw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnREQkNvbnRlbnQgPSAoYXdhaXQgZGJSZXMudGV4dCgpKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBkYkxpbmVzID0gY3VycmVudERCQ29udGVudC5zcGxpdCgnXG4nKTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgbWF4Q0cgPSAwOw0KICAgICAgICAgICAgICAgICAgICBkYkxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENvbCA9IGxpbmUuc3BsaXQoJ3wnKVswXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdENvbC50b1VwcGVyQ2FzZSgpLnN0YXJ0c1dpdGgoIkNHIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IHBhcnNlSW50KGZpcnN0Q29sLnJlcGxhY2UoIkNHIiwgIiIpKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID4gbWF4Q0cpIG1heENHID0gbjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRmV0Y2ggRXhlbXB0IExpc3QNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBFWEVNUFRfRklMRSB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IG51bGwpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZXhlbXB0UGhyYXNlcyA9IChleFJlcyAmJiBleFJlcy5vaykgPyAoYXdhaXQgZXhSZXMudGV4dCgpKS5zcGxpdCgnXG4nKS5tYXAocCA9PiBwLnRyaW0oKS50b0xvd2VyQ2FzZSgpKS5maWx0ZXIocCA9PiBwKSA6IFtdOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgQzogR0VORVJBVEUgTkVXIFJFQ0VJUFRTDQogICAgICAgICAgICAgICAgICAgIGxldCBuZXdSID0gW107DQogICAgICAgICAgICAgICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgdG9kYXlTdHIgPSBgJHtTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKX0tJHtTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfS0ke25vdy5nZXRGdWxsWWVhcigpfWA7DQogICAgICAgICAgICAgICAgICAgIGxldCBpbXBvcnRDb21tZW50ID0gIkF1dG8gSW1wb3J0ZWQ6IiArIHRvZGF5U3RyOw0KDQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGJMaW5lIG9mIG5ld2x5QWRkZWRCYW5rTGluZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJ0cyA9IGJMaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW10ID0gcGFyc2VGbG9hdChwYXJ0c1s0XSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWZUZXh0ID0gcGFydHNbMV07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbXQgPD0gMCB8fCByZWZUZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoImNhc2giKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhlbXB0UGhyYXNlcy5zb21lKHAgPT4gcmVmVGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHApKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIG1heENHKys7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgck5vID0gIkNHIiArIFN0cmluZyhtYXhDRykucGFkU3RhcnQoNiwgJzAnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByRGF0ZSA9IHBhcnRzWzBdLnJlcGxhY2UoL1wvL2csICctJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgclRvdyA9IChhbXQgPj0gMTAwMDApID8gIkNPUlBVUyIgOiAiT1RIRVJTIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb2RlID0gcmVmVGV4dC50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKCJVUEkiKSA/ICJVUEkiIDogKHJlZlRleHQudG9VcHBlckNhc2UoKS5pbmNsdWRlcygiQ0hRIikgfHwgcmVmVGV4dC50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKCJDSEVRVUUiKSA/ICJDSEVRVUUiIDogIk9OTElORSIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3Um93ID0gYCR7ck5vfXwke3JEYXRlfXx8fHx8fHx8JHthbXR9fCR7cmVmVGV4dH18JHttb2RlfXwke3JUb3d9fHwke2ltcG9ydENvbW1lbnR9fDAwMDAwMHx8fHxJTkRJQXxgOw0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3Ui5wdXNoKG5ld1Jvdyk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAobmV3Ui5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIEQ6IFVQTE9BRCBVUERBVEVEIE1BSU4gREINCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWREQiA9IGN1cnJlbnREQkNvbnRlbnQgKyAiXG4iICsgbmV3Ui5qb2luKCdcbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogTU1QVF9GSUxFX0RCLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB1cGRhdGVkREINCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gU1RFUCBFOiBDUklUSUNBTCBGSVggLSBVUERBVEUgU0VRVUVOQ0UuVFhUIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbXVzdCB1cGRhdGUgdGhlIENsb3VkIFNlcXVlbmNlIHNvIHRoZSBuZXh0ICJSTiIga25vd3MgdGhlIG5ldyBzdGFydGluZyBwb2ludC4NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdDogTGFzdFJlY2VpcHROdW1iZXJ8VG90YWxSZWNvcmRDb3VudA0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VG90YWxDb3VudCA9IGRiTGluZXMubGVuZ3RoICsgbmV3Ui5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmVjZWlwdE5vID0gIkNHIiArIFN0cmluZyhtYXhDRykucGFkU3RhcnQoNiwgJzAnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcXVlbmNlQ29udGVudCA9IGAke2xhc3RSZWNlaXB0Tm99fCR7bmV3VG90YWxDb3VudH1gOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgInBhdGgiOiAiL3NlcXVlbmNlLnR4dCIsICJtb2RlIjogIm92ZXJ3cml0ZSIgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogc2VxdWVuY2VDb250ZW50DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYFNVQ0NFU1MhXG5CYW5rIHVwZGF0ZWQuXG4ke25ld1IubGVuZ3RofSBSZWNlaXB0cyBhZGRlZC5cblNlcXVlbmNlIHVwZGF0ZWQgdG86ICR7bGFzdFJlY2VpcHROb31gKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJCYW5rIFVwZGF0ZWQuIE5vIERvbm9yIHJlY2VpcHRzIHdlcmUgbmVlZGVkLiIpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaXNCYW5rVXBkYXRlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJBbHJlYWR5IHVwIHRvIGRhdGUuIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkNSSVRJQ0FMIEVSUk9SOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAoYnRuKSB7IGJ0bi5pbm5lclRleHQgPSAiQmFuayBVcGRhdGUiOyBidG4uZGlzYWJsZWQgPSBmYWxzZTsgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vU3VtbWFyeSBNYWluIENhbGxzIGFsbA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gc2hvd0RvbmF0aW9uU3VtbWFyeSgpIHsNCiAgICAgICAgICAgIC8vIDEuIEluaXRpYWxpemUgdG90YWxzIGFzIG51bWJlcnMNCiAgICAgICAgICAgIGxldCB0b3RhbHMgPSB7IHRvZGF5OiAwLCB3ZWVrOiAwLCBtb250aDogMCwgeWVhcjogMCwgZmluWWVhcjogMCwgb3ZlcmFsbDogMCB9Ow0KDQogICAgICAgICAgICBNTVBUX1RFTVAxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQtZXZlbnRzJykuaW5uZXJIVE1MOw0KICAgICAgICAgICAgTU1QVF9URU1QMyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1ldmVudHMnKS5pbm5lckhUTUw7DQoNCg0KICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIC8vIEdldCB0aW1lc3RhbXBzIGZvciBtaWRuaWdodCB0b2RheSBhbmQgNyBkYXlzIGFnbyB0byBlbnN1cmUgYWNjdXJhdGUgIldlZWsiIGNvdW50aW5nDQogICAgICAgICAgICBjb25zdCB0b2RheU1pZG5pZ2h0ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpKS5nZXRUaW1lKCk7DQogICAgICAgICAgICBjb25zdCBzZXZlbkRheXNBZ28gPSB0b2RheU1pZG5pZ2h0IC0gKDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKTsNCg0KICAgICAgICAgICAgY29uc3QgY3VyTSA9IG5vdy5nZXRNb250aCgpOyAvLyAwLTExDQogICAgICAgICAgICBjb25zdCBjdXJZID0gbm93LmdldEZ1bGxZZWFyKCk7DQoNCiAgICAgICAgICAgIC8vIEZpbmFuY2lhbCBZZWFyIExvZ2ljOiBTdGFydHMgQXByaWwgMXN0DQogICAgICAgICAgICAvLyBJbiBKYW4gMjAyNiwgdGhlIEZZIHN0YXJ0ZWQgQXByaWwgMSwgMjAyNQ0KICAgICAgICAgICAgY29uc3QgZnlTdGFydFllYXIgPSAoY3VyTSA+PSAzKSA/IGN1clkgOiBjdXJZIC0gMTsNCiAgICAgICAgICAgIGNvbnN0IGZ5U3RhcnREYXRlID0gbmV3IERhdGUoZnlTdGFydFllYXIsIDMsIDEpLmdldFRpbWUoKTsNCg0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFsaW5lLnRyaW0oKSB8fCBpbmRleCA9PT0gMCkgcmV0dXJuOyAvLyBTa2lwIGVtcHR5IGFuZCBoZWFkZXINCg0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsaW5lLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBDYW5jZWxsYXRpb24gQ2hlY2sgKEZpZWxkIDEzIGlzIFlFUyBvciBOTykNCiAgICAgICAgICAgICAgICBpZiAoZlsxM10gJiYgZlsxM10udHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09ICJZRVMiKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBBbW91bnQgQ29udmVyc2lvbiAoRmllbGQgOSkNCiAgICAgICAgICAgICAgICAvLyBTdHJpcCBjb21tYXMvc3BhY2VzIGFuZCBmb3JjZSB0byBmbG9hdA0KICAgICAgICAgICAgICAgIGxldCBhbXQgPSAwOw0KICAgICAgICAgICAgICAgIGlmIChmWzldKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbkFtdCA9IGZbOV0udG9TdHJpbmcoKS5yZXBsYWNlKC9bXlxkLl0vZywgJycpOw0KICAgICAgICAgICAgICAgICAgICBhbXQgPSBwYXJzZUZsb2F0KGNsZWFuQW10KSB8fCAwOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDQuIERhdGUgUGFyc2luZyAoRmllbGQgMSkNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZlsxXSB8fCAiIjsNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRhdGVTdHIuc3BsaXQoL1tcL1wtXS8pOw0KICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggIT09IDMpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIC8vIEREL01NL1lZWVkNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gcGFyc2VJbnQocGFydHNbMF0sIDEwKTsNCiAgICAgICAgICAgICAgICBjb25zdCBtID0gcGFyc2VJbnQocGFydHNbMV0sIDEwKSAtIDE7DQogICAgICAgICAgICAgICAgY29uc3QgeSA9IHBhcnNlSW50KHBhcnRzWzJdLCAxMCk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVjRGF0ZSA9IG5ldyBEYXRlKHksIG0sIGQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlY1RpbWUgPSByZWNEYXRlLmdldFRpbWUoKTsNCg0KICAgICAgICAgICAgICAgIC8vIDUuIEFjY3VtdWxhdGUgVG90YWxzDQogICAgICAgICAgICAgICAgdG90YWxzLm92ZXJhbGwgKz0gYW10Ow0KDQogICAgICAgICAgICAgICAgLy8gVG9kYXkNCiAgICAgICAgICAgICAgICBpZiAocmVjVGltZSA9PT0gdG9kYXlNaWRuaWdodCkgew0KICAgICAgICAgICAgICAgICAgICB0b3RhbHMudG9kYXkgKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFRoaXMgV2VlayAoNyBEYXlzIGluY2x1c2l2ZSBvZiBjdXJyZW50IHRpbWUpDQogICAgICAgICAgICAgICAgaWYgKHJlY1RpbWUgPj0gc2V2ZW5EYXlzQWdvICYmIHJlY1RpbWUgPD0gbm93LmdldFRpbWUoKSkgew0KICAgICAgICAgICAgICAgICAgICB0b3RhbHMud2VlayArPSBhbXQ7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gVGhpcyBNb250aCAoSmFuIDIwMjYpDQogICAgICAgICAgICAgICAgaWYgKG0gPT09IGN1ck0gJiYgeSA9PT0gY3VyWSkgew0KICAgICAgICAgICAgICAgICAgICB0b3RhbHMubW9udGggKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFRoaXMgWWVhciAoMjAyNikNCiAgICAgICAgICAgICAgICBpZiAoeSA9PT0gY3VyWSkgew0KICAgICAgICAgICAgICAgICAgICB0b3RhbHMueWVhciArPSBhbXQ7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gRmluYW5jaWFsIFllYXIgKEFwcmlsIHRvIG5vdykNCiAgICAgICAgICAgICAgICBpZiAocmVjVGltZSA+PSBmeVN0YXJ0RGF0ZSAmJiByZWNUaW1lIDw9IG5vdy5nZXRUaW1lKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLmZpblllYXIgKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBkaXNwbGF5U3VtbWFyeVRhYmxlKHRvdGFscyk7DQogICAgICAgICAgICBzaG93RG9uYXRpb25TdW1tYXJ5MSgpOw0KICAgICAgICAgICAgc2hvd0RvbmF0aW9uU3VtbWFyeTMoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1N1bW1hcnkgQ29sb3VtIDIgTWlkZGxlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBkaXNwbGF5U3VtbWFyeVRhYmxlKGRhdGEpIHsNCiAgICAgICAgICAgIGNvbnN0IHRhYmxlSFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN1bW1hcnktY29udGFpbmVyIiBzdHlsZT0iYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDI1cHg7IGJvcmRlcjogMnB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDEycHg7IG1hcmdpbjogMTBweCBhdXRvOyBtYXgtd2lkdGg6IDUwMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjogI2ZmOTkzMzsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAyMHB4OyBmb250LWZhbWlseTogJ0FyaWFsIEJsYWNrJywgc2Fucy1zZXJpZjsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNmZmY4ZjA7IHBhZGRpbmctYm90dG9tOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERPTkFUSU9OUyBTVU1NQVJZDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI2ZmOTkzMzsgY29sb3I6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyB0ZXh0LWFsaWduOiBsZWZ0OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+Q2F0ZWdvcnk8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzogMTJweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5BbW91bnQgKOKCuSk8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsiPlRvZGF5PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEudG9kYXkudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+VGhpcyBXZWVrPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEud2Vlay50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5UaGlzIE1vbnRoPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEubW9udGgudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+Q2FsZW5kYXIgWWVhciAoJHtuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCl9KTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhLnllYXIudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY4ZjA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI2QzNTQwMDsiPkZpbmFuY2lhbCBZZWFyPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICNkMzU0MDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhLmZpblllYXIudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij5PVkVSQUxMIFRPVEFMPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxLjJlbTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEub3ZlcmFsbC50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsgZm9udC1zaXplOiAxMXB4OyBjb2xvcjogIzdmOGM4ZDsgdGV4dC1hbGlnbjogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlZCBvbiAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9PGJyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQ2FuY2VsbGVkIHJlY2VpcHRzIGV4Y2x1ZGVkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2VpcHRfZGlzcGxheV9hcmVhJykuaW5uZXJIVE1MID0gdGFibGVIVE1MOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vU3VtbWFyeSBDb2xvdW0gMQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gc2hvd0RvbmF0aW9uU3VtbWFyeTEoKSB7DQogICAgICAgICAgICBjb25zdCBkYXRhID0gY2FsY3VsYXRlQnJlYWtkb3duRGF0YSgpLm1vZGVTdW1tYXJ5Ow0KICAgICAgICAgICAgbGV0IHRvdGFsID0gMDsNCiAgICAgICAgICAgIGxldCByb3dzSHRtbCA9ICIiOw0KDQogICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkgew0KICAgICAgICAgICAgICAgIHRvdGFsICs9IHZhbHVlOw0KICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+JHtrZXl9PC90ZD48dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsiPiR7dmFsdWUudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9PC90ZD48L3RyPmA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWV2ZW50cycpLmlubmVySFRNTCA9IGdlbmVyYXRlU3R5bGVkVGFibGUoIlBheW1lbnQgTW9kZSIsIHJvd3NIdG1sLCB0b3RhbCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TdW1tYXJ5IENvbG91bSAzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBzaG93RG9uYXRpb25TdW1tYXJ5MygpIHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjYWxjdWxhdGVCcmVha2Rvd25EYXRhKCkudG93YXJkc1N1bW1hcnk7DQogICAgICAgICAgICBsZXQgdG90YWwgPSAwOw0KICAgICAgICAgICAgbGV0IHJvd3NIdG1sID0gIiI7DQoNCiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7DQogICAgICAgICAgICAgICAgdG90YWwgKz0gdmFsdWU7DQogICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij4ke2tleX08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+JHt2YWx1ZS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX08L3RkPjwvdHI+YDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LWV2ZW50cycpLmlubmVySFRNTCA9IGdlbmVyYXRlU3R5bGVkVGFibGUoIkNvbnRyaWJ1dGlvbiBUb3dhcmRzIiwgcm93c0h0bWwsIHRvdGFsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1Jlc2V0cyBzaWRlIHBhbmVscyBldmVudHMganBnIC0gZmlyc3QgYW5kIHRoaXJkIGNvbG91bW4gYWZ0ZXIgc3VtbWFyeSAgZGlzcGxheQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gcmVzZXRTaWRlUGFuZWxzKCkgew0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQtZXZlbnRzJykuaW5uZXJIVE1MID0gTU1QVF9URU1QMTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1ldmVudHMnKS5pbm5lckhUTUwgPSBNTVBUX1RFTVAzOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vRm9yIFN1bW1hcnkgLSBCcmVha2Rvd24gY2FsY3VsYXRpb24NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUJyZWFrZG93bkRhdGEoKSB7DQogICAgICAgICAgICBjb25zdCBtb2RlU3VtbWFyeSA9IHsgIkNhc2giOiAwLCAiQ2hlcXVlIjogMCwgIlVQSSI6IDAsICJPbmxpbmUiOiAwLCAiT3RoZXJzIjogMCwgIlBPUyI6IDAgfTsNCiAgICAgICAgICAgIGNvbnN0IHRvd2FyZHNTdW1tYXJ5ID0gew0KICAgICAgICAgICAgICAgICJPVEhFUlMiOiAwLCAiQ09SUFVTIjogMCwgIktVTUJIQUJISVNIRUtIQU0iOiAwLCAiQU5OQURIQUFOQU0iOiAwLA0KICAgICAgICAgICAgICAgICJBTlVTSEEgUE9PSkEiOiAwLCAiQUFWQUhBTlRISSBIT01BTSI6IDAsICJZQVRISSBNQUFMQVlBTSI6IDAsDQogICAgICAgICAgICAgICAgIkJVSUxESU5HIjogMCwgIk5JVEhZQVBPT0pBSSI6IDANCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgaWYgKGNvbHMubGVuZ3RoIDwgMTMpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQoY29sc1s5XSkgfHwgMDsNCiAgICAgICAgICAgICAgICBjb25zdCBtb2RlID0gKGNvbHNbMTFdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdG93YXJkcyA9IChjb2xzWzEyXSB8fCAiIikuc3BsaXQoJy0nKVswXS50cmltKCkudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBpc0NhbmNlbGxlZCA9IChjb2xzWzEzXSB8fCAiIikudHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09ICJZRVMiOw0KDQogICAgICAgICAgICAgICAgaWYgKCFpc0NhbmNlbGxlZCkgew0KICAgICAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSBNb2RlIERhdGENCiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVTdW1tYXJ5Lmhhc093blByb3BlcnR5KG1vZGUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtb2RlU3VtbWFyeVttb2RlXSArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtb2RlU3VtbWFyeVsiT3RoZXJzIl0gKz0gYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gUG9wdWxhdGUgVG93YXJkcyBEYXRhDQogICAgICAgICAgICAgICAgICAgIGlmICh0b3dhcmRzU3VtbWFyeS5oYXNPd25Qcm9wZXJ0eSh0b3dhcmRzKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdG93YXJkc1N1bW1hcnlbdG93YXJkc10gKz0gYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdG93YXJkc1N1bW1hcnlbIk9USEVSUyJdICs9IGFtb3VudDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICByZXR1cm4geyBtb2RlU3VtbWFyeSwgdG93YXJkc1N1bW1hcnkgfTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vTWFpbiBUYWJsZSBTdHlsZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gSW50ZXJuYWwgaGVscGVyIHRvIGtlZXAgdGhlIGV4YWN0IGZvcm1hdCBvZiB5b3VyIENvcHkgKDUpIGZpbGUNCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVTdHlsZWRUYWJsZSh0aXRsZSwgcm93cywgdG90YWwpIHsNCiAgICAgICAgICAgIHJldHVybiBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBoZWlnaHQ6MTAwJTsgb3ZlcmZsb3cteTphdXRvOyBmb250LWZhbWlseTogc2Fucy1zZXJpZjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogIzJjM2U1MDsgbWFyZ2luLWJvdHRvbTogMjBweDsgZm9udC1zaXplOiAxLjJlbTsiPiR7dGl0bGV9PC9oMj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsgZm9udC1zaXplOiAxM3B4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI2YzOWMxMjsgY29sb3I6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiBsZWZ0OyI+Q2F0ZWdvcnk8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7Ij5BbW91bnQgKOKCuSk8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtyb3dzfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+VE9UQUw8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDEuMWVtOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dG90YWwudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TaG93cyB1c2VycyBvbmxpbiBwaG90byBvbiB0aGUgbWFpbiBwYWdlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvKioNCiAgICAgICAgICogUEhPVE8gTE9BREVSIEVOR0lORQ0KICAgICAgICAgKiBVc2VzIHRoZSBwcm92ZW4gWEhSIG1ldGhvZCBmcm9tIHRoZSBsb2dvIGxvZ2ljDQogICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBsb2FkVXNlclBob3RvVmlhWEhSKHBhdGgsIHRhcmdldElkKSB7DQogICAgICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsNCiAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJyk7DQogICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHQpOyAvLyBVc2VzIGdsb2JhbCB0b2tlbiAndCcNCiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdEcm9wYm94LUFQSS1BcmcnLCBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogcGF0aCB9KSk7DQogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InOw0KDQogICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IHhoci5yZXNwb25zZTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0SWQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaW1nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gdXJsOw0KICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ0cmFuc3BhcmVudCI7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJQaG90byBFcnJvciAiICsgeGhyLnN0YXR1cyArICI6ICIgKyBwYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0SWQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaW1nKSBpbWcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiM3NzciOyAvLyBGYWxsYmFjayBncmF5DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHhoci5zZW5kKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAgICAgICogVUkgV0FUQ0hFUiAmIFBPTExJTkcgSEFORExFUg0KICAgICAgICAgKiBXYXRjaGVzICdhY3RpdmVVc2VyTGlzdCcgZm9yIGNoYW5nZXMgZnJvbSB5b3VyIDYwcyBwb2xsDQogICAgICAgICAqLw0KICAgICAgICBjb25zdCBwaG90b1dhdGNoZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBsaXN0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3RpdmVVc2VyTGlzdCcpOw0KICAgICAgICAgICAgaWYgKCFsaXN0RWxlbWVudCkgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCByYXdUZXh0ID0gbGlzdEVsZW1lbnQuaW5uZXJUZXh0LnRyaW0oKTsNCg0KICAgICAgICAgICAgLy8gU2FmZXR5OiBEb24ndCBydW4gaWYgZW1wdHksIGp1c3QgcG9sbGluZyBwbGFjZWhvbGRlciwgb3IgaWYgaW1hZ2VzIGFscmVhZHkgZXhpc3QNCiAgICAgICAgICAgIGlmICghcmF3VGV4dCB8fCByYXdUZXh0ID09PSAiLS0tIiB8fCBsaXN0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpbWcnKSkgcmV0dXJuOw0KDQogICAgICAgICAgICAvLyAxLiBQcmVwYXJlIENvbnRhaW5lciBmb3IgTXVsdGlwbGUgVXNlcnMNCiAgICAgICAgICAgIGxpc3RFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7DQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5mbGV4V3JhcCA9ICJ3cmFwIjsNCiAgICAgICAgICAgIGxpc3RFbGVtZW50LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gImNlbnRlciI7DQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5nYXAgPSAiMTVweCI7DQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5wYWRkaW5nID0gIjVweCI7DQoNCiAgICAgICAgICAgIC8vIDIuIENsZWFyIHRleHQgYW5kIGJ1aWxkIHBob3RvIGFycmF5DQogICAgICAgICAgICAvLyBTdXBwb3J0cyBzaW5nbGUgbmFtZSBvciBjb21tYS1zZXBhcmF0ZWQgbmFtZXMgZnJvbSB5b3VyIHBvbGxlcg0KICAgICAgICAgICAgY29uc3QgbmFtZXMgPSByYXdUZXh0LnNwbGl0KCcsJykubWFwKG4gPT4gbi50cmltKCkpOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuaW5uZXJIVE1MID0gJyc7DQoNCiAgICAgICAgICAgIG5hbWVzLmZvckVhY2goKG5hbWUsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICIiKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBwSWQgPSBgdXNlci1waWMtJHtpbmRleH0tJHtuYW1lLnJlcGxhY2UoL1xzKy9nLCAnJyl9YDsNCiAgICAgICAgICAgICAgICBjb25zdCBwUGF0aCA9ICIvSW1hZ2VzLyIgKyBuYW1lICsgIi5qcGciOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdXNlcldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICB1c2VyV3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KICAgICAgICAgICAgICAgIHVzZXJXcmFwcGVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAiY29sdW1uIjsNCiAgICAgICAgICAgICAgICB1c2VyV3JhcHBlci5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7DQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuc3R5bGUubWluV2lkdGggPSAiNjBweCI7DQoNCiAgICAgICAgICAgICAgICB1c2VyV3JhcHBlci5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgaWQ9IiR7cElkfSIgc3R5bGU9Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQ0cHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDQ0cHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvdmVyOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4zKTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9IiR7bmFtZVswXX0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogM3B4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDFweCAxcHggMnB4IGJsYWNrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke25hbWV9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQoNCiAgICAgICAgICAgICAgICBsaXN0RWxlbWVudC5hcHBlbmRDaGlsZCh1c2VyV3JhcHBlcik7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBUcmlnZ2VyIGluZGl2aWR1YWwgWEhSIGxvYWQNCiAgICAgICAgICAgICAgICBsb2FkVXNlclBob3RvVmlhWEhSKHBQYXRoLCBwSWQpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIElOSVRJQUxJWkUgV0FUQ0hFUg0KICAgICAgICBjb25zdCBvYnNlcnZlclRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3RpdmVVc2VyTGlzdCcpOw0KICAgICAgICBpZiAob2JzZXJ2ZXJUYXJnZXQpIHsNCiAgICAgICAgICAgIHBob3RvV2F0Y2hlci5vYnNlcnZlKG9ic2VydmVyVGFyZ2V0LCB7IGNoaWxkTGlzdDogdHJ1ZSwgY2hhcmFjdGVyRGF0YTogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgZnVuY3Rpb24gY2hlY2tVbnNhdmVkQ2hhbmdlcyhjYWxsYmFjaykgew0KICAgICAgICAgICAgaWYgKCFpc0RpcnR5KSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHVzZXJDaG9pY2UgPSBjb25maXJtKCJSZWNlaXB0IE5vdCBTYXZlZCEgXG5cbkNsaWNrIE9LIHRvIERJU0NBUkQgY2hhbmdlcy4gXG5DbGljayBDQU5DRUwgdG8gU1RBWSBhbmQgU2F2ZS4iKTsNCg0KICAgICAgICAgICAgaWYgKHVzZXJDaG9pY2UpIHsNCiAgICAgICAgICAgICAgICBpc0RpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgdG9nZ2xlTG9jayh0cnVlKTsgLy8gVGhpcyByZS1lbmFibGVzIHNlYXJjaCBhbmQgbmF2IGF1dG9tYXRpY2FsbHkNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vU2F2ZXMgYSBtb2RpZmllZCBvciBuZXcgcmVjZWlwdCAtIGEgYXVkaXQgb2YgcmVjZWlwdCBpcyBwcm9tcHRlZCBiZWZvcmUgc2F2aW5nLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2F2ZVJlY29yZCgpIHsNCiAgICAgICAgICAgIC8vIDEuIFJ1biB0aGUgQXVkaXQgZmlyc3QNCiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHJ1bkF1ZGl0KCk7DQogICAgICAgICAgICBpZiAoIWNvbmZpcm1lZCkgcmV0dXJuOyAvLyBTdG9wIGlmIHVzZXIgY2FuY2Vscw0KDQogICAgICAgICAgICBjb25zdCByZWNvcmRJZHhUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZE51bWJlckRpc3BsYXknKS52YWx1ZTsNCiAgICAgICAgICAgIGlmIChyZWNvcmRJZHhUZXh0ID09PSAiLS0tIikgcmV0dXJuOw0KICAgICAgICAgICAgY29uc3QgaWR4ID0gcGFyc2VJbnQocmVjb3JkSWR4VGV4dCk7DQogICAgICAgICAgICBjb25zdCBzYXZlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9zYXZlJyk7DQoNCiAgICAgICAgICAgIC8vIDIuIEdhdGhlciBkYXRhIGluIGV4YWN0IG9yZGVyIChJbmRpY2VzIDAtMTkpDQogICAgICAgICAgICBjb25zdCByb3dEYXRhID0gWw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlLCAgICAgICAgICAgLy8gMA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9kYXRlJykudmFsdWUsICAgICAgICAgICAgLy8gMQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9uYW1lJykudmFsdWUsICAgICAgICAgICAgLy8gMg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpLnZhbHVlLCAgICAgICAgICAgLy8gMw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hZGRyZXNzJykudmFsdWUucmVwbGFjZSgvXG4vZywgJ34nKSwgLy8gNA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9lbWFpbCcpLnZhbHVlLCAgICAgICAgICAgLy8gNQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKS52YWx1ZSwgICAgICAgICAgICAgLy8gNg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9zdGFyJykudmFsdWUsICAgICAgICAgICAgLy8gNw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9nb3RocmFtJykudmFsdWUsICAgICAgICAgLy8gOA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZSwgICAgICAgICAgLy8gOQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWYnKS52YWx1ZSwgICAgICAgICAgICAgLy8gMTANCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbW9kZScpLnZhbHVlLCAgICAgICAgICAgIC8vIDExDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Rvd2FyZHMnKS52YWx1ZSwgICAgICAgICAvLyAxMg0KICAgICAgICAgICAgICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY2FuY2VsJykuY2hlY2tlZCA/ICJZRVMiIDogIk5PIiksIC8vIDEzDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvbW1lbnRzJykudmFsdWUucmVwbGFjZSgvXG4vZywgJ34nKSwgLy8gMTQNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGluY29kZScpLnZhbHVlLCAgICAgICAgICAvLyAxNQ0KICAgICAgICAgICAgICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcHJpbnRlZCcpLmNoZWNrZWQgPyAiWUVTIiA6ICJOTyIpLCAgLy8gMTYNCiAgICAgICAgICAgICAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3ByYXNhZGFtJykuY2hlY2tlZCA/ICJZRVMiIDogIk5PIiksIC8vIDE3DQogICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb3JwdXMnKS5jaGVja2VkID8gIllFUyIgOiAiTk8iKSwgICAvLyAxOA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb3VudHJ5JykudmFsdWUgICAgICAgICAgIC8vIDE5DQogICAgICAgICAgICBdOw0KDQogICAgICAgICAgICBjb25zdCB1cGRhdGVkTGluZSA9IHJvd0RhdGEuam9pbignfCcpOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHNhdmVCdG4uaW5uZXJUZXh0ID0gIlN5bmNpbmcuLi4iOw0KICAgICAgICAgICAgICAgIHNhdmVCdG4uZGlzYWJsZWQgPSB0cnVlOw0KDQogICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTW2lkeF0gPSB1cGRhdGVkTGluZTsNCg0KICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IE1NUFRfRklMRV9EQiwgIm1vZGUiOiAib3ZlcndyaXRlIiB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBHTE9CQUxfREJfTElORVMuam9pbignXG4nKQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCJNT0RJRklFRCBSRUNPUkQ6ICIgKyB1cGRhdGVkTGluZSk7DQogICAgICAgICAgICAgICAgYWxlcnQoIlJlY29yZCBTYXZlZCBhbmQgU3luY2VkLiIpOw0KICAgICAgICAgICAgICAgIHRvZ2dsZUxvY2sodHJ1ZSk7DQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJTeW5jIEVycm9yOiAiICsgZXJyb3IubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIHNhdmVCdG4uaW5uZXJUZXh0ID0gIlNhdmUiOw0KICAgICAgICAgICAgICAgIHNhdmVCdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBQcm9tcHQgZm9yIHVzZXIgd2hlbiBoZSBsZWF2ZXMgcmVjZWlwdCB3aXRob3V0IHNhdmluZw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gY29uZmlybUxvY2soKSB7DQogICAgICAgICAgICBpZiAoaXNEaXJ0eSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJDaG9pY2UgPSBjb25maXJtKCJSZWNlaXB0IE5vdCBTYXZlZCEgXG5cbkNsaWNrIE9LIHRvIERJU0NBUkQgY2hhbmdlcyBhbmQgTG9jay4gXG5DbGljayBDQU5DRUwgdG8gc3RheSBhbmQgU2F2ZS4iKTsNCiAgICAgICAgICAgICAgICBpZiAoIXVzZXJDaG9pY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBVc2VyIGNsaWNrZWQgQ2FuY2VsLCBzbyBkbyBub3RoaW5nIChzdGF5IGluIGVkaXQgbW9kZSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBJZiBub3QgZGlydHksIG9yIGlmIHVzZXIgY2hvc2UgdG8gZGlzY2FyZCwgcHJvY2VlZCB0byBsb2NrDQogICAgICAgICAgICBpc0RpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICB0b2dnbGVMb2NrKHRydWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFJOIEJ1dHRvbiAtIENyZWF0ZXMgYSBuZXcgcmVjZWlwdCBieSBhc3NpZ25pbmcgbmV3IHJlY2VpcHQgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBjcmVhdGVOZXdSZWNlaXB0KCkgew0KICAgICAgICAgICAgY29uc3Qgcm5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3JuJyk7DQoNCiAgICAgICAgICAgIC8vIDEuIERpc2FibGUgYnV0dG9uIHRvIHByZXZlbnQgZG91YmxlLWNsaWNrcw0KICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgcm5CdG4uaW5uZXJUZXh0ID0gIkFzc2lnbmluZy4uLiI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2FjdGlvbicsICdnZXROZXdSZWNlaXB0Jyk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBDYWxsIHRoZSBHb29nbGUgU2NyaXB0DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzY3JpcHRVUkwsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBQYXJzZSB0aGUgSlNPTiByZXNwb25zZQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UocmVzdWx0VGV4dCk7DQoNCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZWNlaXB0ICYmIGRhdGEuaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gNC4gVXBkYXRlIHRoZSBoaWRkZW4vZGlzcGxheSByZWNvcmQgaW5kZXgNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZE51bWJlckRpc3BsYXknKS52YWx1ZSA9IGRhdGEuaW5kZXg7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNS4gUG9wdWxhdGUgRmllbGRzIHdpdGggRGVmYXVsdHMNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUgPSBkYXRhLnJlY2VpcHQ7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9kYXRlJykudmFsdWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYWRkcmVzcycpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9lbWFpbCcpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYW1vdW50JykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlZicpLnZhbHVlID0gIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gWW91ciByZXF1ZXN0ZWQgZGVmYXVsdHMNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BpbmNvZGUnKS52YWx1ZSA9ICIwMDAwMDAiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY291bnRyeScpLnZhbHVlID0gIklORElBIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX21vZGUnKS52YWx1ZSA9ICJDQVNIIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Rvd2FyZHMnKS52YWx1ZSA9ICJPVEhFUlMiOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNldCB0byBDYW5jZWxsZWQ9WUVTIGluaXRpYWxseSBhcyBhIHBsYWNlaG9sZGVyDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKS5jaGVja2VkID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA2LiBVbmxvY2sgZm9yIGVudHJ5DQogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxvY2soZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBpc0RpcnR5ID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA3LiBTeW5jIGxvY2FsIG1lbW9yeSBzbyB0aGUgbmV3IHJvdyBleGlzdHMgaW4gdGhlIGJyb3dzZXIncyBsaXN0DQogICAgICAgICAgICAgICAgICAgIC8vIFdlIGNyZWF0ZSBhIGJsYW5rIHBpcGVzIHN0cmluZyB0byByZXByZXNlbnQgdGhlIG5ldyByb3cgbG9jYWxseQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBibGFua1JvdyA9IGAke2RhdGEucmVjZWlwdH18fHx8fHx8fHx8fHx8WUVTfHwwMDAwMDB8fHxPfElORElBYDsNCiAgICAgICAgICAgICAgICAgICAgLy9jb25zdCBibGFua1JvdyA9IGAke2RhdGEucmVjZWlwdH18fHx8fHx8fHx8fHx8WUVTfHwwMDAwMDB8Tk98Tk98Tk98SU5ESUFgOw0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIEdMT0JBTF9EQl9MSU5FUyAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5wdXNoKGJsYW5rUm93KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJOZXcgUmVjZWlwdCBBc3NpZ25lZDogIiArIGRhdGEucmVjZWlwdCArICJcblJlY29yZCBJbmRleDogIiArIGRhdGEuaW5kZXgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBkYXRhIHJlY2VpdmVkIGZyb20gc2VydmVyIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiUk4gRXJyb3I6IiwgZSk7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yIGdldHRpbmcgbmV3IG51bWJlcjogIiArIGUubWVzc2FnZSk7DQogICAgICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBybkJ0bi5pbm5lclRleHQgPSAiUk4iOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIGJ5IGRlZmF1bHQgYWxsIHJlY2VpcHQgZmllbGRzIGFyZSBsb2NrZWQuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB0b2dnbGVMb2NrKHNob3VsZExvY2spIHsNCiAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IFsnZmllbGRfcmVjbm8nLCAnZmllbGRfZGF0ZScsICdmaWVsZF9uYW1lJywgJ2ZpZWxkX3Bob25lJywgJ2ZpZWxkX2FkZHJlc3MnLCAnZmllbGRfZW1haWwnLCAnZmllbGRfcGFuJywgJ2ZpZWxkX3N0YXInLCAnZmllbGRfZ290aHJhbScsICdmaWVsZF9hbW91bnQnLCAnZmllbGRfcmVmJywgJ2ZpZWxkX21vZGUnLCAnZmllbGRfdG93YXJkcycsICdmaWVsZF9jb21tZW50cycsICdmaWVsZF9waW5jb2RlJywgJ2ZpZWxkX2NvdW50cnknLCAnZmllbGRfY2FuY2VsJywgJ2ZpZWxkX3ByaW50ZWQnLCAnZmllbGRfcHJhc2FkYW0nLCAnZmllbGRfY29ycHVzJ107DQoNCiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94Um93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoZWNrYm94X3JvdycpOw0KICAgICAgICAgICAgY29uc3Qgc0lucCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9zZWFyY2gnKTsNCiAgICAgICAgICAgIGNvbnN0IHNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQnRuJyk7DQogICAgICAgICAgICBjb25zdCBuYXZCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ0bi1uYXYnKTsNCiAgICAgICAgICAgIGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3NhdmUnKTsNCiAgICAgICAgICAgIGNvbnN0IHJuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1ybicpOyAvLyBBZGRlZA0KDQogICAgICAgICAgICBmaWVsZHMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgaWYgKGVsKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChlbC50eXBlID09PSAiY2hlY2tib3giKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5kaXNhYmxlZCA9IHNob3VsZExvY2s7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5yZWFkT25seSA9IHNob3VsZExvY2s7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kID0gc2hvdWxkTG9jayA/ICIjZmZmZmUwIiA6ICIjZmZmZmZmIjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmICghc2hvdWxkTG9jaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya0RpcnR5ID0gKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGlydHkgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYXZlQnRuKSBzYXZlQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNJbnApIHNJbnAuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzQnRuKSBzQnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZCdG5zLmZvckVhY2goYiA9PiBiLmRpc2FibGVkID0gdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZWwub25pbnB1dCA9IG1hcmtEaXJ0eTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLm9uY2hhbmdlID0gbWFya0RpcnR5Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGlmIChjaGVja2JveFJvdykgew0KICAgICAgICAgICAgICAgIGNoZWNrYm94Um93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNob3VsZExvY2sgPyAiI2ZmZmZlMCIgOiAiI2ZmZmZmZiI7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fdW5sb2NrJykuZGlzYWJsZWQgPSAhc2hvdWxkTG9jazsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fbG9jaycpLmRpc2FibGVkID0gc2hvdWxkTG9jazsNCiAgICAgICAgICAgIGlmIChzYXZlQnRuKSBzYXZlQnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIGlmIChybkJ0bikgcm5CdG4uZGlzYWJsZWQgPSAhc2hvdWxkTG9jazsgLy8gUk4gYWN0aXZlIG9ubHkgd2hlbiBsb2NrZWQNCg0KICAgICAgICAgICAgaWYgKHNob3VsZExvY2spIHsNCiAgICAgICAgICAgICAgICBpc0RpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgaWYgKHNJbnApIHNJbnAuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBpZiAoc0J0bikgc0J0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIG5hdkJ0bnMuZm9yRWFjaChiID0+IGIuZGlzYWJsZWQgPSBmYWxzZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRXNzZW50aWFsIGZpeGVzIC0gbWlzYw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gLS0tIElOSVRJQUxJWkFUSU9OIEFORCBTRUFSQ0ggRklYIC0tLQ0KICAgICAgICAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgY29uc3QgcGhvbmVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpOw0KICAgICAgICAgICAgY29uc3QgZmV0Y2hCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2ZldGNoJyk7DQogICAgICAgICAgICBjb25zdCBzZWFyY2hCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQnRuJyk7DQoNCiAgICAgICAgICAgIC8vIDEuIFRlbGVwaG9uZSBGZXRjaCBCdXR0b24gQ29sb3IgTG9naWMNCiAgICAgICAgICAgIGlmIChwaG9uZUlucHV0ICYmIGZldGNoQnRuKSB7DQogICAgICAgICAgICAgICAgcGhvbmVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSZWFkeSA9IHRoaXMudmFsdWUudHJpbSgpLmxlbmd0aCA+PSAxMDsNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2hCdG4uZGlzYWJsZWQgPSAhaXNSZWFkeTsNCiAgICAgICAgICAgICAgICAgICAgLy8gVHVybnMgZ3JlZW4gd2hlbiAxMCBkaWdpdHMgYXJlIGVudGVyZWQNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2hCdG4uc3R5bGUuYmFja2dyb3VuZCA9IGlzUmVhZHkgPyAiIzRDQUY1MCIgOiAiI2UxZTFlMSI7DQogICAgICAgICAgICAgICAgICAgIGZldGNoQnRuLnN0eWxlLmNvbG9yID0gaXNSZWFkeSA/ICJ3aGl0ZSIgOiAiYmxhY2siOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAyLiBTRUFSQ0ggQlVUVE9OIEZJWDogUmVzZXQgaW5kZXggaWYgYXQgdGhlIGVuZCBvZiBEQg0KICAgICAgICAgICAgaWYgKHNlYXJjaEJ0bikgew0KICAgICAgICAgICAgICAgIC8vIFdlIG92ZXJyaWRlIHRoZSBjbGljayB0byBlbnN1cmUgaXQgZG9lc24ndCBnZXQgc3R1Y2sgYWZ0ZXIgYSBOZXcgUk4NCiAgICAgICAgICAgICAgICBzZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudFJlY29yZEluZGV4ICE9PSAndW5kZWZpbmVkJyAmJiBjdXJyZW50UmVjb3JkSW5kZXggPj0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGF0IHRoZSB2ZXJ5IGxhc3QgcmVjb3JkLCByZXNldCB0byBzdGFydCBzbyBzZWFyY2ggY2FuIGZpbmQgb2xkZXIgcmVjb3Jkcw0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgcGVyZm9ybVNlYXJjaCgpIGZyb20geW91ciBmaWxlIHdpbGwgbm93IHJ1biBjb3JyZWN0bHkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMy4gQXV0by1VbmNoZWNrICdDYW5jZWwnIGJveCB3aGVuIHVzZXIgc3RhcnRzIHR5cGluZw0KICAgICAgICAgICAgWydmaWVsZF9uYW1lJywgJ2ZpZWxkX2Ftb3VudCcsICdmaWVsZF9waG9uZSddLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgew0KICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbENoZWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NhbmNlbCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmNlbENoZWNrICYmIGNhbmNlbENoZWNrLmNoZWNrZWQpIGNhbmNlbENoZWNrLmNoZWNrZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pKCk7DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEZldGNoIGRvbm9yIGJhc2ljIGRldGFpbHMgZnJvbSBwYXN0IChsYXRlc3QpIHJlY2VpcHRzIHdpdGggdGhlIGhlbHAgb2YgdGVsZXBvbmUgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAtLS0gREFUQSBGRVRDSElORyBMT0dJQyAtLS0NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hEb25vckRldGFpbHMoKSB7DQogICAgICAgICAgICBjb25zdCBwaG9uZVRvRmluZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQoNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7DQoNCiAgICAgICAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBvdmVybGF5IGlzIHZpc2libGUNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG5ld2VzdCB0byBvbGRlc3QgKFJldmVyc2UgTG9vcCkNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDE7IGkgPj0gMTsgaS0tKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gR0xPQkFMX0RCX0xJTkVTW2ldOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmUpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY29scyA9IGxpbmUuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBUZWxlcGhvbmUgQ29sdW1uIChJbmRleCAzKQ0KICAgICAgICAgICAgICAgICAgICAvLyBXZSBtYXRjaCB0aGUgbGFzdCAxMCBkaWdpdHMgdG8gaWdub3JlICs5MSBvciBsZWFkaW5nIHplcm9zDQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbkRiUGhvbmUgPSAoY29sc1szXSB8fCAiIikucmVwbGFjZSgvXEQvZywgIiIpLnNsaWNlKC0xMCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbklucHV0UGhvbmUgPSBwaG9uZVRvRmluZC5yZXBsYWNlKC9cRC9nLCAiIikuc2xpY2UoLTEwKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5EYlBob25lID09PSBjbGVhbklucHV0UGhvbmUgJiYgY2xlYW5EYlBob25lLmxlbmd0aCA+PSAxMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIHRoZSBkYXRhIHRvIHlvdXIgZmllbGRzDQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlID0gY29sc1syXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hZGRyZXNzJykudmFsdWUgPSAoY29sc1s0XSB8fCAiIikucmVwbGFjZSgvfi9nLCAnXG4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9lbWFpbCcpLnZhbHVlID0gY29sc1s1XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKS52YWx1ZSA9IGNvbHNbNl0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZ290aHJhbScpLnZhbHVlID0gY29sc1s4XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUgPSBjb2xzWzE1XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb3VudHJ5JykudmFsdWUgPSBjb2xzWzE5XSB8fCAiSU5ESUEiOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBub3RlIGluIGNvbW1lbnRzDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gYCR7U3RyaW5nKGQuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpfS0ke1N0cmluZyhkLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfS0ke2QuZ2V0RnVsbFllYXIoKX1gOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvbW1lbnRzJykudmFsdWUgPSBgQXV0by1GZXRjaGVkIGZyb20gUk46ICR7Y29sc1swXX0gb24gJHt0b2RheX1gOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJOZXcgRG9ub3IgLSBObyBwcmV2aW91cyByZWNvcmRzIGZvdW5kIGZvciB0aGlzIG51bWJlci4iKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAvLyBVbmxvY2sgdGhlIGZvcm0gc28gdGhlIHVzZXIgY2FuIGVkaXQgdGhlIGZldGNoZWQgZGF0YQ0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRvZ2dsZUxvY2sgPT09ICJmdW5jdGlvbiIpIHRvZ2dsZUxvY2soZmFsc2UpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIDMwMCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gU2VhcmNoIFJlY29yZHMgLSBSb3VuZCBSb2JpbiBNZXRob2QNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIC0tLSBGSU5BTCBTRUFSQ0ggRklYOiBQUkVWRU5UUyBHRVRUSU5HIFNUVUNLIEFUIEVORCAtLS0NCiAgICAgICAgZnVuY3Rpb24gcGVyZm9ybVNlYXJjaCgpIHsNCiAgICAgICAgICAgIGNvbnN0IHJhdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9zZWFyY2gnKS52YWx1ZS50cmltKCkudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgIGlmICghcmF3KSByZXR1cm47DQoNCiAgICAgICAgICAgIC8vIEZPUkNFIFNURVAtQkFDSzogSWYgd2UgYXJlIGF0IHRoZSBlbmQsIHN0YXJ0IGxvb2tpbmcgZnJvbSB0aGUgcmVjb3JkIEJFRk9SRSBpdC4NCiAgICAgICAgICAgIGxldCBzdGFydEluZGV4ID0gKGN1cnJlbnRSZWNvcmRJbmRleCA+IDApID8gY3VycmVudFJlY29yZEluZGV4IC0gMSA6IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxOw0KDQogICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsNCiAgICAgICAgICAgIGxldCBpID0gc3RhcnRJbmRleDsNCiAgICAgICAgICAgIGxldCBjb3VudCA9IDA7DQoNCiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgd2hvbGUgZGF0YWJhc2Ugb25jZQ0KICAgICAgICAgICAgd2hpbGUgKGNvdW50IDwgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIGlmIChjaGVja1NlYXJjaE1hdGNoKGksIHJhdykpIHsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gaTsNCiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaS0tOw0KICAgICAgICAgICAgICAgIGlmIChpIDwgMCkgaSA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxOyAvLyBXcmFwIGFyb3VuZCB0byBlbmQNCiAgICAgICAgICAgICAgICBjb3VudCsrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoZm91bmQpIHsNCiAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKGN1cnJlbnRSZWNvcmRJbmRleCk7DQogICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKTsNCiAgICAgICAgICAgICAgICBpZiAoc2xpZGVyKSBzbGlkZXIudmFsdWUgPSBjdXJyZW50UmVjb3JkSW5kZXg7DQogICAgICAgICAgICAgICAgLy8gU3luYyB0aGUgc2VhcmNoIHRyYWNraW5nDQogICAgICAgICAgICAgICAgbGFzdEZvdW5kU2VhcmNoSW5kZXggPSBjdXJyZW50UmVjb3JkSW5kZXg7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBvdGhlciBtYXRjaGVzIGZvdW5kLiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyBFbnN1cmUgeW91ciBoZWxwZXIgaXMgc3RyaWN0bHkgY2hlY2tpbmcgZGF0YQ0KICAgICAgICBmdW5jdGlvbiBjaGVja1NlYXJjaE1hdGNoKGlkeCwgcXVlcnkpIHsNCiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBHTE9CQUxfREJfTElORVNbaWR4XTsNCiAgICAgICAgICAgIGlmICghbGluZSkgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgcmV0dXJuIGxpbmUudG9VcHBlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gVXNlciBuYW1lIHJlZ2lzdGVyZWQgYXMgbG9nZ2VkIGluDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiB3cml0ZVVzZXJMb2coYWN0aW9uKSB7DQogICAgICAgICAgICBpZiAoIU1NUFRfVVNFUl9OQU1FKSByZXR1cm47DQogICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke01NUFRfTE9HX0RJUn0ke01NUFRfVVNFUl9OQU1FfS50eHRgOw0KICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpOw0KICAgICAgICAgICAgY29uc3QgbG9nRW50cnkgPSBgWyR7dGltZXN0YW1wfV0gJHthY3Rpb259XG5gOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGxldCBleGlzdGluZ0NvbnRlbnQgPSAiIjsNCiAgICAgICAgICAgICAgICAvLyBVc2UgJ3QnIGFzIHBlciB5b3VyIEJhc2UgZmlsZQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBmaWxlTmFtZSB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgZXhpc3RpbmdDb250ZW50ID0gYXdhaXQgcmVzLnRleHQoKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gZXhpc3RpbmdDb250ZW50ICsgbG9nRW50cnk7DQogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGZpbGVOYW1lLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiB1cGRhdGVkQ29udGVudA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoIkxvZ2dpbmcgZmFpbGVkOiIsIGVycik7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL3JlbW92ZSB1c2VyIGZyb20gbGlzdCBpZiBub3QgcG9sbGVkIGZvciAyIG1pbnV0ZXMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFRoaXMgaXMgdGhlIGZ1bmN0aW9uIHlvdSBhc2tlZCBmb3IgLSBwbGFjZSBpdCB3aXRoIHlvdXIgb3RoZXIgdXNlci1oYW5kbGluZyBmdW5jdGlvbnMNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlVXNlckZyb21Qb2xsaW5nKHVzZXJOYW1lKSB7DQogICAgICAgICAgICAvLyAxLiBMb2cgdGhlIGV2ZW50IGJlZm9yZSB0aGV5IGFyZSByZW1vdmVkDQogICAgICAgICAgICBhd2FpdCB3cml0ZVVzZXJMb2coYFNFU1NJT04gRU5EOiBVc2VyICR7dXNlck5hbWV9IGRpc2Nvbm5lY3RlZC9yZW1vdmVkIGZyb20gcG9sbGluZy5gKTsNCg0KICAgICAgICAgICAgLy8gMi4gWW91ciBleGlzdGluZyBsb2dpYyB0byBhY3R1YWxseSByZW1vdmUgdGhlbSBmcm9tIHRoZSBVSSBvciBsaXN0DQogICAgICAgICAgICBjb25zb2xlLmxvZyhgVXNlciAke3VzZXJOYW1lfSBoYXMgYmVlbiByZW1vdmVkIGZyb20gYWN0aXZlIHBvbGxpbmcuYCk7DQoNCiAgICAgICAgICAgIC8vIElmIHlvdSBoYXZlIGEgc3BlY2lmaWMgVUkgZWxlbWVudCBmb3IgdGhlIHVzZXIgbGlzdCwgdXBkYXRlIGl0IGhlcmUNCiAgICAgICAgICAgIC8vIHVwZGF0ZUFjdGl2ZVVzZXJMaXN0KCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBMb2NhdGUgdGhpcyBpbiB5b3VyIDxzY3JpcHQ+IHNlY3Rpb24NCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdidXR0b24nKTsNCiAgICAgICAgICAgIGlmICh0YXJnZXQpIHsNCiAgICAgICAgICAgICAgICAvLyBQUk9CRTogQWRkIHRoaXMgbGluZSB0byBpZ25vcmUgdGhlIHNhdmUgYnV0dG9ucw0KICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuaWQgPT09ICdidG5fc2F2ZScgfHwgdGFyZ2V0LmlkID09PSAnYmFuay1zeW5jLWJ0bicpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGJ0blRleHQgPSB0YXJnZXQuaW5uZXJUZXh0IHx8IHRhcmdldC52YWx1ZSB8fCAiSWNvbiBCdXR0b24iOw0KICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZyhgQ0xJQ0tFRCBCVVRUT046IFske2J0blRleHR9XWApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KDQogICAgICAgIC8vIDIuIExBVU5DSCBMT0cgKEluc2lkZSB5b3VyIGV4aXN0aW5nIGluaXRpYWxpemVNTVBUIG9yIHJpZ2h0IGFmdGVyKQ0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2dMYXVuY2goKSB7DQogICAgICAgICAgICAvLyBXYWl0IGEgdGlueSBiaXQgZm9yIHRoZSBuYW1lIHRvIGJlIGF2YWlsYWJsZQ0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIpOw0KICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiTEFVTkNIRUQ6IEhUTUwgU2Vzc2lvbiBTdGFydGVkIik7DQogICAgICAgICAgICB9LCAyMDAwKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gVGhpcyBydW5zIDUgc2Vjb25kcyBhZnRlciBsYXVuY2ggYXMgYSBzZXBhcmF0ZSAiSGVhbHRoIENoZWNrIg0KICAgICAgICAvLyBCdWxsZXRwcm9vZiBJbnRlZ3JpdHkgQ2hlY2sNCiAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgR0xPQkFMX0RCX0xJTkVTID09PSAndW5kZWZpbmVkJyB8fCBHTE9CQUxfREJfTElORVMubGVuZ3RoID09PSAwKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAvLyAxLiBHZXQgQWN0dWFsIERCIERhdGENCiAgICAgICAgICAgICAgICBjb25zdCBsYXN0REJMaW5lID0gR0xPQkFMX0RCX0xJTkVTW0dMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxSTiA9IGxhc3REQkxpbmUuc3BsaXQoJ3wnKVswXS50cmltKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsQ291bnQgPSBHTE9CQUxfREJfTElORVMubGVuZ3RoOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gRmV0Y2ggU2VxdWVuY2Ugd2l0aCBDQUNIRSBCVVNURVINCiAgICAgICAgICAgICAgICAvLyBBZGRpbmcgYSB0aW1lc3RhbXAgZW5zdXJlcyBEcm9wYm94L0Jyb3dzZXIgY2Fubm90IHNlcnZlIGFuIG9sZCB2ZXJzaW9uDQogICAgICAgICAgICAgICAgY29uc3QgY2FjaGVCdXN0ZXIgPSBEYXRlLm5vdygpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNlcVJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6ICcvRGF0YUJhc2VzL3NlcXVlbmNlLnR4dCcgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAnQ3VzdG9tLUJ1c3Rlcic6IGNhY2hlQnVzdGVyIC8vIFNvbWUgYnJvd3NlcnMgbmVlZCB0aGlzIGluIGhlYWRlcg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoc2VxUmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcVRleHQgPSAoYXdhaXQgc2VxUmVzLnRleHQoKSkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBbZmlsZVJOLCBmaWxlQ291bnRdID0gc2VxVGV4dC5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJJbnRlZ3JpdHkgQ2hlY2sgLT4gREI6IiwgYWN0dWFsUk4sICJGaWxlOiIsIGZpbGVSTik7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMy4gQ29tcGFyZQ0KICAgICAgICAgICAgICAgICAgICBpZiAoYWN0dWFsUk4gIT09IGZpbGVSTikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVwYWlyID0gY29uZmlybSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgTUlTTUFUQ0ggREVURUNURUQhXG5cbmAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBEYXRhYmFzZTogJHthY3R1YWxSTn1cbmAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBTZXF1ZW5jZSBGaWxlOiAke2ZpbGVSTn1cblxuYCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYFRoZSBzZXF1ZW5jZSBmaWxlIGlzIG91dGRhdGVkLiBTeW5jIGl0IG5vdz9gDQogICAgICAgICAgICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwYWlyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGVyZm9ybVNlcXVlbmNlRml4KGFjdHVhbFJOLCBhY3R1YWxDb3VudCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiSW50ZWdyaXR5IGNoZWNrIGVycm9yOiIsIGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LCA0MDAwKTsgLy8gU2hvcnRlciB3YWl0IHRpbWUNCg0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBBZG1pbiBQYW5lbA0KICAgICAgICAvLyBVcGRhdGVzIGNvbnRyb2wtbGlzdCAtIHNlbGVjdCBhbGxvd2VkIGNvbnRyb2xzIGZvciBhIHBhcnRpY3VsYXIgdXNlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gMS4gVVBEQVRFRCBGRUFUVVJFUyBMSVNUDQogICAgICAgIGNvbnN0IHByb2plY3RGZWF0dXJlcyA9IFsNCiAgICAgICAgICAgICJidG4tYWRtaW4tYWNjZXNzIiwgImJ0bi1kZXZvdGVlLWFjY2VzcyIsICJtYXN0ZXItaGVhZGVyIiwgImRhc2hib2FyZC1jb250YWluZXIiLCAiZW50cnktY29udGFpbmVyIiwgInJlY2VpcHQtcHJldmlldy1yb3ciLA0KICAgICAgICAgICAgImJ0bl9zYXZlIiwgImJ0bl9ybiIsICJidG5fdW5sb2NrIiwgImJ0bl9sb2NrIiwgInNlYXJjaEJ0biIsICJiYW5rLXN5bmMtYnRuIiwgImJ0bl9jb25zZW50IiwgImJ0blN1bW1hcnkiLA0KICAgICAgICAgICAgInNlY3Rpb25zIiwgIk1pblJlY29yZE51bWJlciINCiAgICAgICAgXTsNCg0KICAgICAgICAvLyAyLiBPUEVOIFBPUlRBTCAoQ29ycmVjdGx5IHBhcnNpbmcgRGV2aWNlIElEIHwgVXNlcm5hbWUgfCBQYXNzd29yZCkNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gb3BlblNlY3VyaXR5UG9ydGFsKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB1c2VyUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6ICcvU2V0dGluZ3MvQXBwcm92ZWQudHh0JyB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgdXNlckxpc3QgPSBbXTsNCiAgICAgICAgICAgICAgICBpZiAodXNlclJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgdXNlclJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgZW1wdHkgbGluZXMsIGNvbW1lbnRzIHN0YXJ0aW5nIHdpdGggIywgYW5kIGxpbmVzIHdpdGhvdXQgcGlwZXMNCiAgICAgICAgICAgICAgICAgICAgdXNlckxpc3QgPSB0ZXh0LnNwbGl0KCdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKHUgPT4gdS50cmltKCkpDQogICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHUgPT4gdSAhPT0gIiIgJiYgIXUuc3RhcnRzV2l0aCgnIycpICYmIHUuaW5jbHVkZXMoJ3wnKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgdGFrZSB0aGUgbWlkZGxlIHBhcnQgKFVzZXJuYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cy5sZW5ndGggPj0gMiA/IHBhcnRzWzFdLnRyaW0oKSA6IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih1ID0+IHUgIT09IG51bGwpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGxldCBodG1sSGVhZGVyID0gYA0KPGRpdiBpZD0icG9ydGFsLW92ZXJsYXkiIHN0eWxlPSJwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjUpOyB6LWluZGV4OjEwMDAwOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHBhZGRpbmc6MjBweDsgb3ZlcmZsb3cteTphdXRvOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHdpZHRoOjgwMHB4OyBhbGlnbi1zZWxmOmZsZXgtc3RhcnQ7IGJveC1zaGFkb3c6MCAxMHB4IDMwcHggcmdiYSgwLDAsMCwwLjQpOyBib3JkZXItcmFkaXVzOjRweDsgZm9udC1mYW1pbHk6QXJpYWw7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9InBhZGRpbmc6MjBweDsgYmFja2dyb3VuZDojODAwMDAwOyBjb2xvcjp3aGl0ZTsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJtYXJnaW46MDsiPlNlY3VyaXR5IFBvcnRhbDwvaDI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlNlbGVjdCBVc2VyOiA8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJwb3J0YWwtdXNlci1zZWxlY3RvciIgb25jaGFuZ2U9ImxvYWRVc2VyU2V0dGluZ3ModGhpcy52YWx1ZSkiIHN0eWxlPSJwYWRkaW5nOjVweDsgYm9yZGVyLXJhZGl1czo0cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IFVzZXIgLS08L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dXNlckxpc3QubWFwKHUgPT4gYDxvcHRpb24gdmFsdWU9IiR7dX0iPiR7dX08L29wdGlvbj5gKS5qb2luKCcnKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBvcnRhbC1jb250ZW50LWFyZWEiIHN0eWxlPSJtaW4taGVpZ2h0OjIwMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9InBhZGRpbmc6NDBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiM2NjY7Ij5TZWxlY3QgYSB1c2VybmFtZSB0byBsb2FkIHRoZSBzZWN1cml0eSBmaWxlLjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0icGFkZGluZzoyMHB4OyB0ZXh0LWFsaWduOnJpZ2h0OyBib3JkZXItdG9wOjFweCBzb2xpZCAjZWVlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzYXZlU2VjdXJpdHlGaWxlKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiM4MDAwMDA7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjEycHggMzBweDsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NHB4OyBjdXJzb3I6cG9pbnRlcjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlNBVkUgQ0hBTkdFUzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRhbC1vdmVybGF5JykucmVtb3ZlKCkiIHN0eWxlPSJtYXJnaW4tbGVmdDoxMHB4OyBwYWRkaW5nOjEycHggMjVweDsgYm9yZGVyOjFweCBzb2xpZCAjY2NjOyBiYWNrZ3JvdW5kOm5vbmU7IGN1cnNvcjpwb2ludGVyOyI+Q0FOQ0VMPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQo8L2Rpdj5gOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBodG1sSGVhZGVyKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIkVycm9yOiAiICsgZS5tZXNzYWdlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gMy4gTE9BRCBEQVRBIChQYXRoIGlzIG5vdyBjb3JyZWN0bHkgL1NldHRpbmdzL1VzZXJuYW1lLnR4dCkNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZFVzZXJTZXR0aW5ncyh0YXJnZXRVc2VyKSB7DQogICAgICAgICAgICBpZiAoIXRhcmdldFVzZXIpIHJldHVybjsNCiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRhbC1jb250ZW50LWFyZWEnKTsNCiAgICAgICAgICAgIGNvbnRlbnRBcmVhLmlubmVySFRNTCA9ICc8cCBzdHlsZT0icGFkZGluZzoyMHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPkxvYWRpbmcgJyArIHRhcmdldFVzZXIgKyAnLnR4dC4uLjwvcD4nOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gKHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgPyB0IDogTU1QVF9BVVRIX0tFWTsNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3RhcmdldFVzZXJ9LnR4dGAgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IHNldHRpbmdzID0ge307DQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgdGV4dC5zcGxpdCgnXG4nKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSBzZXR0aW5nc1twYXJ0c1swXS50cmltKCldID0gcGFydHNbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBsZXQgcm93c0h0bWwgPSBgPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ij48dGJvZHk+YDsNCg0KICAgICAgICAgICAgICAgIHByb2plY3RGZWF0dXJlcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gc2V0dGluZ3NbaWRdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPT09ICJNaW5SZWNvcmROdW1iZXIiIHx8IGlkID09PSAic2VjdGlvbnMiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6MTVweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7aWR9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5wdXQtJHtpZH0iIHZhbHVlPSIke3ZhbH0iIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoycHggc29saWQgI2U5MWU2MzsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+YDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkWSA9ICh2YWwgPT09ICdZJyB8fCB2YWwgPT09ICcnKSA/ICdzZWxlY3RlZCcgOiAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkTiA9ICh2YWwgPT09ICdOJykgPyAnc2VsZWN0ZWQnIDogJyc7DQogICAgICAgICAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6MTVweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7aWR9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImlucHV0LSR7aWR9IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzo4cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJZIiAke3NlbGVjdGVkWX0+WTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik4iICR7c2VsZWN0ZWROfT5OPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPmA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGA8L3Rib2R5PjwvdGFibGU+YDsNCiAgICAgICAgICAgICAgICBjb250ZW50QXJlYS5pbm5lckhUTUwgPSByb3dzSHRtbDsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29udGVudEFyZWEuaW5uZXJIVE1MID0gIjxwIHN0eWxlPSdwYWRkaW5nOjIwcHg7Jz5FcnJvciBsb2FkaW5nIHNldHRpbmdzLjwvcD4iOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyA0LiBTQVZFIChQYXRoIGZpeGVkIHRvIC9TZXR0aW5ncy9Vc2VybmFtZS50eHQpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHNhdmVTZWN1cml0eUZpbGUoKSB7DQogICAgICAgICAgICBjb25zdCB0YXJnZXRVc2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRhbC11c2VyLXNlbGVjdG9yJykudmFsdWU7DQogICAgICAgICAgICBpZiAoIXRhcmdldFVzZXIpIHJldHVybiBhbGVydCgiU2VsZWN0IHVzZXIhIik7DQoNCiAgICAgICAgICAgIGxldCBmaWxlTGluZXMgPSBbXTsNCiAgICAgICAgICAgIHByb2plY3RGZWF0dXJlcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBpbnB1dC0ke2lkfWApOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgZmlsZUxpbmVzLnB1c2goYCR7aWR9IHwgJHtlbC52YWx1ZS50cmltKCl9YCk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBmaWxlTGluZXMuam9pbignXG4nKTsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBgL1NldHRpbmdzLyR7dGFyZ2V0VXNlcn0udHh0YCwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogZmlsZUNvbnRlbnQNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlNhdmVkOiAiICsgdGFyZ2V0VXNlciArICIudHh0Iik7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0YWwtb3ZlcmxheScpLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIlNhdmUgRXJyb3I6ICIgKyBlLm1lc3NhZ2UpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQ2hlY2tzIGlmIG91ciBtYWluIERCIGlzIHJlYWR5IGZvciB1c2UNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHN0YXJ0SW50ZWdyaXR5UHJvYmUoYXR0ZW1wdHMpIHsNCiAgICAgICAgICAgIGlmIChhdHRlbXB0cyA8PSAwKSByZXR1cm47IC8vIFN0b3AgdHJ5aW5nIGFmdGVyIDEwIGF0dGVtcHRzDQoNCiAgICAgICAgICAgIC8vIDEuIENoZWNrIGlmIFlPVVIgY29yZSBkYXRhIGlzIHJlYWR5DQogICAgICAgICAgICBpZiAodHlwZW9mIEdMT0JBTF9EQl9MSU5FUyAhPT0gJ3VuZGVmaW5lZCcgJiYgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSB7DQoNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU3lzdGVtIFJlYWR5LiBQcm9iaW5nIFNlcXVlbmNlLi4uIik7DQogICAgICAgICAgICAgICAgcGVyZm9ybVNlcXVlbmNlQ2hlY2soKTsNCg0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyAyLiBOb3QgcmVhZHkgeWV0PyBXYWl0IDIgc2Vjb25kcyBhbmQgdHJ5IGFnYWluDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlN5c3RlbSBidXN5Li4uIHJldHJ5aW5nIHByb2JlIGluIDJzIik7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzdGFydEludGVncml0eVByb2JlKGF0dGVtcHRzIC0gMSksIDIwMDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIExvb2tzIGZvciBzZXF1ZW5jZS50eHQgYW5kIGNoZWNrcyBsYXN0IHJlY29yZCBhbmQgcmVjZWlwdCBDRyBudW1iZXIgLSBpZiBub3Qgb2sgLSBwcm9tcHRzIGZvciBhdXRvIGNvcnJlY3Rpb24NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1TZXF1ZW5jZUNoZWNrKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBHZXQgdGhlIHRvdGFsIGNvdW50IChpcnJlc3BlY3RpdmUgb2YgcHJlZml4KQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ291bnQgPSBHTE9CQUxfREJfTElORVMubGVuZ3RoOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gRmluZCB0aGUgbGF0ZXN0IENHIHJlY2VpcHQgYnkgc2VhcmNoaW5nIGJhY2t3YXJkIGZyb20gdGhlIGVuZA0KICAgICAgICAgICAgICAgIGxldCBkYlJOID0gIiI7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlaXB0TnVtYmVyID0gR0xPQkFMX0RCX0xJTkVTW2ldLnNwbGl0KCd8JylbMF0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocmVjZWlwdE51bWJlci5zdGFydHNXaXRoKCJDRyIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYlJOID0gcmVjZWlwdE51bWJlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBGb3VuZCB0aGUgaGlnaGVzdC9sYXRlc3QgQ0cgbnVtYmVyLCBzdG9wIHNlYXJjaGluZw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IElmIG5vIENHIGZvdW5kIGF0IGFsbCwgdXNlIHRoZSBsYXN0IGxpbmUncyBudW1iZXINCiAgICAgICAgICAgICAgICBpZiAoIWRiUk4gJiYgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgZGJSTiA9IEdMT0JBTF9EQl9MSU5FU1tHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMV0uc3BsaXQoJ3wnKVswXS50cmltKCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9EYXRhQmFzZXMvc2VxdWVuY2UudHh0JyB9KQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBjYWNoZTogJ25vLXN0b3JlJw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gKGF3YWl0IHJlcy50ZXh0KCkpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2ZpbGVSTiwgZmlsZUNvdW50XSA9IHRleHQuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlIGZvdW5kIENHIG51bWJlciB3aXRoIHdoYXQgaXMgaW4gc2VxdWVuY2UudHh0DQogICAgICAgICAgICAgICAgICAgIGlmIChkYlJOICE9PSBmaWxlUk4pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGFpciA9IGNvbmZpcm0oYFNFUVVFTkNFIE1JU01BVENIIVxuXG5MYXRlc3QgQ0cgaW4gREI6ICR7ZGJSTn1cbkZpbGUgc2F5czogJHtmaWxlUk59XG5Ub3RhbCBSZWNvcmRzOiAke2RiQ291bnR9XG5cblVwZGF0ZSBzZXF1ZW5jZSBmaWxlP2ApOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGFpcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL0RhdGFCYXNlcy9zZXF1ZW5jZS50eHQnLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBkYlJOICsgInwiICsgZGJDb3VudA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiUHJvYmUgZmV0Y2ggZmFpbGVkLiBOZXR3b3JrIG1pZ2h0IGJlIGJ1c3kuIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gTG9va3MgZm9yIFVzZXJOYW1lLnR4dCBhbmQgY2hlY2tzIHdoYXQgYXJlIHRoZSBjb250cm9scyB0byBiZSBhbGxvd2VkIC0gZnVsbCBhY2Nlc3MgaWYgZmlsZSBub3QgZm91bmQuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBTdGFydCB0aGUgcHJvYmUgKHRyeSAxMCB0aW1lcywgZXZlcnkgMiBzZWNvbmRzKQ0KICAgICAgICBzdGFydEludGVncml0eVByb2JlKDEwKTsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkQW5kQXBwbHlTZWN1cml0eSh1c2VyTmFtZSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3VzZXJOYW1lfS50eHRgIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSByZXR1cm47IC8vIElmIG5vIGZpbGUgZXhpc3RzLCB1c2VyIGhhcyBmdWxsIGFjY2Vzcw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgLy9jb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xuJyk7DQoNCg0KICAgICAgICAgICAgICAgIC8vIFNraXAgY29tbWVudHMgYW5kIGZvcm1hdHRpbmcgbGluZXMNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xuJykuZmlsdGVyKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsID0gbGluZS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBsICE9PSAiIiAmJiAhbC5zdGFydHNXaXRoKCcjJykgJiYgbC5pbmNsdWRlcygnfCcpOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2lkLCBhY2Nlc3NdID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaWQgJiYgYWNjZXNzICYmIGFjY2Vzcy50cmltKCkgPT09ICJOIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkLnRyaW0oKSkgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShpZC50cmltKCkpWzBdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7IC8vIERJU0FQUEVBUg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTZWN1cml0eTogSGlkZGVuICR7aWR9YCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIlNlY3VyaXR5IGZpbGUgbm90IGZvdW5kIGZvciB1c2VyLCBncmFudGluZyBkZWZhdWx0IGFjY2Vzcy4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBpZiBtaW5yZWNvcmQgbnVtYmVyIHNwZWNpZmllZCBpbiB1c2VybmFtZS50eHQgdGhlbiBibG9ja3MgdXNlciB0byB2aWV3IHByZXZpb3VzIHJlY29yZHMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8qKg0KKiBTZWN1cml0eSBHYXRlIGZvciBOYXZpZ2F0aW9uDQoqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRJbmRleCAtIFRoZSBpbmRleCB0aGUgdXNlciBpcyB0cnlpbmcgdG8gbW92ZSB0bw0KKi8NCiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVOYXZpZ2F0aW9uU2VjdXJpdHkodGFyZ2V0SW5kZXgpIHsNCiAgICAgICAgICAgIC8vIElmIHRoZSB0YXJnZXQgaW5kZXggaXMgYWN0dWFsbHkgYSByZWNvcmQgbnVtYmVyICgxLWJhc2VkKSwNCiAgICAgICAgICAgIC8vIHdlIHVzZSBpdCBkaXJlY3RseS4gT3RoZXJ3aXNlLCB3ZSBhc3N1bWUgaXQncyBhIDAtYmFzZWQgYXJyYXkgaW5kZXguDQogICAgICAgICAgICBjb25zdCB0YXJnZXRSTiA9IHRhcmdldEluZGV4ICsgMTsNCg0KICAgICAgICAgICAgaWYgKHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID4gMCAmJiB0YXJnZXRSTiA8IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIvCfm5EgU0VDVVJJVFkgQkxPQ0tcblxuWW91ciBhY2Nlc3MgbGV2ZWwgZG9lcyBub3QgcGVybWl0IHZpZXdpbmcgcmVjb3JkcyBiZWZvcmU6ICIgKyB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STik7DQoNCiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgc2xpZGVyIHZpc3VhbCBpZiBpdCBtb3ZlZA0KICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgc2xpZGVyLnZhbHVlID0gY3VycmVudFJlY29yZEluZGV4Ow0KDQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBEZW55IG5hdmlnYXRpb24NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBBbGxvdyBuYXZpZ2F0aW9uDQogICAgICAgIH0NCg0KICAgICAgICAvLyBJZiBhIGZsb29yIGlzIHNldCwgYW5kIHdlIGFyZSBjdXJyZW50bHkgYXQgYSBsb3dlciByZWNvcmQsIGp1bXAgdG8gdGhlIGZsb29yDQogICAgICAgIGlmICh3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA+IDApIHsNCiAgICAgICAgICAgIC8vIElmIGN1cnJlbnQgaW5kZXggaXMgMCBvciBsZXNzIHRoYW4gdGhlIGZsb29yLCBsb2FkIHRoZSBmbG9vciByZWNvcmQNCiAgICAgICAgICAgIGlmICgoY3VycmVudFJlY29yZEluZGV4ICsgMSkgPCB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STikgew0KICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOIC0gMTsNCiAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKGN1cnJlbnRSZWNvcmRJbmRleCk7DQogICAgICAgICAgICAgICAgdXBkYXRlU2xpZGVyKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gbG9va3MgZm9yIGFwcHJvdmVkLnR4dCBhbmQgYWxsb3dzIHVzZXIgdG8gZW50ZXIgc3cgLSBiYXNlZCBvbiBkZXZpY2UgaWQgYW5kIHBhc3N3b3JkDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5QZXJzb25hbFNlY3VyaXR5R2F0ZShhcHByb3ZlZExpc3RUZXh0LCBjdXJyZW50RGV2SUQpIHsNCiAgICAgICAgICAgIC8vIDEuIElkZW50aWZ5IHRoZSBzcGVjaWZpYyByb3cgZm9yIHRoaXMgZGV2aWNlDQogICAgICAgICAgICBjb25zdCBsaW5lcyA9IGFwcHJvdmVkTGlzdFRleHQuc3BsaXQoJ1xuJykuZmlsdGVyKGwgPT4gbC50cmltKCkgIT09ICIiKTsNCiAgICAgICAgICAgIGNvbnN0IG15Um93ID0gbGluZXMuZmluZChsaW5lID0+IGxpbmUuaW5jbHVkZXMoY3VycmVudERldklEKSk7DQoNCiAgICAgICAgICAgIGlmICghbXlSb3cpIHJldHVybjsNCg0KICAgICAgICAgICAgY29uc3QgcGFydHMgPSBteVJvdy5zcGxpdCgnfCcpLm1hcChwID0+IHAudHJpbSgpKTsNCiAgICAgICAgICAgIGNvbnN0IHVOYW1lID0gcGFydHNbMV07DQogICAgICAgICAgICBjb25zdCB1UGFzcyA9IHBhcnRzWzJdIHx8ICIwIjsNCg0KICAgICAgICAgICAgY2FwdHVyZVNlY3VyaXR5U25hcHNob3QoKTsNCg0KICAgICAgICAgICAgLy8gMi4gSWYgUGFzc3dvcmQgaXMgIjAiLCBza2lwIHRoZSB3aW5kb3cgYW5kIGp1c3QgbG9jayB0aGUgdXNlcg0KICAgICAgICAgICAgaWYgKHVQYXNzID09PSAiMCIpIHsNCiAgICAgICAgICAgICAgICBsb2NrQW5kUmVmcmVzaFVzZXIodU5hbWUpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMy4gT3RoZXJ3aXNlLCBwb3AgdGhlIHdpbmRvdw0KICAgICAgICAgICAgY29uc3QgZ2F0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgZ2F0ZS5pZCA9ICJzZWN1cml0eV9oaWphY2siOw0KICAgICAgICAgICAgZ2F0ZS5zdHlsZSA9ICJwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgyNTUsMjUwLDI0MCwwLjk4KTsgei1pbmRleDo5OTk5OTk7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7IHRyYW5zaXRpb246IDAuM3M7IjsNCg0KICAgICAgICAgICAgZ2F0ZS5pbm5lckhUTUwgPSBgDQo8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBwYWRkaW5nOjQwcHg7IGJvcmRlci1yYWRpdXM6MTVweDsgYm9yZGVyOjNweCBzb2xpZCAjRkY5OTMzOyB0ZXh0LWFsaWduOmNlbnRlcjsgYm94LXNoYWRvdzowIDEwcHggMzBweCByZ2JhKDAsMCwwLDAuMSk7IHdpZHRoOjMyMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImdhdGVfcGhvdG9fY29udGFpbmVyIj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjojMzMzOyBtYXJnaW46MTBweCAwOyI+JHt1TmFtZX08L2gyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJnYXRlX2lucHV0IiBwbGFjZWhvbGRlcj0iRW50ZXIgUElOIiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxNXB4OyBib3JkZXI6MnB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6OHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC1zaXplOjIycHg7IG91dGxpbmU6bm9uZTsgbWFyZ2luLWJvdHRvbToxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImdhdGVfdmVyaWZ5IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxMnB4OyBiYWNrZ3JvdW5kOiMyOGE3NDU7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo4cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGN1cnNvcjpwb2ludGVyOyBmb250LXNpemU6MTZweDsiPlVOTE9DSyBBUFA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgaWQ9ImdhdGVfZXJyIiBzdHlsZT0iY29sb3I6cmVkOyBtYXJnaW4tdG9wOjEwcHg7IGRpc3BsYXk6bm9uZTsiPkludmFsaWQgUGFzc3dvcmQ8L3A+DQo8L2Rpdj5gOw0KDQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGdhdGUpOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfaW5wdXQnKS5mb2N1cygpOw0KDQogICAgICAgICAgICAvLyBGZXRjaCBQaG90byAoTm9uLWJsb2NraW5nKQ0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBwaG90b1BhdGggPSBgL0ltYWdlcy8ke3VOYW1lfS5qcGdgOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IHBob3RvUGF0aCB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgaWYgKHBSLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBhd2FpdCBwUi5ibG9iKCk7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX3Bob3RvX2NvbnRhaW5lcicpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0iJHtVUkwuY3JlYXRlT2JqZWN0VVJMKGIpfSIgc3R5bGU9IndpZHRoOjEyMHB4OyBoZWlnaHQ6MTIwcHg7IGJvcmRlci1yYWRpdXM6NTAlOyBib3JkZXI6M3B4IHNvbGlkICNGRjk5MzM7IG9iamVjdC1maXQ6Y292ZXI7IG1hcmdpbi1ib3R0b206MTBweDsiPmA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygiTm8gY3VzdG9tIHBob3RvLiIpOyB9DQoNCiAgICAgICAgICAgIGNvbnN0IHZlcmlmeSA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfaW5wdXQnKS52YWx1ZSA9PT0gdVBhc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgZ2F0ZS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgbG9ja0FuZFJlZnJlc2hVc2VyKHVOYW1lKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9lcnInKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfaW5wdXQnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX3ZlcmlmeScpLm9uY2xpY2sgPSB2ZXJpZnk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9pbnB1dCcpLm9ua2V5cHJlc3MgPSAoZSkgPT4geyBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHZlcmlmeSgpOyB9Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFRoZSAiSGFtbWVyIiAtIGZvcmNlcyB0aGUgYXBwIHRvIGFja25vd2xlZGdlIFRISVMgdXNlciBhbmQgbm8gb25lIGVsc2UuDQogICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBsb2NrQW5kUmVmcmVzaFVzZXIoZmluYWxOYW1lKSB7DQogICAgICAgICAgICB3aW5kb3cuTU1QVF9VU0VSX05BTUUgPSBmaW5hbE5hbWU7DQoNCiAgICAgICAgICAgIC8vIEZvcmNlIGhlYWRlci9zaWRlYmFyIHVwZGF0ZQ0KICAgICAgICAgICAgY29uc3QgdXNlckxhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3BsYXlVc2VyJyk7DQogICAgICAgICAgICBpZiAodXNlckxhYmVsKSB1c2VyTGFiZWwuaW5uZXJUZXh0ID0gZmluYWxOYW1lOw0KDQogICAgICAgICAgICBjb25zdCBhY3RpdmVMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZVVzZXJMaXN0Jyk7DQogICAgICAgICAgICBpZiAoYWN0aXZlTGlzdCkgYWN0aXZlTGlzdC5pbm5lclRleHQgPSBmaW5hbE5hbWU7DQoNCiAgICAgICAgICAgIC8vIFJlLXJ1biBwZXJtaXNzaW9uIGxvZ2ljIGZvciBUSElTIHVzZXIgc3BlY2lmaWNhbGx5DQogICAgICAgICAgICBpZiAodHlwZW9mIGFwcGx5VXNlclBlcm1pc3Npb25zID09PSAiZnVuY3Rpb24iKSB7DQogICAgICAgICAgICAgICAgYXBwbHlVc2VyUGVybWlzc2lvbnMoZmluYWxOYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgaGlkZSBsb2dpYyBydW5zIEFGVEVSIHRoZSBwYWdlIGFuZCBhbGwgZGF0YSAoaW1hZ2VzL3N0YXRzKSBhcmUgcmVhZHkNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAvLyAxLXNlY29uZCBkZWxheSB0byBlbnN1cmUgYW55IGludGVybmFsICdsb2FkUmVjb3JkJyBmdW5jdGlvbnMgaGF2ZSBmaW5pc2hlZCByZW5kZXJpbmcgcm93cw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgLy8gUmVwbGFjZSAnY3VycmVudFVzZXInIHdpdGggd2hhdGV2ZXIgdmFyaWFibGUgc3RvcmVzIHlvdXIgbG9nZ2VkLWluIG5hbWUNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRVc2VyICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICAgICAgICBhcHBseVVzZXJQZXJtaXNzaW9ucyhjdXJyZW50VXNlcik7DQogICAgICAgICAgICAgICAgICAgIGNhcHR1cmVTZWN1cml0eVNuYXBzaG90KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBsb29rcyBmb3IgdXNlcm5hbWUudHh0IGFuZCBlbmFibGVzIC8gZGlzYWJsZXMgY29udHJvbHMgZm9yIHRoYXQgcGFydGljdWxhciB1c2VyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBhcHBseVVzZXJQZXJtaXNzaW9ucyh1c2VyTmFtZSkgew0KICAgICAgICAgICAgLy8gMS4gSW5pdGlhbCBkZWJ1ZyBhbGVydA0KICAgICAgICAgICAgLy9hbGVydCgiRnVuY3Rpb24gU3RhcnRlZCBmb3I6ICIgKyB1c2VyTmFtZSk7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSAodHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSA/IHQgOiBNTVBUX0FVVEhfS0VZOw0KICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gIi9TZXR0aW5ncy8iICsgdXNlck5hbWUudHJpbSgpICsgIi50eHQiOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogZmlsZVBhdGggfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgnXG4nKTsNCg0KICAgICAgICAgICAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFtpZCwgYWNjZXNzXSA9IGxpbmUuc3BsaXQoJ3wnKS5tYXAocyA9PiBzLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgIGlmICghaWQpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQS4gTWluIFJlY29yZCBMb2dpYyAtLS0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSAiTWluUmVjb3JkTnVtYmVyIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxvb3JWYWx1ZSA9IHBhcnNlSW50KGFjY2VzcykgfHwgMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID0gZmxvb3JWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNvcmRTbGlkZXInKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGlkZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIuc2V0QXR0cmlidXRlKCdtaW4nLCBmbG9vclZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoc2xpZGVyLnZhbHVlKSA8IGZsb29yVmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLnZhbHVlID0gZmxvb3JWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsb2FkUmVjb3JkQnlJbmRleCA9PT0gImZ1bmN0aW9uIikgbG9hZFJlY29yZEJ5SW5kZXgoZmxvb3JWYWx1ZSAtIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBCLiBTZWN0aW9ucyBMb2dpYyAoMS03KSAtLS0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSAic2VjdGlvbnMiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KCJTZWN0aW9ucyByZWFkOiBbIiArIGFjY2VzcyArICJdIik7DQogICAgICAgICAgICAgICAgICAgICAgICBhcHBseVNlY3Rpb25BY2Nlc3MoYWNjZXNzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBDLiBTdGFuZGFyZCBVSSBUb2dnbGVzIChOID0gSGlkZSkgLS0tDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgIyR7aWR9LCAuJHtpZH1gKTsNCiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMuZm9yRWFjaChlbCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjZXNzID09PSAiTiIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJywgJ2ltcG9ydGFudCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIkVycm9yOiAiICsgZS5tZXNzYWdlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gYXBwbHlTZWN0aW9uQWNjZXNzKGFsbG93ZWRTdHJpbmcpIHsNCiAgICAgICAgICAgIC8vIFdlIHRhcmdldCB0aGUgY29udGFpbmVycyBleGFjdGx5IGFzIHlvdSBkZWZpbmVkIHRoZW0NCiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25NYXAgPSB7DQogICAgICAgICAgICAgICAgJzAnOiAnI3JhZGlvLWRvY2snLCAvL0ludGVybmV0IFJhZGlvDQogICAgICAgICAgICAgICAgJzEnOiAnLnBhbmNoYW5nLW91dGVyJywNCiAgICAgICAgICAgICAgICAnMic6ICcuZmxhc2hiYWNrLWNvbnRhaW5lcicsDQogICAgICAgICAgICAgICAgJzMnOiAnLmNoaXRyYW0tY29udGFpbmVyJywNCiAgICAgICAgICAgICAgICAnNCc6ICcubW1wdC1hcmNoaXZlLWJveCcsDQogICAgICAgICAgICAgICAgJzUnOiAnI2F1ZGlvX2FyY2hpdmVfc2VjdGlvbicsDQogICAgICAgICAgICAgICAgJzYnOiAnI3ZpZGVvLWFyY2hpdmUtYm94JywgLy8gVGFyZ2V0ZWQgdmlhIHRoZSBJRCB3ZSBhZGRlZCBpbiBTdGVwIDENCiAgICAgICAgICAgICAgICAnNyc6ICcjcGFuY2hhbmdfc2VjdGlvbicsDQogICAgICAgICAgICAgICAgJzgnOiAnLmx1bmFyLXNlY3Rpb24nLA0KICAgICAgICAgICAgICAgICc4JzogJy5uYXYtc2VjdGlvbicsDQogICAgICAgICAgICAgICAgJ0cnOiAnLmd1cnUtc2VjdGlvbicNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNlY3Rpb25NYXApLmZvckVhY2gobnVtID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RvciA9IHNlY3Rpb25NYXBbbnVtXTsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOw0KDQogICAgICAgICAgICAgICAgaWYgKGVsKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIElGIHRoZSBudW1iZXIgaXMgaW4gdGhlIHN0cmluZyAoZS5nLiAnMTIzJyksIGtlZXAvc2hvdyBpdC4NCiAgICAgICAgICAgICAgICAgICAgLy8gSUYgTk9UIChlLmcuICc2JyBpcyBtaXNzaW5nKSwgaGlkZSBpdCBpbW1lZGlhdGVseS4NCiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbG93ZWRTdHJpbmcuaW5jbHVkZXMobnVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBUYWtlcyBhIHNuYXAgb2YgdXNlciB3aGlsZSBsYXVuY2ggYW5kIHB1dHMgaW4gbG9nIGZvbGRlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gSU5ERVBFTkRFTlQgU0VDVVJJVFkgU05BUFNIT1QNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gY2FwdHVyZVNlY3VyaXR5U25hcHNob3QoKSB7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gR2V0IENhbWVyYQ0KICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgdmlkZW86IHRydWUgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpOw0KICAgICAgICAgICAgICAgIHZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsNCiAgICAgICAgICAgICAgICBhd2FpdCB2aWRlby5wbGF5KCk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBDYXB0dXJlIEltYWdlDQogICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7DQogICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gdmlkZW8udmlkZW9XaWR0aDsNCiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gdmlkZW8udmlkZW9IZWlnaHQ7DQogICAgICAgICAgICAgICAgY2FudmFzLmdldENvbnRleHQoJzJkJykuZHJhd0ltYWdlKHZpZGVvLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgbmV3IFByb21pc2UocmVzID0+IGNhbnZhcy50b0Jsb2IocmVzLCAnaW1hZ2UvanBlZycsIDAuOCkpOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gU2ltcGxlIEZpbGVuYW1lIChVc2VyX0RhdGVfVGltZS5qcGcpDQogICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBub3cuZ2V0RnVsbFllYXIoKSArICItIiArDQogICAgICAgICAgICAgICAgICAgIFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJykgKyAiLSIgKw0KICAgICAgICAgICAgICAgICAgICBTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKSArICJfIiArDQogICAgICAgICAgICAgICAgICAgIFN0cmluZyhub3cuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKSArICItIiArDQogICAgICAgICAgICAgICAgICAgIFN0cmluZyhub3cuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtNTVBUX0xPR19ESVJ9VXNlcl8ke3RpbWVzdGFtcH0uanBnYDsNCg0KICAgICAgICAgICAgICAgIC8vIDQuIFVwbG9hZCB0byBEcm9wYm94IChVc2VzIHRoZSBnbG9iYWwgdG9rZW4gJ3QnKQ0KICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBmaWxlTmFtZSwgbW9kZTogJ2FkZCcgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogYmxvYg0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gNS4gVHVybiBvZmYgQ2FtZXJhDQogICAgICAgICAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4gdHJhY2suc3RvcCgpKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgLy8gU2lsZW50IGZhaWwgLSBwcmV2ZW50cyB0aGUgYXBwIGZyb20gaGFuZ2luZyBpZiBubyBjYW1lcmEgaXMgZm91bmQNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIlNuYXBzaG90IHNraXBwZWQuIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BZG1pbiBQYW5lbA0KICAgICAgICAvLyBTaG93cyBsYXRlc3QgdHdvIHBob3RvcyBvZiB1c2VycyBsb2dnZWQgaW4gYWRtaW4gcGFuZWwNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRBZG1pblNuYXBzKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBGZXRjaCB0aGUgbGlzdCBvZiBmaWxlcw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2xpc3RfZm9sZGVyJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0xPR19ESVIgfSkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIFNvcnQgYnkgZGF0ZSBhbmQgdGFrZSBsYXRlc3QgMg0KICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZGF0YS5lbnRyaWVzDQogICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmLm5hbWUuZW5kc1dpdGgoJy5qcGcnKSkNCiAgICAgICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuY2xpZW50X21vZGlmaWVkKSAtIG5ldyBEYXRlKGEuY2xpZW50X21vZGlmaWVkKSkNCiAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIDIpOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gUG9wdWxhdGUgdGhlIGNlbGxzDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzbmFwLWJveC0ke2kgKyAxfWApOw0KICAgICAgICAgICAgICAgICAgICBjZWxsLmlubmVySFRNTCA9ICIiOyAvLyBDbGVhciBleGlzdGluZw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChmaWxlc1tpXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlua1JlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2dldF90ZW1wb3JhcnlfbGluaycsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogZmlsZXNbaV0ucGF0aF9sb3dlciB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rRGF0YSA9IGF3YWl0IGxpbmtSZXMuanNvbigpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHRpbWUgZnJvbSBmaWxlbmFtZSBVc2VyX1lZWVktTU0tRERfSEgtTU0uanBnDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gZmlsZXNbaV0ubmFtZS5zcGxpdCgnXycpWzJdPy5yZXBsYWNlKCcuanBnJywgJycpIHx8ICJMb2ciOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTBweDsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzY2NjsgbWFyZ2luLWJvdHRvbToycHg7Ij4ke3RpbWV9PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7bGlua0RhdGEubGlua30iIHN0eWxlPSJ3aWR0aDo3MHB4OyBoZWlnaHQ6NzBweDsgb2JqZWN0LWZpdDpjb3ZlcjsgYm9yZGVyOjFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOjRweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIkNvdWxkIG5vdCBsb2FkIHNlY3VyaXR5IHNuYXBzaG90cy4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBBdWRpdHMgdGhlIGVudHJpZXMgb2YgUmVjZWlwdCBmaWxsZWQganVzdCBiZWZvcmUgc2F2aW5nIGFuZCBwb2ludHMgb3V0IHBvc3NpYmxlIGVycm9ycw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gcnVuQXVkaXQoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBpc0NoZWNrZWQgPSAoaWQpID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5jaGVja2VkOw0KICAgICAgICAgICAgICAgIGNvbnN0IGdldFZhbCA9IChpZCkgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnZhbHVlLnRyaW0oKTsNCg0KICAgICAgICAgICAgICAgIC8vIDEuIERBVEEgVkFMSURBVElPTg0KICAgICAgICAgICAgICAgIGNvbnN0IHBob25lID0gZ2V0VmFsKCdmaWVsZF9waG9uZScpLnJlcGxhY2UoL1xEL2csICcnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBwYW4gPSBnZXRWYWwoJ2ZpZWxkX3BhbicpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgY29uc3QgZW1haWwgPSBnZXRWYWwoJ2ZpZWxkX2VtYWlsJyk7DQogICAgICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChnZXRWYWwoJ2ZpZWxkX2Ftb3VudCcpKSB8fCAwOw0KICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2FuY2VsbGVkID0gaXNDaGVja2VkKCdmaWVsZF9jYW5jZWwnKTsNCg0KICAgICAgICAgICAgICAgIGxldCBlcnJvcnMgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgYmxhbmtzID0gW107DQoNCiAgICAgICAgICAgICAgICAvLyBDb21wcmVoZW5zaXZlIEJsYW5rIENoZWNrIChBbGwgdGV4dC90ZXh0YXJlYSBmaWVsZHMpDQogICAgICAgICAgICAgICAgY29uc3QgdGV4dEZpZWxkcyA9IHsNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3JlY25vJzogJ1JlY2VpcHQgTm8nLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfZGF0ZSc6ICdEYXRlJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX25hbWUnOiAnTmFtZScsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9waG9uZSc6ICdQaG9uZScsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9hZGRyZXNzJzogJ0FkZHJlc3MnLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfZW1haWwnOiAnRW1haWwnLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfcGFuJzogJ1BBTicsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9zdGFyJzogJ1N0YXInLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfZ290aHJhbSc6ICdHb3RocmFtJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2Ftb3VudCc6ICdBbW91bnQnLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfcmVmJzogJ1JlZmVyZW5jZS9DaHEgTm8nLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfY29tbWVudHMnOiAnQ29tbWVudHMnLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfcGluY29kZSc6ICdQaW5jb2RlJw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpZCBpbiB0ZXh0RmllbGRzKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghZ2V0VmFsKGlkKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYmxhbmtzLnB1c2godGV4dEZpZWxkc1tpZF0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gRm9ybWF0ICYgTG9naWNhbCBWYWxpZGF0aW9ucw0KICAgICAgICAgICAgICAgIGlmIChwaG9uZS5sZW5ndGggPiAwICYmIHBob25lLmxlbmd0aCAhPT0gMTApIHsNCiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goIuKaoO+4jyBQaG9uZSBudW1iZXIgbXVzdCBiZSBleGFjdGx5IDEwIGRpZ2l0cy4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAocGFuLmxlbmd0aCA+IDAgJiYgIS9bQS1aXXs1fVswLTldezR9W0EtWl17MX0vLnRlc3QocGFuKSkgew0KICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgi4pqg77iPIFBBTiBmb3JtYXQgaXMgaW52YWxpZCAoRXhwZWN0ZWQ6IEFBQUFBMTExMUEpLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBORVcgRU1BSUwgVkFMSURBVElPTiAtLS0NCiAgICAgICAgICAgICAgICBpZiAoZW1haWwubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxzQF0rQFteXHNAXStcLlteXHNAXSskLzsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbWFpbFJlZ2V4LnRlc3QoZW1haWwpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgi4pqg77iPIEVtYWlsIGZvcm1hdCBpcyBpbnZhbGlkIChFeHBlY3RlZDogbmFtZUBkb21haW4uY29tKS4iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFplcm8gQW1vdW50IEhpZ2hsaWdodCBMb2dpYw0KICAgICAgICAgICAgICAgIGxldCBhbW91bnRXYXJuaW5nID0gIiI7DQogICAgICAgICAgICAgICAgaWYgKCFpc0NhbmNlbGxlZCAmJiBhbW91bnQgPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYW1vdW50V2FybmluZyA9IGA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmYyZjI7IGNvbG9yOiNkOTMwMjU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjZDkzMDI1OyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWJvdHRvbToxNXB4OyBmb250LXdlaWdodDpib2xkOyB0ZXh0LWFsaWduOmNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pqg77iPIENSSVRJQ0FMOiBBbW91bnQgaXMgMC4gUGxlYXNlIHZlcmlmeSBpZiB0aGlzIGlzIGludGVudGlvbmFsLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgi4pqg77iPIEFtb3VudCBpcyB6ZXJvLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAgICAgLy8gMi4gQlVJTEQgVEhFIEFVRElUIFVJDQogICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsSGVhZGVyID0gaXNDYW5jZWxsZWQgPw0KICAgICAgICAgICAgICAgICAgICBgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDpyZWQ7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6MS4yZW07IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tYm90dG9tOjE1cHg7Ij4hISEgUkVDRUlQVCBJUyBDQU5DRUxMRUQgISEhPC9kaXY+YCA6ICIiOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzR3JpZCA9IGANCjxkaXYgc3R5bGU9ImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsgZ2FwOiAxMHB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyBwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7Ij4NCjxkaXY+Q2FuY2VsbGVkOiAke2lzQ2FuY2VsbGVkID8gJzxiIHN0eWxlPSJjb2xvcjpyZWQ7Ij5ZRVM8L2I+JyA6ICdOTyd9PC9kaXY+DQo8ZGl2PlByaW50ZWQ6ICR7aXNDaGVja2VkKCdmaWVsZF9wcmludGVkJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPGRpdj5QcmFzYWRhbTogJHtpc0NoZWNrZWQoJ2ZpZWxkX3ByYXNhZGFtJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPGRpdj5Db3JwdXMgU2lnbmVkOiAke2lzQ2hlY2tlZCgnZmllbGRfY29ycHVzJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICBvdmVybGF5LnN0eWxlID0gInBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuODUpOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgei1pbmRleDoxMDAwMTsgZm9udC1mYW1pbHk6c2Fucy1zZXJpZjsiOw0KDQoNCiAgICAgICAgICAgICAgICBvdmVybGF5LmlubmVySFRNTCA9IGANCjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHBhZGRpbmc6MjVweDsgYm9yZGVyLXJhZGl1czoxMnB4OyB3aWR0aDo1ODBweDsgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgwLDAsMCwwLjUpOyBtYXgtaGVpZ2h0OiA5MHZoOyBvdmVyZmxvdy15OiBhdXRvOyI+DQoke2NhbmNlbEhlYWRlcn0NCiR7YW1vdW50V2FybmluZ30NCg0KPGgyIHN0eWxlPSJtYXJnaW4tdG9wOjA7IGJvcmRlci1ib3R0b206MnB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOjEwcHg7Ij5SZWNlaXB0IEF1ZGl0IFJlcG9ydDwvaDI+DQoNCjxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206MTVweDsgbGluZS1oZWlnaHQ6MS41OyI+DQo8Yj5SZWNlaXB0OjwvYj4gJHtnZXRWYWwoJ2ZpZWxkX3JlY25vJyl9IHwgPGI+RGF0ZTo8L2I+ICR7Z2V0VmFsKCdmaWVsZF9kYXRlJyl9PGJyPg0KPGI+TmFtZTo8L2I+ICR7Z2V0VmFsKCdmaWVsZF9uYW1lJyl9PGJyPg0KPGI+QW1vdW50OjwvYj4gPHNwYW4gc3R5bGU9IiR7YW1vdW50ID09PSAwID8gJ2NvbG9yOnJlZDsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjEuMmVtOycgOiAnJ30iPuKCuSR7YW1vdW50fTwvc3Bhbj4gfCA8Yj5Ub3dhcmRzOjwvYj4gJHtnZXRWYWwoJ2ZpZWxkX3Rvd2FyZHMnKX0NCjwvZGl2Pg0KDQo8aDQgc3R5bGU9Im1hcmdpbjogMTVweCAwIDVweCAwOyBjb2xvcjojNTU1OyI+RGF0YWJhc2UgU3RhdHVzIEZsYWdzOjwvaDQ+DQoke3N0YXR1c0dyaWR9DQoNCiR7YmxhbmtzLmxlbmd0aCA+IDAgPyBgDQo8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjE1cHg7IGJhY2tncm91bmQ6I2U4ZjRmZDsgcGFkZGluZzoxMHB4OyBib3JkZXItbGVmdDo1cHggc29saWQgIzIxOTZGMzsiPg0KPGIgc3R5bGU9ImNvbG9yOiMwZDQ3YTE7Ij5UaGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgYmxhbms6PC9iPjxicj4NCjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC45ZW07IGNvbG9yOiMzMzM7Ij4ke2JsYW5rcy5qb2luKCcsICcpfTwvc3Bhbj4NCjwvZGl2Pg0KYCA6ICIifQ0KDQoke2Vycm9ycy5sZW5ndGggPiAwID8gYA0KPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBiYWNrZ3JvdW5kOiNmZmYzY2Q7IHBhZGRpbmc6MTBweDsgYm9yZGVyLWxlZnQ6NXB4IHNvbGlkICNmZmMxMDc7Ij4NCjxiIHN0eWxlPSJjb2xvcjojODU2NDA0OyI+VmFsaWRhdGlvbiBBbGVydHM6PC9iPjxicj4NCiR7ZXJyb3JzLmpvaW4oJzxicj4nKX0NCjwvZGl2Pg0KYCA6ICIifQ0KDQo8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBtYXJnaW4tdG9wOjI1cHg7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyBwYWRkaW5nLXRvcDogMTVweDsiPg0KPGJ1dHRvbiBpZD0iYXVkaXRfYmFjayIgc3R5bGU9InBhZGRpbmc6MTBweCAyMHB4OyBtYXJnaW4tcmlnaHQ6MTBweDsgY3Vyc29yOnBvaW50ZXI7IGJvcmRlci1yYWRpdXM6NXB4OyBib3JkZXI6MXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQ6IHdoaXRlOyI+R28gQmFjayAmIEVkaXQ8L2J1dHRvbj4NCjxidXR0b24gaWQ9ImF1ZGl0X2NvbmZpcm0iIHN0eWxlPSJwYWRkaW5nOjEwcHggMzBweDsgYmFja2dyb3VuZDojMjhhNzQ1OyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NXB4OyBjdXJzb3I6cG9pbnRlcjsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOiAxLjFlbTsiPkNPTkZJUk0gJiBTWU5DPC9idXR0b24+DQo8L2Rpdj4NCjwvZGl2PmA7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGl0X2JhY2snKS5vbmNsaWNrID0gKCkgPT4geyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXkpOyByZXNvbHZlKGZhbHNlKTsgfTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaXRfY29uZmlybScpLm9uY2xpY2sgPSAoKSA9PiB7IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7IHJlc29sdmUodHJ1ZSk7IH07DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gRW5zdXJlIGl0IHJ1bnMgYWZ0ZXIgdGhlIHBhZ2UgaGFzIGZpbmlzaGVkIGFsbCBpdHMgaW50ZXJuYWwgZGF0YS1sb2FkaW5nDQogICAgICAgIHdpbmRvdy5vbmxvYWQgPSAoKSA9PiB7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRVc2VyICE9PSAndW5kZWZpbmVkJykgYXBwbHlVc2VyUGVybWlzc2lvbnMoY3VycmVudFVzZXIpOw0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH07DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQW5vbnkgUmVjZWlwdHMgQXV0b2ZpbGwgZnJvbSBrbm93biByZWNlaXB0IHRvIGFub255IC0gaW5wdXQgZnJvbSBNTVBUX0xJTktfQU5PTlkgQW5vbnlGaWxsLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkFub255RmlsbCgpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goTU1QVF9MSU5LX0FOT05ZKTsNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoIkxpbmsgdW5yZWFjaGFibGUiKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBpbmdUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IG1hcHBpbmdUZXh0LnNwbGl0KCdcbicpLmZpbHRlcihsaW5lID0+IGxpbmUuaW5jbHVkZXMoJ3wnKSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlTWFkZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGxldCB1cGRhdGVDb3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3RhcmdldFJOLCBzb3VyY2VSTl0gPSBsaW5lLnNwbGl0KCd8JykubWFwKHAgPT4gcC50cmltKCkpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZVJvdyA9IEdMT0JBTF9EQl9MSU5FUy5maW5kKHIgPT4gci5zdGFydHNXaXRoKHNvdXJjZVJOICsgInwiKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEluZGV4ID0gR0xPQkFMX0RCX0xJTkVTLmZpbmRJbmRleChyID0+IHIuc3RhcnRzV2l0aCh0YXJnZXRSTiArICJ8IikpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VSb3cgJiYgdGFyZ2V0SW5kZXggIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gc291cmNlUm93LnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IEdMT0JBTF9EQl9MSU5FU1t0YXJnZXRJbmRleF0uc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIDEuIERJUkVDVCBSRVBMSUNBVElPTiAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRbMl0gPSBzWzJdOyAgLy8gTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdFszXSA9IHNbM107ICAvLyBQaG9uZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdFs0XSA9IHNbNF07ICAvLyBBZGRyZXNzDQogICAgICAgICAgICAgICAgICAgICAgICB0WzVdID0gc1s1XTsgIC8vIEVtYWlsDQogICAgICAgICAgICAgICAgICAgICAgICB0WzZdID0gc1s2XTsgIC8vIFBBTg0KICAgICAgICAgICAgICAgICAgICAgICAgdFs3XSA9IHNbN107ICAvLyBTdGFyDQogICAgICAgICAgICAgICAgICAgICAgICB0WzhdID0gc1s4XTsgIC8vIEdvdGhyYW0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRbMTVdID0gc1sxNV07IC8vIFBpbiBDb2RlDQogICAgICAgICAgICAgICAgICAgICAgICB0WzE5XSA9IHNbMTldOyAvLyBDb3VudHJ5DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSAyLiBESVJFQ1QgQ09NTUVOVCBBUFBFTkQgLS0tDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBjaGVja3MsIG5vICJpZiIgYmxvY2tzLiBKdXN0IGFwcGVuZCB0byBpbmRleCAxNC4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGUgPSAiRGV0YWlscyBJbXBvcnRlZCBmcm9tICIgKyBzb3VyY2VSTjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZENvbW1lbnQgPSAodFsxNF0gfHwgIiIpLnRyaW0oKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhbiBvbGQgY29tbWVudCwgYWRkIHBpcGU7IG90aGVyd2lzZSBqdXN0IHRoZSBub3RlLg0KICAgICAgICAgICAgICAgICAgICAgICAgdFsxNF0gPSBvbGRDb21tZW50ID8gKG9sZENvbW1lbnQgKyAiIDogIiArIG5vdGUpIDogbm90ZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIDMuIFJFLUpPSU4gLS0tDQogICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVNbdGFyZ2V0SW5kZXhdID0gdC5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VNYWRlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VNYWRlKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIEFVVEhFTlRJQ0FUSU9ODQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogdG9rZW5QYXJhbXMNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRva2VuUmVzLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBVUExPQUQNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBsb2FkUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW5EYXRhLmFjY2Vzc190b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEdMT0JBTF9EQl9MSU5FUy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICh1cGxvYWRSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJBbm9ueUZpbGw6IERvbmUuICIgKyB1cGRhdGVDb3VudCArICIgcmVjb3JkcyB1cGRhdGVkLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQW5vbnlGaWxsIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBCYWNrdXBzIENvbXBsZXRlIEFwcCBGb2xkZXIgd2l0aCBhbGwgZmlsZXMgYW5kIHB1dHMgaW4gQmFja3VwIEZvbGRlciB3aXRoIFRpbWVzdGFtcA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuTU1QVEJhY2t1cCgpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBHZW5lcmF0ZSBUaW1lc3RhbXAgZm9yIEZvbGRlciBOYW1lDQogICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBub3cudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdICsgIl8iICsNCiAgICAgICAgICAgICAgICAgICAgbm93LmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpICsgIi0iICsNCiAgICAgICAgICAgICAgICAgICAgbm93LmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXREaXIgPSBNTVBUX0JBQ0tVUF9ESVIgKyB0aW1lc3RhbXA7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBHZXQgQWNjZXNzIFRva2VuIHVzaW5nIHlvdXIgY3JlZGVudGlhbHMNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5SZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgYm9keTogdG9rZW5QYXJhbXMNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCB0b2tlblJlcy5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0b2tlbkRhdGEuYWNjZXNzX3Rva2VuOw0KDQogICAgICAgICAgICAgICAgbGV0IGNvcHlFbnRyaWVzID0gW107DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBTVEVQIEE6IENvcHkgQ29yZSBJbmRpdmlkdWFsIEZpbGVzIChSZWFkLW9ubHkgbGlua3MpDQogICAgICAgICAgICAgICAgY29uc3QgY29yZUZpbGVzID0gWw0KICAgICAgICAgICAgICAgICAgICBNTVBUX0ZJTEVfREIsIE1NUFRfRklMRV9VU0VSUywgTU1QVF9GSUxFX0FQUFJPVkVELA0KICAgICAgICAgICAgICAgICAgICBNTVBUX0ZJTEVfTE9HTywgTU1QVF9GSUxFX0RST1BET1dOUywgTU1QVF9GSUxFX0NBU0gsDQogICAgICAgICAgICAgICAgICAgIE1NUFRfRklMRV9CQU5LLCBFWEVNUFRfRklMRSwgTU1QVF9GSUxFX1NFUQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBjb3JlRmlsZXMuZm9yRWFjaChwYXRoID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29weUVudHJpZXMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICBmcm9tX3BhdGg6IHBhdGgsDQogICAgICAgICAgICAgICAgICAgICAgICB0b19wYXRoOiB0YXJnZXREaXIgKyAiLyIgKyBwYXRoLnNwbGl0KCcvJykucG9wKCkNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBTVEVQIEI6IER5bmFtaWMgRm9sZGVyIENvcHkgKEV4Y2x1ZGluZyBQYW5jaGFuZykNCiAgICAgICAgICAgICAgICAvLyBTY2FucyB0aGUgcm9vdCBvZiB5b3VyIEFwcCBmb2xkZXINCiAgICAgICAgICAgICAgICBjb25zdCBsaXN0UmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvbGlzdF9mb2xkZXInLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWNjZXNzVG9rZW4sICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAiIiB9KQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKGxpc3RSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdERhdGEgPSBhd2FpdCBsaXN0UmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICAgICAgbGlzdERhdGEuZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVMb3dlciA9IGVudHJ5Lm5hbWUudG9Mb3dlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSBhbGwgZm9sZGVycyBFWENFUFQgJ3BhbmNoYW5nJw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5WyIudGFnIl0gPT09ICJmb2xkZXIiICYmIG5hbWVMb3dlciAhPT0gInBhbmNoYW5nIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlFbnRyaWVzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tX3BhdGg6IGVudHJ5LnBhdGhfbG93ZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvX3BhdGg6IHRhcmdldERpciArICIvIiArIGVudHJ5Lm5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsc28gY2F0Y2ggYW55IGxvb3NlIGZpbGVzIGluIHJvb3QgKGxpa2UgdmlkZW9zLnR4dCkgbm90IGFscmVhZHkgaW4gY29yZUZpbGVzDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlbnRyeVsiLnRhZyJdID09PSAiZmlsZSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0FscmVhZHlMaXN0ZWQgPSBjb3JlRmlsZXMuc29tZShjZiA9PiBjZi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5hbWVMb3dlcikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNBbHJlYWR5TGlzdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlFbnRyaWVzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbV9wYXRoOiBlbnRyeS5wYXRoX2xvd2VyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9fcGF0aDogdGFyZ2V0RGlyICsgIi8iICsgZW50cnkubmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgQmF0Y2ggQ29weQ0KICAgICAgICAgICAgICAgIGlmIChjb3B5RW50cmllcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS8yL2ZpbGVzL2NvcHlfYmF0Y2hfdjInLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY2Nlc3NUb2tlbiwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlbnRyaWVzOiBjb3B5RW50cmllcyB9KQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA1LiBTVEVQIEM6IFByb2Nlc3MgRXh0ZXJuYWwgT25saW5lIExpbmtzIChEb3dubG9hZC9VcGxvYWQpDQogICAgICAgICAgICAgICAgY29uc3Qgb25saW5lTGlua3MgPSBbDQogICAgICAgICAgICAgICAgICAgIHsgdXJsOiBNTVBUX1VSTF9FWFBFTlNFUywgbmFtZTogIkV4cGVuc2VzLnhsc3giIH0sDQogICAgICAgICAgICAgICAgICAgIHsgdXJsOiBCQU5LX1NUQVRFTUVOVF9VUkwsIG5hbWU6ICJCYW5rU3RhdGVtZW50LnhscyIgfSwNCiAgICAgICAgICAgICAgICAgICAgeyB1cmw6IE1NUFRfTElOS19BTk9OWSwgbmFtZTogIkFub255RmlsbC50eHQiIH0NCiAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG9ubGluZUxpbmtzKSB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlUmVzID0gYXdhaXQgZmV0Y2goaXRlbS51cmwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IGZpbGVSZXMuYmxvYigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWNjZXNzVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IHRhcmdldERpciArICIvIiArIGl0ZW0ubmFtZSwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogYmxvYg0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcigiTGluayBiYWNrdXAgZmFpbGVkOiAiICsgaXRlbS5uYW1lKTsgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGFsZXJ0KCJCYWNrdXAgU3VjY2VzcyFcbkFsbCBmb2xkZXJzIChleGNlcHQgUGFuY2hhbmcpIHNhdmVkIHRvOiAiICsgdGFyZ2V0RGlyKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkJhY2t1cCBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFRleHQgRG93bmxvYWQgRnVuY3Rpb24gZm9yIHRoZSBhZG1pbiBwYW5lbCBmdW5jdGlvbnMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkVHh0KHRleHQsIGZpbGVuYW1lKSB7DQogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3RleHRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTsNCiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgYS5kb3dubG9hZCA9IGZpbGVuYW1lOw0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsNCiAgICAgICAgICAgIGEuY2xpY2soKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7DQogICAgICAgIH0NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ2l0eSBOYW1lIEVycm9yIGFuZCBTdWdnZXN0aW9ucyBmb3IgQ29ycmVjdGlvbnMgZG93bmxvYWRzIDYgdGV4dCBmaWxlcw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuQ2l0eUV4dHJhY3Rpb24obW9kZSA9ICdub3JtYWwnKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKE1NUFRfREJfUkFXX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgcmF3Q29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHJhd0NvbnRlbnQuc3BsaXQoL1xyP1xufFxyLyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDFfQWxsID0gW107DQogICAgICAgICAgICAgICAgbGV0IGxpc3QzX01hcCA9IHt9Ow0KICAgICAgICAgICAgICAgIGxldCBsaXN0Nl9NYXAgPSB7fTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlZkNpdGllcyA9IFsiTXVtYmFpIiwgIkRlbGhpIiwgIkJlbmdhbHVydSIsICJCYW5nYWxvcmUiLCAiSHlkZXJhYmFkIiwgIkFobWVkYWJhZCIsICJDaGVubmFpIiwgIktvbGthdGEiLCAiU3VyYXQiLCAiUHVuZSIsICJKYWlwdXIiLCAiTHVja25vdyIsICJLYW5wdXIiLCAiTmFncHVyIiwgIkluZG9yZSIsICJUaGFuZSIsICJCaG9wYWwiLCAiVmlzYWtoYXBhdG5hbSIsICJQYXRuYSIsICJWYWRvZGFyYSIsICJHaGF6aWFiYWQiLCAiTHVkaGlhbmEiLCAiQWdyYSIsICJOYXNoaWsiLCAiRmFyaWRhYmFkIiwgIk1lZXJ1dCIsICJSYWprb3QiLCAiVmFyYW5hc2kiLCAiU3JpbmFnYXIiLCAiQXVyYW5nYWJhZCIsICJBbXJpdHNhciIsICJSYW5jaGkiLCAiR3dhbGlvciIsICJKYWJhbHB1ciIsICJDb2ltYmF0b3JlIiwgIlZpamF5YXdhZGEiLCAiTWFkdXJhaSIsICJSYWlwdXIiLCAiS290YSIsICJDaGFuZGlnYXJoIiwgIkd1d2FoYXRpIiwgIlNvbGFwdXIiLCAiS2FuY2hpcHVyYW0iLCAiTXlzb3JlIiwgIlRpcnVjaGlyYXBwYWxsaSIsICJUcmljaHkiLCAiU2FsZW0iLCAiVGlydXBwdXIiLCAiU3JpcmFuZ2FtIiwgIlNlY3VuZGVyYWJhZCIsICJUaGlydXZlZGFnYW0iLCAiQ2FsaWZvcm5pYSIsICJUYW1pbG5hZHUiLCAiQmV0aGxlaGVtIiwgIkRvaGEiXTsNCiAgICAgICAgICAgICAgICBjb25zdCByZWZDb3VudHJpZXMgPSBbIlVBRSIsICJVSyIsICJVU0EiLCAiU2luZ2Fwb3JlIiwgIk1hbGF5c2lhIiwgIkF1c3RyYWxpYSIsICJDYW5hZGEiLCAiR2VybWFueSIsICJGcmFuY2UiLCAiSmFwYW4iLCAiRHViYWkiLCAiUWF0YXIiLCAiS3V3YWl0IiwgIk9tYW4iLCAiQmFocmFpbiIsICJTYXVkaSBBcmFiaWEiLCAiVW5pdGVkIEtpbmdkb20iLCAiVW5pdGVkIEFyYWIgRW1pcmF0ZXMiLCAiVW5pdGVkIFN0YXRlcyIsICJTd2l0emVybGFuZCIsICJOZXRoZXJsYW5kcyJdOw0KDQogICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U2ltaWxhcml0eShzMSwgczIpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGxvbmdlciA9IHMxLnRvTG93ZXJDYXNlKCksIHNob3J0ZXIgPSBzMi50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoczEubGVuZ3RoIDwgczIubGVuZ3RoKSB7IGxvbmdlciA9IHMyLnRvTG93ZXJDYXNlKCk7IHNob3J0ZXIgPSBzMS50b0xvd2VyQ2FzZSgpOyB9DQogICAgICAgICAgICAgICAgICAgIGxldCBsb25nZXJMZW5ndGggPSBsb25nZXIubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICBpZiAobG9uZ2VyTGVuZ3RoID09IDApIHJldHVybiAxLjA7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkaXREaXN0YW5jZSA9IChzMSwgczIpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb3N0cyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gczEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdFZhbHVlID0gaTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBzMi5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSBjb3N0c1tqXSA9IGo7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGogPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VmFsdWUgPSBjb3N0c1tqIC0gMV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczEuY2hhckF0KGkgLSAxKSAhPSBzMi5jaGFyQXQoaiAtIDEpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gTWF0aC5taW4oTWF0aC5taW4obmV3VmFsdWUsIGxhc3RWYWx1ZSksIGNvc3RzW2pdKSArIDE7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3N0c1tqIC0gMV0gPSBsYXN0VmFsdWU7IGxhc3RWYWx1ZSA9IG5ld1ZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkgY29zdHNbczIubGVuZ3RoXSA9IGxhc3RWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3N0c1tzMi5sZW5ndGhdOw0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGxvbmdlckxlbmd0aCAtIGVkaXREaXN0YW5jZShzaG9ydGVyLCBsb25nZXIpKSAvIHBhcnNlRmxvYXQobG9uZ2VyTGVuZ3RoKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBzdGFydExpbmUgPSBsaW5lc1swXS5pbmNsdWRlcygnfCcpICYmIGxpbmVzWzBdLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoInJlY2VpcHQiKSA/IDEgOiAwOw0KDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0TGluZTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNbaV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmUgJiYgaSA9PT0gbGluZXMubGVuZ3RoIC0gMSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IGxpbmUuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRzWzEzXSA9PT0gIllFUyIpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY2VpcHRObyA9IGZpZWxkc1swXSB8fCAiVU5LTk9XTiI7DQogICAgICAgICAgICAgICAgICAgIGxldCBjaXR5ID0gIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkc1s0XSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgdGlsZGVzIHRvIHNwYWNlIGNvbnZlcnNpb24NCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbkFkZHJlc3MgPSBmaWVsZHNbNF0ucmVwbGFjZSgvfi9nLCAiICIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3b3JkcyA9IGNsZWFuQWRkcmVzcy5zcGxpdCgvXHMrLyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3Jkcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JhYiB0aGUgcmF3IGxhc3Qgd29yZCAod2hpY2ggbWlnaHQgY29udGFpbiBjb2xvbnMpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eSA9IHdvcmRzW3dvcmRzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgbGlzdDFfQWxsLnB1c2goYCR7Y2l0eX0sICR7cmVjZWlwdE5vfWApOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChjaXR5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlZENvdW50cnkgPSByZWZDb3VudHJpZXMuZmluZChjID0+IGMudG9Mb3dlckNhc2UoKSA9PT0gY2l0eS50b0xvd2VyQ2FzZSgpIHx8IGdldFNpbWlsYXJpdHkoY2l0eSwgYykgPiAwLjg1KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkQ291bnRyeSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGlzdDZfTWFwW21hdGNoZWRDb3VudHJ5XSkgbGlzdDZfTWFwW21hdGNoZWRDb3VudHJ5XSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q2X01hcFttYXRjaGVkQ291bnRyeV0ucHVzaChyZWNlaXB0Tm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpc3QzX01hcFtjaXR5XSkgbGlzdDNfTWFwW2NpdHldID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDNfTWFwW2NpdHldLnB1c2gocmVjZWlwdE5vKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGxpc3QyX1VuaXF1ZSA9IE9iamVjdC5rZXlzKGxpc3QzX01hcCkuc29ydCgpOw0KICAgICAgICAgICAgICAgIGxldCBsaXN0M19TdHJpbmdzID0gbGlzdDJfVW5pcXVlLm1hcChjID0+IGAke2N9LCAke2xpc3QzX01hcFtjXS5qb2luKCcsICcpfWApOw0KDQogICAgICAgICAgICAgICAgbGV0IGxpc3Q0X0FsbFN1Z2dlc3Rpb25zID0gW107DQogICAgICAgICAgICAgICAgbGV0IGxpc3Q1X0FjdGlvbnNPbmx5ID0gW107DQoNCiAgICAgICAgICAgICAgICBsaXN0Ml9VbmlxdWUuZm9yRWFjaChvcmlnaW5hbCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBzdWdnZXN0aW9uID0gIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIE5FVyBDT0xPTiBMT0dJQyAtLS0NCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlICJvcmlnaW5hbCIgaGFzIGEgY29sb24sIHdlIHN1Z2dlc3QgcmVwbGFjaW5nIGNvbG9uIHdpdGggY29tbWErc3BhY2UNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsLmluY2x1ZGVzKCc6JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb24gPSBvcmlnaW5hbC5zcGxpdCgnOicpLm1hcChwYXJ0ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYXBpdGFsaXplIGVhY2ggcGFydCBmb3IgYSBjbGVhbiBzdWdnZXN0aW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwYXJ0LnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkuam9pbignLCAnKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0YW5kYXJkIFNpbWlsYXJpdHkgTG9naWMgZm9yIHNpbmdsZSB3b3Jkcw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJlc3RTY29yZSA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCByZWYgb2YgcmVmQ2l0aWVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gZ2V0U2ltaWxhcml0eShvcmlnaW5hbCwgcmVmKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPiAwLjc1ICYmIHNjb3JlID4gYmVzdFNjb3JlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RTY29yZSA9IHNjb3JlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uID0gcmVmOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWdnZXN0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkUmVmID0gWy4uLnJlZkNpdGllc10uc29ydCgoYSwgYikgPT4gYi5sZW5ndGggLSBhLmxlbmd0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcmVmIG9mIHNvcnRlZFJlZikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKGAoLis/KSgke3JlZn0pJGAsICdpJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KG9yaWdpbmFsKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gb3JpZ2luYWwubWF0Y2gocmVnZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByZWZpeCA9IG1hdGNoWzFdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbWF0Y2hbMV0uc2xpY2UoMSkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEtekEtWl0vZywgIiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbiA9IGAke3ByZWZpeH0sICR7cmVmfWA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGxldCBpc0p1c3RDYXNpbmcgPSBzdWdnZXN0aW9uLnRvTG93ZXJDYXNlKCkgPT09IG9yaWdpbmFsLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbE91dCA9IChpc0p1c3RDYXNpbmcgfHwgIXN1Z2dlc3Rpb24gfHwgb3JpZ2luYWwubGVuZ3RoIDwgNCkgPyAiIiA6IHN1Z2dlc3Rpb247DQoNCiAgICAgICAgICAgICAgICAgICAgbGlzdDRfQWxsU3VnZ2VzdGlvbnMucHVzaChvcmlnaW5hbC5wYWRFbmQoMzAsICcgJykgKyAiIHwgIiArIGZpbmFsT3V0KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0ICE9PSAiIikgbGlzdDVfQWN0aW9uc09ubHkucHVzaChvcmlnaW5hbC5wYWRFbmQoMzAsICcgJykgKyAiIHwgIiArIGZpbmFsT3V0KTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCBsaXN0Nl9TdHJpbmdzID0gT2JqZWN0LmtleXMobGlzdDZfTWFwKS5zb3J0KCkubWFwKGNvdW50cnkgPT4gYCR7Y291bnRyeX0sICR7bGlzdDZfTWFwW2NvdW50cnldLmpvaW4oJywgJyl9YCk7DQoNCiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShsaXN0NV9BY3Rpb25zT25seSkpIHsNCiAgICAgICAgICAgICAgICAgICAgd2luZG93LkdMT0JBTF9DSVRZX0FVRElUX0RBVEEgPSBsaXN0NV9BY3Rpb25zT25seS5qb2luKCdcbicpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5HTE9CQUxfQ0lUWV9BVURJVF9EQVRBID0gbGlzdDVfQWN0aW9uc09ubHk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdhdWRpdCcpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9ICJPUklHSU5BTCBOQU1FIi5wYWRFbmQoMzAsICcgJykgKyAiIHwgU1VHR0VTVEVEIENPUlJFQ1RJT05cbiIgKyAiLSIucmVwZWF0KDYwKSArICJcbiI7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQobGlzdDFfQWxsLmpvaW4oJ1xuJyksICIxX0NpdGllc19SZWNvcmRzLnR4dCIpOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZG93bmxvYWRUeHQobGlzdDJfVW5pcXVlLmpvaW4oJ1xuJyksICIyX0NpdGllc19VbmlxdWVfTGlzdC50eHQiKSwgNjAwKTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGRvd25sb2FkVHh0KGxpc3QzX1N0cmluZ3Muam9pbignXG4nKSwgIjNfQ2l0aWVzX0NvcnJlY3Rpb25fTWFwLnR4dCIpLCAxMjAwKTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGRvd25sb2FkVHh0KGhlYWRlciArIGxpc3Q0X0FsbFN1Z2dlc3Rpb25zLmpvaW4oJ1xuJyksICI0X0NpdGllc19GdWxsX0F1ZGl0LnR4dCIpLCAxODAwKTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGRvd25sb2FkVHh0KGhlYWRlciArIGxpc3Q1X0FjdGlvbnNPbmx5LmpvaW4oJ1xuJyksICI1X0NpdGllc19BY3Rpb25zX09ubHkudHh0IiksIDI0MDApOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChsaXN0Nl9TdHJpbmdzLmpvaW4oJ1xuJyksICI2X0NvdW50cmllc19NYXAudHh0Iik7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJBdWRpdCBDb21wbGV0ZSFcblxuQ29sb25zIGRldGVjdGVkOiBTdWdnZXN0aW9ucyBub3cgY29ycmVjdGx5IHVzZSBjb21tYXMuIik7DQogICAgICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgfSwgMzAwMCk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ291bnRyeSBjb3JyZWN0aW9uIGluIHRoZSBEQiBiYXNlZCBvbiBpbnB1dCBDSVRZX0NPUlJFQ1RJT05TX1VSTCBDaXR5Q29ycmVjdGlvbnMudHh0IGluIFNldHRpbmdzIEZvbGRlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuQ2l0eUNvcnJlY3Rpb25BcHBseShpc0F1ZGl0ID0gZmFsc2UpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIHlvdXIgYXBwcm92ZWQgY29ycmVjdGlvbnMgZmlsZQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJSZXMgPSBhd2FpdCBmZXRjaChDSVRZX0NPUlJFQ1RJT05TX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yclRleHQgPSBhd2FpdCBjb3JyUmVzLnRleHQoKTsNCg0KICAgICAgICAgICAgICAgIC8vIFBhcnNlIGludG8gYSBNYXAgeyAic29jaWV0eTpBdW5kaDpQdW5lIjogIlNvY2lldHksIEF1bmRoLCBQdW5lIiB9DQogICAgICAgICAgICAgICAgY29uc3QgY29ycmVjdGlvbk1hcCA9IHt9Ow0KICAgICAgICAgICAgICAgIGNvcnJUZXh0LnNwbGl0KC9ccj9cbi8pLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChsaW5lLmluY2x1ZGVzKCd8JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtqdW5rLCBjb3JyZWN0XSA9IGxpbmUuc3BsaXQoJ3wnKS5tYXAocyA9PiBzLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoanVuaykgY29ycmVjdGlvbk1hcFtqdW5rXSA9IGNvcnJlY3Q7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEZldGNoIHRoZSBsaXZlIGRhdGFiYXNlICh1c2luZyB0aGUgQXV0aGVudGljYXRlZCBsb2dpYykNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGxldCBkYkxpbmVzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pOw0KDQogICAgICAgICAgICAgICAgbGV0IGNoYW5nZUNvdW50ID0gMDsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFByb2Nlc3MgZXZlcnkgbGluZSBpbiB0aGUgREINCiAgICAgICAgICAgICAgICBjb25zdCBjbGVhbmVkTGluZXMgPSBkYkxpbmVzLm1hcChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lLnRyaW0oKSkgcmV0dXJuIGxpbmU7DQogICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkcmVzcyBpcyBpbmRleCA0DQogICAgICAgICAgICAgICAgICAgIGxldCBhZGRyZXNzID0gZmllbGRzWzRdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYWRkcmVzcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3BsaXQgYWRkcmVzcyBieSBzcGFjZSBvciB0aWxkZSB0byBpc29sYXRlIHRoZSBsYXN0ICJjaHVuayINCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3b3JkcyA9IGFkZHJlc3MudHJpbSgpLnNwbGl0KC9bXHN+XSsvKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIFRIRSBGSVg6IFByZXNlcnZlIGNvbG9ucyBkdXJpbmcgbG9va3VwIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Ugbm8gbG9uZ2VyIHN0cmlwIGNvbG9ucyBoZXJlLCBzbyBvcmlnaW5hbENpdHkgPSAic29jaWV0eTpBdW5kaDpQdW5lIg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9yaWdpbmFsQ2l0eSA9IHdvcmRzW3dvcmRzLmxlbmd0aCAtIDFdOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIHJhdyBjaHVuayAod2l0aCBjb2xvbnMpIGlzIGluIG91ciBjb3JyZWN0aW9uIGxpc3QNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3JyZWN0aW9uTWFwLmhhc093blByb3BlcnR5KG9yaWdpbmFsQ2l0eSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVwbGFjZW1lbnQgPSBjb3JyZWN0aW9uTWFwW29yaWdpbmFsQ2l0eV07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIZWxwZXIgdG8gZXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyBmb3IgUmVnZXgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlc2NhcGVkSnVuayA9IG9yaWdpbmFsQ2l0eS5yZXBsYWNlKC9bLiorP14ke30oKXxbXF1cXF0vZywgJ1xcJCYnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCA9PT0gIiIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RyaXAgdGhlIGp1bmsgd29yZCBmcm9tIHRoZSBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzRdID0gYWRkcmVzcy5yZXBsYWNlKG5ldyBSZWdFeHAoZXNjYXBlZEp1bmsgKyAiJCIpLCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN3YXAgdGhlIGp1bmsgKHdpdGggY29sb25zKSB3aXRoIHRoZSBjb3JyZWN0IHN0cmluZyAod2l0aCBjb21tYXMpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1s0XSA9IGFkZHJlc3MucmVwbGFjZShuZXcgUmVnRXhwKGVzY2FwZWRKdW5rICsgIiQiKSwgcmVwbGFjZW1lbnQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gNC4gSWYgY2hhbmdlcyBvY2N1cnJlZCwgdXBsb2FkIGJhY2sgdG8gRHJvcGJveA0KICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VDb3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IGNsZWFuZWRMaW5lcy5qb2luKCdcbicpOw0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogbmV3Q29udGVudA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoYFN1Y2Nlc3MhIEFwcGxpZWQgJHtjaGFuZ2VDb3VudH0gY29ycmVjdGlvbnMgdG8gdGhlIGRhdGFiYXNlLlxuXG5Db2xvbnMgd2VyZSBjb3JyZWN0bHkgaWRlbnRpZmllZCBhbmQgcmVwbGFjZWQuYCk7DQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBtYXRjaGluZyBlbnRyaWVzIChpbmNsdWRpbmcgdGhvc2Ugd2l0aCBjb2xvbnMpIGZvdW5kIHRvIGNvcnJlY3QuIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQ29ycmVjdGlvbiBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENvdW50cnkgY29ycmVjdGlvbiBpbiB0aGUgREIgYmFzZWQgb24gaW5wdXQgQ291bnRyeUNvcnJlY3Rpb25zLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkNvdW50cnlGaWVsZENvcnJlY3Rpb24oKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgY29uc3QgQ09VTlRSWV9DT1JSRUNUSU9OU19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9nbnIxbzJkNHJjYmRiejc1Znhma2IvQ291bnRyeUNvcnJlY3Rpb25zLnR4dD9ybGtleT03NGZsdHJ4eW04ZzBnODhxZWllamoxYnd6JmRsPTEiOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJSZXMgPSBhd2FpdCBmZXRjaChDT1VOVFJZX0NPUlJFQ1RJT05TX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yclRleHQgPSBhd2FpdCBjb3JyUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gY29yclRleHQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKGwgPT4gbC50cmltKCkgIT09ICIiKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGxldCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgbW92ZUNvdW50ID0gMDsNCiAgICAgICAgICAgICAgICBsZXQgZ2xvYmFsVXBwZXJDb3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gU1RFUCAxOiBTdXJnaWNhbCBNb3ZlL0NsZWFuIC0tLQ0KICAgICAgICAgICAgICAgIGluc3RydWN0aW9uTGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoIDwgMikgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDb3VudHJ5ID0gcGFydHNbMF0udG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SURzID0gcGFydHMuc2xpY2UoMSk7DQoNCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SURzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoQW5jaG9yID0gaWQudG9VcHBlckNhc2UoKSArICJ8IjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGJSb3dzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRiUm93c1tpXS50cmltKCkudG9VcHBlckNhc2UoKS5zdGFydHNXaXRoKHNlYXJjaEFuY2hvcikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGRiUm93c1tpXS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoZmllbGRzLmxlbmd0aCA8IDIwKSBmaWVsZHMucHVzaCgiIik7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFkZHIgPSBmaWVsZHNbNF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuUmVnZXggPSBuZXcgUmVnRXhwKHRhcmdldENvdW50cnksICdnaScpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGVhblJlZ2V4LnRlc3QoYWRkcikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1s0XSA9IGFkZHIucmVwbGFjZShjbGVhblJlZ2V4LCAiIikucmVwbGFjZSgvW34sOiBdKyQvLCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzE5XSA9IHRhcmdldENvdW50cnk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYlJvd3NbaV0gPSBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZUNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBTVEVQIDI6IFRoZSBEZWVwLUNsZWFuIEdsb2JhbCBTd2VlcCAtLS0NCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRiUm93cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWRiUm93c1tpXS50cmltKCkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gZGJSb3dzW2ldLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIHdlIGhhdmUgMjAgZmllbGRzIGZvciBldmVyeSByb3cNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGZpZWxkcy5sZW5ndGggPCAyMCkgZmllbGRzLnB1c2goIiIpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFRoZSBGSVg6IFN0cmlwIEFMTCBoaWRkZW4gY2hhcmFjdGVycyB1c2luZyByZWdleCBccysNCiAgICAgICAgICAgICAgICAgICAgbGV0IHJhd1ZhbHVlID0gZmllbGRzWzE5XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNsZWFuVmFsdWUgPSByYXdWYWx1ZS5yZXBsYWNlKC9bXHJcblx0XSsvZywgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHVwcGVyVmFsdWUgPSBjbGVhblZhbHVlLnRvVXBwZXJDYXNlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGZpZWxkIGlzbid0IGVtcHR5IGFuZCBkb2Vzbid0IG1hdGNoIHRoZSBjbGVhbiBVcHBlcmNhc2UgdmVyc2lvbg0KICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5WYWx1ZSAhPT0gIiIgJiYgY2xlYW5WYWx1ZSAhPT0gdXBwZXJWYWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzE5XSA9IHVwcGVyVmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICBkYlJvd3NbaV0gPSBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsVXBwZXJDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gLS0tIEZJTkFMIFNBVkUgLS0tDQogICAgICAgICAgICAgICAgaWYgKG1vdmVDb3VudCA+IDAgfHwgZ2xvYmFsVXBwZXJDb3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGRiUm93cy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBhbGVydChgREFUQUJBU0UgU1lOQ0VEXG5cbjEuIEFkZHJlc3MgQ2xlYW51cHM6ICR7bW92ZUNvdW50fVxuMi4gSGlkZGVuLUNoYXIgJiBVcHBlcmNhc2UgRml4ZXM6ICR7Z2xvYmFsVXBwZXJDb3VudH1gKTsNCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlN1Y2Nlc3M6IERhdGFiYXNlIGlzIDEwMCUgc3RhbmRhcmRpemVkLiBObyBtaXhlZC1jYXNlIG9yIGhpZGRlbiBjaGFyYWN0ZXJzIHJlbWFpbi4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENoZWNrcyBOYW1lcyBvZiBhbGwgZG9ub3JzIGFuZCBwcmVwYXJlcyBsaXN0IGFuZCBzdWdnZXN0aW9ucyBmb3IgY29ycmVjdGlvbnMuIERvd25sb2FkcyA0IHRleHQgZmlsZXMuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5Eb25vck5hbWVDaGVjayhtb2RlID0gJ25vcm1hbCcpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIocm93ID0+IHJvdy50cmltKCkgIT09ICIiKTsNCg0KICAgICAgICAgICAgICAgIGxldCBhbGxOYW1lcyA9IGRiUm93cy5tYXAocm93ID0+IChyb3cuc3BsaXQoJ3wnKVsyXSB8fCAiIikudHJpbSgpKTsNCiAgICAgICAgICAgICAgICBsZXQgdW5pcXVlTmFtZXMgPSBbLi4ubmV3IFNldChhbGxOYW1lcyldLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXRJbmRpYW5OYW1lID0gKG5hbWUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYW1lKSByZXR1cm4gIiI7DQogICAgICAgICAgICAgICAgICAgIGlmIChuYW1lLnN0YXJ0c1dpdGgoJygnKSkgcmV0dXJuIG5hbWU7IC8vIFNraXAgb3Jncw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChuYW1lLmluY2x1ZGVzKCcmJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lLnNwbGl0KCcmJykubWFwKG4gPT4gZm9ybWF0SW5kaWFuTmFtZShuLnRyaW0oKSkpLmpvaW4oJyAmICcpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnRzID0gbmFtZS5zcGxpdCgvXHMrLykuZmlsdGVyKHAgPT4gcC5sZW5ndGggPiAwKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGluaXRpYWxzID0gW107DQogICAgICAgICAgICAgICAgICAgIGxldCBtYWluTmFtZXMgPSBbXTsNCg0KICAgICAgICAgICAgICAgICAgICBwYXJ0cy5mb3JFYWNoKHBhcnQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pdGlhbHM6IDEtMyBjaGFycywgbm8gZG91YmxlIHZvd2Vscw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQubGVuZ3RoIDw9IDMgJiYgIS9bYWVpb3V5XXsyLH0vaS50ZXN0KHBhcnQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbHMucHVzaChwYXJ0LnRvVXBwZXJDYXNlKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluTmFtZXMucHVzaChwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5tYWluTmFtZXMsIC4uLmluaXRpYWxzXS5qb2luKCcgJykudHJpbSgpOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICAvLyBBcnJheXMgZm9yIEZpbGUgMyBhbmQgRmlsZSA0DQogICAgICAgICAgICAgICAgbGV0IGFsbENvbXBhcmlzb25zID0gW107DQogICAgICAgICAgICAgICAgbGV0IGNvcnJlY3Rpb25zT25seSA9IFtdOw0KDQogICAgICAgICAgICAgICAgdW5pcXVlTmFtZXMuZm9yRWFjaChvcmlnaW5hbCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBzdWdnZXN0ZWQgPSBmb3JtYXRJbmRpYW5OYW1lKG9yaWdpbmFsKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBgJHtvcmlnaW5hbC5wYWRFbmQoNDApfSB8ICR7c3VnZ2VzdGVkfWA7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRmlsZSAzIGdldHMgZXZlcnl0aGluZw0KICAgICAgICAgICAgICAgICAgICBhbGxDb21wYXJpc29ucy5wdXNoKGxpbmUpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEZpbGUgNCBnZXRzIG9ubHkgdGhlIG9uZXMgdGhhdCBjaGFuZ2VkDQogICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbCAhPT0gc3VnZ2VzdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0aW9uc09ubHkucHVzaChsaW5lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZG93bmxvYWRUeHQgPSAoY29udGVudCwgZmlsZU5hbWUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5jbGljaygpOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICAvLyBUSEUgQlJJREdFOiBDb252ZXJ0IGFycmF5IHRvIHN0cmluZyBhbmQgc3RvcmUgZ2xvYmFsbHkNCiAgICAgICAgICAgICAgICB3aW5kb3cuR0xPQkFMX0RPTk9SX05BTUVfREFUQSA9IEFycmF5LmlzQXJyYXkoY29ycmVjdGlvbnNPbmx5KSA/IGNvcnJlY3Rpb25zT25seS5qb2luKCdcbicpIDogY29ycmVjdGlvbnNPbmx5Ow0KDQogICAgICAgICAgICAgICAgLy8gVEhFIEVYSVQ6IEJ5cGFzcyBkb3dubG9hZHMgaWYgaW4gYXVkaXQgbW9kZQ0KICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAnYXVkaXQnKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJEb25vciBOYW1lIGRhdGEgY2FwdHVyZWQuIFNraXBwaW5nIEZpbGUgNCBkb3dubG9hZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFNlcXVlbmNlIG9mIDQgZmlsZXMNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChhbGxOYW1lcy5zb3J0KCkuam9pbignXG4nKSwgIjEuIENHX0FsbF9Eb25vcl9OYW1lcy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dCh1bmlxdWVOYW1lcy5qb2luKCdcbicpLCAiMi4gQ0dfVW5pcXVlX0Rvbm9yX05hbWVzLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGFsbENvbXBhcmlzb25zLmpvaW4oJ1xuJyksICIzLiBDR19OYW1lX0Zvcm1hdF9TdWdnZXN0aW9ucy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChjb3JyZWN0aW9uc09ubHkuam9pbignXG4nKSwgIjQuIENHX0NvcnJlY3Rpb25zX09ubHkudHh0Iik7DQoNCiAgICAgICAgICAgICAgICBhbGVydChgQXVkaXQgQ29tcGxldGUhXG5cblVuaXF1ZSBOYW1lczogJHt1bmlxdWVOYW1lcy5sZW5ndGh9XG5SZWNvcmRzIE5lZWRpbmcgQ29ycmVjdGlvbjogJHtjb3JyZWN0aW9uc09ubHkubGVuZ3RofVxuXG5DaGVjayBGaWxlIDQgZm9yIHRoZSBhY3Rpb24gaXRlbXMuYCk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIE5hbWUgY29ycmVjdGlvbiBpbiB0aGUgREIgYmFzZWQgb24gaW5wdXQgTkFNRV9DT1JSRUNUSU9OU19VUkwgTmFtZUNvcnJlY3Rpb25zLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkRvbm9yTmFtZUNvcnJlY3Rpb24oKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBGZXRjaCB0aGUgQ29ycmVjdGlvbiBNYXANCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyUmVzID0gYXdhaXQgZmV0Y2goTkFNRV9DT1JSRUNUSU9OU19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJUZXh0ID0gYXdhaXQgY29yclJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yckxpbmVzID0gY29yclRleHQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKGxpbmUgPT4gbGluZS5pbmNsdWRlcygnfCcpKTsNCg0KICAgICAgICAgICAgICAgIC8vIEJ1aWxkIGEgbG9va3VwIG9iamVjdDogeyAiT3JpZ2luYWwgTmFtZSI6ICJTdWdnZXN0ZWQgTmFtZSIgfQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJlY3Rpb25NYXAgPSB7fTsNCiAgICAgICAgICAgICAgICBjb3JyTGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW29yaWdpbmFsLCBzdWdnZXN0ZWRdID0gbGluZS5zcGxpdCgnfCcpLm1hcChpdGVtID0+IGl0ZW0udHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsICYmIHN1Z2dlc3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGlvbk1hcFtvcmlnaW5hbF0gPSBzdWdnZXN0ZWQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEZldGNoIHRoZSBEYXRhYmFzZQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGxldCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY29ycmVjdGlvbkNvdW50ID0gMDsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFN3ZWVwIGFuZCBSZXBsYWNlDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYlJvd3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYlJvd3NbaV0udHJpbSgpKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gZGJSb3dzW2ldLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50TmFtZSA9IChmaWVsZHNbMl0gfHwgIiIpLnRyaW0oKTsgLy8gTmFtZSBpcyBGaWVsZCAyDQoNCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5hbWUgZXhpc3RzIGluIG91ciBjb3JyZWN0aW9uIG1hcCAoUGVyZmVjdCBNYXRjaCkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvcnJlY3Rpb25NYXAuaGFzT3duUHJvcGVydHkoY3VycmVudE5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbMl0gPSBjb3JyZWN0aW9uTWFwW2N1cnJlbnROYW1lXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRiUm93c1tpXSA9IGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0aW9uQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDQuIFNhdmUgYmFjayB0byBEcm9wYm94IGlmIGNoYW5nZXMgd2VyZSBtYWRlDQogICAgICAgICAgICAgICAgaWYgKGNvcnJlY3Rpb25Db3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGRiUm93cy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBhbGVydChgU1VDQ0VTUzogRGF0YWJhc2UgdXBkYXRlZC5cblxuVG90YWwgRG9ub3IgTmFtZXMgY29ycmVjdGVkOiAke2NvcnJlY3Rpb25Db3VudH1gKTsNCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIG1hdGNoaW5nIG5hbWVzIGZvdW5kIGZvciBjb3JyZWN0aW9uLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIk5hbWUgQ29ycmVjdGlvbiBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENoZWNrcyBBZGRyZXNzIG9mIGFsbCBkb25vcnMgYW5kIHByZXBhcmVzIGxpc3QgYW5kIHN1Z2dlc3Rpb25zIGZvciBjb3JyZWN0aW9ucy4gRG93bmxvYWRzIDQgdGV4dCBmaWxlcy4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkFkZHJlc3NDaGVjayhtb2RlID0gJ25vcm1hbCcpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIocm93ID0+IHJvdy50cmltKCkgIT09ICIiKTsNCg0KICAgICAgICAgICAgICAgIGxldCBhbGxBZGRyZXNzZXMgPSBkYlJvd3MubWFwKHJvdyA9PiAocm93LnNwbGl0KCd8JylbNF0gfHwgIiIpLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgbGV0IHVuaXF1ZUFkZHJlc3NlcyA9IFsuLi5uZXcgU2V0KGFsbEFkZHJlc3NlcyldLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXRBZGRyZXNzID0gKGFkZHIpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFhZGRyKSByZXR1cm4gIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMS4gRmxhdHRlbiBsaW5lIGJyZWFrcyB3aXRoIH4NCiAgICAgICAgICAgICAgICAgICAgbGV0IGZsYXR0ZW5lZCA9IGFkZHIucmVwbGFjZSgvW1xyXG5dKy9nLCAnIH4gJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMi4gU3BsaXQgaW50byB3b3Jkcw0KICAgICAgICAgICAgICAgICAgICBsZXQgd29yZHMgPSBmbGF0dGVuZWQuc3BsaXQoL1xzKy8pOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZm9ybWF0dGVkV29yZHMgPSB3b3Jkcy5tYXAod29yZCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdvcmQpIHJldHVybiAiIjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU1BFQ0lBTCBUV0VBSzogV29yZHMgc3RhcnRpbmcgd2l0aCAkDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZC5zdGFydHNXaXRoKCckJykgJiYgd29yZC5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1haW5QYXJ0ID0gd29yZC5zbGljZSgxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyQnICsgbWFpblBhcnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBtYWluUGFydC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBSdWxlIDE6IEFsd2F5cyBVUFBFUkNBU0UgZm9yIDMgY2hhcnMgb3IgbGVzcw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQubGVuZ3RoIDw9IDMpIHJldHVybiB3b3JkLnRvVXBwZXJDYXNlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJ1bGUgMjogU2VudGVuY2UgQ2FzZSBmb3IgZXZlcnl0aGluZyBlbHNlIChpbmNsdWRpbmcgQXBhcnRtZW50OjI3KQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWRXb3Jkcy5qb2luKCcgJykudHJpbSgpOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICBsZXQgYWxsQ29tcGFyaXNvbnMgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgY29ycmVjdGlvbnNPbmx5ID0gW107DQoNCiAgICAgICAgICAgICAgICB1bmlxdWVBZGRyZXNzZXMuZm9yRWFjaChvcmlnaW5hbCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBzdWdnZXN0ZWQgPSBmb3JtYXRBZGRyZXNzKG9yaWdpbmFsKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3BsYXlMaW5lID0gYCR7b3JpZ2luYWwucGFkRW5kKDEyMCl9IHwgJHtzdWdnZXN0ZWR9YDsNCg0KICAgICAgICAgICAgICAgICAgICBhbGxDb21wYXJpc29ucy5wdXNoKGRpc3BsYXlMaW5lKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsICE9PSBzdWdnZXN0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25zT25seS5wdXNoKGRpc3BsYXlMaW5lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZG93bmxvYWRUeHQgPSAoY29udGVudCwgZmlsZU5hbWUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5jbGljaygpOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICAvLyBUSEUgQlJJREdFOiBVc2UgdGhlIGNvcnJlY3QgdmFyaWFibGUgbmFtZSB3ZSBqdXN0IGlkZW50aWZpZWQNCiAgICAgICAgICAgICAgICB3aW5kb3cuR0xPQkFMX0FERFJFU1NfQ09SUkVDVElPTl9EQVRBID0gQXJyYXkuaXNBcnJheShjb3JyZWN0aW9uc09ubHkpID8gY29ycmVjdGlvbnNPbmx5LmpvaW4oJ1xuJykgOiBjb3JyZWN0aW9uc09ubHk7DQoNCiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2F1ZGl0Jykgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQWRkcmVzcyBkYXRhIGNhcHR1cmVkIHN1Y2Nlc3NmdWxseSB2aWEgY29ycmVjdGlvbnNPbmx5LiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgICAgICAvLyBGaWxlIFNlcXVlbmNlDQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoYWxsQWRkcmVzc2VzLnNvcnQoKS5qb2luKCdcbicpLCAiMS4gQ0dfQWxsX0FkZHJlc3Nlcy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dCh1bmlxdWVBZGRyZXNzZXMuam9pbignXG4nKSwgIjIuIENHX1VuaXF1ZV9BZGRyZXNzZXMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoYWxsQ29tcGFyaXNvbnMuam9pbignXG4nKSwgIjMuIENHX0FkZHJlc3NfRm9ybWF0X1N1Z2dlc3Rpb25zLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGNvcnJlY3Rpb25zT25seS5qb2luKCdcbicpLCAiNC4gQ0dfQWRkcmVzc19Db3JyZWN0aW9uc19Pbmx5LnR4dCIpOw0KDQogICAgICAgICAgICAgICAgYWxlcnQoYEF1ZGl0IENvbXBsZXRlIVxuXG5SZXZpZXcgRmlsZSA0IGZvciB0aGUgJHtjb3JyZWN0aW9uc09ubHkubGVuZ3RofSBpdGVtcyBuZWVkaW5nIGNoYW5nZXMuYCk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIEFERFJFU1MgY29ycmVjdGlvbiBpbiB0aGUgREIgYmFzZWQgb24gaW5wdXQgQWRkcmVzc0NvcnJlY3Rpb25zLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEdsb2JhbCBDb25zdGFudCBmb3IgQWRkcmVzcyBDb3JyZWN0aW9ucw0KICAgICAgICBjb25zdCBBRERSRVNTX0NPUlJFQ1RJT05TX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2RjbDd2NjBxYnVodXVnczFmN203cC9BZGRyZXNzQ29ycmVjdGlvbnMudHh0P3Jsa2V5PWpid3c0bGZnZDkwcmprdDFrc3NsMTZsOGQmZGw9MSI7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuQWRkcmVzc0NvcnJlY3Rpb24oKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBGZXRjaCB0aGUgQ29ycmVjdGlvbiBNYXAgZnJvbSBEcm9wYm94DQogICAgICAgICAgICAgICAgY29uc3QgY29yclJlcyA9IGF3YWl0IGZldGNoKEFERFJFU1NfQ09SUkVDVElPTlNfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyVGV4dCA9IGF3YWl0IGNvcnJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJMaW5lcyA9IGNvcnJUZXh0LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihsaW5lID0+IGxpbmUuaW5jbHVkZXMoJ3wnKSk7DQoNCiAgICAgICAgICAgICAgICAvLyBCdWlsZCBsb29rdXA6IHsgIk9yaWdpbmFsIEFkZHJlc3MiOiAiU3VnZ2VzdGVkIEFkZHJlc3MiIH0NCiAgICAgICAgICAgICAgICBjb25zdCBhZGRyZXNzTWFwID0ge307DQogICAgICAgICAgICAgICAgY29yckxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID49IDIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gcGFydHNbMF0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGVkID0gcGFydHNbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsICYmIHN1Z2dlc3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NNYXBbb3JpZ2luYWxdID0gc3VnZ2VzdGVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBGZXRjaCB0aGUgTWFpbiBEYXRhYmFzZQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGxldCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgdXBkYXRlQ291bnQgPSAwOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gU3dlZXAgRGF0YWJhc2UgYW5kIEFwcGx5IENvcnJlY3Rpb25zDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYlJvd3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYlJvd3NbaV0udHJpbSgpKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gZGJSb3dzW2ldLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50QWRkcmVzcyA9IChmaWVsZHNbNF0gfHwgIiIpLnRyaW0oKTsgLy8gQWRkcmVzcyBpcyBGaWVsZCA0DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZmVjdCBNYXRjaCBDaGVjaw0KICAgICAgICAgICAgICAgICAgICBpZiAoYWRkcmVzc01hcC5oYXNPd25Qcm9wZXJ0eShjdXJyZW50QWRkcmVzcykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1s0XSA9IGFkZHJlc3NNYXBbY3VycmVudEFkZHJlc3NdOw0KICAgICAgICAgICAgICAgICAgICAgICAgZGJSb3dzW2ldID0gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBTYXZlIHRvIERyb3Bib3ggaWYgdXBkYXRlcyB3ZXJlIGZvdW5kDQogICAgICAgICAgICAgICAgaWYgKHVwZGF0ZUNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogZGJSb3dzLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBTVUNDRVNTOiBEYXRhYmFzZSB1cGRhdGVkLlxuXG5Ub3RhbCBBZGRyZXNzZXMgY29ycmVjdGVkOiAke3VwZGF0ZUNvdW50fWApOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gbWF0Y2hpbmcgYWRkcmVzc2VzIGZvdW5kIHRvIGNvcnJlY3QuIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQWRkcmVzcyBDb3JyZWN0aW9uIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gUEFORUwgU0hPVyBBTkQgSElERSB0b2dnbGUNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUFkbWluVGFibGUoKSB7DQogICAgICAgICAgICBpbml0Q291bnRyeURyb3Bkb3duKCk7DQogICAgICAgICAgICBjb25zdCBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZG1pbi1wYW5lbC1jb250YWluZXInKTsNCiAgICAgICAgICAgIGNvbnN0IGlzT3BlbmluZyA9IChwYW5lbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpOw0KICAgICAgICAgICAgcGFuZWwuc3R5bGUuZGlzcGxheSA9IGlzT3BlbmluZyA/ICdibG9jaycgOiAnbm9uZSc7DQoNCiAgICAgICAgICAgIGlmIChpc09wZW5pbmcpIHsNCiAgICAgICAgICAgICAgICBsb2FkQWRtaW5TbmFwcygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ291bnRyeSBTZWxlY3Rpb24gZm9yIExhYmVsIENyZWF0aW9uDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAxLiBQb3B1bGF0ZSBEcm9wZG93biBpbW1lZGlhdGVseQ0KICAgICAgICBmdW5jdGlvbiBpbml0Q291bnRyeURyb3Bkb3duKCkgew0KICAgICAgICAgICAgY29uc3QgY291bnRyaWVzID0gWyJJTkRJQSIsICJVU0EiLCAiVUFFIiwgIlVLIiwgIlNJTkdBUE9SRSIsICJBVVNUUkFMSUEiLCAiQ0FOQURBIiwgIlVOSVRFRCBBUkFCIEVNSVJBVEVTIiwgIk1BTEFZU0lBIiwgIk9NQU4iLCAiS1VXQUlUIl07DQogICAgICAgICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtY291bnRyeS1maWx0ZXInKTsNCiAgICAgICAgICAgIHNlbGVjdC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5BbGwgQ291bnRyaWVzPC9vcHRpb24+JzsNCiAgICAgICAgICAgIGNvdW50cmllcy5mb3JFYWNoKGMgPT4gew0KICAgICAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsNCiAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBjOw0KICAgICAgICAgICAgICAgIG9wdC50ZXh0Q29udGVudCA9IGM7DQogICAgICAgICAgICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFBERiBHZW5lcmF0aW9uIGZvciBBbGwgVW5pcXVlIERvbm9ycyBMYWJlbHMuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAyLiBUaGUgUERGIEdlbmVyYXRpb24gTG9naWMNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVBZGRyZXNzTGFiZWxzKCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBqc1BERiB9ID0gd2luZG93LmpzcGRmOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ291bnRyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYWJlbC1jb3VudHJ5LWZpbHRlcicpLnZhbHVlOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCg0KICAgICAgICAgICAgICAgIC8vIFJldmVyc2UgdG8gZ2V0IExBVEVTVCByZWNvcmRzIGZpcnN0DQogICAgICAgICAgICAgICAgbGV0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIocm93ID0+IHJvdy50cmltKCkgIT09ICIiKS5yZXZlcnNlKCk7DQoNCiAgICAgICAgICAgICAgICBsZXQgbGFiZWxzVG9DcmVhdGUgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgcHJvY2Vzc2VkUGhvbmVzID0gbmV3IFNldCgpOw0KDQogICAgICAgICAgICAgICAgLy8gTElNSVQgUkVNT1ZFRDogUHJvY2Vzc2luZyB0aGUgZW50aXJlIGRhdGFiYXNlDQogICAgICAgICAgICAgICAgZm9yIChsZXQgcm93IG9mIGRiUm93cykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgZiA9IHJvdy5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgcGhvbmUgPSAoZlszXSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IChmWzJdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBhZGRyID0gKGZbNF0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGlzQ2FuY2VsbGVkID0gKGZbMTNdIHx8ICIiKS50b1VwcGVyQ2FzZSgpID09PSAiWUVTIjsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50cnkgPSAoZlsxOV0gfHwgIiIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChpc0NhbmNlbGxlZCB8fCAhbmFtZSB8fCAhYWRkcikgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZENvdW50cnkgIT09ICJBTEwiICYmIGNvdW50cnkgIT09IHNlbGVjdGVkQ291bnRyeSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGlmIChwaG9uZSAmJiBwcm9jZXNzZWRQaG9uZXMuaGFzKHBob25lKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgbGFiZWxzVG9DcmVhdGUucHVzaChmKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBob25lKSBwcm9jZXNzZWRQaG9uZXMuYWRkKHBob25lKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobGFiZWxzVG9DcmVhdGUubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyByZWNvcmRzIGZvdW5kIGZvciB0aGUgc2VsZWN0aW9uLiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgZG9jID0gbmV3IGpzUERGKCk7DQogICAgICAgICAgICAgICAgY29uc3QgbGFiZWxXaWR0aCA9IDEwNTsNCiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbEhlaWdodCA9IDc0LjI1Ow0KDQogICAgICAgICAgICAgICAgbGFiZWxzVG9DcmVhdGUuZm9yRWFjaCgoZiwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMCAmJiBpbmRleCAlIDggPT09IDApIGRvYy5hZGRQYWdlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zID0gaW5kZXggJSA4Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID0gKHBvcyAlIDIpICogbGFiZWxXaWR0aDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguZmxvb3IocG9zIC8gMikgKiBsYWJlbEhlaWdodDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBDdXR0aW5nIGd1aWRlcw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0RHJhd0NvbG9yKDIwMCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5yZWN0KHgsIHksIGxhYmVsV2lkdGgsIGxhYmVsSGVpZ2h0KTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgY3VyWSA9IHkgKyA4Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWRYID0geCArIDEwOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCByaWdodFBhZFggPSB4ICsgbGFiZWxXaWR0aCAtIDEwOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IGxhYmVsV2lkdGggLSAyMDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAxLiBSRUZFUkVOQ0UgKFJpZ2h0IEFsaWduZWQpDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoOCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBSZWYgOiAke2ZbMF0gfHwgIiJ9YCwgcmlnaHRQYWRYLCBjdXJZLCB7IGFsaWduOiAicmlnaHQiIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGN1clkgKz0gNjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAyLiBOQU1FICgxNHB0IEJvbGQsIFdyYXBwZWQpDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTQpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZnVsbE5hbWUgPSBgU210LlNocmkuICR7ZlsyXX1gOw0KICAgICAgICAgICAgICAgICAgICBsZXQgd3JhcHBlZE5hbWUgPSBkb2Muc3BsaXRUZXh0VG9TaXplKGZ1bGxOYW1lLCBhdmFpbGFibGVXaWR0aCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KHdyYXBwZWROYW1lLCBwYWRYLCBjdXJZKTsNCg0KICAgICAgICAgICAgICAgICAgICBjdXJZICs9ICh3cmFwcGVkTmFtZS5sZW5ndGggKiA2KSArIDI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMy4gQUREUkVTUyAmIENJVFkgRVhUUkFDVElPTg0KICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5GdWxsQWRkciA9IChmWzRdIHx8ICIiKS5yZXBsYWNlKC9+L2csICcgJykudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgYWRkcldvcmRzID0gY2xlYW5GdWxsQWRkci5zcGxpdCgvXHMrLyk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjaXR5ID0gYWRkcldvcmRzLmxlbmd0aCA+IDAgPyBhZGRyV29yZHMucG9wKCkgOiAiIjsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFkZHJCb2R5ID0gYWRkcldvcmRzLmpvaW4oIiAiKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA0LiBBRERSRVNTIEJPRFkgKDExcHQgTm9ybWFsLCBXcmFwcGVkKQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTEpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgd3JhcHBlZEFkZHIgPSBkb2Muc3BsaXRUZXh0VG9TaXplKGFkZHJCb2R5LCBhdmFpbGFibGVXaWR0aCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KHdyYXBwZWRBZGRyLCBwYWRYLCBjdXJZKTsNCg0KICAgICAgICAgICAgICAgICAgICBjdXJZICs9ICh3cmFwcGVkQWRkci5sZW5ndGggKiA1KSArIDE7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNS4gQ0lUWSAtIFBJTkNPREUgKDExcHQgQm9sZCkNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGAke2NpdHkudG9VcHBlckNhc2UoKX0gLSAkeyhmWzE1XSB8fCAiIikudHJpbSgpfWAsIHBhZFgsIGN1clkpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDYuIENPVU5UUlkgKDExcHQgTm9ybWFsKQ0KICAgICAgICAgICAgICAgICAgICBjdXJZICs9IDY7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KChmWzE5XSB8fCAiIikudHJpbSgpLnRvVXBwZXJDYXNlKCksIHBhZFgsIGN1clkpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDcuIFBIT05FICgxMXB0IEJvbGQpDQogICAgICAgICAgICAgICAgICAgIGN1clkgKz0gOTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBQaG9uZSA6ICR7KGZbM10gfHwgIiIpLnRyaW0oKX1gLCBwYWRYLCBjdXJZKTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIERZTkFNSUMgRklMRU5BTUUNCiAgICAgICAgICAgICAgICBjb25zdCBjb3VudHJ5TmFtZSA9IHNlbGVjdGVkQ291bnRyeSA9PT0gIkFMTCIgPyAiQWxsIENvdW50cmllcyIgOiBzZWxlY3RlZENvdW50cnk7DQogICAgICAgICAgICAgICAgZG9jLnNhdmUoYE1NUFQgRG9ub3IgQWRkcmVzcyBMYWJlbHMtICR7Y291bnRyeU5hbWV9LnBkZmApOw0KDQogICAgICAgICAgICAgICAgYWxlcnQoYFN1Y2Nlc3MhIEdlbmVyYXRlZCAke2xhYmVsc1RvQ3JlYXRlLmxlbmd0aH0gdW5pcXVlIGxhYmVscyBmb3IgJHtjb3VudHJ5TmFtZX0uYCk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIEZVTEwgRmxlZ2VkIEF1ZGl0IG9mIFRoZSBEYXRhYmFzZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuRGF0YWJhc2VBdWRpdFBERigpIHsNCiAgICAgICAgICAgIGxldCBzdGF0cyA9IHsNCiAgICAgICAgICAgICAgICB0b3RhbDogMCwgY2FuY2VsbGVkOiAwLCBub05hbWU6IDAsIG5vUGhvbmU6IDAsIG5vQWRkcjogMCwNCiAgICAgICAgICAgICAgICBub1BpbjogMCwgbm9FbWFpbDogMCwgbm9QYW46IDAsIG5vUmVmOiAwLCBub0NvbW06IDAsDQogICAgICAgICAgICAgICAgbm9BbXQ6IDAsIG5vUHJhc2FkYW06IDAsIG5vUHJpbnQ6IDAsIHBlbmRpbmdDb25zZW50OiAwDQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBjb25zdCBjbGVhblN0ciA9IChzdHIpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIXN0cikgcmV0dXJuICIiOw0KICAgICAgICAgICAgICAgIHJldHVybiBzdHIudG9TdHJpbmcoKS5ub3JtYWxpemUoIk5GRCIpLnJlcGxhY2UoL1teXHgyMC1ceDdFXS9nLCAiIik7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAvLyAxLiBEQVRBIFBST0NFU1NJTkcgKExvY2tlZCBDb3JlIExvZ2ljIC0gSWdub3JlcyBDQU5DRUxMRUQpDQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgIGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZlsxM10gPT09ICJZRVMiKSBzdGF0cy5jYW5jZWxsZWQrKzsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzdGF0cy50b3RhbCsrOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFtdCA9IHBhcnNlRmxvYXQoZls5XSkgfHwgMDsNCiAgICAgICAgICAgICAgICBjb25zdCB0b3dhcmRzID0gKGZbMTJdIHx8ICIiKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBpbiA9IChmWzE1XSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhd1Bob25lID0gKGZbM10gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjbGVhblBob25lID0gcmF3UGhvbmUucmVwbGFjZSgvXEQvZywgJycpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGlzUGxhY2Vob2xkZXIgPSBjbGVhblBob25lLnN0YXJ0c1dpdGgoIjg4ODg4IikgfHwgY2xlYW5QaG9uZS5zdGFydHNXaXRoKCI5OTk5OSIpOw0KDQogICAgICAgICAgICAgICAgaWYgKCFmWzJdIHx8IGZbMl0udHJpbSgpID09PSAiIikgc3RhdHMubm9OYW1lKys7DQogICAgICAgICAgICAgICAgaWYgKCFyYXdQaG9uZSB8fCBpc1BsYWNlaG9sZGVyKSBzdGF0cy5ub1Bob25lKys7DQogICAgICAgICAgICAgICAgaWYgKCFmWzRdIHx8IGZbNF0udHJpbSgpID09PSAiIiB8fCBmWzRdID09PSAifiIpIHN0YXRzLm5vQWRkcisrOw0KICAgICAgICAgICAgICAgIGlmICghcGluIHx8IHBpbiA9PT0gIjAwMDAwMCIgfHwgcGluLmxlbmd0aCAhPT0gNiB8fCAhL15bMS05XVswLTldezV9JC8udGVzdChwaW4pKSBzdGF0cy5ub1BpbisrOw0KICAgICAgICAgICAgICAgIGlmICghZls1XSB8fCBmWzVdLnRyaW0oKSA9PT0gIiIpIHN0YXRzLm5vRW1haWwrKzsNCiAgICAgICAgICAgICAgICBpZiAoIWZbNl0gfHwgZls2XS50cmltKCkgPT09ICIiKSBzdGF0cy5ub1BhbisrOw0KICAgICAgICAgICAgICAgIGlmICghZlsxMF0gfHwgZlsxMF0udHJpbSgpID09PSAiIikgc3RhdHMubm9SZWYrKzsNCiAgICAgICAgICAgICAgICBpZiAoIWZbMTRdIHx8IGZbMTRdLnRyaW0oKSA9PT0gIiIgfHwgZlsxNF0gPT09ICJ+Iikgc3RhdHMubm9Db21tKys7DQogICAgICAgICAgICAgICAgaWYgKGFtdCA8IDEpIHN0YXRzLm5vQW10Kys7DQogICAgICAgICAgICAgICAgaWYgKGZbMTddID09PSAiTk8iKSBzdGF0cy5ub1ByYXNhZGFtKys7DQogICAgICAgICAgICAgICAgaWYgKGZbMTZdID09PSAiTk8iKSBzdGF0cy5ub1ByaW50Kys7DQogICAgICAgICAgICAgICAgaWYgKGFtdCA+PSAxMDAwMCAmJiB0b3dhcmRzLmluY2x1ZGVzKCJDT1JQVVMiKSAmJiBmWzE4XSA9PT0gIk5PIikgc3RhdHMucGVuZGluZ0NvbnNlbnQrKzsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBjb25zdCB7IGpzUERGIH0gPSB3aW5kb3cuanNwZGY7DQogICAgICAgICAgICBjb25zdCBkb2MgPSBuZXcganNQREYoew0KICAgICAgICAgICAgICAgIHB1dE9ubHlVc2VkRm9udHM6IHRydWUsDQogICAgICAgICAgICAgICAgY29tcHJlc3M6IHRydWUNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBJZiB0aGUgZW5jcnlwdGlvbiBwbHVnaW4gaXMgbG9hZGVkLCB0aGlzIHdpbGwgbm93IHdvcmsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgZG9jLnNldEVuY3J5cHRpb24gPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICBkb2Muc2V0RW5jcnlwdGlvbih7DQogICAgICAgICAgICAgICAgICAgIHVzZXJQYXNzd29yZDogIk1NUFQiLA0KICAgICAgICAgICAgICAgICAgICBvd25lclBhc3N3b3JkOiAiTU1QVCIsDQogICAgICAgICAgICAgICAgICAgIHVzZXJQZXJtaXNzaW9uczogWyJwcmludCIsICJtb2RpZnkiLCAiY29weSIsICJhbm5vdC1mb3JtcyJdDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVuY3J5cHRpb24gcGx1Z2luIG1pc3NpbmcgZnJvbSB0aGUgbG9hZGVkIGpzUERGIGxpYnJhcnkuIik7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHRvdGFsUGFnZXNFeHAgPSAie3RvdGFsX3BhZ2VzX2NvdW50X3N0cmluZ30iOw0KICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBub3cudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1JTicsIHsgZGF5OiAnMi1kaWdpdCcsIG1vbnRoOiAnc2hvcnQnLCB5ZWFyOiAnbnVtZXJpYycgfSk7DQogICAgICAgICAgICBjb25zdCB0aW1lU3RhbXAgPSBub3cudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bOi5dL2csICctJykuc2xpY2UoMCwgMTYpOw0KICAgICAgICAgICAgbGV0IHBNYXAgPSB7IHN1bW1hcnk6IDAsIHBhbjogMCwgY291bnRyeTogMCwgcGhvbmU6IDAsIHBpbmNvZGU6IDAsIGRvbGxhcjogMCwgY2l0eTogMCwgZG9ub3JOYW1lczogMCwgYWRkckNvcnI6IDAgfTsNCg0KICAgICAgICAgICAgY29uc3QgZHJhd0JyYW5kaW5nID0gKHBhZ2VUaXRsZSwgaXNJbmRleCA9IGZhbHNlKSA9PiB7DQogICAgICAgICAgICAgICAgLy8gU0xBVEUgQkxVRSBIRUFERVINCiAgICAgICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKDcwLCAxMzAsIDE4MCk7IGRvYy5yZWN0KDAsIDAsIDIxMCwgNDAsICdGJyk7DQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUsIDI1NSwgMjU1KTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7IGRvYy5zZXRGb250U2l6ZSgyMik7DQogICAgICAgICAgICAgICAgZG9jLnRleHQoY2xlYW5TdHIocGFnZVRpdGxlKSwgMTA1LCAxOCwgeyBhbGlnbjogImNlbnRlciIgfSk7DQogICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDExKTsNCiAgICAgICAgICAgICAgICBkb2MudGV4dChjbGVhblN0cihgTU1QVCBJbnRlcm5hbCBBdWRpdCB8IEdlbmVyYXRlZDogJHtkYXRlU3RyfSAke25vdy50b0xvY2FsZVRpbWVTdHJpbmcoKX1gKSwgMTA1LCAyOCwgeyBhbGlnbjogImNlbnRlciIgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyBDT09MIEdSRVkgRk9PVEVSDQogICAgICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcigxNDksIDE2NSwgMTY2KTsgZG9jLnJlY3QoMCwgMjgyLCAyMTAsIDE1LCAnRicpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1LCAyNTUsIDI1NSk7IGRvYy5zZXRGb250U2l6ZSg4LjUpOw0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KCJJTlRFUk5BTCBTRUNVUklUWSBET0NVTUVOVCAtIE1NUFQgQURNSU5JU1RSQVRJT04iLCAxNSwgMjkyKTsNCg0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1LCAyNTUsIDApOyAvLyBZZWxsb3cgZm9yIHZpc2liaWxpdHkNCiAgICAgICAgICAgICAgICBkb2MudGV4dChkb2MuaW50ZXJuYWwuZ2V0Q3VycmVudFBhZ2VJbmZvKCkucGFnZU51bWJlciArICIgLyAiICsgdG90YWxQYWdlc0V4cCwgMjAwLCAyOTIsIHsgYWxpZ246ICJyaWdodCIgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWlzSW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUsIDI1NSwgMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoIkJhY2sgdG8gSW5kZXgiLCAxMzAsIDI5MiwgeyBhbGlnbjogImNlbnRlciIgfSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5saW5rKDEyMCwgMjg1LCAyMCwgMTAsIHsgcGFnZU51bWJlcjogMSB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAvLyBQQUdFIDE6IElOREVYDQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkFVRElUIE5BVklHQVRJT04gSU5ERVgiLCB0cnVlKTsNCg0KICAgICAgICAgICAgLy8gUEFHRSAyOiBTVU1NQVJZDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLnN1bW1hcnkgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJFWEVDVVRJVkUgQVVESVQgU1VNTUFSWSIpOw0KICAgICAgICAgICAgbGV0IHN5ID0gNTU7DQogICAgICAgICAgICBjb25zdCBkYXRhUm93cyA9IFsNCiAgICAgICAgICAgICAgICBbIlRvdGFsIEFjdGl2ZSBSZWNlaXB0cyAoRXhjbC4gQ2FuY2VsbGVkKSIsIHN0YXRzLnRvdGFsLCAiIzJjM2U1MCJdLA0KICAgICAgICAgICAgICAgIFsiVG90YWwgQ2FuY2VsbGVkIChJZ25vcmVkKSIsIHN0YXRzLmNhbmNlbGxlZCwgIiNlNzRjM2MiXSwNCiAgICAgICAgICAgICAgICBbIk5vIE5hbWUgRm91bmQiLCBzdGF0cy5ub05hbWUsICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBUZWxlcGhvbmUgLyBQbGFjZWhvbGRlciIsIHN0YXRzLm5vUGhvbmUsICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBBZGRyZXNzIC8gRW1wdHkiLCBzdGF0cy5ub0FkZHIsICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJJbnZhbGlkIFBpbmNvZGUiLCBzdGF0cy5ub1BpbiwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIEVtYWlsIElEIiwgc3RhdHMubm9FbWFpbCwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIFBBTiBOdW1iZXIiLCBzdGF0cy5ub1BhbiwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIFJlZmVyZW5jZSBEZXRhaWxzIiwgc3RhdHMubm9SZWYsICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBDb21tZW50cyBQcm92aWRlZCIsIHN0YXRzLm5vQ29tbSwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIEFtb3VudCBGb3VuZCIsIHN0YXRzLm5vQW10LCAiI2MwMzkyYiJdLA0KICAgICAgICAgICAgICAgIFsiUHJhc2FkYW0gU3RhdHVzIChOTykiLCBzdGF0cy5ub1ByYXNhZGFtLCAiI2QzNTQwMCJdLA0KICAgICAgICAgICAgICAgIFsiTm90IFByaW50ZWQgKE5PKSIsIHN0YXRzLm5vUHJpbnQsICIjZDM1NDAwIl0sDQogICAgICAgICAgICAgICAgWyJQZW5kaW5nIENvbnNlbnQgTGV0dGVycyoiLCBzdGF0cy5wZW5kaW5nQ29uc2VudCwgIiNmZjAwMDAiXQ0KICAgICAgICAgICAgXTsNCiAgICAgICAgICAgIGRhdGFSb3dzLmZvckVhY2goKHIsIGkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoaSAlIDIgPT09IDApIHsgZG9jLnNldEZpbGxDb2xvcigyNDUpOyBkb2MucmVjdCgxNSwgc3kgLSA4LCAxODAsIDEyLCAnRicpOyB9DQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcihyWzJdKTsgZG9jLnNldEZvbnRTaXplKDExKTsgZG9jLnRleHQoY2xlYW5TdHIoclswXSksIDI1LCBzeSk7DQogICAgICAgICAgICAgICAgZG9jLnRleHQoclsxXS50b1N0cmluZygpLCAxODUsIHN5LCB7IGFsaWduOiAicmlnaHQiIH0pOyBzeSArPSAxMjsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBQQUdFIDM6IFBBTg0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5wYW4gPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJEZWZlY3RpdmUgUEFOIE51bWJlcnMiKTsNCiAgICAgICAgICAgIGxldCBwbnkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcigxNTUsIDg5LCAxODIpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KCJSZWNlaXB0IE5vLiIsIDI1LCA1OSk7IGRvYy50ZXh0KCJJbnZhbGlkIFBBTiBWYWx1ZSIsIDEwMCwgNTkpOw0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGwuc3BsaXQoJ3wnKTsgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSByZXR1cm47DQogICAgICAgICAgICAgICAgY29uc3QgcGFuID0gKGZbNl0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBpZiAocGFuICYmICEvXltBLVpdezV9WzAtOV17NH1bQS1aXXsxfSQvLnRlc3QocGFuKSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAocG55ID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiUEFOIChDb250LikiKTsgcG55ID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGZbMF0sIDI1LCBwbnkpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChwYW4sIDEwMCwgcG55KTsgcG55ICs9IDk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgNDogQ09VTlRSSUVTIChVc2luZyBSZXZlcnNlIFNlYXJjaCkNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuY291bnRyeSA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkNvdW50cmllcyBpbiBBZGRyZXNzIEZpZWxkIik7DQogICAgICAgICAgICBsZXQgY3lZID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoMzksIDE3NCwgOTYpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KCJSZWNlaXB0IE5vLiIsIDI1LCA1OSk7IGRvYy50ZXh0KCJBZGRyZXNzIEVudHJ5IiwgODAsIDU5KTsNCg0KICAgICAgICAgICAgY29uc3QgY291bnRyaWVzID0gWyJVU0EiLCAiVUsiLCAiVU5JVEVEIEtJTkdET00iLCAiVUFFIiwgIkNBTkFEQSIsICJBVVNUUkFMSUEiLCAiU0lOR0FQT1JFIl07DQoNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgLy8gRmllbGQgMTMgaXMgQ2FuY2VsbGVkLiBKYW4gMjYgaW5zdHJ1Y3Rpb246IElnbm9yZSBDQU5DRUxMRUQgcmVjZWlwdHMuDQogICAgICAgICAgICAgICAgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBhZHIgPSAoZls0XSB8fCAiIikudHJpbSgpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgaWYgKCFhZHIpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIC8vIFJFVkVSU0UgU0VBUkNIIExPR0lDOg0KICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IGNvbW1vbiBkZWxpbWl0ZXJzIGFuZCBsb29rIGF0IHRoZSB2ZXJ5IGxhc3Qgc2VnbWVudA0KICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gYWRyLnNwbGl0KC9bXHMsXSsvKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsYXN0U2VnbWVudCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdOyAvLyBHZXQgdGhlIGxhc3Qgd29yZA0KICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZExhc3RTZWdtZW50ID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDJdIDogIiI7DQoNCiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgbGFzdCBzZWdtZW50IChvciBsYXN0IHR3byBmb3IgIlVOSVRFRCBLSU5HRE9NIikgbWF0Y2hlcyBvdXIgbGlzdA0KICAgICAgICAgICAgICAgIGNvbnN0IGlzRm9yZWlnbiA9IGNvdW50cmllcy5zb21lKGMgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gIlVOSVRFRCBLSU5HRE9NIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFkci5lbmRzV2l0aCgiVU5JVEVEIEtJTkdET00iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFzdFNlZ21lbnQgPT09IGM7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoaXNGb3JlaWduKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChjeVkgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJDb3VudHJpZXMgKENvbnQuKSIpOyBjeVkgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoZlswXSwgMjUsIGN5WSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSg5KTsNCiAgICAgICAgICAgICAgICAgICAgLy8gRGlzcGxheWluZyBvbmx5IHRoZSBlbmQgb2YgdGhlIGFkZHJlc3MgdG8gaGlnaGxpZ2h0IHRoZSBjb3VudHJ5DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGNsZWFuU3RyKGZbNF0uc2xpY2UoLTU1KSksIDgwLCBjeVkpOw0KICAgICAgICAgICAgICAgICAgICBjeVkgKz0gOTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KDQogICAgICAgICAgICAvLyBQQUdFIDU6IFBIT05FUw0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5waG9uZSA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkluY29ycmVjdCBUZWxlcGhvbmUgTnVtYmVycyIpOw0KICAgICAgICAgICAgbGV0IHR5ID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoNTIsIDczLCA5NCk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnRleHQoIlJlY2VpcHQgTm8uIiwgMjUsIDU5KTsgZG9jLnRleHQoIkludmFsaWQgUGhvbmUgVmFsdWUiLCAxMDAsIDU5KTsNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsLnNwbGl0KCd8Jyk7IGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBoID0gKGZbM10gfHwgIiIpLnRyaW0oKTsgY29uc3QgY3AgPSBwaC5yZXBsYWNlKC9cRC9nLCAnJyk7DQogICAgICAgICAgICAgICAgaWYgKHBoICYmICFjcC5zdGFydHNXaXRoKCI4ODg4OCIpICYmICFjcC5zdGFydHNXaXRoKCI5OTk5OSIpICYmIGNwLmxlbmd0aCAhPT0gMTApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5ID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiUGhvbmVzIChDb250LikiKTsgdHkgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoZlswXSwgMjUsIHR5KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQocGgsIDEwMCwgdHkpOyB0eSArPSA5Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBQQUdFIDY6IFBJTkNPREUNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAucGluY29kZSA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkludmFsaWQgUElOQ09ERSBSZWNvcmRzIik7DQogICAgICAgICAgICBsZXQgcGN5ID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoMjQzLCAxNTYsIDE4KTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2MudGV4dCgiUmVjZWlwdCBOby4iLCAyNSwgNTkpOyBkb2MudGV4dCgiSW52YWxpZCBQaW5jb2RlIiwgMTAwLCA1OSk7DQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbC5zcGxpdCgnfCcpOyBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHJldHVybjsNCiAgICAgICAgICAgICAgICBpZiAoKGZbMTldIHx8ICJJTkRJQSIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpICE9PSAiSU5ESUEiKSByZXR1cm47DQogICAgICAgICAgICAgICAgY29uc3QgcGluID0gKGZbMTVdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgaWYgKCFmWzRdIHx8IGZbNF0gPT09ICJ+IiB8fCAhZlsyXSkgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGlmICghL15bMS05XVswLTldezV9JC8udGVzdChwaW4pKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChwY3kgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJQaW5jb2RlIChDb250LikiKTsgcGN5ID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGZbMF0sIDI1LCBwY3kpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChwaW4gfHwgIltFTVBUWV0iLCAxMDAsIHBjeSk7IHBjeSArPSA5Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBQQUdFIDc6IERPTExBUiBTSUdOICgkKQ0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5kb2xsYXIgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJJbnZhbGlkIE5hbWVzIG9yIEFkZHJlc3MgKCQpIik7DQogICAgICAgICAgICBsZXQgZHkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcigyMzEsIDc2LCA2MCk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnRleHQoIlJlY2VpcHQgTm8uIiwgMjUsIDU5KTsgZG9jLnRleHQoIkRldGFpbHMiLCA3MCwgNTkpOw0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGwuc3BsaXQoJ3wnKTsgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSByZXR1cm47DQogICAgICAgICAgICAgICAgaWYgKCgoZlsyXSB8fCAiIikgKyAoZls0XSB8fCAiIikpLmluY2x1ZGVzKCIkIikpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IFtgTmFtZTogJHtmWzJdfWAsIGBBZGRyOiAke2ZbNF19YF07DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0VHh0ID0gZG9jLnNwbGl0VGV4dFRvU2l6ZShpbmZvLmpvaW4oIlxuIiksIDExNSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChkeSArIDE1ID4gMjc1KSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiRG9sbGFyIENoZWNrIChDb250LikiKTsgZHkgPSA2NTsgfQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoZlswXSwgMjUsIGR5KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnNldEZvbnRTaXplKDkpOyBkb2MudGV4dChzcGxpdFR4dCwgNzAsIGR5KTsgZHkgKz0gMTU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgODogQ0lUWSBDT1JSRUNUSU9ODQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLmNpdHkgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJDaXR5IE5hbWUgVmFsaWRhdGlvbiIpOw0KICAgICAgICAgICAgbGV0IGN0eVkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcigxNDIsIDY4LCAxNzMpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy50ZXh0KCJPcmlnaW5hbCIsIDI1LCA1OSk7IGRvYy50ZXh0KCJTdWdnZXN0ZWQiLCAxMTAsIDU5KTsNCiAgICAgICAgICAgIGxldCBjaXR5UmF3ID0gd2luZG93LkdMT0JBTF9DSVRZX0FVRElUX0RBVEEgfHwgIiI7DQogICAgICAgICAgICBpZiAoY2l0eVJhdykgew0KICAgICAgICAgICAgICAgIFN0cmluZyhjaXR5UmF3KS5zcGxpdCgnXG4nKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwdHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwdHMubGVuZ3RoID49IDIgJiYgIWxpbmUuaW5jbHVkZXMoJ09SSUdJTkFMJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHlZID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiQ2l0eSAoQ29udC4pIik7IGN0eVkgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDkpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGNsZWFuU3RyKHB0c1swXS50cmltKCkpLCAyNSwgY3R5WSk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChjbGVhblN0cihwdHNbMV0udHJpbSgpKSwgMTEwLCBjdHlZKTsgY3R5WSArPSA3Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIFBBR0UgOTogRE9OT1IgTkFNRVMNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuZG9ub3JOYW1lcyA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkRvbm9yIE5hbWUgQ29ycmVjdGlvbnMiKTsNCiAgICAgICAgICAgIGxldCBkbnlZID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoNDEsIDEyOCwgMTg1KTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2MudGV4dCgiT3JpZ2luYWwiLCAyNSwgNTkpOyBkb2MudGV4dCgiQ29ycmVjdGVkIiwgMTEwLCA1OSk7DQogICAgICAgICAgICBsZXQgZG9ub3JSYXcgPSB3aW5kb3cuR0xPQkFMX0RPTk9SX05BTUVfREFUQSB8fCAiIjsNCiAgICAgICAgICAgIGlmIChkb25vclJhdykgew0KICAgICAgICAgICAgICAgIFN0cmluZyhkb25vclJhdykuc3BsaXQoJ1xuJykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocHRzLmxlbmd0aCA+PSAyICYmICFsaW5lLmluY2x1ZGVzKCdPUklHSU5BTCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG55WSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIk5hbWVzIChDb250LikiKTsgZG55WSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoOSk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoY2xlYW5TdHIocHRzWzBdLnRyaW0oKSksIDI1LCBkbnlZKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KGNsZWFuU3RyKHB0c1sxXS50cmltKCkpLCAxMTAsIGRueVkpOyBkbnlZICs9IDc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gUEFHRSAxMDogQUREUkVTUyBDT1JSRUNUSU9OUw0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5hZGRyQ29yciA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkFkZHJlc3MgQ29ycmVjdGlvbnMiKTsNCiAgICAgICAgICAgIGxldCBhZHlZID0gNzA7DQogICAgICAgICAgICBjb25zdCBjb2xXaWR0aCA9IDc1Ow0KICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcigyMiwgMTYwLCAxMzMpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy50ZXh0KCJPcmlnaW5hbCBBZGRyZXNzIiwgMjUsIDU5KTsgZG9jLnRleHQoIkNvcnJlY3RlZCBBZGRyZXNzIiwgMTE1LCA1OSk7DQogICAgICAgICAgICBsZXQgYWRkclJhdyA9IHdpbmRvdy5HTE9CQUxfQUREUkVTU19DT1JSRUNUSU9OX0RBVEEgfHwgIiI7DQogICAgICAgICAgICBpZiAoYWRkclJhdykgew0KICAgICAgICAgICAgICAgIFN0cmluZyhhZGRyUmF3KS5zcGxpdCgnXG4nKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwdHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwdHMubGVuZ3RoID49IDIgJiYgIWxpbmUuaW5jbHVkZXMoJ09SSUdJTkFMJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdXID0gZG9jLnNwbGl0VGV4dFRvU2l6ZShjbGVhblN0cihwdHNbMF0udHJpbSgpKSwgY29sV2lkdGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29yclcgPSBkb2Muc3BsaXRUZXh0VG9TaXplKGNsZWFuU3RyKHB0c1sxXS50cmltKCkpLCBjb2xXaWR0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dIID0gTWF0aC5tYXgob3JpZ1cubGVuZ3RoLCBjb3JyVy5sZW5ndGgpICogNTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZHlZICsgcm93SCA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIkFkZHJlc3MgKENvbnQuKSIpOyBhZHlZID0gNzA7IH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSg4KTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChvcmlnVywgMjUsIGFkeVkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQoY29yclcsIDExNSwgYWR5WSk7IGFkeVkgKz0gcm93SCArIDY7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0RHJhd0NvbG9yKDIzMCk7IGRvYy5saW5lKDIwLCBhZHlZIC0gMywgMTkwLCBhZHlZIC0gMyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gVVBEQVRFIElOREVYIExJTktTDQogICAgICAgICAgICBkb2Muc2V0UGFnZSgxKTsNCiAgICAgICAgICAgIGNvbnN0IG5hdiA9IFsNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiRXhlY3V0aXZlIEF1ZGl0IFN1bW1hcnkiLCB0YXJnZXQ6IHBNYXAuc3VtbWFyeSwgY29sb3I6IFs0NCwgNjIsIDgwXSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJEZWZlY3RpdmUgUEFOIE51bWJlcnMiLCB0YXJnZXQ6IHBNYXAucGFuLCBjb2xvcjogWzE1NSwgODksIDE4Ml0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiQ291bnRyaWVzIGluIEFkZHJlc3MgRmllbGQiLCB0YXJnZXQ6IHBNYXAuY291bnRyeSwgY29sb3I6IFszOSwgMTc0LCA5Nl0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiSW5jb3JyZWN0IFRlbGVwaG9uZSBOdW1iZXJzIiwgdGFyZ2V0OiBwTWFwLnBob25lLCBjb2xvcjogWzUyLCA3MywgOTRdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkludmFsaWQgUElOQ09ERSBSZWNvcmRzIiwgdGFyZ2V0OiBwTWFwLnBpbmNvZGUsIGNvbG9yOiBbMjQzLCAxNTYsIDE4XSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJJbnZhbGlkIE5hbWVzIG9yIEFkZHJlc3MgKCQpIiwgdGFyZ2V0OiBwTWFwLmRvbGxhciwgY29sb3I6IFsyMzEsIDc2LCA2MF0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiQ2l0eSBOYW1lIFZhbGlkYXRpb24iLCB0YXJnZXQ6IHBNYXAuY2l0eSwgY29sb3I6IFsxNDIsIDY4LCAxNzNdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkRvbm9yIE5hbWUgQ29ycmVjdGlvbnMiLCB0YXJnZXQ6IHBNYXAuZG9ub3JOYW1lcywgY29sb3I6IFs0MSwgMTI4LCAxODVdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkFkZHJlc3MgQ29ycmVjdGlvbnMiLCB0YXJnZXQ6IHBNYXAuYWRkckNvcnIsIGNvbG9yOiBbMjIsIDE2MCwgMTMzXSB9DQogICAgICAgICAgICBdOw0KICAgICAgICAgICAgbGV0IGl5ID0gNjU7DQogICAgICAgICAgICBuYXYuZm9yRWFjaChpdCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFpdC50YXJnZXQpIHJldHVybjsNCiAgICAgICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKDI0OCk7IGRvYy5yZWN0KDIwLCBpeSwgMTcwLCAxNCwgJ0YnKTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKGl0LmNvbG9yWzBdLCBpdC5jb2xvclsxXSwgaXQuY29sb3JbMl0pOyBkb2MucmVjdCgyMCwgaXksIDQsIDE0LCAnRicpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoaXQuY29sb3JbMF0sIGl0LmNvbG9yWzFdLCBpdC5jb2xvclsyXSk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOyBkb2Muc2V0Rm9udFNpemUoMTIpOw0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KGl0LmxhYmVsLCAzMiwgaXkgKyA5LjUpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoaXQuY29sb3JbMF0sIGl0LmNvbG9yWzFdLCBpdC5jb2xvclsyXSk7IGRvYy5yZWN0KDE3MiwgaXkgKyAyLjUsIDEyLCA5LCAnRicpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnRleHQoaXQudGFyZ2V0LnRvU3RyaW5nKCksIDE3OCwgaXkgKyA4LjUsIHsgYWxpZ246ICJjZW50ZXIiIH0pOw0KICAgICAgICAgICAgICAgIGRvYy5saW5rKDIwLCBpeSwgMTcwLCAxNCwgeyBwYWdlTnVtYmVyOiBpdC50YXJnZXQgfSk7IGl5ICs9IDE4Ow0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGlmICh0eXBlb2YgZG9jLnB1dFRvdGFsUGFnZXMgPT09ICdmdW5jdGlvbicpIGRvYy5wdXRUb3RhbFBhZ2VzKHRvdGFsUGFnZXNFeHApOw0KICAgICAgICAgICAgZG9jLnNhdmUoYE1NUFRfRGF0YWJhc2VfQXVkaXRfJHt0aW1lU3RhbXB9LnBkZmApOw0KICAgICAgICAgICAgY29uc3QgbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOyBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gdHJpZ2dlckZ1bGxBdWRpdCgpIHsNCiAgICAgICAgICAgIGNvbnN0IGxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChsb2FkZXIpIGxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGF3YWl0IHJ1bkNpdHlFeHRyYWN0aW9uKCdhdWRpdCcpOw0KICAgICAgICAgICAgICAgIGF3YWl0IHJ1bkRvbm9yTmFtZUNoZWNrKCdhdWRpdCcpOw0KICAgICAgICAgICAgICAgIGF3YWl0IHJ1bkFkZHJlc3NDaGVjaygnYXVkaXQnKTsgLy8gQWRkZWQNCg0KICAgICAgICAgICAgICAgIGF3YWl0IHJ1bkRhdGFiYXNlQXVkaXRQREYoKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkF1ZGl0IEVycm9yOiIsIGVycik7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gUEFOIE51bWJlcnMgQXV0byBDb3JyZWN0IC0gKFVwcGVyY2FzZSBmb3IgYWxsIFBBTiBGSUVMRFMpDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1blBBTkNvcnJlY3Rpb24oKSB7DQogICAgICAgICAgICBjb25zdCBsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIHRoZSBvdmVybGF5IHJlbmRlcnMgYmVmb3JlIHRoZSBDUFUgd29ya3MNCiAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgIGxldCBjb3JyZWN0aW9uQ291bnQgPSAwOw0KDQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gMS4gUHJvY2VzcyB0aGUgZ2xvYmFsIGFycmF5IGRpcmVjdGx5DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IEdMT0JBTF9EQl9MSU5FU1tpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGluZSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBBTiBpcyBJbmRleCA2ICg3dGggY29sdW1uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkcy5sZW5ndGggPiA2KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbCA9IGZpZWxkc1s2XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXBwZXJWYWwgPSB2YWwudG9VcHBlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgIT09IHVwcGVyVmFsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1s2XSA9IHVwcGVyVmFsOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVNbaV0gPSBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0aW9uQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyAyLiBTeW5jIHRvIENsb3VkIGlmIGNoYW5nZXMgd2VyZSBtYWRlDQogICAgICAgICAgICAgICAgICAgIGlmIChjb3JyZWN0aW9uQ291bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBVVRIRU5USUNBVElPTjogVXNpbmcgeW91ciBNTVBUX0FVVEggc3lzdGVtIHRvIGdldCBhIGZyZXNoIHRva2VuDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlblBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB0b2tlblBhcmFtcw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCB0b2tlblJlcy5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVQTE9BRDogU2F2aW5nIHRoZSBtb2RpZmllZCBHTE9CQUxfREJfTElORVMNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwbG9hZFJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuRGF0YS5hY2Nlc3NfdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogR0xPQkFMX0RCX0xJTkVTLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBsb2FkUmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGN1cnJlbnQgc2NyZWVuIGRpc3BsYXkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNob3dSZWNvcmQgPT09ICdmdW5jdGlvbicpIHNob3dSZWNvcmQoY3VycmVudFJlY29yZEluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChgUEFOIENvcnJlY3Rpb24gU3VjY2VzcyFcblRvdGFsIFJlY29yZHMgVXBkYXRlZDogJHtjb3JyZWN0aW9uQ291bnR9YCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2xvdWQgU3luYyBGYWlsZWQuIik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiU2NhbiBDb21wbGV0ZTogTm8gbG93ZXJjYXNlIFBBTiBlbnRyaWVzIGZvdW5kLiIpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiUEFOIEVycm9yOiIsIGVycik7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LCAxMDApOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gVW5pcXVlIERvbm9yIExpc3QgQ3JlYXRpb24gTG9naWMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1blVuaXF1ZURvbm9yTGlzdCgpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvbm9yLXNlYXJjaC1pbnB1dCcpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChNTVBUX0RCX1JBV19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhd0NvbnRlbnQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSByYXdDb250ZW50LnNwbGl0KC9ccj9cbnxcci8pOw0KDQogICAgICAgICAgICAgICAgLy8gVXNlIGEgTWFwIHRvIHN0b3JlIGFnZ3JlZ2F0ZWQgZGF0YQ0KICAgICAgICAgICAgICAgIGxldCBkb25vck1hcCA9IG5ldyBNYXAoKTsNCg0KICAgICAgICAgICAgICAgIC8vIFNjYW4gQUxMIHJlY29yZHMgKG5vdCBqdXN0IHJldmVyc2UpIHRvIGVuc3VyZSB3ZSBtaXNzIG5vdGhpbmcNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNbaV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGhlYWRlciBvciBlbXB0eSBsaW5lcw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmUgfHwgbGluZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJyZWNlaXB0fGRhdGUiKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlaXB0Tm8gPSBmaWVsZHNbMF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBmaWVsZHNbMl0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBob25lID0gZmllbGRzWzNdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gZmllbGRzWzRdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGZpZWxkc1s5XSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsID0gZmllbGRzWzEzXSB8fCAiTk8iOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwaW4gPSBmaWVsZHNbMTVdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudHJ5ID0gZmllbGRzWzE5XSB8fCAiIjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gU1RSSUNUIElHTk9SRSBMT0dJQyAtLS0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmNlbCA9PT0gIllFUyIpIGNvbnRpbnVlOyAvLyBJZ25vcmUgQUxMIGNhbmNlbGxlZCByZWNvcmRzDQogICAgICAgICAgICAgICAgICAgIGlmICghcGhvbmUudHJpbSgpIHx8IHBob25lLnN0YXJ0c1dpdGgoIjg4ODg4IikgfHwgcGhvbmUuc3RhcnRzV2l0aCgiOTk5OTkiKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGlmIChsaW5lLmluY2x1ZGVzKCIkIikpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIW5hbWUudHJpbSgpICYmIGFtb3VudCA8PSAwKSBjb250aW51ZTsgLy8gU2tpcCBnaG9zdCByZWNvcmRzDQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIFNFQVJDSCBGSUxURVIgKGlmIGFwcGxpY2FibGUpIC0tLQ0KICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoVGVybSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG93ZXJMaW5lID0gbGluZS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaFRlcm0uaW5jbHVkZXMoJzsnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1zID0gc2VhcmNoVGVybS5zcGxpdCgnOycpLm1hcCh0ID0+IHQudHJpbSgpLnRvTG93ZXJDYXNlKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybXMuc29tZSh0ID0+IGxvd2VyTGluZS5pbmNsdWRlcyh0KSkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWFyY2hUZXJtLmluY2x1ZGVzKCcsJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtcyA9IHNlYXJjaFRlcm0uc3BsaXQoJywnKS5tYXAodCA9PiB0LnRyaW0oKS50b0xvd2VyQ2FzZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlcm1zLmV2ZXJ5KHQgPT4gbG93ZXJMaW5lLmluY2x1ZGVzKHQpKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbG93ZXJMaW5lLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEFHR1JFR0FUSU9OIExPR0lDIC0tLQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIWRvbm9yTWFwLmhhcyhwaG9uZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvbm9yTWFwLnNldChwaG9uZSwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsIHBob25lLCBhZGRyZXNzLCBwaW4sIGNvdW50cnksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0ZXN0UmVjZWlwdDogcmVjZWlwdE5vLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQW1vdW50OiBhbW91bnQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IDENCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV4aXN0aW5nID0gZG9ub3JNYXAuZ2V0KHBob25lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLnRvdGFsQW1vdW50ICs9IGFtb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmNvdW50ICs9IDE7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgcmVjZWlwdCBudW1iZXIgaXMgaGlnaGVyIHRoYW4gd2hhdCB3ZSBoYXZlLCB1cGRhdGUgdGhlICJMYXRlc3QiIGRldGFpbHMNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBoYXZlIHRoZSBtb3N0IHJlY2VudCBOYW1lL0FkZHJlc3MgZXZlbiBpZiB3ZSBwcm9jZXNzIG91dCBvZiBvcmRlcg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHJlY2VpcHROby5yZXBsYWNlKC9cRC9nLCAnJykpID4gcGFyc2VJbnQoZXhpc3RpbmcubGF0ZXN0UmVjZWlwdC5yZXBsYWNlKC9cRC9nLCAnJykpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubmFtZSA9IG5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuYWRkcmVzcyA9IGFkZHJlc3M7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcucGluID0gcGluOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmNvdW50cnkgPSBjb3VudHJ5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmxhdGVzdFJlY2VpcHQgPSByZWNlaXB0Tm87DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVEb25vcnMgPSBBcnJheS5mcm9tKGRvbm9yTWFwLnZhbHVlcygpKTsNCg0KICAgICAgICAgICAgICAgIGlmICh1bmlxdWVEb25vcnMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBkb25vcnMgZm91bmQgbWF0Y2hpbmcgdGhlIGNyaXRlcmlhLiIpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGdlbmVyYXRlVW5pcXVlRG9ub3JQREYodW5pcXVlRG9ub3JzLCBzZWFyY2hUZXJtKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJEb25vciBMaXN0IEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFBERiBmaWxlIEdlbmVyYXRpb24gZm9yIFVuaXF1ZSBEb25vciBMaXN0DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVVuaXF1ZURvbm9yUERGKGRvbm9ycywgc2VhcmNoVGVybSkgew0KICAgICAgICAgICAgY29uc3QgeyBqc1BERiB9ID0gd2luZG93LmpzcGRmOw0KICAgICAgICAgICAgY29uc3QgZG9jID0gbmV3IGpzUERGKCdwJywgJ21tJywgJ2E0Jyk7DQogICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCk7DQoNCiAgICAgICAgICAgIC8vIDEuIFNvcnQgYnkgVG90YWwgQW1vdW50IChIaWdoZXN0IG9uIHRvcCkNCiAgICAgICAgICAgIGRvbm9ycy5zb3J0KChhLCBiKSA9PiBiLnRvdGFsQW1vdW50IC0gYS50b3RhbEFtb3VudCk7DQoNCiAgICAgICAgICAgIGxldCB0aXRsZTMgPSAiIjsNCiAgICAgICAgICAgIGlmIChzZWFyY2hUZXJtKSB7DQogICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IHNlYXJjaFRlcm0uaW5jbHVkZXMoJzsnKSA/ICJPUiIgOiAiQU5EIjsNCiAgICAgICAgICAgICAgICB0aXRsZTMgPSBgU2VhcmNoIFJlc3VsdHMgZm9yOiAke3NlYXJjaFRlcm0ucmVwbGFjZSgvWzssXS9nLCAiICIgKyB0eXBlICsgIiAiKX1gOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCB0YWJsZURhdGEgPSBkb25vcnMubWFwKGQgPT4gew0KICAgICAgICAgICAgICAgIC8vIEFkdmFuY2VkIEFkZHJlc3MgTG9naWM6IFNwbGl0IGJ5IHNwYWNlLCB0aWxkZSwgb3IgY29sb24gdG8gZmluZCB0aGUgY2l0eQ0KICAgICAgICAgICAgICAgIGNvbnN0IGFkZHJQYXJ0cyA9IGQuYWRkcmVzcy50cmltKCkuc3BsaXQoL1tcc346XSsvKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjaXR5ID0gYWRkclBhcnRzLmxlbmd0aCA+IDAgPyBhZGRyUGFydHNbYWRkclBhcnRzLmxlbmd0aCAtIDFdIDogIiI7DQogICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHJlbWFpbmluZyBhZGRyZXNzIGZvciBkaXNwbGF5DQogICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nQWRkciA9IGQuYWRkcmVzcy5yZXBsYWNlKC9bOn5dL2csICcsICcpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBtYWluQWRkciA9IHJlbWFpbmluZ0FkZHIuc3BsaXQoJywgJykuc2xpY2UoMCwgLTEpLmpvaW4oJywgJyk7DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gWw0KICAgICAgICAgICAgICAgICAgICAvLyBDb2x1bW4gMTogTmFtZSAmIENvbnRhY3QNCiAgICAgICAgICAgICAgICAgICAgLy97IGNvbnRlbnQ6IGAke2QubmFtZX1cbiR7ZC5waG9uZX1cbiR7ZC5yZWNlaXB0Tm99YCwgc3R5bGVzOiB7IGZvbnRTdHlsZTogJ2JvbGQnIH0gfSwNCiAgICAgICAgICAgICAgICAgICAgeyBjb250ZW50OiBgJHtkLm5hbWV9XG4ke2QucGhvbmV9XG4ke2QubGF0ZXN0UmVjZWlwdH1gLCBzdHlsZXM6IHsgZm9udFN0eWxlOiAnYm9sZCcgfSB9LA0KICAgICAgICAgICAgICAgICAgICAvLyBDb2x1bW4gMjogQ29udHJpYnV0aW9uDQogICAgICAgICAgICAgICAgICAgIHsgY29udGVudDogYFJzLiAke2QudG90YWxBbW91bnQudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJywgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIsIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMiB9KX1cbiR7ZC5jb3VudH0gVGltZXNgLCBzdHlsZXM6IHsgaGFsaWduOiAnY2VudGVyJywgZm9udFN0eWxlOiAnYm9sZCcgfSB9LA0KICAgICAgICAgICAgICAgICAgICAvL3sgY29udGVudDogYFJzLiAke2QudG90YWxBbW91bnQudG9Mb2NhbGVTdHJpbmcoKX1cbiR7ZC5jb3VudH0gVGltZXNgLCBzdHlsZXM6IHsgaGFsaWduOiAnY2VudGVyJywgZm9udFN0eWxlOiAnYm9sZCcgfSB9LA0KICAgICAgICAgICAgICAgICAgICAvLyBDb2x1bW4gMzogQWRkcmVzcyBEZXRhaWxzIChDaXR5IC0gUGluY29kZSAtIENvdW50cnkgb24gbGFzdCBsaW5lKQ0KICAgICAgICAgICAgICAgICAgICB7IGNvbnRlbnQ6IGAke21haW5BZGRyfVxuJHtjaXR5LnRvVXBwZXJDYXNlKCl9IC0gJHtkLnBpbn0gLSAke2QuY291bnRyeS50b1VwcGVyQ2FzZSgpfWAsIHN0eWxlczogeyBmb250U3R5bGU6ICdib2xkJyB9IH0NCiAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGRvYy5hdXRvVGFibGUoew0KICAgICAgICAgICAgICAgIGhlYWQ6IFtbJ05hbWUgJiBDb250YWN0JywgJ0NvbnRyaWJ1dGlvbicsICdBZGRyZXNzIERldGFpbHMnXV0sDQogICAgICAgICAgICAgICAgYm9keTogdGFibGVEYXRhLA0KICAgICAgICAgICAgICAgIHN0YXJ0WTogNTAsIC8vIFB1c2hlZCBkb3duIHNpZ25pZmljYW50bHkgdG8gcHJldmVudCBhbnkgb3ZlcmxhcA0KICAgICAgICAgICAgICAgIG1hcmdpbjogeyB0b3A6IDUwIH0sIC8vIEVuc3VyZXMgc3Vic2VxdWVudCBwYWdlcyBkb24ndCBvdmVybGFwIGhlYWRlcg0KICAgICAgICAgICAgICAgIHRoZW1lOiAnZ3JpZCcsDQogICAgICAgICAgICAgICAgaGVhZFN0eWxlczogew0KICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6IFswLCA1MSwgMTAyXSwNCiAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiAyNTUsDQogICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxMSwNCiAgICAgICAgICAgICAgICAgICAgZm9udFN0eWxlOiAnYm9sZCcsDQogICAgICAgICAgICAgICAgICAgIGNlbGxQYWRkaW5nOiA0LA0KICAgICAgICAgICAgICAgICAgICBoYWxpZ246ICdjZW50ZXInDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBib2R5U3R5bGVzOiB7DQogICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxMCwNCiAgICAgICAgICAgICAgICAgICAgY2VsbFBhZGRpbmc6IDQsDQogICAgICAgICAgICAgICAgICAgIGxpbmVDb2xvcjogWzE4MCwgMTgwLCAxODBdLA0KICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IFswLCAwLCAwXSAvLyBTaGFycCBibGFjayB0ZXh0DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBjb2x1bW5TdHlsZXM6IHsNCiAgICAgICAgICAgICAgICAgICAgMDogeyBjZWxsV2lkdGg6IDU1IH0sDQogICAgICAgICAgICAgICAgICAgIDE6IHsgY2VsbFdpZHRoOiA0MCB9LA0KICAgICAgICAgICAgICAgICAgICAyOiB7IGNlbGxXaWR0aDogJ2F1dG8nIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGRpZERyYXdQYWdlOiBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBQZXJtYW5lbnQgSGVhZGVyIGZvciBBbGwgUGFnZXMNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDE4KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwLCA1MSwgMTAyKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQodW5kZWZpbmVkLCAnYm9sZCcpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCgiTXlsYWkgTWFoYSBQZXJpYXlhdmEgQW51c2hhbSBUcnVzdCIsIDEwNSwgMTUsIHsgYWxpZ246ICdjZW50ZXInIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFN0YXRzICYgVGltZXN0YW1wDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMTAwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQodW5kZWZpbmVkLCAnYm9sZCcpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgVW5pcXVlIERvbm9yIExpc3QgQ3JlYXRlZCBvbjogJHt0aW1lc3RhbXB9YCwgMTQsIDI1KTsNCg0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTMpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDAsIDEwMiwgMCk7IC8vIERhcmsgR3JlZW4gZm9yIHRvdGFsIGNvdW50DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBUb3RhbCBVbmlxdWUgRG9ub3JzOiAke2Rvbm9ycy5sZW5ndGh9YCwgMTQsIDMzKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAodGl0bGUzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigxNTAsIDAsIDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQodGl0bGUzLCAxNCwgNDApOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU3R5bGlzaCBEaXZpZGVyIExpbmUNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldERyYXdDb2xvcigwLCA1MSwgMTAyKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldExpbmVXaWR0aCgxKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLmxpbmUoMTQsIDQzLCAxOTYsIDQzKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBGb290ZXINCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZVNpemUgPSBkb2MuaW50ZXJuYWwucGFnZVNpemU7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VIZWlnaHQgPSBwYWdlU2l6ZS5oZWlnaHQgPyBwYWdlU2l6ZS5oZWlnaHQgOiBwYWdlU2l6ZS5nZXRIZWlnaHQoKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDEwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigxNTApOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCh1bmRlZmluZWQsICdib2xkJyk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KCJJbnRlcm5hbCBEb2N1bWVudCIsIDE0LCBwYWdlSGVpZ2h0IC0gMTApOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgUGFnZSAke2RhdGEucGFnZU51bWJlcn1gLCAxOTYsIHBhZ2VIZWlnaHQgLSAxMCwgeyBhbGlnbjogJ3JpZ2h0JyB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgZmlsZVN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKS5zbGljZSgwLCAxOSk7DQogICAgICAgICAgICBkb2Muc2F2ZShgTU1QVF9Eb25vcl9MaXN0XyR7ZmlsZVN0YW1wfS5wZGZgKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgd2luZG93Lm9ubG9hZCA9IGluaXRpYWxpemVNTVBUOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHNjcmlwdD4NCiAgICAgICAgZnVuY3Rpb24gYnVpbGRGWUluZGV4KCkgew0KICAgICAgICAgICAgLy8gMS4gSW5pdGlhbCBEYXRhIENoZWNrDQogICAgICAgICAgICBpZiAodHlwZW9mIEdMT0JBTF9EQl9MSU5FUyA9PT0gJ3VuZGVmaW5lZCcgfHwgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA8PSAxKSByZXR1cm47DQoNCiAgICAgICAgICAgIC8vIDIuIFNFQ1VSSVRZIENIRUNLOiBPbmx5IGRpc2FibGUgaWYgcmVzdHJpY3RlZCBhYm92ZSByZWNvcmQgMQ0KICAgICAgICAgICAgLy8gSWYgTWluUmVjb3JkTnVtYmVyIGlzIDEsIGl0IG1lYW5zICJzdGFydCBmcm9tIGJlZ2lubmluZyIsIHNvIHRoZXkgYXJlIE5PVCByZXN0cmljdGVkLg0KICAgICAgICAgICAgY29uc3QgbWluQWxsb3dlZCA9IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOIHx8IDA7DQogICAgICAgICAgICBjb25zdCByYWRpb3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgnZnlfZmlsdGVyJyk7DQoNCiAgICAgICAgICAgIGlmIChtaW5BbGxvd2VkID4gMSkgeyAvLyA8LS0tIEZJWEVEOiBPbmx5IGxvY2sgaWYgbnVtYmVyIGlzIGdyZWF0ZXIgdGhhbiAxDQogICAgICAgICAgICAgICAgcmFkaW9zLmZvckVhY2gociA9PiB7DQogICAgICAgICAgICAgICAgICAgIHIuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICByLnBhcmVudEVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICIwLjUiOw0KICAgICAgICAgICAgICAgICAgICByLnBhcmVudEVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICJub25lIjsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU2VjdXJpdHk6IEZZIEZpbHRlciBkaXNhYmxlZCAoUmVzdHJpY3RlZCBVc2VyIGxvY2tlZCB0byBpbmRleDogIiArIG1pbkFsbG93ZWQgKyAiKSIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gRW5zdXJlIGJ1dHRvbnMgYXJlIEVOQUJMRUQgaWYgdGhleSBhcmVuJ3QgcmVzdHJpY3RlZA0KICAgICAgICAgICAgICAgIHJhZGlvcy5mb3JFYWNoKHIgPT4gew0KICAgICAgICAgICAgICAgICAgICByLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHIucGFyZW50RWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gIjEiOw0KICAgICAgICAgICAgICAgICAgICByLnBhcmVudEVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICJhdXRvIjsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMy4gSW5pdGlhbGl6ZSBSYW5nZXMgZm9yIGZ1bGwgYWNjZXNzIHVzZXJzDQogICAgICAgICAgICBmeVJhbmdlcyA9IHsgIkFMTCI6IHsgbWluOiAxLCBtYXg6IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxIH0gfTsNCg0KICAgICAgICAgICAgLy8gNC4gQnVpbGQgdGhlIFllYXIgTWFwDQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaCgobGluZSwgaWR4KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGlkeCA9PT0gMCkgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGNvbHNbMV0gPyBjb2xzWzFdLnRyaW0oKSA6ICIiOw0KDQogICAgICAgICAgICAgICAgaWYgKGRhdGVTdHIuaW5jbHVkZXMoJy0nKSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRhdGVTdHIuc3BsaXQoJy0nKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gcGFyc2VJbnQocGFydHNbMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9IHBhcnNlSW50KHBhcnRzWzJdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0WSA9IChtIDw9IDMpID8geSAtIDEgOiB5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnlLZXkgPSBzdGFydFkudG9TdHJpbmcoKS5zbGljZSgtMikgKyAiLSIgKyAoc3RhcnRZICsgMSkudG9TdHJpbmcoKS5zbGljZSgtMik7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZnlSYW5nZXNbZnlLZXldKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnlSYW5nZXNbZnlLZXldID0geyBtaW46IGlkeCwgbWF4OiBpZHggfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnlSYW5nZXNbZnlLZXldLm1heCA9IGlkeDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyA1LiBBVVRPLVNFTEVDVCBDVVJSRU5UIEZZIChKYW4gMjAyNiBpcyBGWSAyNS0yNikNCiAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIGNvbnN0IGN1ck1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKSArIDE7DQogICAgICAgICAgICBjb25zdCBjdXJZZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgIGNvbnN0IHN0YXJ0WSA9IChjdXJNb250aCA8PSAzKSA/IGN1clllYXIgLSAxIDogY3VyWWVhcjsNCiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGWUtleSA9IHN0YXJ0WS50b1N0cmluZygpLnNsaWNlKC0yKSArICItIiArIChzdGFydFkgKyAxKS50b1N0cmluZygpLnNsaWNlKC0yKTsNCg0KICAgICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7DQogICAgICAgICAgICByYWRpb3MuZm9yRWFjaChyID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoci52YWx1ZSA9PT0gY3VycmVudEZZS2V5KSB7DQogICAgICAgICAgICAgICAgICAgIHIuY2hlY2tlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGFwcGx5RllGaWx0ZXIoY3VycmVudEZZS2V5KTsNCiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBGYWxsYmFjayBpZiBjdXJyZW50IHllYXIgaXMgZW1wdHkNCiAgICAgICAgICAgIGlmICghZm91bmQpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBhbGxSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImZ5X2ZpbHRlciJdW3ZhbHVlPSJBTEwiXScpOw0KICAgICAgICAgICAgICAgIGlmIChhbGxSYWRpbykgew0KICAgICAgICAgICAgICAgICAgICBhbGxSYWRpby5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgYXBwbHlGWUZpbHRlcigiQUxMIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gYXBwbHlGWUZpbHRlcih2YWwpIHsNCiAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICBjb25zdCBybkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdfcmVjX2J0bicpOw0KICAgICAgICAgICAgaWYgKCFzbGlkZXIpIHJldHVybjsNCg0KICAgICAgICAgICAgLy8gMS4gQ0FMQ1VMQVRFIENVUlJFTlQgRlkgKEphbiAyMDI2IGlzIEZZIDI1LTI2KQ0KICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgY3VyTW9udGggPSB0b2RheS5nZXRNb250aCgpICsgMTsNCiAgICAgICAgICAgIGNvbnN0IGN1clllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpOw0KICAgICAgICAgICAgY29uc3Qgc3RhcnRZID0gKGN1ck1vbnRoIDw9IDMpID8gY3VyWWVhciAtIDEgOiBjdXJZZWFyOw0KICAgICAgICAgICAgY29uc3QgY3VycmVudEZZS2V5ID0gc3RhcnRZLnRvU3RyaW5nKCkuc2xpY2UoLTIpICsgIi0iICsgKHN0YXJ0WSArIDEpLnRvU3RyaW5nKCkuc2xpY2UoLTIpOw0KDQogICAgICAgICAgICAvLyAyLiBSTiBCVVRUT04gU0FGRVRZDQogICAgICAgICAgICBpZiAocm5CdG4pIHsNCiAgICAgICAgICAgICAgICBpZiAodmFsID09PSAiQUxMIiB8fCB2YWwgPT09IGN1cnJlbnRGWUtleSkgew0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5zdHlsZS5vcGFjaXR5ID0gIjEiOw0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5zdHlsZS5vcGFjaXR5ID0gIjAuMyI7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLnN0eWxlLmN1cnNvciA9ICJub3QtYWxsb3dlZCI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAzLiBGSUxURVIgTE9HSUMNCiAgICAgICAgICAgIGlmICh2YWwgPT09ICJSUiIpIHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlYWR5SW5kaWNlcyA9PT0gJ3VuZGVmaW5lZCcgfHwgcmVhZHlJbmRpY2VzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gUmVhZHkgUmVjZWlwdHMgZm91bmQhIik7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZnlfZmlsdGVyIl1bdmFsdWU9IkFMTCJdJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChhbGxSYWRpbykgYWxsUmFkaW8uY2hlY2tlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGFwcGx5RllGaWx0ZXIoIkFMTCIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gLS0tIENIQU5HRSBIRVJFOiBESVNBQkxFIElOU1RFQUQgT0YgSElERSAtLS0NCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUudmlzaWJpbGl0eSA9ICJ2aXNpYmxlIjsgLy8gS2VlcCBpdCB2aXNpYmxlDQogICAgICAgICAgICAgICAgc2xpZGVyLmRpc2FibGVkID0gdHJ1ZTsgICAgICAgICAgICAgIC8vIE1ha2UgaXQgdW5jbGlja2FibGUNCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUub3BhY2l0eSA9ICIwLjQiOyAgICAgICAgLy8gR3JheSBpdCBvdXQgdmlzdWFsbHkNCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUuY3Vyc29yID0gIm5vdC1hbGxvd2VkIjsNCg0KICAgICAgICAgICAgICAgIHNsaWRlci5taW4gPSAwOw0KICAgICAgICAgICAgICAgIHNsaWRlci5tYXggPSByZWFkeUluZGljZXMubGVuZ3RoIC0gMTsNCiAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSAwOw0KICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQocmVhZHlJbmRpY2VzWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIC0tLSBSRVNUT1JFIFNMSURFUiBGT1IgTk9STUFMIFZJRVdTIC0tLQ0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS52aXNpYmlsaXR5ID0gInZpc2libGUiOw0KICAgICAgICAgICAgICAgIHNsaWRlci5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS5vcGFjaXR5ID0gIjEiOw0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IChmeVJhbmdlcyAmJiBmeVJhbmdlc1t2YWxdKSA/IGZ5UmFuZ2VzW3ZhbF0gOiAoZnlSYW5nZXMgPyBmeVJhbmdlc1siQUxMIl0gOiBudWxsKTsNCg0KICAgICAgICAgICAgICAgIGlmIChyYW5nZSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmbG9vciA9ICh3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiAmJiB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA+IHJhbmdlLm1pbikNCiAgICAgICAgICAgICAgICAgICAgICAgID8gd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4NCiAgICAgICAgICAgICAgICAgICAgICAgIDogcmFuZ2UubWluOw0KDQogICAgICAgICAgICAgICAgICAgIHNsaWRlci5taW4gPSBmbG9vcjsNCiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm1heCA9IHJhbmdlLm1heDsNCiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLnZhbHVlID0gcmFuZ2UubWF4Ow0KICAgICAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKHNsaWRlci52YWx1ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gRml4ZWQgQXJyb3cgTmF2aWdhdGlvbiBmb3IgUlIgTW9kZQ0KICAgICAgICBmdW5jdGlvbiBtb3ZlRllSZWNvcmQoZGlyZWN0aW9uKSB7DQogICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjX3NsaWRlcicpOw0KICAgICAgICAgICAgY29uc3QgcmFkaW9DaGVja2VkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZnlfZmlsdGVyIl06Y2hlY2tlZCcpOw0KICAgICAgICAgICAgaWYgKCFzbGlkZXIgfHwgIXJhZGlvQ2hlY2tlZCkgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCBzZWxlY3RlZE1vZGUgPSByYWRpb0NoZWNrZWQudmFsdWU7DQogICAgICAgICAgICBjb25zdCBuZXdWYWwgPSBwYXJzZUludChzbGlkZXIudmFsdWUpICsgZGlyZWN0aW9uOw0KDQogICAgICAgICAgICBpZiAobmV3VmFsID49IHBhcnNlSW50KHNsaWRlci5taW4pICYmIG5ld1ZhbCA8PSBwYXJzZUludChzbGlkZXIubWF4KSkgew0KICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IG5ld1ZhbDsNCiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRNb2RlID09PSAiUlIiKSB7DQogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQocmVhZHlJbmRpY2VzW25ld1ZhbF0pOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQobmV3VmFsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLyogQ29tcHJlc3NlZCBwYWRkaW5nIGZvciB0aGUgbWFpbiB3b3Jrc3BhY2UgKi8NCiAgICAgICAgYm9keSB7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNjBweCAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICAgICAgI3JhZGlvLWRvY2sgew0KICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgICAgICAgYm90dG9tOiAwOw0KICAgICAgICAgICAgbGVmdDogMDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjMDAyMjQ0LCAjMDA0NDg4KTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAyMHB4OyAvKiBSZWR1Y2VkIHZlcnRpY2FsIHBhZGRpbmcgKi8NCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgLTJweCAxMHB4IHJnYmEoMCwwLDAsMC4zKTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93OyAvKiBSb3cgaW5zdGVhZCBvZiBDb2x1bW4gKi8NCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IC8qIFRpdGxlIGxlZnQsIENvbnRyb2xzIHJpZ2h0ICovDQogICAgICAgICAgICB6LWluZGV4OiAxMDAwMDsNCiAgICAgICAgICAgIGhlaWdodDogNDVweDsgLyogRml4ZWQgc21hbGwgaGVpZ2h0ICovDQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnJhZGlvLXRpdGxlIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICNmZjk5MzM7DQogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICAgICAgICAgICAgbWFyZ2luOiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLnJhZGlvLWNvbnRyb2xzIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAjcmFkaW9TZWxlY3Qgew0KICAgICAgICAgICAgcGFkZGluZzogNHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICAgICAgd2lkdGg6IDE4MHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAyOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnJhZGlvLWJ0biB7DQogICAgICAgICAgICBwYWRkaW5nOiAwIDEycHg7DQogICAgICAgICAgICBoZWlnaHQ6IDI4cHg7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDExcHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLXBsYXkgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzI4YTc0NTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tc3RvcCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZDk1MzRmOw0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgaWQ9InJhZGlvLWRvY2siPg0KICAgICAgICA8ZGl2IGNsYXNzPSJyYWRpby10aXRsZSI+SGluZHUgRGV2b3Rpb25hbCBSYWRpbzwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9InJhZGlvLWNvbnRyb2xzIj4NCiAgICAgICAgICAgIDxzZWxlY3QgaWQ9InJhZGlvU2VsZWN0Ij4NCiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIExvYWRpbmcgLS08L29wdGlvbj4NCiAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icmFkaW8tYnRuIGJ0bi1wbGF5IiBvbmNsaWNrPSJwbGF5UmFkaW8oKSI+UExBWTwvYnV0dG9uPg0KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icmFkaW8tYnRuIGJ0bi1zdG9wIiBvbmNsaWNrPSJzdG9wUmFkaW8oKSI+U1RPUDwvYnV0dG9uPg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICANCiAgICAgICAgPGF1ZGlvIGlkPSJyYWRpb1BsYXllciIgY3Jvc3NvcmlnaW49ImFub255bW91cyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvYXVkaW8+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KDQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZFJhZGlvcyh0b2tlbikgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfUkFESU9fRklMRSB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjazogSWYgcGVyc29uYWxpemVkIGZpbGUgaXMgbWlzc2luZywgZmV0Y2ggdGhlIGRlZmF1bHQgb25lDQogICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlBlcnNvbmFsaXplZCByYWRpbyBub3QgZm91bmQsIGxvYWRpbmcgZGVmYXVsdC4uLiIpOw0KICAgICAgICAgICAgICAgICAgICByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6ICcvU2V0dGluZ3MvUmFkaW9zLnR4dCcgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcigiTm8gUmFkaW8gRmlsZSIpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3Qgc3RhdGlvbnMgPSB0ZXh0LnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwuaW5jbHVkZXMoJywnKSk7DQogICAgICAgICAgICAgICAgY29uc3QgcmFkaW9Ecm9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhZGlvU2VsZWN0Jyk7DQoNCiAgICAgICAgICAgICAgICByYWRpb0Ryb3AuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IFN0YXRpb24gLS08L29wdGlvbj4nICsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGlvbnMubWFwKHMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW25hbWUsIHVybF0gPSBzLnNwbGl0KCcsJyk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxvcHRpb24gdmFsdWU9IiR7dXJsLnRyaW0oKX0iPiR7bmFtZS50cmltKCl9PC9vcHRpb24+YDsNCiAgICAgICAgICAgICAgICAgICAgfSkuam9pbignJyk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFkaW9TZWxlY3QnKS5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj5SYWRpbyBVbmF2YWlsYWJsZTwvb3B0aW9uPic7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIGZ1bmN0aW9uIHBsYXlSYWRpbygpIHsNCiAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRpb1BsYXllcicpOw0KICAgICAgICAgICAgY29uc3Qgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhZGlvU2VsZWN0Jyk7DQogICAgICAgICAgICBjb25zdCB1cmwgPSBzZWwudmFsdWU7DQogICAgICAgICAgICBjb25zdCBuYW1lID0gc2VsLm9wdGlvbnNbc2VsLnNlbGVjdGVkSW5kZXhdLnRleHQ7DQoNCiAgICAgICAgICAgIGlmICghdXJsKSByZXR1cm47DQoNCiAgICAgICAgICAgIHBsYXllci5zcmMgPSB1cmw7DQogICAgICAgICAgICBwbGF5ZXIucGxheSgpDQogICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAvLyBPcHRpb25hbDogVXBkYXRlIHlvdXIgYXBwJ3MgbWFpbiBzdGF0dXMgdGV4dCBpZiB5b3UgaGF2ZSBvbmUNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlBsYXlpbmc6ICIgKyBuYW1lKTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IGFsZXJ0KCJTdGF0aW9uIG9mZmxpbmUuIFRyeSBhbm90aGVyLiIpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHN0b3BSYWRpbygpIHsNCiAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRpb1BsYXllcicpOw0KICAgICAgICAgICAgcGxheWVyLnBhdXNlKCk7DQogICAgICAgICAgICBwbGF5ZXIuc3JjID0gIiI7DQogICAgICAgIH0NCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLnBhbmNoYW5nLW91dGVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDE1cHg7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLnBhbmNoYW5nLWhhbGYgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnBhbmNoYW5nLW1haW4tdGl0bGUgew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7DQogICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLnAtc3ViLWhlYWQgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxNXB4Ow0KICAgICAgICAgICAgY29sb3I6ICMwMDMzNjY7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIG1hcmdpbjogMTVweCAwIDhweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAzcHg7DQogICAgICAgIH0NCg0KICAgICAgICAucC1ldmVudC1ib3ggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjlmMDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgICAgIC8qIERhdGEgc3BlY2lmaWMgc3R5bGluZyAqLw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KICAgICAgICB9DQoNCiAgICAgICAgLnAtY2VudGVyLWJveCB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmNGZmOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzAwMzM2NjsNCiAgICAgICAgfQ0KICAgICAgICAvKiBCb2xkIENvbG9yIENvZGluZyBmb3IgRGF0YSAqLw0KICAgICAgICAuYy1kYXRlIHsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAuYy1uYW1lIHsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwMGZmOw0KICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAuYy1leHRyYSB7DQogICAgICAgICAgICBjb2xvcjogIzJlN2QzMjsNCiAgICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICAgICAgfQ0KDQogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkgew0KICAgICAgICAgICAgLnBhbmNoYW5nLW91dGVyIHsNCiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAucC1ldmVudC1ib3ggew0KICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3JtYWw7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9InBhbmNoYW5nLW91dGVyIj4NCiAgICAgICAgPGRpdiBjbGFzcz0icGFuY2hhbmctaGFsZiI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW5jaGFuZy1tYWluLXRpdGxlIj5VcGNvbWluZyBBbnVzaGFtIERhdGVzPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJkaXNwLWFudXNoYW0iPjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0icC1zdWItaGVhZCI+8J+Vie+4jyBQZXJpeWF2YSBKYXlhbnRoaTwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGlzcC1qYXlhbnRoaSI+PC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLXN1Yi1oZWFkIj7wn5WJ77iPIFBlcml5YXZhIEFyYWRoYW5hPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJkaXNwLWFyYWRoYW5hIj48L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0icGFuY2hhbmctaGFsZiI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW5jaGFuZy1tYWluLXRpdGxlIj5VcGNvbWluZyBFa2FkYXNoaSBEYXRlczwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGlzcC1la2FkYXNoaSI+PC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZFBhbmNoYW5nU3VpdGUoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogcCB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gYXdhaXQgci5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdCA9IGQuYWNjZXNzX3Rva2VuOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBub3cuc2V0SG91cnMoMCwgMCwgMCwgMCk7DQoNCiAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBnZXRMaW5lcyhwYXRoKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IHBhdGggfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR4dC5yZXBsYWNlKC88YnJccypcLz8+L2dpLCAnXG4nKS5yZXBsYWNlKC88W14+XSo+L2csICcnKS5zcGxpdCgnXG4nKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcy5sZW5ndGggPiAwKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAxLiBBTlVTSEFNDQogICAgICAgICAgICAgICAgY29uc3Qgcm93czEgPSBhd2FpdCBnZXRMaW5lcygnL1BhbmNoYW5nL0FudXNoYW0vMC4xLmh0bWwnKTsNCiAgICAgICAgICAgICAgICBsZXQgaDEgPSAiIjsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MxLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyb3dzMVtpXS5tYXRjaCgvXGR7MSwyfS1cdystXGR7NH0vKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKHJvd3MxW2ldKSA+PSBub3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoMSArPSBgPGRpdiBjbGFzcz0icC1ldmVudC1ib3giPjxzcGFuIGNsYXNzPSJjLWRhdGUiPiR7cm93czFbaV19PC9zcGFuPiA8c3BhbiBjbGFzcz0iYy1leHRyYSI+JHtyb3dzMVtpICsgMV0gfHwgJyd9PC9zcGFuPjwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3AtYW51c2hhbScpLmlubmVySFRNTCA9IGgxIHx8ICJObyBVcGNvbWluZyI7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBKQVlBTlRISQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MzID0gYXdhaXQgZ2V0TGluZXMoJy9QYW5jaGFuZy9BbnVzaGFtLzAuMy5odG1sJyk7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzMy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAocm93czNbaV0ubWF0Y2goL1xkezEsMn0tXHcrLVxkezR9LykgJiYgbmV3IERhdGUocm93czNbaV0pID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSAocm93czNbaSArIDFdIHx8ICIiKS5yZXBsYWNlKC9cL1xkezJ9XC9cZHs0fS9nLCAnJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcC1qYXlhbnRoaScpLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJwLWV2ZW50LWJveCBwLWNlbnRlci1ib3giPjxzcGFuIGNsYXNzPSJjLWRhdGUiPiR7cm93czNbaV19IChTYXQpPC9zcGFuPiA8c3BhbiBjbGFzcz0iYy1leHRyYSI+VGltaW5nOiAke3RpbWV9PC9zcGFuPjwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDMuIEFSQURIQU5BDQogICAgICAgICAgICAgICAgY29uc3Qgcm93czQgPSBhd2FpdCBnZXRMaW5lcygnL1BhbmNoYW5nL0FudXNoYW0vMC40Lmh0bWwnKTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3M0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyb3dzNFtpXS5tYXRjaCgvXGR7MSwyfS1cdystXGR7NH0vKSAmJiBuZXcgRGF0ZShyb3dzNFtpXSkgPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcC1hcmFkaGFuYScpLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJwLWV2ZW50LWJveCBwLWNlbnRlci1ib3giPjxzcGFuIGNsYXNzPSJjLWRhdGUiPiR7cm93czRbaV19IChNb24pPC9zcGFuPjwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDQuIEVLQURBU0hJDQogICAgICAgICAgICAgICAgY29uc3Qgcm93c0UgPSBhd2FpdCBnZXRMaW5lcygnL1BhbmNoYW5nL0VrYWRhc2hpLzAuMS5odG1sJyk7DQogICAgICAgICAgICAgICAgbGV0IGhFID0gIiI7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzRS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHJvd3NFW2ldLm1hdGNoKC8oXGR7MSwyfSktKFxkezJ9fFthLXpBLVpdKyktKFxkezR9KS8pOw0KICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRQYXJ0cyA9IHJvd3NFW2ldLnNwbGl0KCcgJylbMF0uc3BsaXQoJy0nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR0ID0gbmV3IERhdGUoZFBhcnRzWzJdLCBuZXcgRGF0ZShEYXRlLnBhcnNlKGRQYXJ0c1sxXSArICIgMSwgMjAxMiIpKS5nZXRNb250aCgpLCBkUGFydHNbMF0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHQgPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaEUgKz0gYDxkaXYgY2xhc3M9InAtZXZlbnQtYm94Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYy1kYXRlIj4ke3Jvd3NFW2ldfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYy1uYW1lIj4ke3Jvd3NFW2kgKyAxXSB8fCAnJ308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImMtZXh0cmEiPiR7cm93c0VbaSArIDJdIHx8ICcnfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpICs9IDI7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3AtZWthZGFzaGknKS5pbm5lckhUTUwgPSBoRSB8fCAiTm8gVXBjb21pbmciOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKCJMb2FkIEZhaWwiLCBlKTsgfQ0KICAgICAgICB9DQogICAgICAgIGxvYWRQYW5jaGFuZ1N1aXRlKCk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5mbGFzaGJhY2stY29udGFpbmVyIHsNCiAgICAgICAgICAgIG1hcmdpbjogMjBweCBhdXRvOw0KICAgICAgICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZhZmE7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIG1heC13aWR0aDogOTUlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1oZWFkZXItd3JhcHBlciB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBnYXA6IDEycHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1jb250cm9scyB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAxNXB4Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1oZWFkZXIgew0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ0dlb3JnaWEnLCBzZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjZweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCAjZmY5OTMzOw0KICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDsNCiAgICAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIEp1bXAgdG8gRGF0ZSBTdHlsaW5nICovDQogICAgICAgIC5qdW1wLWJveCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogOHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweCAxMnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmp1bXAtYm94IHNlbGVjdCB7DQogICAgICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7DQogICAgICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIC52aWV3LXRvZ2dsZSB7DQogICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZGYyZjI7DQogICAgICAgICAgICBwYWRkaW5nOiA1cHggMTVweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTVweDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAudmlldy10b2dnbGUgbGFiZWwgew0KICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICAgICAgZ2FwOiA1cHg7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1idG4gew0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzgwMDAwMDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICAgICAgICAgIHdpZHRoOiAzNXB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAzNXB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5uYXYtYnRuOmhvdmVyIHsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmY5OTMzOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2stZ3JpZCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICAgICAgZ2FwOiAyNXB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1jYXJkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDg1MHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA4cHggMjBweCByZ2JhKDAsMCwwLDAuMSk7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmZsYXNoYmFjay1jYXJkIGg0IHsNCiAgICAgICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgICAgICAgICAgbWFyZ2luOiAwIDAgMTJweCAwOw0KICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2ZmOTkzMzsNCiAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7DQogICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAuZmxhc2hiYWNrLWltZy13cmFwcGVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDEycHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAuZmxhc2hiYWNrLWltZyB7DQogICAgICAgICAgICB3aWR0aDogMTkwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDE1MHB4Ow0KICAgICAgICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogMC4zczsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuZmxhc2hiYWNrLWltZzpob3ZlciB7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsNCiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICNmZjk5MzM7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDYwMHB4KSB7DQogICAgICAgICAgICAuZmxhc2hiYWNrLWhlYWRlciB7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAuZmxhc2hiYWNrLWltZyB7DQogICAgICAgICAgICAgICAgd2lkdGg6IDE0MHB4Ow0KICAgICAgICAgICAgICAgIGhlaWdodDogMTEwcHg7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5uYXYtY29udHJvbHMgew0KICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0iZmxhc2hiYWNrLWNvbnRhaW5lciIgaWQ9ImZsYXNoYmFja1NlY3Rpb24iIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4NCiAgICAgICAgPGRpdiBjbGFzcz0iZmxhc2hiYWNrLWhlYWRlci13cmFwcGVyIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb250cm9scyI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibmF2LWJ0biIgb25jbGljaz0iY2hhbmdlRmxhc2hiYWNrRGF0ZSgtMSkiPuKXgDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZsYXNoYmFja1RpdGxlIiBjbGFzcz0iZmxhc2hiYWNrLWhlYWRlciI+8J+Onu+4jyBUcnVzdCBNZW1vcmllczogT24gVGhpcyBEYXk8L2Rpdj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJuYXYtYnRuIiBvbmNsaWNrPSJjaGFuZ2VGbGFzaGJhY2tEYXRlKDEpIj7ilrY8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IGZsZXgtd3JhcDogd3JhcDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJqdW1wLWJveCI+DQogICAgICAgICAgICAgICAgICAgIPCfk4UgSnVtcCB0bzoNCiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ianVtcERheSI+PC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Imp1bXBNb250aCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIwIj5KYW48L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEiPkZlYjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMiI+TWFyPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIzIj5BcHI8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjQiPk1heTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNSI+SnVuPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI2Ij5KdWw8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjciPkF1Zzwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iOCI+U2VwPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI5Ij5PY3Q8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEwIj5Ob3Y8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjExIj5EZWM8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0idGVsZXBvcnRUb0RhdGUoKSIgc3R5bGU9ImJhY2tncm91bmQ6IzgwMDAwMDsgY29sb3I6d2hpdGU7IGJvcmRlcjpub25lOyBib3JkZXItcmFkaXVzOjEwcHg7IHBhZGRpbmc6MnB4IDhweDsgY3Vyc29yOnBvaW50ZXI7IGZvbnQtc2l6ZToxMnB4OyI+R088L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InZpZXctdG9nZ2xlIj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0idmlld01vZGUiIHZhbHVlPSIzIiBjaGVja2VkIG9uY2xpY2s9InNldFZpZXdNb2RlKDMpIj4gU3VtbWFyeTwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InZpZXdNb2RlIiB2YWx1ZT0iYWxsIiBvbmNsaWNrPSJzZXRWaWV3TW9kZSgnYWxsJykiPiBBbGw8L2xhYmVsPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IGlkPSJmbGFzaGJhY2tHcmlkIiBjbGFzcz0iZmxhc2hiYWNrLWdyaWQiPjwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgbGV0IGZsYXNoYmFja09mZnNldCA9IDA7DQogICAgICAgIGxldCBjdXJyZW50Vmlld0xpbWl0ID0gMzsNCg0KICAgICAgICAvLyBJbml0aWFsaXplIERheSBkcm9wZG93biAoMS0zMSkNCiAgICAgICAgY29uc3QgZGF5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBEYXknKTsNCiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMzE7IGkrKykgew0KICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgb3B0LnZhbHVlID0gaTsgb3B0LmlubmVySFRNTCA9IGk7DQogICAgICAgICAgICBkYXlTZWxlY3QuYXBwZW5kQ2hpbGQob3B0KTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHNldFZpZXdNb2RlKG1vZGUpIHsNCiAgICAgICAgICAgIGN1cnJlbnRWaWV3TGltaXQgPSBtb2RlOw0KICAgICAgICAgICAgbG9hZER5bmFtaWNGbGFzaGJhY2tzKCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBjaGFuZ2VGbGFzaGJhY2tEYXRlKG9mZnNldCkgew0KICAgICAgICAgICAgZmxhc2hiYWNrT2Zmc2V0ICs9IG9mZnNldDsNCiAgICAgICAgICAgIGxvYWREeW5hbWljRmxhc2hiYWNrcygpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gdGVsZXBvcnRUb0RhdGUoKSB7DQogICAgICAgICAgICBjb25zdCBkID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBEYXknKS52YWx1ZSk7DQogICAgICAgICAgICBjb25zdCBtID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBNb250aCcpLnZhbHVlKTsNCiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbSwgZCk7DQoNCiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBkaWZmZXJlbmNlIGluIGRheXMgdG8gc2V0IHRoZSBvZmZzZXQNCiAgICAgICAgICAgIGNvbnN0IGRpZmZUaW1lID0gdGFyZ2V0LmdldFRpbWUoKSAtIG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgbm93LmdldERhdGUoKSkuZ2V0VGltZSgpOw0KICAgICAgICAgICAgZmxhc2hiYWNrT2Zmc2V0ID0gTWF0aC5yb3VuZChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7DQogICAgICAgICAgICBsb2FkRHluYW1pY0ZsYXNoYmFja3MoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWREeW5hbWljRmxhc2hiYWNrcygpIHsNCiAgICAgICAgICAgIGNvbnN0IGdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhc2hiYWNrR3JpZCcpOw0KICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGFzaGJhY2tTZWN0aW9uJyk7DQogICAgICAgICAgICBjb25zdCB0aXRsZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGFzaGJhY2tUaXRsZScpOw0KICAgICAgICAgICAgY29uc3QgZG9tYWluID0gImh0dHBzOi8vd3d3LmdhbmVzYXNhcm1hLmNvbSI7DQogICAgICAgICAgICBjb25zdCBUaW1lbGluZVVSTF9GbGFzaCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL3JmODVlbGt6NWZjM2NsMWg4a2NjYy9UaW1lTGluZS50eHQ/cmxrZXk9dW1raDByN3d0Zjd1bHUzcnpxemNnYjF5YyZkbD0xIjsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldERhdGUgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIHRhcmdldERhdGUuc2V0RGF0ZSh0YXJnZXREYXRlLmdldERhdGUoKSArIGZsYXNoYmFja09mZnNldCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBtbSA9IFN0cmluZyh0YXJnZXREYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRkID0gU3RyaW5nKHRhcmdldERhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRvdFBhdHRlcm4gPSBgLiR7bW19LiR7ZGR9YDsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXNoUGF0dGVybiA9IGAtJHttbX0tJHtkZH1gOw0KDQogICAgICAgICAgICAgICAgLy8gU3luYyBEcm9wZG93bnMgd2l0aCBjdXJyZW50IHZpZXdpbmcgZGF0ZQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wRGF5JykudmFsdWUgPSB0YXJnZXREYXRlLmdldERhdGUoKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcE1vbnRoJykudmFsdWUgPSB0YXJnZXREYXRlLmdldE1vbnRoKCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBpc1RvZGF5ID0gKHRhcmdldERhdGUuZ2V0TW9udGgoKSA9PT0gbm93LmdldE1vbnRoKCkgJiYgdGFyZ2V0RGF0ZS5nZXREYXRlKCkgPT09IG5vdy5nZXREYXRlKCkpOw0KICAgICAgICAgICAgICAgIHRpdGxlRGl2LmlubmVyVGV4dCA9IGlzVG9kYXkgPyBg8J+Onu+4jyBUcnVzdCBNZW1vcmllczogT24gVGhpcyBEYXlgIDogYPCfjp7vuI8gTWVtb3JpZXM6ICR7dGFyZ2V0RGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUlOJywgeyBkYXk6ICdudW1lcmljJywgbW9udGg6ICdsb25nJyB9KX1gOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChUaW1lbGluZVVSTF9GbGFzaCk7DQogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBkYXRhLnNwbGl0KC9ccj9cbi8pOw0KDQogICAgICAgICAgICAgICAgZ3JpZC5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgICAgICAgICBjb25zdCBldmVudHNNYXAgPSB7fTsNCiAgICAgICAgICAgICAgICBsZXQgZm91bmRNYXRjaCA9IGZhbHNlOw0KDQogICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKChsaW5lLmluY2x1ZGVzKGRvdFBhdHRlcm4pIHx8IGxpbmUuaW5jbHVkZXMoZGFzaFBhdHRlcm4pKSAmJiBsaW5lLm1hdGNoKC9cLihqcGd8anBlZ3xwbmcpJC9pKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2ViUGF0aCA9IGxpbmUudHJpbSgpLnJlcGxhY2UoL1xcL2csICcvJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmdWxsVXJsID0gZG9tYWluICsgZW5jb2RlVVJJKHdlYlBhdGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSB3ZWJQYXRoLnNwbGl0KCcvJykucG9wKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ZWFyID0gZmlsZW5hbWUubWF0Y2goL14oXGR7NH0pLykgPyBmaWxlbmFtZS5tYXRjaCgvXihcZHs0fSkvKVsxXSA6ICJQYXN0IjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV2ZW50TmFtZSA9IGZpbGVuYW1lLnJlcGxhY2UoL15cZHs0fVsuLV1cZHsyfVsuLV1cZHsyfS0vLCAnJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXHMqXGQqXHMqXC4oanBnfGpwZWd8cG5nKSQvaSwgJycpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL15cZCtccysvLCAnJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvLS9nLCAnICcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyaW0oKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudE5hbWUpIGV2ZW50TmFtZSA9ICJUcnVzdCBBY3Rpdml0eSI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwS2V5ID0gYCR7eWVhcn18JHtldmVudE5hbWV9YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnRzTWFwW2dyb3VwS2V5XSkgZXZlbnRzTWFwW2dyb3VwS2V5XSA9IHsgeWVhciwgZXZlbnROYW1lLCBwaG90b3M6IFtdIH07DQogICAgICAgICAgICAgICAgICAgICAgICBldmVudHNNYXBbZ3JvdXBLZXldLnBob3Rvcy5wdXNoKGZ1bGxVcmwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRNYXRjaCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghZm91bmRNYXRjaCkgew0KICAgICAgICAgICAgICAgICAgICBncmlkLmlubmVySFRNTCA9IGA8ZGl2IHN0eWxlPSJwYWRkaW5nOjQwcHg7IHdpZHRoOjEwMCU7IGNvbG9yOiM4MDAwMDA7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJhY2tncm91bmQ6d2hpdGU7IGJvcmRlci1yYWRpdXM6MTBweDsiPk5vIHJlY29yZHMgZm91bmQgZm9yICR7dGFyZ2V0RGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUlOJywgeyBkYXk6ICdudW1lcmljJywgbW9udGg6ICdsb25nJyB9KX0uPC9kaXY+YDsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhldmVudHNNYXApLnNvcnQoKGEsIGIpID0+IGIuc3BsaXQoJ3wnKVswXSAtIGEuc3BsaXQoJ3wnKVswXSkuZm9yRWFjaChrZXkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBldmVudHNNYXBba2V5XTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuY2xhc3NOYW1lID0gJ2ZsYXNoYmFjay1jYXJkJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlQaG90b3MgPSBjdXJyZW50Vmlld0xpbWl0ID09PSAnYWxsJyA/IGdyb3VwLnBob3RvcyA6IGdyb3VwLnBob3Rvcy5zbGljZSgwLCAzKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0PiR7Z3JvdXAuZXZlbnROYW1lfSAke2lzVG9kYXkgPyBgKCR7Z3JvdXAueWVhcn0pYCA6IGAtICR7Z3JvdXAueWVhcn1gfTwvaDQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxhc2hiYWNrLWltZy13cmFwcGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkaXNwbGF5UGhvdG9zLm1hcChzcmMgPT4gYDxpbWcgc3JjPSIke3NyY30iIGNsYXNzPSJmbGFzaGJhY2staW1nIiBvbmNsaWNrPSJ3aW5kb3cub3Blbih0aGlzLnNyYykiIG9uZXJyb3I9InRoaXMuc3R5bGUuZGlzcGxheT0nbm9uZSciPmApLmpvaW4oJycpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICBncmlkLmFwcGVuZENoaWxkKGNhcmQpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfQ0KICAgICAgICB9DQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgbG9hZER5bmFtaWNGbGFzaGJhY2tzKTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KDQogICAgPHN0eWxlPg0KICAgICAgICAuY2hpdHJhbS1jb250YWluZXIgew0KICAgICAgICAgICAgbWFyZ2luOiAyMHB4IGF1dG87DQogICAgICAgICAgICBwYWRkaW5nOiAyMHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmFmYTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA5NSU7DQogICAgICAgIH0NCg0KICAgICAgICAuY2hpdHJhbS1oZWFkZXIgew0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ0dlb3JnaWEnLCBzZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjZweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgI2ZmOTkzMzsNCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAuY2hpdHJhbS1ncmlkIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAuY2hpdHJhbS1ib3ggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC44cyBlYXNlLWluLW91dDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sYW5kc2NhcGUtYm94IHsNCiAgICAgICAgICAgIHdpZHRoOiA0NTBweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wb3J0cmFpdC1ib3ggew0KICAgICAgICAgICAgd2lkdGg6IDMyMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0taW1nIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgaGVpZ2h0OiBhdXRvOw0KICAgICAgICAgICAgbWF4LWhlaWdodDogNDAwcHg7DQogICAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0tbGFiZWwgew0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgIH0NCg0KICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogODAwcHgpIHsNCiAgICAgICAgICAgIC5sYW5kc2NhcGUtYm94LCAucG9ydHJhaXQtYm94IHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDQwMHB4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tY29udGFpbmVyIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1oZWFkZXIiPvCflYnvuI8gQ2hpdHJhIFB1cmFuYW08L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1ncmlkIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tYm94IGxhbmRzY2FwZS1ib3giPg0KICAgICAgICAgICAgICAgIDxpbWcgaWQ9ImltZ19sYW5kc2NhcGUiIHNyYz0iIiBjbGFzcz0iY2hpdHJhbS1pbWciIG9uY2xpY2s9IndpbmRvdy5vcGVuKHRoaXMuc3JjKSIgdGl0bGU9IlZpZXcgRnVsbCBJbWFnZSI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1sYWJlbCIgaWQ9ImxibF9sYW5kc2NhcGUiPkNvbm5lY3RpbmcgdG8gRGl2aW5lIEdhbGxlcnkuLi48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1ib3ggcG9ydHJhaXQtYm94Ij4NCiAgICAgICAgICAgICAgICA8aW1nIGlkPSJpbWdfcG9ydHJhaXQiIHNyYz0iIiBjbGFzcz0iY2hpdHJhbS1pbWciIG9uY2xpY2s9IndpbmRvdy5vcGVuKHRoaXMuc3JjKSIgdGl0bGU9IlZpZXcgRnVsbCBJbWFnZSI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1sYWJlbCIgaWQ9ImxibF9wb3J0cmFpdCI+Q29ubmVjdGluZyB0byBEaXZpbmUgR2FsbGVyeS4uLjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgY29uc3QgQ0hJVFJBTV9DT05GSUcgPSB7DQogICAgICAgICAgICBmb2xkZXI6ICIvUGFuY2hhbmcvQ2hpdGhyYVB1cmFuYW0vIiwNCiAgICAgICAgICAgIGxhbmRzY2FwZUNvdW50OiA0MSwNCiAgICAgICAgICAgIHBvcnRyYWl0Q291bnQ6IDgwLA0KICAgICAgICAgICAgaW50ZXJ2YWw6IDcwMDANCiAgICAgICAgfTsNCg0KICAgICAgICBsZXQgY3VycmVudEwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBDSElUUkFNX0NPTkZJRy5sYW5kc2NhcGVDb3VudCkgKyAxOw0KICAgICAgICBsZXQgY3VycmVudFAgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBDSElUUkFNX0NPTkZJRy5wb3J0cmFpdENvdW50KSArIDE7DQogICAgICAgIGxldCBkcm9wYm94VG9rZW4gPSAiIjsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZXREcm9wYm94TGluayhmaWxlTmFtZSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2dldF90ZW1wb3JhcnlfbGluaycsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgZHJvcGJveFRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IENISVRSQU1fQ09ORklHLmZvbGRlciArIGZpbGVOYW1lIH0pDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5saW5rOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkxpbmsgRmV0Y2ggRmFpbDoiLCBmaWxlTmFtZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuICIiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ2hpdHJhbSgpIHsNCiAgICAgICAgICAgIC8vIDEuIEdldCBBY2Nlc3MgVG9rZW4gKHVzaW5nIHlvdXIgZ2xvYmFsIE1NUFQgY29uc3RhbnRzKQ0KICAgICAgICAgICAgaWYgKCFkcm9wYm94VG9rZW4pIHsNCiAgICAgICAgICAgICAgICBjb25zdCBwID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOw0KICAgICAgICAgICAgICAgIGRyb3Bib3hUb2tlbiA9IGQuYWNjZXNzX3Rva2VuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAyLiBQcmVwYXJlIEZpbGUgTmFtZXMNCiAgICAgICAgICAgIGNvbnN0IGxOdW0gPSBTdHJpbmcoY3VycmVudEwpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICBjb25zdCBwTnVtID0gU3RyaW5nKGN1cnJlbnRQKS5wYWRTdGFydCgyLCAnMCcpOw0KDQogICAgICAgICAgICAvLyAzLiBGZXRjaCBUZW1wIExpbmtzIGZyb20gRHJvcGJveA0KICAgICAgICAgICAgY29uc3QgW2xVcmwsIHBVcmxdID0gYXdhaXQgUHJvbWlzZS5hbGwoWw0KICAgICAgICAgICAgICAgIGdldERyb3Bib3hMaW5rKGBMJHtsTnVtfS5qcGdgKSwNCiAgICAgICAgICAgICAgICBnZXREcm9wYm94TGluayhgUCR7cE51bX0uanBnYCkNCiAgICAgICAgICAgIF0pOw0KDQogICAgICAgICAgICAvLyA0LiBVcGRhdGUgVUkgKExhbmRzY2FwZSkNCiAgICAgICAgICAgIGNvbnN0IGxJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX2xhbmRzY2FwZScpOw0KICAgICAgICAgICAgY29uc3QgbEJveCA9IGxJbWcucGFyZW50RWxlbWVudDsNCiAgICAgICAgICAgIGxCb3guc3R5bGUub3BhY2l0eSA9IDAuMzsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChsVXJsKSBsSW1nLnNyYyA9IGxVcmw7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xibF9sYW5kc2NhcGUnKS5pbm5lclRleHQgPSBgS2FuY2hpIE1haGFwZXJpeWF2YWA7DQogICAgICAgICAgICAgICAgbEJveC5zdHlsZS5vcGFjaXR5ID0gMTsNCiAgICAgICAgICAgIH0sIDgwMCk7DQoNCiAgICAgICAgICAgIC8vIDUuIFVwZGF0ZSBVSSAoUG9ydHJhaXQpDQogICAgICAgICAgICBjb25zdCBwSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ19wb3J0cmFpdCcpOw0KICAgICAgICAgICAgY29uc3QgcEJveCA9IHBJbWcucGFyZW50RWxlbWVudDsNCiAgICAgICAgICAgIHBCb3guc3R5bGUub3BhY2l0eSA9IDAuMzsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChwVXJsKSBwSW1nLnNyYyA9IHBVcmw7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xibF9wb3J0cmFpdCcpLmlubmVyVGV4dCA9IGBLYW5jaGkgTWFoYXBlcml5YXZhYDsNCiAgICAgICAgICAgICAgICBwQm94LnN0eWxlLm9wYWNpdHkgPSAxOw0KICAgICAgICAgICAgfSwgODAwKTsNCg0KICAgICAgICAgICAgLy8gNi4gSW5jcmVtZW50IG9yIFJlc2V0DQogICAgICAgICAgICBjdXJyZW50TCA9IGN1cnJlbnRMID49IENISVRSQU1fQ09ORklHLmxhbmRzY2FwZUNvdW50ID8gMSA6IGN1cnJlbnRMICsgMTsNCiAgICAgICAgICAgIGN1cnJlbnRQID0gY3VycmVudFAgPj0gQ0hJVFJBTV9DT05GSUcucG9ydHJhaXRDb3VudCA/IDEgOiBjdXJyZW50UCArIDE7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBJbml0aWFsaXplDQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gew0KICAgICAgICAgICAgdXBkYXRlQ2hpdHJhbSgpOw0KICAgICAgICAgICAgc2V0SW50ZXJ2YWwodXBkYXRlQ2hpdHJhbSwgQ0hJVFJBTV9DT05GSUcuaW50ZXJ2YWwpOw0KICAgICAgICB9KTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLm1tcHQtYXJjaGl2ZS1ib3ggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMjVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMzBweCAxMHB4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsMCwwLDAuMSk7DQogICAgICAgIH0NCg0KICAgICAgICAuYXJjaGl2ZS1oZWFkZXIgew0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXNpemU6IDIycHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2ZmZjVlNjsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmFyY2hpdmUtY29udHJvbHMgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTVweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgfQ0KDQogICAgICAgICNzY3JpcHR1cmVfZHJvcGRvd24gew0KICAgICAgICAgICAgd2lkdGg6IDM4MHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiA0NXB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMCAxMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgI0ZGOTkzMzsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmYWYwOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1hcmNoaXZlLWRvd25sb2FkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM4MDAwMDAgMCUsICM0YTAwMDAgMTAwJSk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDMwcHg7DQogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5idG4tYXJjaGl2ZS1kb3dubG9hZDpob3ZlciB7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjAzKTsNCiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLDAsMCwwLjIpOw0KICAgICAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJtbXB0LWFyY2hpdmUtYm94Ij4NCiAgICAgICAgPGRpdiBjbGFzcz0iYXJjaGl2ZS1oZWFkZXIiPvCfk5wgU2NyaXB0dXJlcyBmcm9tIE1NUFQgQXJjaGl2ZXM8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYXJjaGl2ZS1jb250cm9scyI+DQogICAgICAgICAgICA8c2VsZWN0IGlkPSJzY3JpcHR1cmVfZHJvcGRvd24iPg0KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gTG9hZGluZyBUaXRsZXMgZnJvbSBEcml2ZS4uLiAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYXJjaGl2ZS1kb3dubG9hZCIgb25jbGljaz0iaGFuZGxlQXJjaGl2ZURvd25sb2FkKCkiPvCfk6UgRG93bmxvYWQgUERGPC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyBjb2xvcjogIzY2NjsgbWFyZ2luLXRvcDogMTVweDsiPk5vdGU6IFNjYW5uZWQgdmVyc2lvbnMgYXJlIHByb3ZpZGVkIGZvciBwZXJzb25hbCBzcGlyaXR1YWwgc3R1ZHkuPC9wPg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8c2NyaXB0Pg0KDQogICAgICAgIC8vIC0tLSBHT09HTEUgRFJJVkUgQVJDSElWRSBMT0dJQyAtLS0NCiAgICAgICAgLy8gUkVQTEFDRSAnWU9VUl9BUFBTX1NDUklQVF9VUkwnIHdpdGggdGhlIG9uZSB5b3UgZ2V0IGZyb20gR29vZ2xlIFNjcmlwdCBEZXBsb3ltZW50DQogICAgICAgIGNvbnN0IEFSQ0hJVkVfQlJJREdFX1VSTCA9ICJodHRwczovL3NjcmlwdC5nb29nbGUuY29tL21hY3Jvcy9zL0FLZnljYndxMXdOTDd4ZlJLWnFTcDFjNVVHR2hlbmJfSWwyWFlDc2NHUHNwa04wQXp4UXJfbFd5SWdqSkgtR2ZjSTdMdVZqSmZBL2V4ZWMiOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRNTVBUQXJjaGl2ZSgpIHsNCiAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3duID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmlwdHVyZV9kcm9wZG93bicpOw0KICAgICAgICAgICAgaWYgKCFkcm9wZG93bikgcmV0dXJuOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vICdyZWRpcmVjdDogZm9sbG93JyBpcyByZXF1aXJlZCBmb3IgR29vZ2xlIEFwcHMgU2NyaXB0IFdlYiBBcHBzDQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChBUkNISVZFX0JSSURHRV9VUkwsIHsgcmVkaXJlY3Q6ICJmb2xsb3ciIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOw0KDQogICAgICAgICAgICAgICAgZHJvcGRvd24uaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IGEgU2NyaXB0dXJlIC0tPC9vcHRpb24+JzsNCg0KICAgICAgICAgICAgICAgIGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPk5vIGZpbGVzIGZvdW5kIGluIGZvbGRlcjwvb3B0aW9uPic7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgICAgIC8vb3B0LnZhbHVlID0gYGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91Yz9leHBvcnQ9ZG93bmxvYWQmaWQ9JHtmaWxlLmlkfWA7DQogICAgICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdS8wL3VjP2lkPSR7ZmlsZS5pZH0mZXhwb3J0PWRvd25sb2FkYDsNCiAgICAgICAgICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gZmlsZS5uYW1lOw0KICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiQXJjaGl2ZSBFcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgICAgIGRyb3Bkb3duLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPkFyY2hpdmUgT2ZmbGluZSAoQ2hlY2sgVVJMKTwvb3B0aW9uPic7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUFyY2hpdmVEb3dubG9hZCgpIHsNCiAgICAgICAgICAgIGNvbnN0IHVybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JpcHR1cmVfZHJvcGRvd24nKS52YWx1ZTsNCiAgICAgICAgICAgIGlmICghdXJsKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIlBsZWFzZSBzZWxlY3QgYSBzY3JpcHR1cmUgdGl0bGUgZmlyc3QuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBGaWxlIElEIGZyb20gdGhlIFVSTA0KICAgICAgICAgICAgY29uc3QgZmlsZUlkID0gdXJsLnNwbGl0KCdpZD0nKVsxXTsNCg0KICAgICAgICAgICAgLy8gV2UgdXNlIGEgImJ5cGFzcyIgVVJMIHN0cnVjdHVyZS4NCiAgICAgICAgICAgIC8vIFRoaXMgdGVsbHMgR29vZ2xlIHRvIHNraXAgdGhlIGNvbmZpcm1hdGlvbiBwYWdlIGJ5IHByZS1jb25maXJtaW5nIHRoZSBkb3dubG9hZC4NCiAgICAgICAgICAgIGNvbnN0IGZvcmNlRG93bmxvYWRVcmwgPSBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL3VjP2V4cG9ydD1kb3dubG9hZCZpZD0ke2ZpbGVJZH0mY29uZmlybT10YDsNCg0KICAgICAgICAgICAgd2luZG93Lm9wZW4oZm9yY2VEb3dubG9hZFVybCwgJ19ibGFuaycpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyBBZGQgdGhpcyB0byB5b3VyIGV4aXN0aW5nIHdpbmRvdy5sb2FkIGxpc3RlbmVyIG9yIGNyZWF0ZSBhIG5ldyBvbmU6DQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgaW5pdE1NUFRBcmNoaXZlKTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxkaXYgY2xhc3M9Im1tcHQtdW5pZmllZC1ib3giIGlkPSJhdWRpb19hcmNoaXZlX3NlY3Rpb24iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJhcmNoaXZlLWhlYWRlciI+DQogICAgICAgICAgICDwn46nIEF1ZGlvIEJvb2tzIEZyb20gTU1QVCBBcmNoaXZlcw0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgZ2FwOiAxNXB4OyBhbGlnbi1pdGVtczogZmxleC1lbmQ7IGZsZXgtd3JhcDogd3JhcDsgbWFyZ2luOiAyMHB4IDA7Ij4NCiAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGxlZnQ7Ij4NCiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogNXB4OyI+Qm9vazwvbGFiZWw+DQogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYXVkaW9fYm9va19kcm9wZG93biIgb25jaGFuZ2U9ImxvYWRBdWRpb0NoYXB0ZXJzKCkiIHN0eWxlPSJtaW4td2lkdGg6IDIyMHB4OyBoZWlnaHQ6IDM4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDRweDsgcGFkZGluZzogNXB4OyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgQm9vayAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGxlZnQ7Ij4NCiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogNXB4OyI+Q2hhcHRlcjwvbGFiZWw+DQogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYXVkaW9fY2hhcHRlcl9kcm9wZG93biIgZGlzYWJsZWQgb25jaGFuZ2U9InVwZGF0ZUF1ZGlvVUkoKSIgc3R5bGU9Im1pbi13aWR0aDogMzAwcHg7IGhlaWdodDogMzhweDsgYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogNHB4OyBwYWRkaW5nOiA1cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBiYWNrZ3JvdW5kOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBDaGFwdGVyIC0tPC9vcHRpb24+DQogICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA4cHg7Ij4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fYXVkaW9fcGxheSIgZGlzYWJsZWQgb25jbGljaz0icGxheUF1ZGlvQm9vaygpIiBjbGFzcz0iYnRuLXJuIiBzdHlsZT0iYmFja2dyb3VuZDogIzI4YTc0NTsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDAgMjBweDsgaGVpZ2h0OiAzOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7Ij7ilrYgUGxheTwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9hdWRpb19zdG9wIiBkaXNhYmxlZCBvbmNsaWNrPSJzdG9wQXVkaW9Cb29rKCkiIGNsYXNzPSJidG4tcm4iIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZDMyZjJmOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMCAyMHB4OyBoZWlnaHQ6IDM4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsiPuKWoCBTdG9wPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0iYXVkaW9fcGxheWVyX2NvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiByZWxhdGl2ZTsgbWFyZ2luOiAxMHB4IGF1dG87IGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgb3ZlcmZsb3c6IGhpZGRlbjsgYmFja2dyb3VuZDogIzAwMDsgaGVpZ2h0OiA4NXB4OyBtYXgtd2lkdGg6IDkwMHB4OyI+DQogICAgICAgICAgICA8ZGl2IGlkPSJwbGF5X2luc3RydWN0aW9uIiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMTAwJTsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogI2ZmOTkzMzsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTRweDsgdG9wOiAxMHB4OyB6LWluZGV4OiA1OyBwb2ludGVyLWV2ZW50czogbm9uZTsiPg0KICAgICAgICAgICAgICAgIENsaWNrIFBsYXkgb24gdGhlIHBsYXllciBiZWxvdyB0byBzdGFydA0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8aWZyYW1lIGlkPSJnb29nbGVfYXVkaW9faWZyYW1lIiBzcmM9IiIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTYwIiBmcmFtZWJvcmRlcj0iMCIgc3R5bGU9Im1hcmdpbi10b3A6IC0zNXB4OyI+PC9pZnJhbWU+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9ImF1ZGlvX3N0YXR1cyIgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM4MDAwMDA7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tdG9wOiAxMHB4OyI+Q29ubmVjdGluZyB0byBBcmNoaXZlLi4uPC9kaXY+DQogICAgPC9kaXY+DQoNCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIC8vIFNjcmlwdCBsb2dpYyByZW1haW5zIHRoZSBzYW1lIChyZXN0b3JlcyB0aGUgY29ubmVjdGluZyBtZXNzYWdlKQ0KICAgICAgICBjb25zdCBHT09HTEVfQVVESU9fVVJMID0gImh0dHBzOi8vc2NyaXB0Lmdvb2dsZS5jb20vbWFjcm9zL3MvQUtmeWNieEdJMkFnd2RzZ3FaLXFGWEV4bU1NWUV5TzRLX2FGbS03SDNBU25sZEtmQVR4VDhHLUdfc2J1SG9LNDB0cXVfYmMtL2V4ZWMiOw0KICAgICAgICBsZXQgYXVkaW9MaWJEYXRhID0gW107DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gaW5pdEF1ZGlvQXJjaGl2ZSgpIHsNCiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19zdGF0dXMnKTsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChHT09HTEVfQVVESU9fVVJMKTsNCiAgICAgICAgICAgICAgICBhdWRpb0xpYkRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYm9va1NlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19ib29rX2Ryb3Bkb3duJyk7DQogICAgICAgICAgICAgICAgYm9va1NlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgQm9vayAtLTwvb3B0aW9uPic7DQogICAgICAgICAgICAgICAgYXVkaW9MaWJEYXRhLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGlkeDsNCiAgICAgICAgICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gaXRlbS5ib29rTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgYm9va1NlbC5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHN0YXR1cy5pbm5lclRleHQgPSAiQXJjaGl2ZSBSZWFkeS4iOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIHN0YXR1cy5pbm5lclRleHQgPSAiQXJjaGl2ZSBjb25uZWN0aW9uIGVycm9yLiI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpbml0QXVkaW9BcmNoaXZlKCk7DQoNCiAgICAgICAgZnVuY3Rpb24gbG9hZEF1ZGlvQ2hhcHRlcnMoKSB7DQogICAgICAgICAgICBjb25zdCBpZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fYm9va19kcm9wZG93bicpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgY2hhcFNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19jaGFwdGVyX2Ryb3Bkb3duJyk7DQogICAgICAgICAgICBzdG9wQXVkaW9Cb29rKCk7DQogICAgICAgICAgICBjaGFwU2VsLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBDaGFwdGVyIC0tPC9vcHRpb24+JzsNCiAgICAgICAgICAgIGlmIChpZHggPT09ICIiKSB7IGNoYXBTZWwuZGlzYWJsZWQgPSB0cnVlOyByZXR1cm47IH0NCiAgICAgICAgICAgIGF1ZGlvTGliRGF0YVtpZHhdLmNoYXB0ZXJzLmZvckVhY2goZmlsZSA9PiB7DQogICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGZpbGUuaWQ7DQogICAgICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gZmlsZS5uYW1lLnJlcGxhY2UoL1wuW14vLl0rJC8sICIiKTsNCiAgICAgICAgICAgICAgICBjaGFwU2VsLmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGNoYXBTZWwuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUF1ZGlvVUkoKSB7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3BsYXknKS5kaXNhYmxlZCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fY2hhcHRlcl9kcm9wZG93bicpLnZhbHVlID09PSAiIik7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBwbGF5QXVkaW9Cb29rKCkgew0KICAgICAgICAgICAgY29uc3QgZmlsZUlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX2NoYXB0ZXJfZHJvcGRvd24nKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19wbGF5ZXJfY29udGFpbmVyJyk7DQogICAgICAgICAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29vZ2xlX2F1ZGlvX2lmcmFtZScpOw0KICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX3N0YXR1cycpOw0KICAgICAgICAgICAgaWYgKCFmaWxlSWQpIHJldHVybjsNCiAgICAgICAgICAgIGlmcmFtZS5zcmMgPSBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL2ZpbGUvZC8ke2ZpbGVJZH0vcHJldmlld2A7DQogICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3BsYXknKS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3N0b3AnKS5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgc3RhdHVzLmlubmVyVGV4dCA9ICJTdHJlYW1pbmc6ICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fY2hhcHRlcl9kcm9wZG93bicpLnNlbGVjdGVkT3B0aW9uc1swXS50ZXh0Ow0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gc3RvcEF1ZGlvQm9vaygpIHsNCiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19wbGF5ZXJfY29udGFpbmVyJyk7DQogICAgICAgICAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29vZ2xlX2F1ZGlvX2lmcmFtZScpOw0KICAgICAgICAgICAgaWZyYW1lLnNyYyA9ICIiOw0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3N0b3AnKS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fc3RhdHVzJykuaW5uZXJUZXh0ID0gIkFyY2hpdmUgUmVhZHkuIjsNCiAgICAgICAgICAgIHVwZGF0ZUF1ZGlvVUkoKTsNCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPGRpdiBpZD0idmlkZW8tYXJjaGl2ZS1ib3giIGNsYXNzPSJtbXB0LXVuaWZpZWQtYm94IiBzdHlsZT0iZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyB3aWR0aDogMTAwJTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsgcGFkZGluZzogMjVweDsgYm9yZGVyLXJhZGl1czogMTJweDsgYmFja2dyb3VuZDogI2ZmZjsgbWFyZ2luOiAxNXB4IDA7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyI+DQoNCiAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjogIzgwMDAwMDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDI0cHg7IG1hcmdpbi10b3A6IDA7IG1hcmdpbi1ib3R0b206IDE1cHg7Ij4NCiAgICAgICAgICAgIPCfjqwgVmlkZW9zIEZyb20gTU1QVCBBcmNoaXZlcw0KICAgICAgICA8L2gyPg0KDQogICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTVweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOiAxNXB4OyBsaW5lLWhlaWdodDogMS42OyI+DQogICAgICAgICAgICA8c3Ryb25nIHN0eWxlPSJjb2xvcjogIzgwMDAwMDsgZm9udC1zaXplOiAxN3B4OyI+Tm90ZTo8L3N0cm9uZz4NCiAgICAgICAgICAgIDxzdHJvbmcgc3R5bGU9InRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogOTAwOyBmb250LXNpemU6IDE2cHg7Ij5TZWxlY3QgdGhlIHJlcXVpcmVkIGVwaXNvZGUgZnJvbSB0aGUgcGxheWxpc3QgaWNvbiBhdCB0aGUgdG9wLXJpZ2h0IGNvcm5lciBvZiB0aGUgdmlkZW8gd2luZG93Ljwvc3Ryb25nPg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDIwcHg7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDE1cHg7IGZsZXgtd3JhcDogd3JhcDsiPg0KICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGZvbnQtc2l6ZTogMTZweDsiPlRvcGljOjwvbGFiZWw+DQogICAgICAgICAgICA8c2VsZWN0IGlkPSJ0b3BpY19zZWxlY3QiIG9uY2hhbmdlPSJQcmVwYXJlVmlkZW8oKSIgc3R5bGU9IndpZHRoOiAzMjBweDsgaGVpZ2h0OiAzOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOyBib3JkZXItcmFkaXVzOiA1cHg7IHBhZGRpbmc6IDVweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGJhY2tncm91bmQ6ICNmZmY7Ij4NCiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIExvYWRpbmcgQXJjaGl2ZSAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IkxhdW5jaElmcmFtZSgpIiBzdHlsZT0iYmFja2dyb3VuZDogIzI4YTc0NTsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDEwcHggMzBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE1cHg7IGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7Ij7ilrYgUGxheTwvYnV0dG9uPg0KICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuX3N0b3AiIG9uY2xpY2s9IlN0b3BJZnJhbWUoKSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IGJhY2tncm91bmQ6ICNkYzM1NDU7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAxMHB4IDMwcHg7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxNXB4OyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpOyI+4pyWIFN0b3A8L2J1dHRvbj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0iRGl2VmlkVGl0bGUxIiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc2l6ZTogMjBweDsgbWFyZ2luLWJvdHRvbTogNXB4OyBtaW4taGVpZ2h0OiAyNnB4OyI+UmVhZHkuPC9kaXY+DQogICAgICAgIDxkaXYgaWQ9IkRpdlRpbWVyIiBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyBjb2xvcjogYmx1ZTsgdGV4dC1hbGlnbjogY2VudGVyOyBoZWlnaHQ6IDIwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyI+PC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0idmlkX2NvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IG1hcmdpbjogMjBweCBhdXRvIDAgYXV0bzsgd2lkdGg6IDEwMCU7IG1heC13aWR0aDogNTYwcHg7IGFzcGVjdC1yYXRpbzogMTYvOTsgYmFja2dyb3VuZDogIzAwMDsgYm9yZGVyOiA0cHggc29saWQgIzgwMDAwMDsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDZweCAxOHB4IHJnYmEoMCwwLDAsMC4zKTsiPg0KICAgICAgICAgICAgPGlmcmFtZSBpZD0iaWZyX21haW4iIG5hbWU9Imlmcl9tYWluIiBzcmM9ImFib3V0OmJsYW5rIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmcmFtZWJvcmRlcj0iMCINCiAgICAgICAgICAgICAgICAgICAgYWxsb3c9ImFjY2VsZXJvbWV0ZXI7IGF1dG9wbGF5OyBjbGlwYm9hcmQtd3JpdGU7IGVuY3J5cHRlZC1tZWRpYTsgZ3lyb3Njb3BlOyBwaWN0dXJlLWluLXBpY3R1cmU7IHdlYi1zaGFyZSINCiAgICAgICAgICAgICAgICAgICAgcmVmZXJyZXJwb2xpY3k9InN0cmljdC1vcmlnaW4td2hlbi1jcm9zcy1vcmlnaW4iIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICB2YXIgVGFyZ2V0VXJsID0gIiI7DQogICAgICAgIHZhciBhcmNoaXZlRGF0YSA9IFtdOw0KICAgICAgICBjb25zdCBpZnIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWZyX21haW4nKTsNCiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZF9jb250YWluZXInKTsNCiAgICAgICAgY29uc3Qgc3RvcEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fc3RvcCcpOw0KICAgICAgICBjb25zdCBEQVRBX1NPVVJDRSA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2pra2JzYmh6ZGRqd3JqbnpzODBmdS9WaWRlb3MudHh0P3Jsa2V5PXM0dWNoaXA0b3RidG40dzg3dzh4OXpoa2omZGw9MSI7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gTG9hZEFyY2hpdmUoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goREFUQV9TT1VSQ0UpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTE2bGUnKS5kZWNvZGUoYnVmZmVyKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQucmVwbGFjZSgvXlx1RkVGRi8sICcnKS5zcGxpdCgvXHI/XG4vKS5maWx0ZXIobCA9PiBsLmluY2x1ZGVzKCcsJykpOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvcGljX3NlbGVjdCcpOw0KICAgICAgICAgICAgICAgIHNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBDaG9vc2UgYSBUb3BpYyAtLTwvb3B0aW9uPic7DQoNCiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnLCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoIDwgMikgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmdWxsVXJsID0gcGFydHNbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0SWQgPSBmdWxsVXJsLm1hdGNoKC9bPyZdbGlzdD0oW14mXSspLyk/LlsxXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lUb2tlbiA9IGZ1bGxVcmwubWF0Y2goL1s/Jl1zaT0oW14mXSspLyk/LlsxXSB8fCAiVnkzRndVanRTdGZROFg2cCI7DQoNCiAgICAgICAgICAgICAgICAgICAgYXJjaGl2ZURhdGEucHVzaCh7IG5hbWU6IHBhcnRzWzBdLnRyaW0oKSwgaWQ6IGxpc3RJZCwgc2k6IHNpVG9rZW4gfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBpOyBvcHQudGV4dENvbnRlbnQgPSBwYXJ0c1swXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIHNlbC5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZWaWRUaXRsZTEnKS5pbm5lclRleHQgPSAiRGF0YSBMb2FkIEVycm9yIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIFByZXBhcmVWaWRlbygpIHsNCiAgICAgICAgICAgIGNvbnN0IGlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3BpY19zZWxlY3QnKS52YWx1ZTsNCiAgICAgICAgICAgIGlmIChpZHggPT09ICIiKSB7IFRhcmdldFVybCA9ICIiOyByZXR1cm47IH0NCiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBhcmNoaXZlRGF0YVtpZHhdOw0KICAgICAgICAgICAgVGFyZ2V0VXJsID0gImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL3ZpZGVvc2VyaWVzP3NpPSIgKyBpdGVtLnNpICsgIiZsaXN0PSIgKyBpdGVtLmlkICsgIiZhdXRvcGxheT0xIjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZWaWRUaXRsZTEnKS5pbm5lclRleHQgPSBpdGVtLm5hbWU7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBMYXVuY2hJZnJhbWUoKSB7DQogICAgICAgICAgICBpZiAoVGFyZ2V0VXJsID09PSAiIikgeyBhbGVydCgiUGxlYXNlIHNlbGVjdCBhIHRvcGljIik7IHJldHVybjsgfQ0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgICAgc3RvcEJ0bi5zdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7DQogICAgICAgICAgICBpZnIuc3JjID0gImFib3V0OmJsYW5rIjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICJFc3RhYmxpc2hpbmcgQ29ubmVjdGlvbi4uLiI7DQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBpZnIuc3JjID0gVGFyZ2V0VXJsOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICIiOw0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBTdG9wSWZyYW1lKCkgew0KICAgICAgICAgICAgaWZyLnNyYyA9ICJhYm91dDpibGFuayI7DQogICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIHN0b3BCdG4uc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICJQbGF5ZXIgU3RvcHBlZC4iOw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICIiOyB9LCAyMDAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIExvYWRBcmNoaXZlKCk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8ZGl2IGNsYXNzPSJtbXB0LXVuaWZpZWQtYm94IiBpZD0icGFuY2hhbmdfc2VjdGlvbiIgc3R5bGU9ImJvcmRlci1jb2xvcjogI2ZmOTkzMzsiPg0KICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6IDI0cHg7IGNvbG9yOiAjODAwMDAwOyBmb250LWZhbWlseTogJ0dlb3JnaWEnLCBzZXJpZjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDIwcHg7Ij4NCiAgICAgICAgICAgIPCflYnvuI8gVG9kYXkncyBQYW5jaGFuZw0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGlkPSJwYW5jaGFuZ19jb250ZW50Ij4NCiAgICAgICAgICAgIDxkaXYgaWQ9InBhbmNoYW5nX2xvYWRpbmciIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM2NjY7Ij5GZXRjaGluZyBBbG1hbmFjLi4uPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgaWQ9InBhbmNoYW5nX2Rpc3BsYXkiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+DQogICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJkYXRlLXRhYmxlIiBzdHlsZT0ibWFyZ2luOiAwIGF1dG8gMjBweCBhdXRvOyBtYXgtd2lkdGg6IDYwMHB4OyBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOyI+DQogICAgICAgICAgICAgICAgICAgIDx0aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggaWQ9InBhbl9oZWFkZXJfZGF0ZSIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICM4MDAwMDA7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgZm9udC1zaXplOiAxOHB4OyI+PC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+DQogICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjgwcHgsIDFmcikpOyBnYXA6IDE1cHg7IHRleHQtYWxpZ246IGxlZnQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjEuIFRJVEhJPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgaWQ9InRhYmxlX3RpdGhpIiBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOiAxM3B4OyI+PC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjIuIE5BS1NIQVRSQTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJ0YWJsZV9uYWtzaGF0cmEiIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6IDEzcHg7Ij48L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW4tY2FyZCIgc3R5bGU9ImJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogI2ZmZmRlNjsgcGFkZGluZzogMTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmOTkzMzsgbWFyZ2luLWJvdHRvbTogOHB4OyI+My4gWU9HQTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJ0YWJsZV95b2dhIiBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOiAxM3B4OyI+PC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjQuIEtBUkFOQTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJ0YWJsZV9rYXJhbmEiIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6IDEzcHg7Ij48L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW4tY2FyZCIgc3R5bGU9ImJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogI2ZmZmRlNjsgcGFkZGluZzogMTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmOTkzMzsgbWFyZ2luLWJvdHRvbTogOHB4OyI+NS4gVkFSQSAoRGF5KTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZGlzcGxheV92YXJhIiBzdHlsZT0iZm9udC1zaXplOiAxNnB4OyBmb250LXdlaWdodDogYm9sZDsgcGFkZGluZzogNXB4OyI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICAvLyBFbnN1cmUgdGhpcyBpcyBhdCB0aGUgdG9wIG9mIHlvdXIgc2NyaXB0DQogICAgICAgIGNvbnN0IFBBTkNIQU5HX0JBU0UgPSAnL1BhbmNoYW5nJzsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRGFpbHlQYW5jaGFuZygpIHsNCiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCB5eXl5ID0gbm93LmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICBjb25zdCBtbSA9IFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICBjb25zdCBkZCA9IFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgY29uc3QgdG9kYXlJU08gPSBgJHt5eXl5fS0ke21tfS0ke2RkfWA7DQoNCiAgICAgICAgICAgIGNvbnN0IGRhaWx5UGF0aCA9IGAke1BBTkNIQU5HX0JBU0V9LyR7eXl5eX0vJHttbX0vJHt5eXl5fSR7bW19JHtkZH0uaHRtbGA7DQoNCiAgICAgICAgICAgIGNvbnN0IGthYWxhVGltaW5ncyA9IHsNCiAgICAgICAgICAgICAgICAnU3VuZGF5JzogeyByYWh1OiAnNDozMCBwbSB0byA2OjAwIHBtJywgZ3VsaWthOiAnMzowMCBwbSB0byA0OjMwIHBtJywgeWFtOiAnMTI6MDAgcG0gdG8gMTozMCBwbScgfSwNCiAgICAgICAgICAgICAgICAnTW9uZGF5JzogeyByYWh1OiAnNzozMCBhbSB0byA5OjAwIGFtJywgZ3VsaWthOiAnMTozMCBwbSB0byAzOjAwIHBtJywgeWFtOiAnMTA6MzAgYW0gdG8gMTI6MDAgcG0nIH0sDQogICAgICAgICAgICAgICAgJ1R1ZXNkYXknOiB7IHJhaHU6ICczOjAwIHBtIHRvIDQ6MzAgcG0nLCBndWxpa2E6ICcxMjowMCBwbSB0byAxOjMwIHBtJywgeWFtOiAnOTowMCBhbSB0byAxMDozMCBhbScgfSwNCiAgICAgICAgICAgICAgICAnV2VkbmVzZGF5JzogeyByYWh1OiAnMTI6MDAgcG0gdG8gMTozMCBwbScsIGd1bGlrYTogJzEwOjMwIGFtIHRvIDEyOjAwIHBtJywgeWFtOiAnNzozMCBhbSB0byA5OjAwIGFtJyB9LA0KICAgICAgICAgICAgICAgICdUaHVyc2RheSc6IHsgcmFodTogJzE6MzAgcG0gdG8gMzowMCBwbScsIGd1bGlrYTogJzk6MDAgYW0gdG8gMTA6MzAgYW0nLCB5YW06ICc2OjAwIGFtIHRvIDc6MzAgYW0nIH0sDQogICAgICAgICAgICAgICAgJ0ZyaWRheSc6IHsgcmFodTogJzEwOjMwIGFtIHRvIDEyOjAwIHBtJywgZ3VsaWthOiAnNzozMCBhbSB0byA5OjAwIGFtJywgeWFtOiAnMzowMCBwbSB0byA0OjMwIHBtJyB9LA0KICAgICAgICAgICAgICAgICdTYXR1cmRheSc6IHsgcmFodTogJzk6MDAgYW0gdG8gMTA6MzAgYW0nLCBndWxpa2E6ICc2OjAwIGFtIHRvIDc6MzAgYW0nLCB5YW06ICcxOjMwIHBtIHRvIDM6MDAgcG0nIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggU3VucmlzZS9TdW5zZXQgZm9yIENoZW5uYWkgZnJvbSBPcGVuLU1ldGVvIEFQSQ0KICAgICAgICAgICAgICAgIGxldCBzdW5JbmZvID0gIkxvYWRpbmcgdGltZXMuLi4iOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1blJlcyA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5vcGVuLW1ldGVvLmNvbS92MS9mb3JlY2FzdD9sYXRpdHVkZT0xMy4wODI3JmxvbmdpdHVkZT04MC4yNzA3JmRhaWx5PXN1bnJpc2Usc3Vuc2V0JnRpbWV6b25lPWF1dG8mc3RhcnRfZGF0ZT0ke3RvZGF5SVNPfSZlbmRfZGF0ZT0ke3RvZGF5SVNPfWApOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW5EYXRhID0gYXdhaXQgc3VuUmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0VGltZSA9ICh0KSA9PiBuZXcgRGF0ZSh0KS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLUlOJywgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnLCBob3VyMTI6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgICAgIHN1bkluZm8gPSBgU3VucmlzZSBpcyBhdCA8Yj4ke2Zvcm1hdFRpbWUoc3VuRGF0YS5kYWlseS5zdW5yaXNlWzBdKX08L2I+IGFuZCBTdW5zZXQgaXMgYXQgPGI+JHtmb3JtYXRUaW1lKHN1bkRhdGEuZGFpbHkuc3Vuc2V0WzBdKX08L2I+YDsNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgc3VuSW5mbyA9ICJTdW5yaXNlIGFuZCBTdW5zZXQgZGF0YSBjdXJyZW50bHkgdW5hdmFpbGFibGUiOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDIuIERyb3Bib3ggRmV0Y2ggTG9naWMNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5SZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogdG9rZW5QYXJhbXMgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXdhaXQgdG9rZW5SZXMuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gdG9rZW5EYXRhLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBkYWlseVBhdGggfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKCJTeW5jaW5nLi4uIik7DQogICAgICAgICAgICAgICAgY29uc3QgcmF3RGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHJhd0RhdGEuc3BsaXQoJywnKS5tYXAocCA9PiBwLnRyaW0oKSk7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gQ09NUEFDVCBIRUFERVIgKE5PIElDT04pIC0tLQ0KICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5faGVhZGVyX2RhdGUnKTsNCiAgICAgICAgICAgICAgICBjb25zdCB2YXJhTmFtZSA9IHBhcnRzWzFdID8gcGFydHNbMV0uc3BsaXQoJzonKVswXS50cmltKCkgOiAiIjsNCg0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kID0gImxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM4MDAwMDAgMCUsICM0YTAwMDAgMTAwJSkiOw0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gIjE1cHgiOw0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiMTBweCAxMHB4IDAgMCI7DQogICAgICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLnN0eWxlLnRleHRBbGlnbiA9ICJjZW50ZXIiOw0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5ib3JkZXJCb3R0b20gPSAiM3B4IHNvbGlkICNGRkQ3MDAiOw0KDQogICAgICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBiYXNlbGluZTsgZ2FwOiAxNXB4OyBtYXJnaW4tYm90dG9tOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDI2cHg7IGZvbnQtd2VpZ2h0OiA4MDA7IGNvbG9yOiAjRkZENzAwOyB0ZXh0LXNoYWRvdzogMnB4IDJweCA0cHggcmdiYSgwLDAsMCwwLjUpOyI+JHtwYXJ0c1swXX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iZm9udC1zaXplOiAyMHB4OyBmb250LXdlaWdodDogNjAwOyBjb2xvcjogI0ZGRkZGRjsgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjRkZENzAwOyBwYWRkaW5nLWxlZnQ6IDE1cHg7Ij4ke3ZhcmFOYW1lfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZzogMnB4IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNGRkQ3MDA7IGJvcmRlci1yYWRpdXM6IDIwcHg7IGZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjRkZENzAwOyBsZXR0ZXItc3BhY2luZzogMC41cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRJTUUgU1BFQ0lGSUVEIEFSRSBFTkQgVElNRSBJTiBJU1QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYDsNCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBUQUJMRVMgUE9QVUxBVElPTiAtLS0NCiAgICAgICAgICAgICAgICBjb25zdCBmaWxsVGFibGUgPSAoaWQsIHN0YXJ0KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRibCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YmwpIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgdGJsLmlubmVySFRNTCA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjID0gcGFydHNbc3RhcnQgKyBpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWMgJiYgcmVjLmluY2x1ZGVzKCc6JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gcmVjLnN1YnN0cmluZygwLCByZWMuaW5kZXhPZignOicpKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IHJlYy5zdWJzdHJpbmcocmVjLmluZGV4T2YoJzonKSArIDEpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gIiIgJiYgKHRpbWUgPT09ICIiIHx8IHRpbWUgPT09ICItLTotLSIpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcm93ID0gdGJsLmluc2VydFJvdygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5pbm5lckhUTUwgPSBgPHRkIHN0eWxlPSJmb250LXdlaWdodDo3MDA7IHBhZGRpbmc6NnB4IDRweDsgY29sb3I6IzMzMzsgZm9udC1zaXplOjE0cHg7IHdpZHRoOjY1JTsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsiPiR7bmFtZX08L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojZDMyZjJmOyBwYWRkaW5nOjZweCA0cHg7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4ke3RpbWV9PC90ZD5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGZpbGxUYWJsZSgndGFibGVfdGl0aGknLCAzKTsNCiAgICAgICAgICAgICAgICBmaWxsVGFibGUoJ3RhYmxlX25ha3NoYXRyYScsIDcpOw0KICAgICAgICAgICAgICAgIGZpbGxUYWJsZSgndGFibGVfeW9nYScsIDExKTsNCiAgICAgICAgICAgICAgICBmaWxsVGFibGUoJ3RhYmxlX2thcmFuYScsIDE1KTsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5X3ZhcmEnKS5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogI2ZmZjljNDsgYm9yZGVyOiAycHggc29saWQgI0ZGRDcwMDsgcGFkZGluZzogOHB4OyBib3JkZXItcmFkaXVzOiA2cHg7IGNvbG9yOiAjODAwMDAwOyBmb250LXNpemU6IDIycHg7IGZvbnQtd2VpZ2h0OiA5MDA7IHRleHQtYWxpZ246IGNlbnRlcjsiPiR7dmFyYU5hbWV9PC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBISU5EVSBDQUxFTkRBUiAmIEtBQUxBUyAtLS0NCiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFBhcnRzID0gcGFydHMubGVuZ3RoOw0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbEx1bmFyID0gcGFydHNbdG90YWxQYXJ0cyAtIDJdIHx8ICctLSc7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsU29sYXIgPSBwYXJ0c1t0b3RhbFBhcnRzIC0gM10gfHwgJy0tJzsNCiAgICAgICAgICAgICAgICBjb25zdCB2YWxNYWxheWFsYW0gPSBwYXJ0c1t0b3RhbFBhcnRzIC0gNF0gfHwgJy0tJzsNCiAgICAgICAgICAgICAgICBjb25zdCB2YWxUYW1pbCA9IHBhcnRzW3RvdGFsUGFydHMgLSA1XSB8fCAnLS0nOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5S2FhbGEgPSBrYWFsYVRpbWluZ3NbdmFyYU5hbWVdIHx8IHsgcmFodTogJy0tJywgZ3VsaWthOiAnLS0nLCB5YW06ICctLScgfTsNCg0KICAgICAgICAgICAgICAgIGxldCBjYWxlbmRhckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaW5kdV9jYWxlbmRhcl9zZWN0aW9uJyk7DQogICAgICAgICAgICAgICAgaWYgKCFjYWxlbmRhckRpdikgew0KICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckRpdi5pZCA9ICdoaW5kdV9jYWxlbmRhcl9zZWN0aW9uJzsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhbmNoYW5nX2Rpc3BsYXknKS5hcHBlbmRDaGlsZChjYWxlbmRhckRpdik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY2FsZW5kYXJEaXYuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjODAwMDAwOyBjb2xvcjogI0ZGRDcwMDsgcGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE2cHg7IG1hcmdpbi10b3A6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDZweCA2cHggMCAwOyBib3JkZXItYm90dG9tOiAycHggc29saWQgI0ZGRDcwMDsiPkhpbmR1IENhbGVuZGFyIGZvciBUb2RheTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBiYWNrZ3JvdW5kOiAjZmZmZGU3OyBib3JkZXI6IDFweCBzb2xpZCAjRkZENzAwOyBtYXJnaW4tYm90dG9tOiAxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+VGFtaWw8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6IzgwMDAwMDsgZm9udC13ZWlnaHQ6ODAwOyI+JHt2YWxUYW1pbH08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPk1hbGF5YWxhbTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojODAwMDAwOyBmb250LXdlaWdodDo4MDA7Ij4ke3ZhbE1hbGF5YWxhbX08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+U29sYXI8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6IzgwMDAwMDsgZm9udC13ZWlnaHQ6ODAwOyI+JHt2YWxTb2xhcn08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPkx1bmFyPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiM4MDAwMDA7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dmFsTHVuYXJ9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICM4MDAwMDA7IGNvbG9yOiAjRkZENzAwOyBwYWRkaW5nOiA4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTZweDsgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjRkZENzAwOyI+VG9kYXkncyBLYWFsYXM8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgYmFja2dyb3VuZDogI2ZmZmRlNzsgYm9yZGVyOiAxcHggc29saWQgI0ZGRDcwMDsgbWFyZ2luLWJvdHRvbTogMTVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlJhaHUgS2FhbGE8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6I2QzMmYyZjsgZm9udC13ZWlnaHQ6ODAwOyI+JHt0b2RheUthYWxhLnJhaHV9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPkd1bGlrYSBLYWFsYTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojZDMyZjJmOyBmb250LXdlaWdodDo4MDA7Ij4ke3RvZGF5S2FhbGEuZ3VsaWthfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5ZYW1hbmdhZGE8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6I2QzMmYyZjsgZm9udC13ZWlnaHQ6ODAwOyI+JHt0b2RheUthYWxhLnlhbX08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjNGEwMDAwLCAjODAwMDAwLCAjNGEwMDAwKTsgY29sb3I6ICNGRkQ3MDA7IHBhZGRpbmc6IDEwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHg7IGJvcmRlcjogMXB4IHNvbGlkICNGRkQ3MDA7IGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMik7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvZGF5IGluIENoZW5uYWk6ICR7c3VuSW5mb30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYDsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5jaGFuZ19sb2FkaW5nJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuY2hhbmdfZGlzcGxheScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiU3luYyBGYWlsZWQiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gQ2FsbCBpdCBhdCB0aGUgdmVyeSBib3R0b20gb2YgeW91ciBzY3JpcHQgdGFncw0KICAgICAgICBsb2FkRGFpbHlQYW5jaGFuZygpOw0KDQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5sdW5hci1zZWN0aW9uIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBtYXJnaW46IDEwcHggMDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sdW5hci1oZWFkIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAvKiBNYXRjaGVzIHlvdXIgaDMgZm9udC1zaXplIGV4YWN0bHkgKi8NCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOw0KICAgICAgICAgICAgbWFyZ2luOiAwIDAgMTVweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7DQogICAgICAgIH0NCg0KICAgICAgICAubHVuYXItZmxleCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiAxMHB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgICB9DQoNCiAgICAgICAgLmx1bmFyLWl0ZW0gew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIC8qIEJyaWdodCBDb250cmFzdCBUaGVtZTogRGVlcCBOYXZ5IGJhY2tncm91bmQgd2l0aCBHb2xkL1doaXRlIHRleHQgKi8NCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDMzNjY7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgcGFkZGluZzogMTJweCA0cHg7DQogICAgICAgICAgICBtaW4taGVpZ2h0OiA5MHB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAxMHB4IHJnYmEoMCwwLDAsMC41KTsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAubHVuYXItaXRlbSBiIHsNCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICAgICAgY29sb3I6ICNmMGFkNGU7IC8qIEJyaWdodCBHb2xkIGZvciBIZWFkZXIgKi8NCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7DQogICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAubHVuYXItdGV4dCB7DQogICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOyAvKiBIaWdoIENvbnRyYXN0IFdoaXRlICovDQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmx1bmFyLXRpbWUgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4Ow0KICAgICAgICAgICAgY29sb3I6ICMwMGZmZmY7IC8qIEN5YW4gZm9yIFRpbWluZ3MgdG8gc3RhbmQgb3V0ICovDQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDVweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0ibHVuYXItc2VjdGlvbiI+DQogICAgICAgIDxkaXYgY2xhc3M9Imx1bmFyLWhlYWQiPvCfjJkgSGluZHUgTHVuYXIgQ2FsZW5kYXI8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0ibHVuYXItZmxleCI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsdW5hci1pdGVtIj4NCiAgICAgICAgICAgICAgICA8Yj5BbWF2YXN5YTwvYj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJsbi0wMSIgY2xhc3M9Imx1bmFyLXRleHQiPlN5bmNpbmcuLi48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibHVuYXItaXRlbSI+DQogICAgICAgICAgICAgICAgPGI+UGF1cm5pbWE8L2I+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0ibG4tMDIiIGNsYXNzPSJsdW5hci10ZXh0Ij5TeW5jaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imx1bmFyLWl0ZW0iPg0KICAgICAgICAgICAgICAgIDxiPkdyYWhhbmE8L2I+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0ibG4tMDMiIGNsYXNzPSJsdW5hci10ZXh0Ij5TeW5jaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkSGluZHVMdW5hcigpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBkLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgbm93LnNldEhvdXJzKDAsIDAsIDAsIDApOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0cyA9IFsNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2xuLTAxJywgZmlsZTogJy9QYW5jaGFuZy9IaW5kdUx1bmFyQ2FsZW5kYXIvMC4xLmh0bWwnLCB0eXBlOiAnZG91YmxlJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnbG4tMDInLCBmaWxlOiAnL1BhbmNoYW5nL0hpbmR1THVuYXJDYWxlbmRhci8wLjIuaHRtbCcsIHR5cGU6ICdkb3VibGUnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdsbi0wMycsIGZpbGU6ICcvUGFuY2hhbmcvSGluZHVMdW5hckNhbGVuZGFyLzAuMy5odG1sJywgdHlwZTogJ3NpbmdsZScgfQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHggb2YgdGFyZ2V0cykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiB4LmZpbGUgfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaCA9IGF3YWl0IHJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU3RyaXAgdGFncyBidXQga2VlcCBzdHJ1Y3R1cmFsIHNlcGFyYXRpb24NCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYW5UZXh0ID0gaC5yZXBsYWNlKC88W14+XSo+L2csICd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MgPSBjbGVhblRleHQuc3BsaXQoJ3wnKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcyAhPT0gIiIpOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBvdXQgPSAiTm8gVXBjb21pbmciOw0KDQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gcm93c1tpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSByb3cubWF0Y2goLyhcZHsyfSlbLS86XShcZHsyfXxbYS16QS1aXSspWy0vOl0oXGR7NH0pLyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hTihtWzJdKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdCA9IG5ldyBEYXRlKG1bMV0gKyAiICIgKyBtWzJdICsgIiAiICsgbVszXSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHQgPSBuZXcgRGF0ZShgJHttWzNdfS0ke21bMl19LSR7bVsxXX1gKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHQgPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4LnR5cGUgPT09ICdkb3VibGUnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXQgPSBgPHNwYW4+JHtyb3d9PC9zcGFuPjxzcGFuIGNsYXNzPSJsdW5hci10aW1lIj4ke3Jvd3NbaSArIDFdIHx8ICcnfTwvc3Bhbj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0ID0gYDxzcGFuPiR7cm93fTwvc3Bhbj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh4LmlkKS5pbm5lckhUTUwgPSBvdXQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygiTHVuYXIgRXJyb3IiLCBlKTsgfQ0KICAgICAgICB9DQogICAgICAgIGxvYWRIaW5kdUx1bmFyKCk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5uYXYtc2VjdGlvbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LW1haW4taGVhZCB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyMnB4OyAvKiBTbGlnaHRseSBsYXJnZXIgZm9yIHRoZSBpY29uICovDQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAzcHggZG91YmxlICM4MDAwMDA7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtZ3JpZCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiA4cHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LWNvbCB7DQogICAgICAgICAgICBmbGV4OiAxOw0KICAgICAgICAgICAgbWluLXdpZHRoOiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1jb2wtdGl0bGUgew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjI7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7DQogICAgICAgICAgICBoZWlnaHQ6IDQycHg7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7DQogICAgICAgIH0NCg0KICAgICAgICAuYmctc2h5YW1hbGEgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzRiMDA4MjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5iZy1jaGFpdHJhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNiMjIyMjI7DQogICAgICAgIH0NCg0KICAgICAgICAuYmctYXNhZGhhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDY0MDA7DQogICAgICAgIH0NCg0KICAgICAgICAuYmctc2hhcmFkaGEgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmOGMwMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtYm94IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY5ZjA7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogOHB4IDRweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDZweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAubmF2LWJveCAuZC1kYXRlIHsNCiAgICAgICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzcHg7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5uYXYtYm94IC5kLWRheSB7DQogICAgICAgICAgICAgICAgY29sb3I6ICMwMDAwZmY7DQogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1mb290ZXIgew0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTVweDsNCiAgICAgICAgICAgIHBhZGRpbmctdG9wOiAxMnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICAgICAgZ2FwOiAxMnB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAuZXZlbnQtcGlsbCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmNGZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzAwMzM2NjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMThweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwOw0KICAgICAgICB9DQoNCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDgwMHB4KSB7DQogICAgICAgICAgICAubmF2LWdyaWQgew0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOw0KICAgICAgICAgICAgICAgIGdhcDogMTBweDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJuYXYtc2VjdGlvbiI+DQogICAgICAgIDxkaXYgaWQ9Im5hdi15ZWFyLXRpdGxlIiBjbGFzcz0ibmF2LW1haW4taGVhZCI+8J+qtyBOYXZhcmF0aHJpPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWdyaWQiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbC10aXRsZSBiZy1zaHlhbWFsYSI+U2h5YW1hbGE8YnI+TmF2YXJhdGhyaTwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbC1zaHlhbWFsYSI+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wtdGl0bGUgYmctY2hhaXRyYSI+Q2hhaXRyYTxicj5OYXZhcmF0aHJpPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0iY29sLWNoYWl0cmEiPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sLXRpdGxlIGJnLWFzYWRoYSI+QXNhZGhhPGJyPk5hdmFyYXRocmk8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjb2wtYXNhZGhhIj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbC10aXRsZSBiZy1zaGFyYWRoYSI+U2hhcmFkaGE8YnI+TmF2YXJhdGhyaTwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbC1zaGFyYWRoYSI+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWZvb3RlciI+DQogICAgICAgICAgICA8ZGl2IGlkPSJldi12YXNhbnRoYSIgY2xhc3M9ImV2ZW50LXBpbGwiPkxvYWRpbmcuLi48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImV2LWF5dWRoYSIgY2xhc3M9ImV2ZW50LXBpbGwiPkxvYWRpbmcuLi48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImV2LXZpamF5YSIgY2xhc3M9ImV2ZW50LXBpbGwiPkxvYWRpbmcuLi48L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkTmF2YXJhdGhyaSgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZC5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjdXJZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdi15ZWFyLXRpdGxlJykuaW5uZXJIVE1MID0gYPCfqrcgTmF2YXJhdGhyaSAtICR7Y3VyWWVhcn1gOw0KDQogICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0TmF2TGluZXMocGF0aCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBwYXRoIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0eHQucmVwbGFjZSgvPGJyXHMqXC8/Pi9naSwgJ1xuJykucmVwbGFjZSgvPFtePl0qPi9nLCAnJykuc3BsaXQoJ1xuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihzID0+IHMubGVuZ3RoID4gNSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgY29uZmlncyA9IFsNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbC1zaHlhbWFsYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS8wLjIuaHRtbCcgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbC1jaGFpdHJhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpLzAuMy5odG1sJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnY29sLWFzYWRoYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS8wLjQuaHRtbCcgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbC1zaGFyYWRoYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS8wLjEuaHRtbCcgfQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbmYgb2YgY29uZmlncykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGF3YWl0IGdldE5hdkxpbmVzKGNvbmYucGF0aCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBodG1sID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1tpXS5pbmNsdWRlcyhjdXJZZWFyKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9Im5hdi1ib3giPjxzcGFuIGNsYXNzPSJkLWRhdGUiPiR7bGluZXNbaV19PC9zcGFuPjxzcGFuIGNsYXNzPSJkLWRheSI+JHtsaW5lc1tpICsgMV0gfHwgJyd9PC9zcGFuPjwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmYuaWQpLmlubmVySFRNTCA9IGh0bWwgfHwgIjxkaXYgc3R5bGU9J3RleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjEwcHg7IGZvbnQtc2l6ZToxMXB4Oyc+Tm8gRGF0YTwvZGl2PiI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgZXZGaWxlcyA9IFsNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2V2LXZhc2FudGhhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpL0V2ZW50czIuaHRtbCcsIG1hdGNoOiAnVkFTQU5USEEgUEFOQ0hBTUknIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdldi1heXVkaGEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvRXZlbnRzMy5odG1sJywgbWF0Y2g6ICdBWVVESEEgUE9PSkEnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdldi12aWpheWEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvRXZlbnRzNC5odG1sJywgbWF0Y2g6ICdWSUpBWUEgREFTQU1JJyB9DQogICAgICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZXYgb2YgZXZGaWxlcykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBldi5wYXRoIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gdHh0LnJlcGxhY2UoL1xuL2csICcnKS5zcGxpdCgnLCcpLm1hcChzID0+IHMudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kRGF0ZSA9ICJOL0EiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydElkeCA9IHBhcnRzLmZpbmRJbmRleChwID0+IHAuaW5jbHVkZXMoZXYubWF0Y2gpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0SWR4ICE9PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHN0YXJ0SWR4OyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHNbal0uaW5jbHVkZXMoY3VyWWVhcikpIHsgZm91bmREYXRlID0gcGFydHNbal07IGJyZWFrOyB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXYuaWQpLmlubmVySFRNTCA9IGA8Yj4ke2V2Lm1hdGNofTwvYj4gOiAke2ZvdW5kRGF0ZX1gOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfQ0KICAgICAgICB9DQogICAgICAgIGxvYWROYXZhcmF0aHJpKCk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5ndXJ1LXNlY3Rpb24gew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtaGVhZCB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlZWU7DQogICAgICAgICAgICBtYXJnaW46IDAgMCAxNXB4Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ndXJ1LWxpc3Qgew0KICAgICAgICAgICAgbWF4LWhlaWdodDogNDAwcHg7DQogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOw0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtcm93LWl0ZW0gew0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwMzM2NjsNCiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgICAgICAgICAgcGFkZGluZzogMTJweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7DQogICAgICAgICAgICBib3JkZXItbGVmdDogNnB4IHNvbGlkICNmMGFkNGU7DQogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtZGF0ZSB7DQogICAgICAgICAgICBjb2xvcjogI2YwYWQ0ZTsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzQxNWE3NzsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAzcHg7DQogICAgICAgIH0NCg0KICAgICAgICAuZ3VydS1ldmVudC1saW5lIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4Ow0KICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiA1cHg7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0iZ3VydS1zZWN0aW9uIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iZ3VydS1oZWFkIj7wn5WJ77iPIEd1cnUgQXJhZGhhbmFzIGFuZCBKYXlhbnRoaXM8L2Rpdj4NCiAgICAgICAgPGRpdiBpZD0iZ3VydS1ldmVudC1saXN0IiBjbGFzcz0iZ3VydS1saXN0Ij4NCiAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjIwcHg7IGNvbG9yOiM2NjY7Ij5TeW5jaW5nLi4uPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZEd1cnVBcmFkaGFuYXMoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZC5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIG5vdy5zZXRIb3VycygwLCAwLCAwLCAwKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL1BhbmNoYW5nL0d1cnUvRXZlbnRzLmh0bWwnIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCByYXdUZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuVGV4dCA9IHJhd1RleHQucmVwbGFjZSgvPFtePl0qPi9nLCAnXG4nKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGNsZWFuVGV4dC5zcGxpdCgnXG4nKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcy5sZW5ndGggPiAwKTsNCg0KICAgICAgICAgICAgICAgIC8vIFRoaXMgb2JqZWN0IHdpbGwgaG9sZDogeyAiMTktMTItMjAyNSI6IFsiRXZlbnQgMSIsICJFdmVudCAyIl0gfQ0KICAgICAgICAgICAgICAgIGxldCBncm91cGVkRXZlbnRzID0ge307DQoNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gbGluZXNbaV07DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBjdXJyZW50TGluZS5tYXRjaCgvKFxkezJ9KS0oXGR7Mn0pLShcZHs0fSkvKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAobSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnREYXRlT2JqID0gbmV3IERhdGUocGFyc2VJbnQobVszXSksIHBhcnNlSW50KG1bMl0pIC0gMSwgcGFyc2VJbnQobVsxXSkpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnREYXRlT2JqID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBjdXJyZW50TGluZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWwgPSBsaW5lc1tpICsgMV0gfHwgIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBkYXRlIGRvZXNuJ3QgZXhpc3QgaW4gb3VyIGdyb3VwIHlldCwgY3JlYXRlIGl0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFncm91cGVkRXZlbnRzW2RhdGVTdHJdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwZWRFdmVudHNbZGF0ZVN0cl0gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBlZEV2ZW50c1tkYXRlU3RyXS5wdXNoKGRldGFpbCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpKys7IC8vIFNraXAgZGV0YWlsIGxpbmUNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGxldCBsaXN0SHRtbCA9ICIiOw0KICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZ3JvdXBlZCBvYmplY3QgYmFjayB0byBIVE1MDQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIGluIGdyb3VwZWRFdmVudHMpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGV2ZW50c0h0bWwgPSBncm91cGVkRXZlbnRzW2RhdGVdLm1hcChldnQgPT4gYDxzcGFuIGNsYXNzPSJndXJ1LWV2ZW50LWxpbmUiPuKAoiAke2V2dH08L3NwYW4+YCkuam9pbignJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGlzdEh0bWwgKz0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3VydS1yb3ctaXRlbSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imd1cnUtZGF0ZSI+JHtkYXRlfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJndXJ1LWRldGFpbCI+JHtldmVudHNIdG1sfTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3VydS1ldmVudC1saXN0JykuaW5uZXJIVE1MID0gbGlzdEh0bWwgfHwgIjxkaXYgc3R5bGU9J3RleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjIwcHg7Jz5ObyB1cGNvbWluZyBldmVudHMgZm91bmQuPC9kaXY+IjsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndXJ1LWV2ZW50LWxpc3QnKS5pbm5lckhUTUwgPSAiU3luYyBFcnJvci4iOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGxvYWRHdXJ1QXJhZGhhbmFzKCk7DQogICAgPC9zY3JpcHQ+DQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQogICAgDQogICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tdG9wOiAzMHB4OyBtYXJnaW4tYm90dG9tOiA1MHB4OyBmb250LWZhbWlseTogc2Fucy1zZXJpZjsiPg0KICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOiAjNTU1OyBmb250LXNpemU6IDE4cHg7IG1hcmdpbi1ib3R0b206IDE1cHg7Ij5JZiBhbnkgaXNzdWVzIHdpdGggdGhlIGFwcGxpY2F0aW9uIGNvbnRhY3QgQWRtaW48L2gzPg0KDQogICAgICAgIDxidXR0b24gb25jbGljaz0iY29udGFjdEFkbWluV2hhdHNBcHAoKSIgc3R5bGU9Ig0KICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjVEMzY2Ow0KICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgcGFkZGluZzogMTVweCAzMHB4Ow0KICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICBib3JkZXItcmFkaXVzOiA1MHB4Ow0KICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgzNywgMjExLCAxMDIsIDAuMyk7DQogICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4Ow0KICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4yczsNCiAgICAiIG9ubW91c2VvdmVyPSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0nc2NhbGUoMS4wNSknIiBvbm1vdXNlb3V0PSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0nc2NhbGUoMSknIj4NCiAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJtYXJnaW4tcmlnaHQ6IDEwcHg7Ij7wn5KsPC9zcGFuPiBNZXNzYWdlIEFkbWluDQogICAgICAgIDwvYnV0dG9uPg0KICAgIDwvZGl2Pg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGZ1bmN0aW9uIGNvbnRhY3RBZG1pbldoYXRzQXBwKCkgew0KICAgICAgICAgICAgY29uc3QgcGhvbmVOdW1iZXIgPSAiOTE4MDUwNzk0MjUyIjsNCiAgICAgICAgICAgIC8vIE9wdGlvbmFsOiBBZGQgYSBwcmUtZmlsbGVkIG1lc3NhZ2Ugc28geW91IGtub3cgd2hlcmUgdGhleSBhcmUgY29taW5nIGZyb20NCiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlbmNvZGVVUklDb21wb25lbnQoIkhlbGxvIEFkbWluLCBJIGFtIGZhY2luZyBhbiBpc3N1ZSB3aXRoIHRoZSBDRyBSZWNlaXB0IEFwcC4iKTsNCiAgICAgICAgICAgIGNvbnN0IHdoYXRzYXBwVXJsID0gYGh0dHBzOi8vd2EubWUvJHtwaG9uZU51bWJlcn0/dGV4dD0ke21lc3NhZ2V9YDsNCg0KICAgICAgICAgICAgd2luZG93Lm9wZW4od2hhdHNhcHBVcmwsICdfYmxhbmsnKTsNCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KDQoNCg0KICAgIA0KICAgIDxzY3JpcHQ+DQogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkU2V0dGluZ3NGaWxlKCkgew0KICAgICAgICAgICAgbGV0IGZpbGVDb250ZW50ID0gIiI7DQogICAgICAgICAgICBmZWF0dXJlcy5mb3JFYWNoKGZlYXQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwZXJtXyR7ZmVhdH1gKS52YWx1ZTsNCiAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSBgJHtmZWF0fXwke3ZhbH1cbmA7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gRm9yIG5vdywgd2Ugc2hvdyBpdCBpbiBhbiBhbGVydCBvciBsb2cuDQogICAgICAgICAgICAvLyBZb3UgY2FuIGNvcHkgdGhpcyB0ZXh0IGFuZCBzYXZlIGl0IGFzIHVzZXJuYW1lLnR4dA0KICAgICAgICAgICAgY29uc29sZS5sb2coIi0tLSBTRVRUSU5HUyBGSUxFIENPTlRFTlQgLS0tIik7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlQ29udGVudCk7DQoNCiAgICAgICAgICAgIC8vIE9wdGlvbmFsOiBUcmlnZ2VyIGFuIGFjdHVhbCBmaWxlIGRvd25sb2FkIGZvciB0aGUgdXNlcg0KICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtmaWxlQ29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOw0KICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gInVzZXJfc2V0dGluZ3NfdGVtcGxhdGUudHh0IjsNCiAgICAgICAgICAgIGxpbmsuY2xpY2soKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy9mdW5jdGlvbiBjb25zZW50QWN0aW9uKCkgew0KICAgICAgICAvLyAgICBhbGVydCgiQ29uc2VudCBHcmFudGVkIGZvciAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUpOw0KICAgICAgICAvLyAgICAvLyBMb2dpYyBmb3Igc2F2ZVJlY29yZCgpIHVzdWFsbHkgZm9sbG93cyBoZXJlDQogICAgICAgIC8vfQ0KDQogICAgICAgIC8vZnVuY3Rpb24gc2F2ZURhdGEoKSB7DQogICAgICAgIC8vICAgIGFsZXJ0KCJSZWNvcmQgU2F2ZWQgTG9jYWxseSIpOw0KICAgICAgICAvLyAgICAvLyBPcmlnaW5hbCBzYXZlUmVjb3JkKCkgbG9naWMgcmVtYWlucyBoZXJlDQogICAgICAgIC8vfQ0KDQoNCiAgICAgICAgZnVuY3Rpb24gbWF0Y2hSZWNvcmQoaWR4LCBxdWVyeSwgY29sSWR4KSB7DQogICAgICAgICAgICBjb25zdCBsaW5lID0gR0xPQkFMX0RCX0xJTkVTW2lkeF0udG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgIGlmIChjb2xJZHggPT09IC0xKSByZXR1cm4gbGluZS5pbmNsdWRlcyhxdWVyeSk7DQogICAgICAgICAgICBjb25zdCBjb2xzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgcmV0dXJuIChjb2xzW2NvbElkeF0gfHwgIiIpLmluY2x1ZGVzKHF1ZXJ5KTsNCiAgICAgICAgfQ0KDQoNCiAgICA8L3NjcmlwdD4NCg0KDQoNCg0KPC9ib2R5Pg0KPC9odG1sPg0K"))));</script>
